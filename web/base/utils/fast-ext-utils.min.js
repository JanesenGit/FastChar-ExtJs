var __extends=this&&this.__extends||function(){var c=function(u,n){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d])};return c(u,n)};return function(u,n){function b(){this.constructor=u}if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");c(u,n);u.prototype=null===n?Object.create(n):(b.prototype=n.prototype,new b)}}(),
FastExt;
(function(c){var u=function(){function b(){}b.loader=function(a){c.PluginLoader.loadPlugins("Animate",[c.Animate.animateJsPath],a)};b.startValueAnimate=function(a,d){c.Animate.clearAnimate(a);c.Animate.loader(function(){var e=n.newParam(d),f={value:e.from};c.Animate.animateMap[a]=anime({targets:f,value:e.to,easing:e.easing,duration:e.duration,delay:e.delay,update:function(){e.update(f.value)},changeBegin:function(l){e.changeBegin(l)},begin:function(l){e.begin(l)},complete:function(l){e.complete(l);c.Animate.clearAnimate(a)}})})};
b.clearAnimate=function(a){var d=c.Animate.animateMap[a];d&&(d.pause(),delete c.Animate.animateMap[a])};b.startHideAnimateByWidth=function(a){var d=this;if(a&&!a.isHidden()){var e=a.getWidth();c.Animate.startValueAnimate(a.getId(),{from:e,to:0,update:function(f){a.setWidth(f)},complete:function(){d.clearAnimate(a);a.setHidden(!0);a.setWidth(e)}})}};b.startMinButtonAnimateByWidth=function(a,d){var e=this;if(a){var f=a.getWidth(),l=a.getHeight();a.fastAnimateFirstWidth||(a.fastAnimateFirstWidth=f);
c.Animate.startValueAnimate(a.getId(),{delay:d,from:f,to:l,duration:200,update:function(m){a.setWidth(m)},complete:function(){e.clearAnimate(a);var m=Ext.get(a.getId()+"-btnInnerEl");m&&(m.setVisibilityMode(Ext.dom.Element.DISPLAY),m.setVisible(!1));a.setWidth(l)}})}};b.startMaxButtonAnimateByWidth=function(a,d){var e=this;if(a){var f=a.getWidth(),l=a.fastAnimateFirstWidth;c.Animate.startValueAnimate(a.getId(),{from:f,to:l,duration:200,delay:d?d:0,changeBegin:function(){var m=Ext.get(a.getId()+"-btnInnerEl");
m&&(m.setVisibilityMode(Ext.dom.Element.DISPLAY),m.setVisible(!0))},update:function(m){a.setWidth(m)},complete:function(){e.clearAnimate(a);a.setWidth(l)}})}};b.startCloseAnimateByWidth=function(a){var d=this;if(a&&!a.destroyed){var e=a.getWidth();c.Animate.startValueAnimate(a.getId(),{from:e,to:0,update:function(f){a.setWidth(f)},complete:function(){d.clearAnimate(a);a.destroy()}})}};b.startCloseAnimateByHeight=function(a){var d=this;if(a&&!a.destroyed){var e=a.getHeight();c.Animate.startValueAnimate(a.getId(),
{from:e,to:0,duration:200,update:function(f){a.setHeight(f)},complete:function(){d.clearAnimate(a);a.destroy()}})}};b.isAnimating=function(a){return a.fastAnimate};b.animateJsPath="base/animejs/anime.min.js";b.animateMap={};return b}();c.Animate=u;var n=function(){function b(){this.duration=500;this.easing="linear";this.delay=0;this.update=function(a){};this.begin=function(a){};this.complete=function(a){};this.changeBegin=function(a){}}b.newParam=function(a){var d=new b;if(a)for(var e in a)d[e]=a[e];
return d};return b}();c.ValueAnimateConfig=n})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getOS=function(){try{var b=navigator.userAgent,a="Win32"===navigator.platform||"Windows"===navigator.platform,d="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(d)return"Mac";if("X11"===navigator.platform&&!a&&!d)return"Unix";if(-1<String(navigator.platform).indexOf("Linux"))return"Linux";if(a)return-1<b.indexOf("Windows NT 5.0")||-1<b.indexOf("Windows 2000")?"Windows 2000":
-1<b.indexOf("Windows NT 5.1")||-1<b.indexOf("Windows XP")?"Windows XP":-1<b.indexOf("Windows NT 5.2")||-1<b.indexOf("Windows 2003")?"Windows 2003":-1<b.indexOf("Windows NT 6.0")||-1<b.indexOf("Windows Vista")?"Windows Vista":-1<b.indexOf("Windows NT 6.1")||-1<b.indexOf("Windows 7")?"Windows 7":-1<b.indexOf("Windows NT 8.0")||-1<b.indexOf("Windows 8")?"Windows 8":-1<b.indexOf("Windows NT 10.0")||-1<b.indexOf("Windows 10")?"Windows 10":"Windows"}catch(e){}return"Other"};n.deleteObjectAttr=function(b){for(var a=
[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];for(d=0;d<a.length;d++)delete a[d][b]};n.toBool=function(b,a){Ext.isEmpty(a)&&(a=!1);return Ext.isEmpty(b)?a:Ext.isString(b)?"0"===b||"off"===b||"false"===b.toLowerCase()?!1:"1"===b||"on"===b||"true"===b.toLowerCase()?!0:a:Ext.isNumber(b)?0===b?!1:1===b?!0:a:Ext.isBoolean(b)?b:!!b};n.copyToBoard=function(b){var a=document.createElement("input");a.value=b;document.body.appendChild(a);a.select();document.execCommand("Copy");a.style.display="none";$(a).remove()};
n.copy=function(b){var a={};if(b instanceof Array)a=b.concat();else if(b instanceof Function)a=b;else for(var d in b)a[d]=b[d];return a};n.download=function(b,a){var d=b.split("?")[0].substring(b.lastIndexOf("/")),e=document.createElement("a"),f=new MouseEvent("click");Ext.isEmpty(a)&&(a=0===d.length?"file"+d:d);e.download=a;e.href=b;e.dispatchEvent(f)};n.openUrl=function(b,a){c.Windows.openUrl(b,a)};n.runCallBack=function(b,a){if(Ext.isFunction(b)&&!b.callBacked){for(var d=[],e=1;e<arguments.length;e++)d[e-
1]=arguments[e];b.apply(this,d);b.callBacked=!0}};n.buildOnlyCode=function(b){return b+$.md5(this.buildUUID8())};n.buildOnlyNumber=function(b){99<c.Base.onlyIterator&&(c.Base.onlyIterator=1);return b+Ext.now()+c.Base.onlyIterator++};n.getNumberValue=function(b){return parseFloat(b.replace(/[^0-9]/ig,""))};n.prefixInteger=function(b,a){return(Array(a).join("0")+b).slice(-a)};n.getSVGIcon=function(b){return'\x3csvg class\x3d"svgIcon fileIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#'+b+'"\x3e\x3c/use\x3e\x3c/svg\x3e'};
n.getSVGClassName=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++){var d=b[a].toString().toLowerCase(),e=void 0;c.File.isSuffixFile(d,"doc","docx")?e="extFileWord":c.File.isSuffixFile(d,"xls","xlsx")?e="extFileExcel":c.File.isSuffixFile(d,"pdf")?e="extFilePDF":c.File.isSuffixFile(d,"ppt")?e="extFilePPT":c.File.isSuffixFile(d,"zip","rar","gzip")?e="extFileZIP":c.File.isSuffixFile(d,"apk","aar")?e="extFileAPK":c.File.isSuffixFile(d,"jpg","jpeg")?e="extFileJPG":
c.File.isSuffixFile(d,"png")?e="extFilePNG":c.File.isSuffixFile(d,"psd")?e="extFilePSD":c.File.isSuffixFile(d,"html","shtml")?e="extFileHTMl":c.File.isSuffixFile(d,"txt")?e="extFileTXT":c.File.isSuffixFile(d,"ipa")&&(e="extFileIOS");if(!Ext.isEmpty(e))return e}return"extFile"};n.guessDateFormat=function(b){return c.Dates.guessDateFormat(b)};n.parseDate=function(b){return c.Dates.parseDate(b)};n.getUrlContentType=function(b,a){if(b&&a){var d=$.md5(b.toString()),e=c.Cache.getCache(d);e?a(e):$.ajax({type:"HEAD",
url:b,complete:function(f,l){c.Cache.setCache(d,f.getResponseHeader("content-type"));a(f.getResponseHeader("content-type"))},error:function(){c.Cache.setCache(d,"un-know");a("un-know")}})}};n.inputFocusEnd=function(b){try{b.focus();var a=b.value.length;if(document.selection){var d=b.createTextRange();d.moveStart("character",a);d.collapse();d.select()}else"number"==typeof b.selectionStart&&"number"==typeof b.selectionEnd&&(b.selectionStart=b.selectionEnd=a)}catch(e){console.error(e)}};n.randomInt=
function(b,a){return b===a?b:Math.floor(Math.random()*(a-b+1)+b)};n.getTargetElement=function(b){return c.Component.getTargetElement(b)};n.getTargetBodyElement=function(b){return c.Component.getTargetBodyElement(b)};n.isElementInViewport=function(b){try{var a=b.getBoundingClientRect();return 0>=a.width&&0>=a.height?!1:0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(d){}return!1};n.loadCssCode=
function(b,a){var d=document.getElementsByTagName("head").item(0),e=document.createElement("style");e.type="text/css";e.styleSheet?e.styleSheet.cssText=b:e.innerHTML=b;null!=a&&a();d.appendChild(e)};n.dispatchTargetEvent=function(b,a,d){a&&b&&(b.createEvent?(b=b.createEvent("MouseEvents"),b.initEvent(d,!0,!1),a.dispatchEvent(b)):b.createEventObject&&a.fireEvent("on"+d))};n.buildUUID4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};n.buildUUID8=function(){return(4294967296*
(1+Math.random())|0).toString(16).substring(1)};n.buildUUID12=function(){return c.Base.buildUUID4()+c.Base.buildUUID8()};n.buildUUID16=function(){return c.Base.buildUUID8()+c.Base.buildUUID8()};n.getUrlParams=function(b,a){a=new RegExp(a+"\x3d([^\x26]*)(?:\x26)?");return b.match(a)&&b.match(a)[1]};n.toString=function(b,a){if(void 0===a||null===a)a=b;return Ext.isEmpty(b)?a:b.toString()};n.toInt=function(b,a){if(void 0===a||null===a)a=b;return Ext.isEmpty(b)||isNaN(b)?a:parseInt(b)};n.toMaxString=
function(b,a){b=c.Base.toString(b,"");return b.length>a?b.substring(0,a)+"\u2026":b};n.toPlanParams=function(b){for(var a=[],d=0;d<b.length;d++){var e=b[d];Ext.isString(e)?a.push('"'+e+'"'):a.push(e)}return a.join(",")};n.getEmptyPromise=function(){return new Ext.Promise(function(b,a){b()})};n.toByteUnit=function(b,a){Ext.isEmpty(a)&&(a=2);b=parseInt(b);return 0===b?"0":1073741824<b?(b/1073741824).toFixed(a)+"G":1048576<b?(b/1048576).toFixed(a)+"M":1024<b?(b/1024).toFixed(a)+"KB":b+"B"};n.replacePlaceholder=
function(b,a){var d=a.match(/(\$[{\[][^{}\[\]]+[}\]])/g);if(d){for(var e={},f=0;f<d.length;f++){var l=d[f],m=l.replace("[","").replace("]","").replace("{","").replace("}","").replace("$","");e[l]=b[m]}for(var k in e)a=a.replaceAll(k,e[k]);return a}};n.computeMaxDivisor=function(b,a){if(0>b-a){var d=b;b=a;a=d}for(;0!==a;)d=b%a,b=a,a=d;return b};n.formatUrlVersion=function(b,a){if(Ext.isEmpty(b))return b;var d=b.split("@"),e=b=d[0];0>b.indexOf("v\x3d")&&(e=0<b.indexOf("?")?b+"\x26v\x3d"+c.System.ConfigHandler.getSystemVersionInt():
b+"?v\x3d"+c.System.ConfigHandler.getSystemVersionInt());if(a)for(var f in a)a.hasOwnProperty(f)&&(e=e+"\x26"+f+"\x3d"+a[f]);d[0]=e;return d.join("@")};n.formatUrl=function(b,a){return Ext.isEmpty(b)?b:b.startWith("http://")||b.startWith("https://")?this.formatUrlVersion(b,a):c.System.ConfigHandler.getSystemHttp()?this.formatUrlVersion(c.System.ConfigHandler.getSystemHttp()+b,a):this.formatUrlVersion(b,a)};n.guessTextWidth=function(b,a){Ext.isEmpty(a)&&(a=2.5);return(b.length+a)*c.System.ConfigHandler.getFontSizeNumber()};
n.onlyIterator=1;return n}();c.Base=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.buttonToMenuItem=function(b){if(b.hidden||Ext.isEmpty(b.text)||"\x26#160;"===b.text)return null;var a={icon:b.icon,iconCls:b.iconCls,text:b.text,sourceBtn:b,subtext:b.subtext,handler:function(){this.sourceBtn.handler.apply(this.sourceBtn)},disabled:b.disabled};if(null!=b.getMenu()){var d=[];b.getMenu().items.each(function(e,f){(e=c.Button.buttonToMenuItem(e))&&d.push(e)});a.menu=d}return a};n.checkGridToolbarButton=function(b){var a=b.up("grid,treepanel");
a&&c.Button.buttonToBind(a,b)};n.checkButtonBind=function(b,a){if(!b||!a)return!1;for(var d=0;d<b.length;d++)if(b[d].getId()===a.getId())return!0;return!1};n.setDisabled=function(b,a){b&&(b.setDisabled(a),b.overflowClone&&b.overflowClone.setDisabled(a))};n.buttonToBind=function(b,a){b.selectButtons||(b.selectButtons=[]);b.updateButtons||(b.updateButtons=[]);b.addButtons||(b.addButtons=[]);b.deleteButtons||(b.deleteButtons=[]);b.bindDetailButtons||(b.bindDetailButtons=[]);b.entityCodeButtons||(b.entityCodeButtons=
[]);var d=a.isHidden();c.Base.toBool(a.hiddenValid)&&(d=!1);a.checkSelect&&!d&&(c.Button.setDisabled(a,!0),c.Button.checkButtonBind(b.selectButtons,a)||b.selectButtons.push(a));!a.checkUpdate&&!a.entityUpdateButton&&"\u63d0\u4ea4\u4fee\u6539"!==a.text||d||(c.Button.setDisabled(a,!0),c.Button.checkButtonBind(b.updateButtons,a)||b.updateButtons.push(a));a.entityAddButton&&!d&&(c.Button.checkButtonBind(b.addButtons,a)||b.addButtons.push(a));a.entityDeleteButton&&!d&&(c.Button.checkButtonBind(b.deleteButtons,
a)||b.deleteButtons.push(a));a.bindDetail&&Ext.isFunction(a.handler)&&!d&&(c.Button.checkButtonBind(b.bindDetailButtons,a)||b.bindDetailButtons.push(a));a.entityCode&&(c.Button.checkButtonBind(b.entityCodeButtons,a)||b.entityCodeButtons.push(a));Ext.isFunction(a.getMenu)&&null!=a.getMenu()&&a.getMenu().items.each(function(e,f){c.Button.buttonToBind(b,e)});null!=a.items&&a.items.each(function(e,f){c.Button.buttonToBind(b,e)})};return n}();c.Button=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.setCache=function(b,a){try{localStorage.setItem(b,JSON.stringify(a))}catch(d){}};n.getCache=function(b){try{return JSON.parse(localStorage.getItem(b))}catch(a){}return null};n.removeCache=function(b){localStorage.removeItem(b)};n.setEnumCache=function(b,a,d){this.memory.hasOwnProperty(b)||(this.memory[b]={});this.memory[b]||(this.memory[b]={});this.memory[b][a]=d};n.getEnumCache=function(b,a){this.memory.hasOwnProperty(b)||(this.memory[b]={});this.memory[b]||
(this.memory[b]={});return this.memory[b][a]};n.getEnumAllCache=function(b){this.memory.hasOwnProperty(b)||(this.memory[b]={});this.memory[b]||(this.memory[b]={});return this.memory[b]};n.existEnumCache=function(b,a){if(!this.memory.hasOwnProperty(b)||!this.memory[b])return!1;b=this.getEnumCache(b,a);return!Ext.isEmpty(b)};n.clearEnumCache=function(b){delete this.memory[b];this.memory[b]=null};n.clearEnumCacheBySearch=function(b){var a=[];for(d in this.memory)0<=d.indexOf(b)&&a.push(d);for(b=0;b<
a.length;b++){var d=a[b];delete this.memory[d];this.memory[d]=null}};n.memory={};return n}();c.Cache=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getStack=function(){var b=Error.prepareStackTrace;try{var a=[];Error.prepareStackTrace=function(d,e){return a=d=e.slice(1)};Error().stack;return a}finally{Error.prepareStackTrace=b}};n.isFastExtUtilsCall=function(){var b=c.CallSites.getStack();if(3<=b.length){b=b[2].getFileName();if(Ext.isEmpty(b))return!1;b=b.split("?")[0];if(b.endWith("fast-ext-utils.min.js")||b.endWith("fast-ext-utils.js"))return!0}return!1};return n}();c.CallSites=u})(FastExt||(FastExt=
{}));
(function(c){var u=function(){function n(){}n.getLoginCaptchaCmp=function(){return"normal"===c.System.ConfigHandler.getLoginType()?{xtype:"label",hidden:!0}:window.showValidCaptcha&&Ext.isFunction(window.showValidCaptcha)?this.getClickCaptchaCmp():this.getClickVerifyCmp()};n.getNormalCaptchaCmp=function(){return{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",itemId:"captcha",layout:{type:"hbox",align:"stretch"},refreshCode:function(){try{var b=this.query("#imgCode")[0],a=this.query("#validateCode")[0];if(a){a.setValue(null);
var d=new XMLHttpRequest;d.responseType="blob";d.open("get",c.Server.showCaptchaUrl(),!0);var e=c.Server.getSessionId();Ext.isEmpty(e)||d.setRequestHeader("SessionId",e);d.onreadystatechange=function(f){d.readyState==XMLHttpRequest.DONE&&200==d.status&&b.setSrc(URL.createObjectURL(d.response))};d.send(null)}}catch(f){console.error(f)}},items:[{xtype:"textfield",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLoginCode"\x3e\x3c/use\x3e\x3c/svg\x3e',labelAlign:"right",
labelWidth:2*c.System.ConfigHandler.getFontSizeNumber(),labelSeparator:"",labelStyle:"font-size: 22px !important;color: #666666;",margin:"10 10 0 0",allowBlank:!1,flex:1,name:"validateCode",itemId:"validateCode",letterKeyboard:!0,emptyText:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",blankText:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},{xtype:"image",margin:"10 10 0 0",width:74,cls:"fast-system-valid-code-img",itemId:"imgCode",height:34,listeners:{click:{element:"el",fn:function(){this.component.up("#captcha").refreshCode()}}}}]}};
n.getClickCaptchaCmp=function(){var b=2*c.System.ConfigHandler.getFontSizeNumber(),a=c.Base.buildOnlyCode("CK");return{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",itemId:"captcha",layout:{type:"hbox",align:"stretch"},refreshCode:function(){var d=this.down("#validateCodeTip");d&&(d.setValue(null),d.removeCls("validSuccess"),d.setFieldLabel('\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extPower"\x3e\x3c/use\x3e\x3c/svg\x3e'))},showValid:function(){var d=this;window.showValidCaptcha(d,
function(e){var f=d.down("#validateCodeTip");e.success?(f.setValue("\u5b89\u5168\u9a8c\u8bc1\u901a\u8fc7\uff01"),f.setFieldLabel('\x3csvg class\x3d"svgIcon extRole" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLoginCode"\x3e\x3c/use\x3e\x3c/svg\x3e'),f.addCls("validSuccess"),f.clearInvalid()):d.refreshCode()},a)},items:[{xtype:"hiddenfield",name:"captchaKey",value:a},{xtype:"textfield",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extPower"\x3e\x3c/use\x3e\x3c/svg\x3e',
labelAlign:"right",labelWidth:b,labelSeparator:"",labelStyle:"font-size: 22px !important;color: #666666;",margin:"10 10 0 0",allowBlank:!1,flex:1,name:"@",itemId:"validateCodeTip",letterKeyboard:!0,emptyText:"\u8bf7\u60a8\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1",blankText:"\u8bf7\u60a8\u5148\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1",triggers:{openValide:{cls:"extIcon extMouseClick",hideOnReadOnly:!1,handler:function(){Ext.isEmpty(this.getValue())?this.up("#captcha").showValid():c.Dialog.toast("\u60a8\u5df2\u901a\u8fc7\u5b89\u5168\u9a8c\u8bc1\uff0c\u65e0\u9700\u518d\u6b21\u9a8c\u8bc1\uff01")}}},
listeners:{render:function(){Ext.isFunction(this.setReadOnlyAttr)&&this.setReadOnlyAttr(!0)}}}]}};n.getClickVerifyCmp=function(){var b=2*c.System.ConfigHandler.getFontSizeNumber(),a=c.Base.buildOnlyCode("CK");return{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",itemId:"captcha",layout:{type:"hbox",align:"stretch"},refreshCode:function(){if(!this.verifSuccess){var d=this.down("#validateCodeTip");d&&(d.setValue(null),d.removeCls("fast-valid-success"),d.setFieldLabel('\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extPower"\x3e\x3c/use\x3e\x3c/svg\x3e'))}},
showValid:function(){var d=Ext.getCmp("loginName"),e=d.getValue();if(Ext.isEmpty(e))c.Dialog.toast("\u8bf7\u60a8\u5148\u8f93\u5165\u767b\u5f55\u540d\uff01"),d.validate(),c.Component.shakeComment(d);else{var f=this;if(!f.verifing){f.verifing=!0;f.verifSuccess=!1;var l=f.down("#validateCodeTip");l.setEmptyText("\u6b63\u5728\u9a8c\u8bc1\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026");l.verifing=!0;d=c.SystemLayout.getMouseClickXY();c.Server.clickVerify(e,d.x,d.y,a,function(m,k){l.setValue(null);l.verifing=!1;
f.verifing=!1;m?(l.setValue("\u5b89\u5168\u9a8c\u8bc1\u901a\u8fc7\uff01"),l.setFieldLabel('\x3csvg class\x3d"svgIcon extRole" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLoginCode"\x3e\x3c/use\x3e\x3c/svg\x3e'),l.addCls("fast-valid-success"),l.clearInvalid(),f.verifSuccess=!0):c.Dialog.toast(k)})}}},items:[{xtype:"hiddenfield",name:"captchaKey",value:a},{xtype:"textfield",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extPower"\x3e\x3c/use\x3e\x3c/svg\x3e',
labelAlign:"right",labelWidth:b,labelSeparator:"",labelStyle:"font-size: 22px !important;color: #666666;",margin:"10 10 0 0",allowBlank:!1,flex:1,name:"@",itemId:"validateCodeTip",letterKeyboard:!0,emptyText:"\u8bf7\u70b9\u51fb\u53f3\u4fa7\u6309\u94ae\uff0c\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1",blankText:"\u8bf7\u60a8\u5148\u5b8c\u6210\u5b89\u5168\u9a8c\u8bc1\uff01",editable:!1,triggers:{openVerify:{cls:"extIcon extMouseClick",hideOnReadOnly:!1,handler:function(){this.mouseovered?this.verifing||(Ext.isEmpty(this.getValue())?
this.up("#captcha").showValid():c.Dialog.toast("\u60a8\u5df2\u901a\u8fc7\u5b89\u5168\u9a8c\u8bc1\uff0c\u65e0\u9700\u518d\u6b21\u9a8c\u8bc1\uff01")):c.Dialog.toast("\u975e\u4eba\u4e3a\u64cd\u4f5c\uff01")}}},listeners:{render:function(){Ext.isFunction(this.setReadOnlyAttr)&&this.setReadOnlyAttr(!0)},afterrender:function(){var d=this;this.getEl().on("mouseover",function(){d.mouseovered=!0},this);this.getEl().on("touchstart",function(){d.mouseovered=!0},this)}}}]}};n.showGoogleAuthentication=function(b,
a){var d=parseInt((.35*document.body.clientHeight).toFixed(0)),e={xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"label",height:34,html:"\x3cdiv style\x3d'display: flex;align-items: center;justify-content: center;color: black;font-size: 18px;font-weight: bold;'\x3e\u8bf7\u4f7f\u7528\u8c37\u6b4c\u9a8c\u8bc1\u5668\u626b\u7801\u7ed1\u5b9a\x3c/div\x3e"},{xtype:"image",width:d,height:d,src:c.Server.getGoogleBindUrl()}]};d={xtype:"form",itemId:"validForm",layout:{type:"vbox",
align:"stretch"},border:0,items:[{xtype:"lottie",width:d,height:d,jsonPath:"base/lottie/google.json"},{xtype:"textfield",margin:"0",name:"code",itemId:"code",allowBlank:!1,emptyText:"\u8bf7\u8f93\u5165\u8c37\u6b4c\u9a8c\u8bc1\u5668\u7684\u9a8c\u8bc1\u7801"}]};var f=c.System.ConfigHandler.getGoogleAuthenticationAppDownloadUrl(),l=[];2<=b&&l.push(e);l.push(d);Ext.create("Ext.window.Window",{title:"\u8c37\u6b4c\u53cc\u5411\u5b89\u5168\u9a8c\u8bc1",iconCls:"extIcon extLoginCode",itemId:"validWindow",
layout:{type:"vbox",align:"stretch"},cacheUISize:!1,resizable:!1,maximizable:!1,constrain:!0,modal:!0,padding:"10 10 10 10",items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},itemId:"stepContainer",border:0,refreshButton:function(){var m=this.down("#containerPanel");this.down("#btnPrev").setHidden(!m.getLayout().getPrev());this.down("#btnNext").setHidden(!m.getLayout().getNext());this.down("#btnConfirm").setHidden(m.getLayout().getNext())},next:function(){this.down("#containerPanel").getLayout().next();
this.refreshButton()},prev:function(){this.down("#containerPanel").getLayout().prev();this.refreshButton()},items:[{xtype:"panel",layout:"card",border:0,itemId:"containerPanel",padding:"10 10 0 10",style:{background:"#ffffff"},items:l},{xtype:"panel",layout:{type:"hbox",align:"stretch",pack:"center"},border:0,padding:"5 5 5 5",items:[{xtype:"button",flex:1,text:"\u4e0b\u4e00\u6b65",itemId:"btnNext",margin:"5 5 5 5",iconCls:"extIcon extArrowRight3",handler:function(){var m=this.up("#stepContainer");
m&&m.next()}},{xtype:"button",flex:1,text:"\u4e0a\u4e00\u6b65",itemId:"btnPrev",margin:"5 5 5 5",iconCls:"extIcon extArrowLeft3",handler:function(){var m=this.up("#stepContainer");m&&m.prev()}},{xtype:"button",flex:1,text:"\u7acb\u5373\u9a8c\u8bc1",itemId:"btnConfirm",margin:"5 5 5 5",iconCls:"extIcon extManager",handler:function(){var m=this.up("#validWindow");if(m){var k=m.down("#validForm");k.isValid()&&(k=k.getFieldValue("code"),m.setLoading("\u6b63\u5728\u9a8c\u8bc1\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026"),
c.Server.googleVerify(k,function(h,g){m.setLoading(!1);h?(Ext.isFunction(a)&&a(!0),c.Dialog.toast("\u8c37\u6b4c\u8eab\u4efd\u9a8c\u8bc1\u5668\uff0c\u9a8c\u8bc1\u6210\u529f\uff01"),m.close()):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",g)}))}}}]},{xtype:"tipline",height:25,margin:"10 10 10 10",lineText:"\u53cb\u60c5\u652f\u6301",hidden:Ext.isEmpty(f),lineTextColor:"#9d9d9d",lineColor:"#cccccc"},{xtype:"button",flex:1,text:"\u4e0b\u8f7d\u8c37\u6b4c\u8eab\u4efd\u9a8c\u8bc1\u5668APP",itemId:"btnDownload",
margin:"10 10 10 10",iconCls:"extIcon extDownload",hidden:Ext.isEmpty(f),handler:function(){c.Base.openUrl(f,FastEnum.Target._blank)}}]}],listeners:{show:function(){var m=this.down("#stepContainer");m&&m.refreshButton()}}}).show()};return n}();c.Captcha=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.toColor=function(b,a){Ext.isEmpty(a)&&(a="#FFFFFF");if(Ext.isEmpty(b))return a;if(b.toString().startWith("#"))return b.toString();try{b=b.toString().replaceAll(" ","");var d=Ext.ux.colorpick.ColorUtils.parseColor(b);return"#"+Ext.ux.colorpick.ColorUtils.formats.HEX8(d)}catch(e){}return"#"+b};n.showColorPicker=function(b,a,d){Ext.isEmpty(a)&&(a="#42445a");return new Ext.Promise(function(e,f){c.PluginLoader.loadPlugins("ColorPicker",[c.Color.pickrJsPath,
c.Color.pickrStylePath],function(){Ext.create("Ext.menu.Menu",{showSeparator:!1,layout:"border",padding:"0 0 0 0",style:{background:"#ffffff"},alwaysOnTop:!0,width:250,height:320,listeners:{hide:function(l,m){l.close();c.Base.runCallBack(e)}},items:[{xtype:"container",region:"center",margin:"0 0 0 0",border:0,listeners:{afterrender:function(){(new Pickr({el:c.Base.getTargetBodyElement(this),theme:"monolith",inline:!0,default:a,showAlways:!0,useAsButton:!0,swatches:"rgba(244, 67, 54, 1);rgba(233, 30, 99, 0.95);rgba(156, 39, 176, 0.9);rgba(103, 58, 183, 0.85);rgba(63, 81, 181, 0.8);rgba(33, 150, 243, 0.75);rgba(3, 169, 244, 0.7);rgba(0, 188, 212, 0.7);rgba(0, 150, 136, 0.75);rgba(76, 175, 80, 0.8);rgba(139, 195, 74, 0.85);rgba(205, 220, 57, 0.9);rgba(255, 235, 59, 0.95);rgba(255, 193, 7, 1)".split(";"),
components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,input:!0,rgba:!0}}})).on("change",function(l,m,k){Ext.isFunction(d)&&d(l,m,k)})}}}]}).showBy(b)})})};n.colorToLight=function(b,a){var d="#";b=b.replace("#","").toLowerCase();if(b=b.match(/([0-9a-f]{2})/g)){for(var e=0;e<b.length;e++){var f=parseInt(b[e],16);d+=(Math.floor((255-f)*a)+f).toString(16)}return d}};n.colorToDarken=function(b,a){var d=tinycolor(b).toRgb();b=d.r;var e=d.g;d=d.b;var f="red";e>=b&&e>=d?f="green":d>=b&&(f="blue");
switch(f){case "red":b-=a;break;case "green":e-=a;break;case "blue":d-=a}0>b&&(b=0);0>e&&(e=0);0>d&&(d=0);return tinycolor({r:b,g:e,b:d}).toHexString()};n.pickrJsPath="base/colorpicker/pickr.es5.min.js";n.pickrStylePath="base/colorpicker/monolith.min.css";return n}();c.Color=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.shakeComment=function(b,a,d){if(b){b.zIndexManager&&b.toFront(!0);d||(d=1588);try{var e=b.getX(),f=b.getY(),l=0,m=function(){clearInterval(k);b.setX(e);b.setY(f);Ext.isFunction(a)&&a()};var k=setInterval(function(){try{var h=l/180*Math.PI,g=6*Math.cos(h);b.setX(e+6*Math.sin(h));b.setY(f+g);(l+=90)>d&&m()}catch(p){m()}},30)}catch(h){}}};n.isCenterByContainer=function(b){var a=b.ownerCt;Ext.isEmpty(a)&&(a=b.container);b.constrain&&(a=b.constrainTo);if(a){var d=
parseInt(((a.getWidth()-b.getWidth())/2).toFixed(0));a=parseInt(((a.getHeight()-b.getHeight())/2).toFixed(0));console.log("preX",d,"preY",a);console.log("X",b.x,"Y",b.y);if(d==b.x&&a==b.y)return!0}return!1};n.isSameByContainer=function(b,a){var d=b.ownerCt;Ext.isEmpty(d)&&(d=b.container);b.constrain&&(d=b.constrainTo);b=a.ownerCt;Ext.isEmpty(b)&&(b=a.container);a.constrain&&(b=a.constrainTo);return d&&b?d.id==b.id:!1};n.futureQuery=function(b,a,d,e){Ext.isEmpty(d)&&(d=-1);Ext.isEmpty(e)&&(e=Ext.ComponentQuery);
var f="FutureQueryTimeout"+$.md5(b),l=function(m,k){c.Component[f]&&clearTimeout(c.Component[f]);m*k>=d&&0<d?a():c.Component[f]=setTimeout(function(){var h=e.query(b);h&&0<h.length&&a(h)||l(m+1,k+10*m)},k)};l(1,0)};n.countVisible=function(b){for(var a=0,d=0;d<b.length;d++)b[d].isHidden()||a++;return a};n.getMaxZIndex=function(b){for(var a=$("body").children(),d=0;d<a.length;d++)if($(a[d]).is(":visible")){var e=parseInt(a[d].style.zIndex||0);e!==c.Component.maxZIndex&&(b=Math.max(b,e))}return b};n.getTargetElement=
function(b){if(b){if(Ext.isElement(b))return b;if(!Ext.isEmpty(b.xtype)&&b.getEl())return b.getEl().dom}return null};n.getTargetBodyElement=function(b){return b&&!Ext.isEmpty(b.xtype)&&b.body?b.body.dom:this.getTargetElement(b)};n.holdEditorMenu=function(b){b&&b.getEditorMenu&&(b=b.getEditorMenu())&&(b.holdShow=!0)};n.resumeEditorMenu=function(b){b&&b.getEditorMenu&&(b=b.getEditorMenu())&&(b.holdShow=!1)};n.simpleReadOnly=function(b,a){Ext.isFunction(b.setReadOnlyAttr)&&b.setReadOnlyAttr(a)};n.isRealReadOnly=
function(b){return b.readOnly||b.inputEl&&b.inputEl.dom&&b.inputEl.dom.getAttribute("readonly")?!0:!1};n.maxZIndex=2147483647;return n}();c.Component=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.__onLoaded=function(){n.initDateFormatStore()};n.initDateFormatStore=function(){n.dateFormatStore["[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}"]="Y-m-d H:i:s";n.dateFormatStore["[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}"]="Y-m-d H:i";n.dateFormatStore["[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}"]="Y-m-d H";n.dateFormatStore["[0-9]{4}-[0-9]{2}-[0-9]{2}"]="Y-m-d";n.dateFormatStore["[0-9]{4}/[0-9]{2}/[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}"]="Y/m/d H:i:s";
n.dateFormatStore["[0-9]{4}/[0-9]{2}/[0-9]{2} [0-9]{2}:[0-9]{2}"]="Y/m/d H:i";n.dateFormatStore["[0-9]{4}/[0-9]{2}/[0-9]{2} [0-9]{2}"]="Y/m/d H";n.dateFormatStore["[0-9]{4}/[0-9]{2}/[0-9]{2}"]="Y/m/d";n.dateFormatStore["[0-9]{4}\u5e74[0-9]{2}\u6708[0-9]{2}\u65e5 [0-9]{2}:[0-9]{2}:[0-9]{2}"]="Y\u5e74m\u6708d\u65e5 H:i:s";n.dateFormatStore["[0-9]{4}\u5e74[0-9]{2}\u6708[0-9]{2}\u65e5 [0-9]{2}:[0-9]{2}"]="Y\u5e74m\u6708d\u65e5 H:i";n.dateFormatStore["[0-9]{4}\u5e74[0-9]{2}\u6708[0-9]{2}\u65e5 [0-9]{2}"]=
"Y\u5e74m\u6708d\u65e5 H";n.dateFormatStore["[0-9]{4}\u5e74[0-9]{2}\u6708[0-9]{2}\u65e5"]="Y\u5e74m\u6708d\u65e5"};n.formatMillisecond=function(b,a){return Ext.Date.format(new Date(b),a)};n.formatDateStr=function(b,a){return Ext.Date.format(c.Dates.parseDate(b),a)};n.guessDateFormat=function(b){if(!b||Ext.isDate(b))return"";b=b.toString().trim();b=b.trim("/");b=b.trim("-");for(var a in n.dateFormatStore)if((new RegExp("^"+a+"$")).test(b))return n.dateFormatStore[a];return""};n.parseDate=function(b){if(Ext.isEmpty(b))return null;
var a=c.Dates.guessDateFormat(b);return Ext.Date.parse(b,a)};n.showDatePicker=function(b,a,d){return new Ext.Promise(function(e,f){var l=(new Date).getTime();Ext.isEmpty(d)&&(d="Y-m-d H:i:s");f=[];for(var m=0;24>m;m++){var k=c.Base.prefixInteger(m,2);f.push({text:k})}var h=[];for(m=0;60>m;m++)k=c.Base.prefixInteger(m,2),h.push({text:k});var g;Ext.isEmpty(a)||(g=Ext.Date.parse(a,c.Dates.guessDateFormat(a)));g||(g=new Date);m=Ext.Date.format(g,"H");k=Ext.Date.format(g,"i");var p=Ext.Date.format(g,"s"),
q=0,r=-1!==d.indexOf("d"),t=-1!==d.indexOf("H"),v=-1!==d.indexOf("i"),w=-1!==d.indexOf("s");t&&q++;v&&q++;w&&q++;var z={xtype:"datepicker",id:"dateValue"+l,region:"center",showToday:!1,margin:"0 0 0 0",border:0,value:g};r||(z={xtype:"monthpicker",id:"dateValue"+l,region:"center",showButtons:!1,margin:"0 0 0 0",border:0,value:g});var x=Ext.create("Ext.menu.Menu",{showSeparator:!1,layout:"border",padding:"0 0 0 0",style:{background:"#ffffff"},alwaysOnTop:!0,width:330,height:400,listeners:{hide:function(y,
A){c.Base.runCallBack(e);y.close()}},items:[z,{xtype:"container",layout:"column",margin:"0 0 0 0",region:"south",border:0,items:[{xtype:"container",columnWidth:1,layout:"column",border:0,margin:"10 0 0 0",items:[{id:"hourValue"+l,columnWidth:1/q,emptyText:"\u65f6",minValue:0,margin:"0 0 0 5",maxValue:23,displayField:"text",valueField:"text",editable:!0,searchable:!0,hidden:!t,value:m,store:Ext.create("Ext.data.Store",{autoLoad:!0,data:f}),xtype:"combo"},{xtype:"displayfield",width:30,hidden:!t,value:"\x3cdiv align\x3d'center'\x3e\u65f6\x3c/div\x3e"},
{id:"minuteValue"+l,columnWidth:1/q,emptyText:"\u5206",minValue:0,maxValue:59,displayField:"text",valueField:"text",editable:!0,searchable:!0,value:k,hidden:!v,store:Ext.create("Ext.data.Store",{autoLoad:!0,data:h}),xtype:"combo"},{xtype:"displayfield",width:30,hidden:!v,value:"\x3cdiv align\x3d'center'\x3e\u5206\x3c/div\x3e"},{id:"secondsValue"+l,columnWidth:1/q,emptyText:"\u79d2",minValue:0,maxValue:59,displayField:"text",valueField:"text",editable:!0,searchable:!0,value:p,hidden:!w,store:Ext.create("Ext.data.Store",
{autoLoad:!0,data:h}),xtype:"combo"},{xtype:"displayfield",width:30,hidden:!w,value:"\x3cdiv align\x3d'center'\x3e\u79d2\x3c/div\x3e"}]},{xtype:"button",columnWidth:.3,margin:"5 0 5 5",iconCls:"extIcon extClose",text:"\u53d6\u6d88",handler:function(){x.hide()}},{xtype:"button",columnWidth:.7,margin:"5 5 5 5",iconCls:"extIcon extOk",text:"\u786e\u5b9a",handler:function(){var y=Ext.getCmp("dateValue"+l),A=Ext.getCmp("hourValue"+l),B=Ext.getCmp("minuteValue"+l),C=Ext.getCmp("secondsValue"+l);y=y.getValue();
Ext.isDate(y)?(y.setHours(parseInt(A.getValue())),y.setMinutes(parseInt(B.getValue())),y.setSeconds(parseInt(C.getValue())),c.Base.runCallBack(e,Ext.Date.format(y,d))):(A=new Date,A.setMonth(y[0]),A.setFullYear(y[1]),A.setDate(1),c.Base.runCallBack(e,Ext.Date.format(A,d)));x.close()}}]}]});x.showBy(b)})};n.formatDateTip=function(b,a,d){Ext.isEmpty(a)&&(a="Y-m-d H:i:s");var e=864E5,f=7*e,l=30*e,m=(new Date).getTime();if(!b)return null;var k=b.getTime(),h=Math.abs(m-k);m=m<k?"\u540e":"\u524d";k="";
var g=Ext.Date.format(b," H\u65f6i\u5206");d&&(k="\uff08\u5468"+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b.getDay()]+"\uff09");if(6E4>=h)return"\u521a\u521a";if(2<=h/l)return Ext.Date.format(b,a);if(1<=h/l)return parseInt(String(h/l))+"\u4e2a\u6708"+m+k;if(1<=h/f)return b=parseInt(String(h/f)),b+"\u5468"+m+k;if(1<=h/e){b=parseInt(String(h/e));if(1==b){if("\u524d"==m)return"\u6628\u5929"+g+k;if("\u540e"==m)return"\u660e\u5929"+g+k}return b+"\u5929"+m+k}return 1<=h/36E5?parseInt(String(h/
36E5))+"\u5c0f\u65f6"+m+k:1<=h/6E4?parseInt(String(h/6E4))+"\u5206\u949f"+m+k:Ext.Date.format(b,a)};n.getNowDateString=function(b,a){Ext.isEmpty(a)&&(a=0);a=Ext.Date.add(new Date,Ext.Date.DAY,a);return Ext.Date.format(a,b)};n.dateFormatStore={};return n}();c.Dates=u})(FastExt||(FastExt={}));var FastDefine;
(function(c){var u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.EnumComboBox",{alias:["widget.enumcombobox","widget.enumcombo"],extend:"Ext.form.field.ComboBox",enumName:"NONE",enumValue:"id",enumText:"text",exclude:[],include:[],params:{},firstData:null,lastData:null,editable:!1,useCache:!0,searchable:!1,newable:!1,onFastContainerShow:function(){this.reloadEnum(!1)},onFastInputClick:function(){this.readOnly||this.disabled||this.toggle()},onFastEnumFilter:function(b){return this.exclude.exists(b.get(this.enumValue))?
!1:0<this.include.length?!!this.include.exists(b.get(this.enumValue)):!0},reloadEnum:function(b){var a=this;Ext.isEmpty(b)&&(b=!0);if(a.hasListener("beforeloadenum")&&!a.fireEvent("beforeloadenum",a))return!1;if(Ext.isEmpty(a.enumName))return console.warn("enumName\u5c5e\u6027\u4e3a\u7a7a\uff0c\u8df3\u8fc7\u52a0\u8f7d\uff01",this),!1;FastExt.Store.getEnumDataStore(a.enumName,a.firstData,a.lastData,a.params,a.useCache,b).then(function(d){a.setStore(d);d.filterBy(a.onFastEnumFilter,a)})},initComponent:function(){this.displayField=
this.enumText;this.valueField=this.enumValue;this.emptyText="\u8bf7\u9009\u62e9";this.exclude||(this.exclude=[]);this.include||(this.include=[]);this.callParent(arguments)},finishRender:function(){this.callParent(arguments);this.inputEl.on("click",this.onFastInputClick,this);var b=this.up("window");if(b&&!FastExt.Base.toBool(b.shown))b.on("show",this.onFastContainerShow,this,{single:!0});else this.reloadEnum(!1)}})};return n}();c.EnumComboBox=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.TagEnumComboBox",
{alias:["widget.tagenumcombobox","widget.tagenumcombo"],extend:"Ext.form.field.Tag",enumName:"NONE",enumValue:"id",enumText:"text",exclude:[],include:[],params:{},firstData:null,lastData:null,queryMode:"local",reloadEnum:function(b){var a=this;Ext.isEmpty(b)&&(b=!0);FastExt.Store.getEnumDataStore(a.enumName,a.firstData,a.lastData,a.params,a.useCache,b).then(function(d){a.setStore(d);a.getStore().filterBy(function(e){return a.exclude.exists(e.get(a.enumValue))?!1:0<a.include.length?!!a.include.exists(e.get(a.enumValue)):
!0})})},initComponent:function(){this.displayField=this.enumText;this.valueField=this.enumValue;this.emptyText="\u8bf7\u9009\u62e9";this.exclude||(this.exclude=[]);this.include||(this.include=[]);this.callParent(arguments)},onFastContainerShow:function(){this.reloadEnum(!1)},finishRender:function(){this.callParent(arguments);var b=this.up("window");if(b&&!FastExt.Base.toBool(b.shown))b.on("show",this.onFastContainerShow,this,{single:!0});else this.reloadEnum(!1)}})};return n}();c.TagEnumComboBox=
u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.FastFile",{extend:"Ext.form.field.Text",alias:["widget.fastfile","widget.fastfilefield"],fileModules:[],editable:!1,onFileChange:function(b){},onFastInputClick:function(){this.readOnly||this.disabled||this.selectData()},finishRender:function(){this.callParent(arguments);this.inputEl.on("click",this.onFastInputClick,this);this.refreshTrigger()},onChange:function(b,a){this.callParent(arguments);this.refreshTrigger()},refreshTrigger:function(){var b=
this.getValue();Ext.isEmpty(b)?(this.getTrigger("open").hide(),this.getTrigger("close").hide()):(this.getTrigger("open").show(),this.getTrigger("close").show())},initComponent:function(){for(var b="",a=0;a<this.fileModules.length;a++)b=b+"\u6216"+this.fileModules[a].tipMsg;this.emptyText="\u8bf7\u4e0a\u4f20"+b.substring(1);this.editable=!1;this.callParent(arguments)},triggers:{open:{cls:"extIcon extEye",hidden:!0,handler:function(){var b=this;if(1===b.fileModules.length){if("images"===b.fileModules[0].type){FastExt.Component.holdEditorMenu(b);
b.blur();FastExt.Dialog.showImage(b,b.getValue(),function(){FastExt.Component.resumeEditorMenu(b)},!0);return}if("videos"===b.fileModules[0].type){FastExt.Dialog.showVideo(this,b.getValue());return}}if(b.fileObj){var a=b.fileObj.name;if(FastExt.FileModule.image().match(a)){FastExt.Dialog.showImage(b,b.getValue(),null,!0);return}if(FastExt.FileModule.mp4().match(a)){FastExt.Dialog.showVideo(this,b.getValue());return}if(FastExt.FileModule.pdf().match(a)||FastExt.FileModule.word().match(a)||FastExt.FileModule.excel().match(a)||
FastExt.FileModule.ppt().match(a)){FastExt.File.officeViewer(b.getValue());return}}location.href=b.getValue()}},search:{cls:"extIcon extUpload",handler:function(){this.selectData()}},close:{cls:"text-clear",hidden:!0,handler:function(){this.clearData()}}},selectData:function(){var b=this;FastExt.Component.holdEditorMenu(b);FastExt.File.uploadFile(b,b.fileModules).then(function(a){FastExt.Component.resumeEditorMenu(b);a&&(b.fileObj=a,b.setValue(a.url),b.onFileChange(a))})},clearData:function(){this.setValue(null)}})};
return n}();c.FastFileField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.FastFiles",{alias:["widget.fastfiles","widget.fastfilesfield"],extend:"Ext.form.field.Text",editable:!1,fileModules:[],allowBlank:!0,autoUpdate:!1,showFileName:!1,showFileLength:!1,autoFileName:!0,submitArray:!1,triggers:{search:{cls:"text-search",handler:function(){this.showWindow(this)}}},finishRender:function(){this.callParent(arguments);this.inputEl.on("click",this.onFastInputClick,this)},onFastInputClick:function(){this.readOnly||
this.disabled||this.showWindow(this)},initComponent:function(){for(var b="",a=0;a<this.fileModules.length;a++)b=b+"\u6216"+this.fileModules[a].tipMsg;this.emptyText="\u8bf7\u4e0a\u4f20"+b.substring(1);this.editable=!1;this.submitArray&&(b=this.up("form"))&&b.add({xtype:"hiddenfield",name:this.name+"@JsonArray",value:!0});this.callParent(arguments)},showWindow:function(b,a,d){var e=this;FastExt.File.showFiles(this,function(f){e.setValue(f);Ext.isFunction(a)&&a(e)},e.fileModules,e.getValue(),d,e.readOnly)}})};
return n}();c.FastFilesField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.Content",{alias:["widget.content","widget.contentfield"],extend:"Ext.form.field.TextArea",height:220,emptyText:"\u8bf7\u586b\u5199\u2026\u2026",allowBlank:!0,buttons:[],getCode:function(){return $.md5(this.getName()+this.dataIndex+this.getFieldLabel())},showWindow:function(b,a,d){Ext.isEmpty(d)&&(d="\u7f16\u8f91\u5185\u5bb9");var e=this.cloneConfig({});e.setValue(this.getValue());e.oldValue=e.getValue();
e.userCls="fast-radius-null-field";for(var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.7*document.body.clientHeight).toFixed(0)),m=0,k=e.buttons;m<k.length;m++)k[m].field=e;e.editorWin=Ext.create("Ext.window.Window",{title:d,iconCls:"extIcon extEdit",resizable:!0,maximizable:!0,height:l,width:f,minHeight:500,minWidth:600,layout:"fit",animateTarget:b,items:[e],modal:!0,unpin:!0,constrain:!0,listeners:{show:function(h){FastExt.Server.showExtConfig(e.getCode(),"TextEditorCache",
function(g,p){g&&(e.setValue(p),FastExt.Dialog.toast("\u5df2\u6062\u590d\u6682\u5b58\u7684\u6570\u636e\uff01"))})}},buttons:Ext.Array.insert([{text:"\u6e05\u9664\u6682\u5b58",iconCls:"extIcon extDelete whiteColor",handler:function(){FastExt.Dialog.showWait("\u6b63\u5728\u6e05\u9664\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.deleteExtConfig(e.getCode(),"TextEditorCache",function(h){FastExt.Dialog.hideWait();h&&FastExt.Dialog.toast("\u6e05\u9664\u6210\u529f\uff01")})}},"-\x3e",{text:"\u6682\u5b58",
iconCls:"extIcon extSave whiteColor",handler:function(){FastExt.Dialog.showWait("\u6682\u5b58\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.saveExtConfig(e.getCode(),"TextEditorCache",e.getValue(),function(h,g){FastExt.Dialog.hideWait();h?FastExt.Dialog.toast("\u6682\u5b58\u6210\u529f\uff01"):FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",g)})}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){e.setValue(e.oldValue);FastExt.Server.deleteExtConfig(e.getCode(),"TextEditorCache")}},
{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){FastExt.Dialog.showWait("\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.deleteExtConfig(e.getCode(),"TextEditorCache",function(h){FastExt.Dialog.hideWait();Ext.isFunction(a)&&a(e);e.editorWin.close()})}}],2,this.buttons)});e.editorWin.show()}})};return n}();c.ContentField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.HtmlContent",{alias:["widget.htmlcontent","widget.htmlcontentfield"],extend:"Ext.form.field.TextArea",
buttons:[],initEditorConfig:function(b){return b},height:420,getCode:function(){return $.md5(this.getName()+this.dataIndex+this.getFieldLabel())},getValue:function(){this.tinyEditor&&this.tinyEditor.save();return this.callParent(arguments)},getRawValue:function(){return this.tinyEditor?this.tinyEditor.getContent():this.callParent(arguments)},setValue:function(b){this.callParent(arguments);this.tinyEditor&&this.tinyEditor.setContent(b);return this},beforeDestroy:function(){try{this.releaseEditor()}finally{this.callParent(arguments)}},
releaseEditor:function(){this.tinyEditor&&(this.tinyEditor.destroy(),this.tinyEditor=null)},onEditorWindowShow:function(b){$(".tox-tinymce-aux").prependTo(b.getEl().dom)},onEditorWindowClose:function(){$(".tox-tinymce-aux").prependTo($("body")[0])},onEditorFullscreenChange:function(b){var a=this.up("window");a&&(b.state?a.maximize(!1):a.restore(!1))},initEditor:function(){var b=this,a={selector:"#"+b.getInputId(),language:"zh-Hans",menubar:"file edit view insert format tools table tc",toolbar1:"fullscreen searchreplace undo redo  bold italic underline strikethrough  fontfamily fontsize blocks  alignleft aligncenter alignright alignjustify  outdent indent  numlist bullist checklist  forecolor backcolor casechange permanentpen formatpainter removeformat  pagebreak charmap emoticons  preview save print  image media pageembed template link anchor codesample insertdatetime  a11ycheck ltr rtl showcomments addcomment ",
toolbar_sticky:!0,forced_root_block:"div",branding:!1,resize:!1,convert_urls:!1,height:"100%",width:"100%",autosave_ask_before_unload:!1,powerpaste_allow_local_images:!0,spellchecker_dialog:!0,a11y_advanced_options:!0,image_advtab:!0,font_size_formats:"8pt 9pt 10pt 11pt 12pt 13pt 14pt 15pt 16pt 17pt 18pt 19pt 20pt 21pt 22pt 23pt 24pt 36pt",font_family_formats:"\u5fae\u8f6f\u96c5\u9ed1\x3d'\u5fae\u8f6f\u96c5\u9ed1';\u5b8b\u4f53\x3d'\u5b8b\u4f53';\u9ed1\u4f53\x3d'\u9ed1\u4f53';\u4eff\u5b8b\x3d'\u4eff\u5b8b';\u6977\u4f53\x3d'\u6977\u4f53';\u96b6\u4e66\x3d'\u96b6\u4e66';\u5e7c\u5706\x3d'\u5e7c\u5706';\u65b9\u6b63\u5c0f\u6807\u5b8b\u4f53\x3d'\u65b9\u6b63\u5c0f\u6807\u5b8b\u4f53';Andale Mono\x3dandale mono,times;Arial\x3darial,helvetica,sans-serif;Arial Black\x3darial black,avant garde;Book Antiqua\x3dbook antiqua,palatino;Comic Sans MS\x3dcomic sans ms,sans-serif;Courier New\x3dcourier new,courier;Georgia\x3dgeorgia,palatino;Helvetica\x3dhelvetica;Impact\x3dimpact,chicago;Symbol\x3dsymbol;Tahoma\x3dtahoma,arial,helvetica,sans-serif;Terminal\x3dterminal,monaco;Times New Roman\x3dtimes new roman,times;Trebuchet MS\x3dtrebuchet ms,geneva;Verdana\x3dverdana,geneva;Webdings\x3dwebdings;Wingdings\x3dwingdings",
pagebreak_separator:'\x3cdiv style\x3d"page-break-before: always;"\x3e\x3c/div\x3e',pagebreak_split_block:!0,file_picker_types:"file image media",automatic_uploads:!1,content_style:"tr {  page-break-inside: avoid; }",file_picker_callback:function(d,e,f){"file"===f.filetype?FastExt.File.uploadFile(null,[FastExt.FileModule.file()],!1,!1).then(function(l){l&&d(l.url,{text:l.name})}):"image"===f.filetype?FastExt.File.uploadFile(null,[FastExt.FileModule.image()],!1,!1).then(function(l){l&&d(l.url,{alt:l.name})}):
"media"===f.filetype&&FastExt.File.uploadFile(null,[FastExt.FileModule.mp4()],!1,!1).then(function(l){l&&d(l.url,{text:l.name})})},plugins:"advlist anchor autolink charmap emoticons importcss nonbreaking pagebreak visualchars codesample fullscreen image lists link media preview searchreplace table visualblocks wordcount insertdatetime directionality code".split(" ")};a=b.initEditorConfig(a);FastExt.Tinymce.initTinymce(a,function(d){b.tinyEditor=d[0];b.tinyEditor.on("FullscreenStateChanged",function(e){b.onEditorFullscreenChange(e)});
if(d=b.up("window"))b.onEditorWindowShow(d),d.on("beforeactivate",b.onEditorWindowShow),d.on("close",b.onEditorWindowClose);b.ownerCt&&b.ownerCt.updateLayout();b.needFocus&&(b.tinyEditor.focus(!1),b.needFocus=!1);b.fireEvent("editorrender",b,b.tinyEditor)})},finishRender:function(){this.callParent(arguments);var b=this.up("window");if(b&&!FastExt.Base.toBool(b.shown))b.on("show",this.onFastContainerShow,this,{single:!0});else this.initEditor()},onFastContainerShow:function(){this.initEditor()},initComponent:function(){this.callParent(arguments)},
showWindow:function(b,a,d){Ext.isEmpty(d)&&(d="\u7f16\u8f91\u5185\u5bb9");var e=this.cloneConfig({});e.setValue(this.getValue());e.oldValue=e.value;e.userCls="fast-radius-null-field";for(var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.8*document.body.clientHeight).toFixed(0)),m=0,k=e.buttons;m<k.length;m++)k[m].field=e;e.editorWin=Ext.create("Ext.window.Window",{title:d,iconCls:"extIcon extEdit",resizable:!0,maximizable:!0,height:l,width:f,minHeight:500,minWidth:600,layout:"fit",
animateTarget:b,items:[e],modal:!0,constrain:!0,unpin:!0,listeners:{show:function(){FastExt.Server.showExtConfig(e.getCode(),"HtmlEditorCache",function(h,g){h&&(e.setValue(g),FastExt.Dialog.toast("\u5df2\u6062\u590d\u6682\u5b58\u7684\u6570\u636e\uff01"))})}},buttons:Ext.Array.insert([{text:"\u6e05\u9664\u6682\u5b58",iconCls:"extIcon extDelete whiteColor",handler:function(){FastExt.Dialog.showWait("\u6b63\u5728\u6e05\u9664\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.deleteExtConfig(e.getCode(),
"HtmlEditorCache",function(h){FastExt.Dialog.hideWait();h&&FastExt.Dialog.toast("\u6e05\u9664\u6210\u529f\uff01")})}},"-\x3e",{text:"\u6682\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){FastExt.Dialog.showWait("\u6682\u5b58\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.saveExtConfig(e.getCode(),"HtmlEditorCache",e.getValue(),function(h,g){FastExt.Dialog.hideWait();h?FastExt.Dialog.toast("\u6682\u5b58\u6210\u529f\uff01"):FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",
g)})}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){e.setValue(e.oldValue);FastExt.Server.deleteExtConfig(e.getCode(),"HtmlEditorCache")}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){FastExt.Dialog.showWait("\u8bf7\u7a0d\u540e\u2026\u2026");FastExt.Server.deleteExtConfig(e.getCode(),"HtmlEditorCache",function(h){FastExt.Dialog.hideWait();Ext.isFunction(a)&&a(e);e.editorWin.close()})}}],2,e.buttons)});e.editorWin.show()},focus:function(){this.needFocus=!0;
return this.callParent(arguments)}})};return n}();c.HtmlContentField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.Link",{alias:["widget.link","widget.linkfield"],extend:"Ext.form.FieldContainer",entityId:null,entityIdDefaultValue:-1,entityText:null,entityCode:null,linkValue:null,editable:!1,allowBlank:!0,layout:"fit",multiSelect:!1,autoDisabled:!0,submitValue:!0,onBeforeSelect:null,onAfterSelect:null,onClearSelect:null,nullEntityCodeError:"\u8bf7\u914d\u7f6e\u7ec4\u4ef6\u7684entityCode\u5c5e\u6027\u503c\uff01",
nullEntityIdError:"\u8bf7\u914d\u7f6e\u7ec4\u4ef6\u7684entityId\u5c5e\u6027\u503c\uff01",nullEntityTextError:"\u8bf7\u914d\u7f6e\u7ec4\u4ef6\u7684entityText\u5c5e\u6027\u503c\uff01",binds:[],isValid:function(){var b=this.down("[name\x3d"+this.name+"Display]");return b?(b.allowBlank=this.allowBlank,b.isValid()):!0},validate:function(){var b=this.down("[name\x3d"+this.name+"Display]");return b?(b.allowBlank=this.allowBlank,b.validate()):!0},getName:function(){return this.name},getValue:function(){return this.submitValue?
this.down("[name\x3d"+this.name+"]").getValue():this.getText()},getText:function(){var b=this.down("[name\x3d"+this.name+"Display]");return b?b.getValue():null},setRecordValue:function(b){if(b&&(!Ext.isEmpty(this.getText())||!Ext.isEmpty(b.get(this.dataIndex)))){b.store&&(b.store.holdUpdate=!0);b.set(this.name,this.getValue());b.set(this.dataIndex,this.getText());if(this.record)for(var a=0;a<this.binds.length;a++){var d=this.binds[a].toString().split("@");if(1<d.length)for(var e=this.record.get(d[0]),
f=1;f<d.length;f++)b.set(d[f],e)}b.store&&(b.store.holdUpdate=!1,b.store.fireEvent("endupdate"))}},setValue:function(b,a){var d=this.down("[name\x3d"+this.name+"Display]");d&&d.setValue(b);a&&this.setRawValue(a.get(this.name));b||(this.setRawValue(-1),(b=this.down("[name\x3d"+this.name+"MoreFields]"))&&b.removeAll(!0));return this},setHtml:function(b){this.setValue(b)},setMultiValue:function(b,a){this.setRawValue(b[0],b.slice(1));this.setValue(a.join("#"));this.autoDisabled&&(b=this.down("[name\x3d"+
this.name+"Display]"))&&b.setDisabled(!0)},getMultiValue:function(){var b=[],a=this.down("[name\x3d"+this.name+"]");a&&b.push(a.getValue());(a=this.down("[name\x3d"+this.name+"MoreFields]"))&&a.items.each(function(d){b.push(d.getValue())});return b},setRawValue:function(b,a){var d=this.down("[name\x3d"+this.name+"]");d&&d.setValue(b);(b=this.down("[name\x3d"+this.name+"MoreFields]"))&&b.removeAll(!0);if(a)for(d=0;d<a.length;d++){var e=Ext.create({xtype:"hiddenfield",name:this.name});e.setValue(a[d]);
b&&b.add(e)}if(this.record)for(d=0;d<this.binds.length;d++)if(a=this.binds[d].toString().split("@"),1<a.length)for(var f=this.record.get(a[0]),l=1;l<a.length;l++)e=Ext.create({xtype:"hiddenfield",name:a[l]}),e.setValue(f),b.add(e)},getRawValue:function(){var b=this.down("[name\x3d"+this.name+"]");return b?b.getValue():null},getTriggers:function(){var b=this.down("[name\x3d"+this.name+"Display]");return b?b.getTriggers():{}},selectData:function(b){var a=this;if(!Ext.isFunction(a.onBeforeSelect)||a.onBeforeSelect(a))if(FastExt.Component.holdEditorMenu(a),
a.entityCode)if(a.entityId)if(a.entityText){var d=FastExt.System.EntitiesHandler.getEntity(a.entityCode);if(d)if(d.js){var e=eval("new "+a.entityCode+"()");if(Ext.isFunction(e.showSelect)){var f=a.down("[name\x3d"+a.name+"Display]");f&&f.blur();d=d.shortName;a.fieldLabel&&(d=a.fieldLabel);a.config&&a.config.fieldLabel&&(d=a.config.fieldLabel);a.labelTitle&&(d=a.labelTitle);Ext.isEmpty(a.selectGridTitle)&&(a.selectGridTitle="\u9009\u62e9"+d);d=a.multiSelect;FastExt.Base.toBool(a.fromColumn)&&(d=!1);
FastExt.Cache.memory["GridSelectHistory"+$.md5(a.selectGridTitle)]=a.records;e.showSelect(this,a.selectGridTitle,a.linkValue.where,d).then(function(l){try{if(l)if(Ext.isFunction(b))b(l);else{a.records=l;if(1===l.length){var m=l[0];a.record=m;var k=m.get(a.entityText),h=m.get(a.entityId);Ext.isEmpty(k)&&(k=h);a.setValue(k);a.setRawValue(h)}else if(1<l.length){a.record=l[0];m="";for(var g=[],p=0;p<l.length;p++)k=l[p].get(a.entityText),h=l[p].get(a.entityId),Ext.isEmpty(k)&&(k=h),m+="#"+k,g.push(h);
a.setRawValue(g[0],g.slice(1));a.setValue(m.substring(1))}if(Ext.isFunction(a.onAfterSelect))a.onAfterSelect(a)}}finally{FastExt.Component.resumeEditorMenu(a)}})}else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","'"+a.entityCode+"' JS\u5bf9\u8c61\u4e0d\u5b58\u5728\u51fd\u6570showSelect(obj,callBack)\uff01",function(){FastExt.Component.resumeEditorMenu(a)})}else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u672a\u83b7\u53d6\u5230 '"+a.entityCode+"' JS\u5bf9\u8c61\uff01",function(){FastExt.Component.resumeEditorMenu(a)});
else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u672a\u83b7\u53d6\u5230 '"+a.entityCode+"' \u5b9e\u4f53\u7c7b\uff01",function(){FastExt.Component.resumeEditorMenu(a)})}else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",a.nullEntityTextError,function(){FastExt.Component.resumeEditorMenu(a)});else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",a.nullEntityIdError,function(){FastExt.Component.resumeEditorMenu(a)});else FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",a.nullEntityCodeError,
function(){FastExt.Component.resumeEditorMenu(a)})},clearData:function(){this.setValue(null);this.setRawValue(-1);var b=this.down("[name\x3d"+this.name+"MoreFields]");b&&b.removeAll(!0);this.record=this.records=null;if(Ext.isFunction(this.onClearSelect))this.onClearSelect(this)},onFastInputClick:function(){this.readOnly||this.disabled||this.editable||this.selectData()},initComponent:function(){var b=this,a=FastExt.Listeners.getFire().onInitLinkFieldDefaultValue(b);a&&(b.linkValue=b.linkValue?FastExt.Json.mergeJson(b.linkValue,
a):a);b.linkValue||(b.linkValue={},b.linkValue[b.entityId]=b.entityIdDefaultValue,b.linkValue[b.entityText]=null);b.linkValue.hasOwnProperty(b.entityId)||(b.linkValue[b.entityId]=b.entityIdDefaultValue);Ext.isEmpty(b.linkValue[b.entityId])&&(b.linkValue[b.entityId]=b.entityIdDefaultValue);Ext.isEmpty(b.name)&&(b.name="LinkField"+Ext.now());a=b.linkValue[b.entityText];a===this.entityIdDefaultValue&&(a="");Ext.isEmpty(a)&&(a=b.value);for(var d=[],e=0;e<b.binds.length;e++){var f=b.binds[e].toString().split("@");
if(1<f.length)for(var l=b.linkValue[f[0]],m=1;m<f.length;m++)d.push({xtype:"hiddenfield",name:f[m],value:l})}b.items=[{xtype:"hiddenfield",name:b.name,value:b.linkValue[b.entityId]},{xtype:"fieldcontainer",name:b.name+"MoreFields",hidden:!0,items:d},{xtype:"textfield",code:b.code,name:b.name+"Display",editable:b.editable,parentXtype:b.xtype,value:a,useHistory:b.useHistory,letterKeyboard:b.letterKeyboard,disabled:!Ext.isEmpty(a)&&b.autoDisabled&&!FastExt.Base.toBool(b.fromHeadSearch,!1),hideLabel:!0,
fieldLabel:b.fieldLabel,allowBlank:b.allowBlank,emptyText:b.selectGridTitle?b.selectGridTitle:"\u8bf7\u9009\u62e9"+FastExt.Base.toString(b.config.fieldLabel,""),listeners:{afterrender:function(k){k.inputEl.on("click",b.onFastInputClick,b)}},triggers:{close:{cls:"text-clear",weight:FastExt.Base.toBool(b.fromHeadSearch,!1)?99:0,handler:function(){b.clearData();if(Ext.isFunction(b.onClearValue))b.onClearValue()}},search:{cls:"text-search",handler:function(){b.selectData();this.inputEl.blur()}}}}];b.callParent(arguments)}})};
return n}();c.LinkField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.Target",{alias:["widget.target","widget.targetfield"],extend:"Ext.form.FieldContainer",layout:"column",labelWidth:null,targetType:null,targetTypeReadOnly:!1,targetTypeEnum:null,targetId:null,targetValue:{},targetFunction:"getTargetEntity",targetEnumValue:"id",targetEnumText:"text",include:[],exclude:[],onChangeTypeSelect:null,linkfieldConfig:{},enumcomboConfig:{},defaults:{labelWidth:84,margin:"5 5 5 5",
labelAlign:"right",allowBlankTip:!0,allowBlank:!1,emptyText:"default"},hideLabel:!0,getValue:function(){return this.down("[name\x3d"+this.targetId+"]").getText()},setValue:function(b,a){var d=this.down("[name\x3d"+this.targetId+"]");d&&d.setValue(b);a&&(this.targetValue={},this.targetValue[this.targetType]=a.get(this.targetType),this.targetValue[this.targetId]=a.get(this.targetId),this.holdIdValue=this.getTargetTypeValue()!=a.get(this.targetType),this.setTargetIdValue(a.get(this.targetId)),this.setTargetTypeValue(a.get(this.targetType)))},
setHtml:function(b){this.setValue(b)},getSearchField:function(){},setRecordValue:function(b){b&&(b.store&&(b.store.holdUpdate=!0),this.targetId&&b.set(this.targetId,this.getTargetIdValue()),this.targetType&&b.set(this.targetType,this.getTargetTypeValue()),this.targetText&&this.targetText!=this.dataIndex&&b.set(this.targetText,this.getValue()),b.set(this.dataIndex,this.getValue()),b.store&&(b.store.holdUpdate=!1,b.store.fireEvent("endupdate")))},setTargetTypeValue:function(b){var a=this.down("[name\x3d"+
this.targetType+"]");a&&a.setValue(b)},getTargetTypeValue:function(){var b=this.down("[name\x3d"+this.targetType+"]");return b?b.getValue():0},setTargetIdValue:function(b){var a=this.down("[name\x3d"+this.targetId+"]");a&&a.setRawValue(b)},getTargetIdValue:function(){var b=this.down("[name\x3d"+this.targetId+"]");return b?b.getRawValue():-1},getTargetEntity:function(b){if(0>b)return null;Ext.isEmpty(b)&&(b=0);var a=window[this.targetFunction](b,this.targetType);return a?a:(console.error("\u672a\u83b7\u53d6\u5230TargetType\u4e3a\uff1a"+
b+"\u7684\u5b9e\u4f53\u914d\u7f6e\uff01"),null)},showWindow:function(b,a,d){Ext.isEmpty(d)&&(d="\u7f16\u8f91\u76ee\u6807\u6570\u636e");var e=this.cloneConfig({});e.setValue(this.getValue());e.editorWin=Ext.create("Ext.window.Window",{title:d,height:200,width:400,layout:"fit",resizable:!1,modal:!0,constrain:!0,iconCls:"extIcon extLink",items:[e],animateTarget:b,buttons:[{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){e.editorWin.close()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",
handler:function(){e.editorWin.close();Ext.isFunction(a)&&a(e)}}]});e.editorWin.show()},initComponent:function(){var b=this,a=b.fieldLabel;Ext.isEmpty(a)&&(a="\u76ee\u6807\u7c7b\u578b");b.fieldLabel="";b.margin="0 0 0 0";var d={};if(Ext.isFunction(window[b.targetFunction])){b.targetValue||(b.targetValue={},b.targetValue[b.targetType]=-1);b.targetValue[b.targetType]||(b.targetValue[b.targetType]=-1);b.targetEnum&&(b.targetTypeEnum=b.targetEnum);b.targetTypeEnum||(b.targetTypeEnum=b.targetType.replace(b.targetType[0],
b.targetType[0].toUpperCase())+"Enum");var e=b.targetValue[b.targetType],f=b.getTargetEntity(e),l="";f&&(l=f.entityComment,d[f.entityId]=b.targetValue[b.targetId],d[f.entityText]=b.targetValue.targetText);Ext.isEmpty(l)&&(l="");e={name:b.targetType,xtype:"enumcombo",fieldLabel:a,columnWidth:1,value:0<=e?e:null,emptyText:"\u8bf7\u9009\u62e9"+a,enumValue:b.targetEnumValue,enumText:b.targetEnumText,readOnly:b.targetTypeReadOnly,enumName:b.targetTypeEnum,exclude:b.exclude,include:b.include,parentXtype:b.xtype,
listeners:{change:function(k,h,g){if(g=b.getTargetEntity(h)){h=b.down("[name\x3d"+b.targetId+"]");h.entityCode=g.entityCode;h.entityId=g.entityId;h.entityText=g.entityText;if(b.holdIdValue){b.holdIdValue=!1;return}(g=b.down("[name\x3d"+b.targetId+"Display]"))&&g.setEmptyText("\u8bf7\u9009\u62e9"+k.getDisplayValue());h.selectGridTitle="\u8bf7\u9009\u62e9"+k.getDisplayValue();h.clearData()}if(Ext.isFunction(b.onChangeTypeSelect))b.onChangeTypeSelect(b);b.hasListener("change")&&b.fireEvent("change")}}};
var m=b.fieldLabel2;Ext.isEmpty(m)&&(m="\u76ee\u6807\u6570\u636e");a={name:b.targetId,xtype:"linkfield",fieldLabel:m,columnWidth:1,nullEntityCodeError:"\u8bf7\u5148\u9009\u62e9"+a,entityCode:f?f.entityCode:null,entityId:f?f.entityId:null,entityText:f?f.entityText:null,linkValue:d,selectGridTitle:"\u8bf7\u9009\u62e9"+l,multiSelect:b.multiSelect};b.items=[FastExt.Json.mergeJson(e,b.enumcomboConfig),FastExt.Json.mergeJson(a,b.linkfieldConfig)]}else FastExt.Dialog.showAlert("\u76ee\u6807\u7ec4\u4ef6\u9519\u8bef",
"\u672a\u68c0\u6d4b\u5230\u65b9\u6cd5"+b.targetFunction+"!");b.callParent(arguments)}})};return n}();c.TargetField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.Map",{alias:["widget.map","widget.mapfield"],extend:"Ext.form.FieldContainer",lngName:"lnt",latName:"lat",proName:null,cityName:null,areaName:null,editable:!1,allowBlank:!0,layout:"fit",submitValue:!0,isValid:function(){return this.down("[name\x3d"+this.name+"]").isValid()},getName:function(){return this.name},
getValue:function(){return this.down("[name\x3d"+this.name+"]").getValue()},setValue:function(b,a){var d=this.down("[name\x3d"+this.name+"]");d&&d.setValue(b);a&&(this.latName&&this.setLatValue(a.get(this.latName)),this.lngName&&this.setLngValue(a.get(this.lngName)),this.proName&&this.setProValue(a.get(this.proName)),this.cityName&&this.setCityValue(a.get(this.cityName)),this.areaName&&this.setAreaValue(a.get(this.areaName)))},setRecordValue:function(b){b&&(b.store&&(b.store.holdUpdate=!0),this.latName&&
b.set(this.latName,this.getLatValue()),this.lngName&&b.set(this.lngName,this.getLngValue()),this.proName&&b.set(this.proName,this.getProValue()),this.cityName&&b.set(this.cityName,this.getCityValue()),this.areaName&&b.set(this.areaName,this.getAreaValue()),b.set(this.name,this.getValue()),b.store&&(b.store.holdUpdate=!1,b.store.fireEvent("endupdate")))},setLatValue:function(b){var a=this.down("[name\x3d"+this.latName+"]");a&&a.setValue(b)},setLngValue:function(b){var a=this.down("[name\x3d"+this.lngName+
"]");a&&a.setValue(b)},setProValue:function(b){var a=this.down("[name\x3d"+this.proName+"]");a&&a.setValue(b)},setCityValue:function(b){var a=this.down("[name\x3d"+this.cityName+"]");a&&a.setValue(b)},setAreaValue:function(b){var a=this.down("[name\x3d"+this.areaName+"]");a&&a.setValue(b)},getLatValue:function(){var b=this.down("[name\x3d"+this.latName+"]");return b?b.getValue():0},getLngValue:function(){var b=this.down("[name\x3d"+this.lngName+"]");return b?b.getValue():0},getProValue:function(){var b=
this.down("[name\x3d"+this.proName+"]");return b?b.getValue():null},getCityValue:function(){var b=this.down("[name\x3d"+this.cityName+"]");return b?b.getValue():null},getAreaValue:function(){var b=this.down("[name\x3d"+this.areaName+"]");return b?b.getValue():null},selectData:function(){var b=this;FastExt.Component.holdEditorMenu(b);b.down("[name\x3d"+b.name+"]").blur();FastExt.AMapDialog.select(b,FastExt.AMapMapParams.newParam({title:"\u8bf7\u9009\u62e9\u5728\u5730\u56fe\u4e0a\u9009\u62e9\u5750\u6807\u4f4d\u7f6e",
items:[{type:FastEnum.MapItemType.marker_overlay,enabledEditor:!0,title:"SelectPosition",lng:b.getLngValue(),lat:b.getLatValue(),address:b.getValue(),zoom:15}]})).then(function(a){a&&0<a.length&&(a=a[0],b.setLatValue(a.lat),b.setLngValue(a.lng),b.setProValue(a.province),b.setAreaValue(a.district),b.setCityValue(a.city),b.setValue(a.address));FastExt.Component.resumeEditorMenu(b)})},clearData:function(){this.setValue(null);this.setLatValue(0);this.setLngValue(0)},onFastInputClick:function(){this.readOnly||
this.disabled||this.editable||this.selectData()},initComponent:function(){var b=this;b.name||(b.name=b.dataIndex);Ext.isEmpty(b.name)&&(b.name="MapField"+Ext.now());b.items=[{xtype:"hiddenfield",name:b.lngName,value:0},{xtype:"hiddenfield",name:b.latName,value:0},{xtype:"hiddenfield",name:b.proName},{xtype:"hiddenfield",name:b.cityName},{xtype:"hiddenfield",name:b.areaName},{xtype:"textfield",name:b.name,editable:b.editable,fieldLabel:b.fieldLabel,hideLabel:!0,allowBlank:b.allowBlank,emptyText:b.emptyText,
parentXtype:b.xtype,listeners:{afterrender:function(a){a.inputEl.on("click",b.onFastInputClick,b)}},triggers:{close:{cls:"text-clear",handler:function(){b.clearData();if(Ext.isFunction(b.onClearValue))b.onClearValue()}},search:{cls:"text-search",handler:function(){b.selectData();this.inputEl.blur()}}}}];b.callParent(arguments)}})};return n}();c.MapField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.DateRange",{alias:["widget.daterange","widget.daterangefield"],extend:"Ext.form.field.Text",
beginDate:null,endDate:null,editable:!0,allowBlank:!0,maxRangeDate:-1,maxRangeMonth:-1,maxRangeYear:-1,layout:"column",format:"Y-m-d",submitValue:!0,onAfterSelect:null,onClearValue:null,selectData:function(){var b=this;FastExt.Component.holdEditorMenu(b);var a=Ext.now(),d=Ext.create("Ext.menu.Menu",{floating:!0,editorMenu:!0,items:[{xtype:"container",padding:"10 10 10 10",layout:"column",style:{background:"#ffffff",borderWidth:1,borderColor:"#ffffff",color:"#eeeee"},border:0,items:[{xtype:"combo",
fieldLabel:"\u5feb\u901f\u9009\u62e9",valueField:"value",labelWidth:60,margin:"5 5 5 5",editable:!1,columnWidth:1,triggers:{close:{cls:"text-clear",handler:function(){this.setValue(null);b.clearData()}}},listeners:{change:function(e,f,l,m){f&&(b.endDate=Ext.Date.format(new Date,b.format),6===f?b.beginDate=Ext.Date.format(new Date,b.format):1===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.DAY,-7),b.format):2===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.MONTH,-1),b.format):
3===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.MONTH,-3),b.format):4===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.MONTH,-6),b.format):5===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.YEAR,-1),b.format):7===f?b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.DAY,-3),b.format):8===f&&(b.beginDate=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.DAY,-1),b.format)),(f=b.refreshValue())?(FastExt.Dialog.toast(f),e.setValue(null),b.clearData(),FastExt.Component.shakeComment(d)):
((e=Ext.getCmp("beginDate"+a))&&e.setValue(b.beginDate),(e=Ext.getCmp("endDate"+a))&&e.setValue(b.endDate)))}},store:Ext.create("Ext.data.Store",{data:[{text:"\u6628\u5929",value:8},{text:"\u4eca\u5929",value:6},{text:"\u8fd1\u4e09\u5929",value:7},{text:"\u8fd1\u4e00\u5468",value:1},{text:"\u8fd1\u4e00\u4e2a\u6708",value:2},{text:"\u8fd1\u4e09\u4e2a\u6708",value:3},{text:"\u8fd1\u516d\u4e2a\u6708",value:4},{text:"\u8fd1\u4e00\u5e74",value:5}]})},{fieldLabel:"\u5f00\u59cb\u65e5\u671f",margin:"5 5 5 5",
xtype:"datefield",id:"beginDate"+a,columnWidth:1,labelWidth:60,format:b.format,value:b.beginDate,emptyText:"\u5f00\u59cb\u65e5\u671f"},{fieldLabel:"\u7ed3\u675f\u65e5\u671f",margin:"5 5 5 5",xtype:"datefield",id:"endDate"+a,columnWidth:1,labelWidth:60,format:b.format,value:b.endDate,emptyText:"\u7ed3\u675f\u65e5\u671f"},{xtype:"container",layout:"hbox",columnWidth:1,border:0,items:[{xtype:"button",text:"\u786e\u5b9a",margin:"5 5 5 5",flex:.42,handler:function(){var e=Ext.getCmp("beginDate"+a).getValue(),
f=Ext.getCmp("endDate"+a).getValue();b.beginDate=Ext.util.Format.date(e,b.format);b.endDate=Ext.util.Format.date(f,b.format);Ext.isEmpty(b.beginDate)&&(b.beginDate=Ext.Date.format(new Date(0),b.format));Ext.isEmpty(b.endDate)&&(b.endDate=Ext.Date.format(new Date,b.format));if(e=b.refreshValue())FastExt.Dialog.toast(e),FastExt.Component.shakeComment(d);else{if(Ext.isFunction(b.onAfterSelect))b.onAfterSelect(b);d.close()}}}]}]}],listeners:{hide:function(e,f){e.close()},close:function(){FastExt.Component.resumeEditorMenu(b);
b.pickerShown=!1;console.log("\u5173\u95ed\u65e5\u671f\u8303\u56f4\u9009\u62e9\u83dc\u5355\uff01")}}});d.setWidth(this.bodyEl.getWidth());d.showBy(this.bodyEl,"tl-bl?");this.pickerShown=!0},clearData:function(){this.setValue(null);this.endDate=this.beginDate=null},refreshValue:function(){this.setValue(null);if(Ext.isEmpty(this.beginDate)||Ext.isEmpty(this.beginDate))return null;var b=Ext.Date.parse(this.beginDate,this.format),a=Ext.Date.parse(this.endDate,this.format);if(b>a)return this.clearData(),
"\u5f00\u59cb\u65e5\u671f\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e\u7ed3\u675f\u65e5\u671f\uff01";if(0<this.maxRangeDate){var d=Ext.Date.add(b,Ext.Date.DAY,this.maxRangeDate);if(!Ext.Date.between(a,b,d))return this.clearData(),"\u65e5\u671f\u8303\u56f4\u533a\u95f4\u5fc5\u987b\u5728"+this.maxRangeDate+"\u5929\u4ee5\u5185\uff01"}if(0<this.maxRangeMonth&&(d=Ext.Date.add(b,Ext.Date.MONTH,this.maxRangeMonth),!Ext.Date.between(a,b,d)))return this.clearData(),"\u65e5\u671f\u8303\u56f4\u533a\u95f4\u5fc5\u987b\u5728"+
this.maxRangeMonth+"\u4e2a\u6708\u4ee5\u5185\uff01";if(0<this.maxRangeYear&&(d=Ext.Date.add(b,Ext.Date.YEAR,this.maxRangeYear),!Ext.Date.between(a,b,d)))return this.clearData(),"\u65e5\u671f\u8303\u56f4\u533a\u95f4\u5fc5\u987b\u5728"+this.maxRangeYear+"\u5e74\u4ee5\u5185\uff01";this.setValue(this.beginDate+" \u81f3 "+this.endDate);Ext.Date.isEqual(b,a)&&this.setValue("\u4eca\u5929");return null},triggers:{close:{cls:"text-clear",handler:function(){this.clearData();if(Ext.isFunction(this.onClearValue))this.onClearValue()}},
search:{cls:"text-search",handler:function(){this.selectData();this.inputEl.blur()}}},toggleSelectData:function(){this.pickerShown?this.pickerShown=!1:this.selectData()},onFastInputClick:function(){this.disabled||this.toggleSelectData()},finishRender:function(){this.callParent(arguments);this.inputEl.on("click",this.onFastInputClick,this)},initComponent:function(){this.editable=!1;this.refreshValue();this.callParent(arguments)}})};return n}();c.DateRangeField=u;u=function(){function n(){}n.__onLoaded=
function(){Ext.define("Fast.ext.Date",{alias:["widget.date","widget.datefield"],extend:"Ext.form.field.Text",format:"Y-m-d H:i:s",strict:!0,isValid:function(){return this.callParent(arguments)?Ext.isEmpty(this.getValue())||FastExt.Base.toBool(this.fromHeadSearch,!1)||Ext.Date.parse(this.getValue(!0),this.format)?!0:(this.invalidText="\u65e5\u671f\u683c\u5f0f\u9519\u8bef\uff01\u683c\u5f0f\u5fc5\u987b\u4e3a\uff1a"+this.format,this.markInvalid(this.invalidText),!1):!1},setValue:function(b){if(this.strict&&
!Ext.isEmpty(b)){var a=FastExt.Base.guessDateFormat(b);(a=Ext.Date.parse(b,a))&&(arguments[0]=Ext.Date.format(a,this.format))}return this.callParent(arguments)},getValue:function(b){var a=this.callParent(arguments);if(this.strict&&!FastExt.Base.toBool(b,!1)){var d=FastExt.Base.guessDateFormat(a);if("Y-m"===d)return a+"-01";if("Y/m"===d)return a+"/01";if("Y"===d)return a+"-01-01"}return a},selectData:function(){var b=this;FastExt.Component.holdEditorMenu(b);b.pickerShown=!0;FastExt.Dialog.showFastDatePicker(b.bodyEl,
b.getValue(),this.format).then(function(a){FastExt.Component.resumeEditorMenu(b);b.resetPickerShowTask.delay(100);a&&b.setValue(a)})},toggleSelectData:function(){this.pickerShown?this.pickerShown=!1:this.selectData()},endEdit:function(){this.firstValue=null},onFastInputClick:function(){this.readOnly||this.disabled||this.strict&&this.toggleSelectData()},triggers:{search:{cls:"extIcon extDatePicker",handler:function(){this.toggleSelectData()}}},finishRender:function(){this.callParent(arguments);this.inputEl.on("click",
this.onFastInputClick,this)},initComponent:function(){this.resetPickerShowTask=new Ext.util.DelayedTask(function(){this.pickerShown=!1},this);this.callParent(arguments)}})};return n}();c.DateField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.ColorField",{extend:"Ext.form.field.Text",alias:["widget.colorfield"],editable:!1,beforeBodyEl:['\x3cdiv class\x3d"'+Ext.baseCSSPrefix+'colorpicker-field-swatch" style\x3d"z-index: 9;"\x3e\x3cdiv id\x3d"{id}-swatchEl" data-ref\x3d"swatchEl" class\x3d"'+
Ext.baseCSSPrefix+'colorpicker-field-swatch-inner"\x3e\x3c/div\x3e\x3c/div\x3e'],cls:Ext.baseCSSPrefix+"colorpicker-field",childEls:["swatchEl"],setValue:function(b){this.swatchEl&&this.swatchEl.setStyle("background",b);this.callParent(arguments);return this},triggers:{search:{cls:"extIcon extSearch",handler:function(){this.toggleSelectData()}}},onFastInputClick:function(){this.readOnly||this.disabled||this.toggleSelectData()},selectData:function(){var b=this;FastExt.Component.holdEditorMenu(b);b.pickerShown=
!0;FastExt.Dialog.showFastColorPicker(b.inputEl,b.getValue(),function(a){b.setValue(a.toRGBA().toString(0))}).then(function(a){FastExt.Component.resumeEditorMenu(b);b.resetPickerShowTask.delay(100)})},clearData:function(){this.setValue(null)},toggleSelectData:function(){this.pickerShown?this.pickerShown=!1:this.selectData()},initComponent:function(){this.resetPickerShowTask=new Ext.util.DelayedTask(function(){this.pickerShown=!1},this);this.callParent(arguments)},finishRender:function(){this.callParent(arguments);
this.inputEl.on("click",this.onFastInputClick,this);var b=FastExt.Color.toColor(this.getValue(),"#00000000");this.setValue(b)}})};return n}();c.ColorField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.SVGIcon",{extend:"Ext.Component",alias:["widget.svgicon"],iconId:"",iconCls:"",initComponent:function(){this.callParent(arguments)},finishRender:function(){this.callParent(arguments);var b=new Ext.Template('\x3csvg class\x3d"svgIconFill {iconClass}" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"{iconId}"\x3e\x3c/use\x3e\x3c/svg\x3e');
this.update(b.apply({iconId:this.iconId,iconCls:this.iconCls}))}})};return n}();c.SVGIcon=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.Lottie",{extend:"Ext.Component",alias:["widget.lottie"],jsonPath:"",focusOnToFront:!1,initComponent:function(){this.callParent(arguments)},destroy:function(){FastExt.Lottie.unloadJsonAnim(this);this.callParent(arguments)},finishRender:function(){this.callParent(arguments);var b=this.up("window");if(b&&!FastExt.Base.toBool(b.shown))b.on("show",
this.onFastContainerShow,this,{single:!0});else this.loadJson()},onFastContainerShow:function(){this.loadJson()},loadJson:function(){FastExt.Lottie.loadJsonAnim(this,this.jsonPath)}})};return n}();c.Lottie=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.FastMonaco",{extend:"Ext.form.field.TextArea",alias:["widget.fastmonaco","widget.fastmonacofield"],editable:!1,language:"plaintext",finishRender:function(){this.callParent(arguments);this.inputEl.on("click",this.onFastInputClick,
this)},onFastInputClick:function(){this.readOnly||this.disabled||this.showMonacoEditor()},initComponent:function(){this.editable=!1;this.callParent(arguments)},showMonacoEditor:function(){var b=this;FastExt.Component.holdEditorMenu(b);FastExt.MonacoEditor.showEditor(this,b.getValue(),b.language).then(function(a){a&&b.setValue(a);FastExt.Component.resumeEditorMenu(b)})},clearData:function(){this.setValue(null)},showWindow:function(b,a,d){var e=this;FastExt.Component.holdEditorMenu(e);FastExt.MonacoEditor.showEditor(b,
e.getValue(),e.language).then(function(f){f&&Ext.isFunction(a)&&a(e);FastExt.Component.resumeEditorMenu(e)})}})};return n}();c.MonacoField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.TipLine",{extend:"Ext.Component",alias:["widget.tipline"],lineText:"",lineColor:"#cccccc",lineTextColor:"#cccccc",focusOnToFront:!1,initComponent:function(){this.callParent(arguments)},finishRender:function(){this.callParent(arguments);var b="#ffffff";this.config.style&&this.config.style.background&&
(b=this.config.style.background);var a=new Ext.Template('\x3cdiv style\x3d"display: flex;align-items: center;justify-content: center;width: 100%;position: relative;"\x3e\x3cdiv style\x3d"padding: 5px 10px;background: {bgColor};z-index: 9;color:{lineTextColor}"\x3e{lineText}\x3c/div\x3e\x3cdiv style\x3d"height: 1px;background: {lineColor};width: 100%;position: absolute;"\x3e\x3c/div\x3e\x3c/div\x3e');this.update(a.apply({lineText:this.lineText,lineColor:this.lineColor,lineTextColor:this.lineTextColor,
bgColor:b}))}})};return n}();c.TipLineField=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Ext.grid.column.RowPlaceholder",{extend:"Ext.grid.column.RowNumberer",alias:"widget.rowplaceholder",width:30,align:"center",autoLock:!1,editable:!1,excelHeader:!1,stopSelection:!0,resizable:!1,cellFocusable:!1,cls:Ext.baseCSSPrefix+"row-place-holder",tdCls:Ext.baseCSSPrefix+"grid-cell-row-place-holder "+Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-place-holder",
defaultRenderer:function(b,a,d,e,f,l,m){return""}})};return n}();c.RowPlaceholderColumn=u;u=function(){function n(){}n.__onLoaded=function(){Ext.define("Fast.ext.MarkdownDisplay",{extend:"Ext.Component",alias:["widget.markdowndisplay"],filePath:"",initComponent:function(){this.callParent(arguments)},finishRender:function(){var b=this;this.callParent(arguments);this.setLoading("\u52a0\u8f7d\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");$.get(this.filePath,function(a){FastExt.Markdown.parseMarkdown(a,
function(d){b.setLoading(!1);b.update(d)})})}})};return n}();c.MarkdownDisplay=u})(FastDefine||(FastDefine={}));
(function(c){var u=function(){function n(){}n.showWait=function(b){Ext.MessageBox.show({modal:!0,title:"\u7cfb\u7edf\u63d0\u9192",msg:b,iconCls:"extIcon extTimer",progressText:"\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u5373\u5c06\u5b8c\u6210\u64cd\u4f5c",progress:!0,justTop:!0,closable:!1});var a=0,d=function(){Ext.MessageBox.isHidden()||(a+=.5,130===a&&(a=0),Ext.MessageBox.updateProgress(a/100,"\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u5373\u5c06\u5b8c\u6210\u64cd\u4f5c"),Ext.MessageBox.timeoutProcess=setTimeout(d,
5))};Ext.MessageBox.timeoutProcess&&clearTimeout(Ext.MessageBox.timeoutProcess);Ext.MessageBox.timeoutProcess=setTimeout(d,5)};n.hideWait=function(){Ext.MessageBox.isVisible()&&Ext.MessageBox.close()};n.toast=function(b){var a=parseInt((.7*document.body.clientWidth).toFixed(0)),d=2E3,e=$("\x3cdiv\x3e"+b+"\x3c/div\x3e").text().length;8<e&&(d=3E3);50<e&&(d=5E3);80<e&&(d=8E3);Ext.toast({html:"\x3cdiv class\x3d'fast-dialog-message'\x3e"+b+"\x3c/div\x3e",closable:!0,align:"t",slideInDuration:200,slideBackDuration:200,
minWidth:180,autoCloseDelay:d,maxWidth:a,justTop:!0,unpin:!1,slideBackAnimation:"easeOut",iconCls:"extIcon extInfo",title:"\u6d88\u606f\u63d0\u793a"})};n.showHtml=function(b,a,d,e){var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.isEmpty(e)&&(e=!0);c.Component.holdEditorMenu(b);Ext.create("Ext.window.Window",{title:a,layout:"fit",animateTarget:b,height:l,width:f,minHeight:500,minWidth:600,constrain:!0,resizable:!0,maximizable:!0,
modal:e,maximized:!1,iconCls:"extIcon extSee",draggable:!0,scrollable:!0,bodyStyle:{background:"#ffffff"},html:'\x3cdiv class\x3d"fast-show-html-content"\x3e'+d+"\x3c/div\x3e",toFrontOnShow:!0,listeners:{close:function(){c.Component.resumeEditorMenu(b)}},buttons:[{text:"\u6253\u5370",iconCls:"extIcon extPrint",handler:function(){c.JqueryPrintArea.print(".fast-show-html-content")}}]}).show()};n.showSafeHtml=function(b,a,d,e){var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.8*
document.body.clientHeight).toFixed(0));Ext.isEmpty(e)&&(e=!0);var m="ShowEditorFrame"+(new Date).getTime(),k=Ext.create("Ext.container.Container",{layout:"border",region:"center",border:0,iframePanel:!0});c.Component.holdEditorMenu(b);Ext.create("Ext.window.Window",{title:a,layout:"fit",animateTarget:b,height:l,width:f,minHeight:500,minWidth:600,resizable:!0,maximizable:!0,modal:e,constrain:!0,maximized:!1,iconCls:"extIcon extSee",bodyStyle:{background:"#ffffff"},draggable:!0,scrollable:!1,toFrontOnShow:!0,
items:[k],listeners:{show:function(h,g){h=c.Base.formatUrlVersion("base/content/show_html.html");window[m+"ShowHtmlDone"]=function(){window[m].window.showContent(d)};k.update("\x3ciframe name\x3d'"+m+"' src\x3d'"+h+"'  width\x3d'100%' height\x3d'100%' frameborder\x3d'0'\x3e")},close:function(){c.Component.resumeEditorMenu(b);window[m]=null;window[m+"ShowHtmlDone"]=null}},buttons:[{text:"\u6253\u5370",iconCls:"extIcon extPrint",handler:function(){window[m].window.print()}}]}).show()};n.showLink=function(b,
a,d,e,f){var l=parseInt((.6*document.body.clientWidth).toFixed(0)),m=parseInt((.7*document.body.clientHeight).toFixed(0)),k="iFrameLink"+(new Date).getTime(),h="iFrameLoadDone"+(new Date).getTime(),g=Ext.create("Ext.container.Container",{layout:"border",region:"center",border:0,iframePanel:!0});window[h]=function(){g.setLoading(!1);Ext.isFunction(f)&&f(k);window[h]=null};c.Component.holdEditorMenu(b);Ext.create("Ext.window.Window",c.Json.mergeJson({title:a,layout:"fit",animateTarget:b,height:m,width:l,
minHeight:500,minWidth:600,resizable:!0,maximizable:!0,modal:!0,constrain:!0,maximized:!1,iconCls:"extIcon extSee",draggable:!0,scrollable:!1,toFrontOnShow:!0,items:[g],listeners:{show:function(){g.setLoading("\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");g.update("\x3ciframe name\x3d'"+k+"' onload\x3d'"+h+"()' src\x3d'"+d+"'  width\x3d'100%' height\x3d'100%' frameborder\x3d'0'\x3e")},close:function(){c.Component.resumeEditorMenu(b);window[h]=null}}},e)).show()};
n.showEditorHtml=function(b,a,d){var e=parseInt((.6*document.body.clientWidth).toFixed(0)),f=parseInt((.8*document.body.clientHeight).toFixed(0));c.Component.holdEditorMenu(b);Ext.create("Ext.window.Window",{title:a,layout:"fit",animateTarget:b,height:f,width:e,minHeight:500,minWidth:600,resizable:!0,maximizable:!0,modal:!0,constrain:!0,maximized:!1,iconCls:"extIcon extSee",draggable:!0,scrollable:!1,toFrontOnShow:!0,bodyStyle:{background:"#ffffff"},html:'\x3cdiv class\x3d"fast-show-tinymce-editor-show-content"\x3e'+
d+"\x3c/div\x3e",listeners:{close:function(){c.Component.resumeEditorMenu(b)}},buttons:[{text:"\u6253\u5370",iconCls:"extIcon extPrint",handler:function(){c.JqueryPrintArea.print(".fast-show-tinymce-editor-show-content")}}]}).show()};n.showContent=function(b,a,d,e){this.showText(b,null,a,d,e)};n.showText=function(b,a,d,e,f){var l=parseInt((.6*document.body.clientWidth).toFixed(0)),m=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.isEmpty(a)&&(a="extIcon extSee");Ext.isEmpty(f)&&(f=!0);c.Component.holdEditorMenu(b);
Ext.create("Ext.window.Window",{title:d,icon:a,iconCls:a,maximizable:!0,height:m,width:l,minHeight:500,minWidth:600,resizable:!0,layout:"fit",animateTarget:b,items:[{xtype:"textarea",value:e}],modal:f,constrain:!0,bodyStyle:{background:"#ffffff"},listeners:{close:function(){c.Component.resumeEditorMenu(b)}}}).show()};n.showCode=function(b,a,d,e){try{b&&Ext.isFunction(b.blur)&&b.blur();Ext.isEmpty(e)&&(e="");c.Component.holdEditorMenu(b);var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=
parseInt((.7*document.body.clientHeight).toFixed(0)),m=Ext.create("Ext.window.Window",{title:"\u67e5\u770b\u5185\u5bb9",height:l,width:f,minHeight:500,minWidth:600,animateTarget:b,resizable:!0,layout:"fit",maximizable:!0,iconCls:"extIcon extSee",autoScroll:!0,modal:!0,constrain:!0,bodyStyle:{background:"#000000"},listeners:{show:function(k){PR.prettyPrint()},close:function(){c.Component.resumeEditorMenu(b)}}});d?m.update("\x3cpre class\x3d'prettyprint "+e+" linenums windowpre'\x3e"+a+"\x3c/pre\x3e"):
m.update("\x3cpre class\x3d'prettyprint "+e+" windowpre'\x3e"+a+"\x3c/pre\x3e");m.show()}catch(k){c.Dialog.showText(b,null,"\u67e5\u770b\u5185\u5bb9",a)}};n.showSql=function(b,a){try{a=sqlFormatter.format(a),c.Dialog.showCode(b,a,!1,"lang-sql")}catch(d){c.Dialog.showText(b,null,"\u67e5\u770b\u5185\u5bb9",a)}};n.showException=function(b,a){if(b){c.Dialog.hideWait();if(c.System.ConfigHandler.isDebug()){var d=b;b instanceof Error&&(d=b.stack,d=d.replace(/\n/g,"\x3cbr/\x3e").replace(/\t/g,"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;").replace(/ /g,
"\x26nbsp;\x26nbsp;"));a=null!=a?a+("\uff0c\u6765\u81ea"+a):"";var e=Ext.create("Ext.window.Window",{title:"\u7cfb\u7edf\u5f02\u5e38",height:180,width:270,layout:"fit",resizable:!1,maximizable:!1,constrain:!0,fixed:!0,modal:!0,draggable:!1,iconCls:"extIcon extError",html:"\x3cdiv  style\x3d'padding:15px;background: #fff;' align\x3d'center'\x3e\u3010"+a+"\u3011\u7cfb\u7edf\u53d1\u751f\u5f02\u5e38\uff0c\u8bf7\u53ca\u65f6\u544a\u77e5\u7cfb\u7edf\u7ba1\u7406\u5458\uff01\x3c/div\x3e",buttons:[{text:"\u4e0b\u6b21\u518d\u8bf4",
flex:1,iconCls:"extIcon extClose whiteColor",handler:function(){e.close()}},{text:"\u67e5\u770b\u9519\u8bef",flex:1,iconCls:"extIcon extException whiteColor",handler:function(){c.Dialog.showCode(this,d,!0)}}]});e.show()}0<=c.Base.toString(a,"").indexOf("\u8bf7\u6c42\u5f02\u5e38")||console.error(b)}};n.showAlert=function(b,a,d,e,f){Ext.isEmpty(e)&&(e=!0);c.Dialog.hideWait();a=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},
defaults:{margin:"10 10 10 10"},border:0,items:[{xtype:"label",maxWidth:380,userCls:"fast-dialog-message",html:a}]});var l=Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extInfo2",maxWidth:500,maxHeight:800,minWidth:220,layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,justTop:!0,unpin:!1,items:[a],modal:e,animateDisable:f,listeners:{show:function(m){m.focus()},render:function(m,k){new Ext.util.KeyMap({target:m.getEl(),key:13,fn:function(h,g){l.close();Ext.isFunction(d)&&
d("ok")},scope:this})}},buttons:["-\x3e",{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){Ext.isFunction(d)&&d("ok");var m=this.up("window");m&&m.close()}},"-\x3e"]});l.show()};n.showImage=function(b,a,d,e){c.Cache.memory.hasOwnProperty(a)&&(a=c.Cache.memory[a]);c.Image.showImage(b,a,d,e)};n.showVideo=function(b,a){b&&Ext.isFunction(b.blur)&&b.blur();Ext.create("Ext.window.Window",{title:"\u64ad\u653e\u89c6\u9891",layout:"fit",height:620,width:700,resizable:!1,constrain:!0,maximizable:!1,
modal:!0,maximized:!1,animateTarget:b,iconCls:"extIcon extSee",draggable:!0,scrollable:!1,toFrontOnShow:!0,listeners:{show:function(){var d=c.Base.formatUrlVersion("base/video/player.html");window.getVideoUrl=function(){return a};this.update("\x3ciframe allowfullscreen\x3d'allowfullscreen' mozallowfullscreen\x3d'mozallowfullscreen' msallowfullscreen\x3d'msallowfullscreen' oallowfullscreen\x3d'oallowfullscreen' webkitallowfullscreen\x3d'webkitallowfullscreen' style\x3d'background-color: black;' name\x3d'showVideoFrame' src\x3d'"+
d+"'  width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' \x3e")}}}).show()};n.showEditor=function(b,a,d,e){b&&Ext.isFunction(b.blur)&&b.blur();(new Date).getTime();var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.7*document.body.clientHeight).toFixed(0)),m=Ext.create("Ext.window.Window",{title:a,iconCls:"extIcon extEdit",resizable:!0,maximizable:!0,height:l,width:f,minHeight:500,minWidth:600,layout:"fit",animateTarget:b,items:[{itemId:"content",emptyText:"\u8bf7\u8f93\u5165\u5185\u5bb9\u2026\u2026",
value:e,userCls:"fast-radius-null-field",xtype:"textarea"}],modal:!0,constrain:!0,listeners:{show:function(k){c.Server.showExtConfig("PublicEditor","TextEditorCache",function(h,g){var p=m.getContentArea();p&&(h&&p.setValue(g),p.focus())})}},getContentArea:function(){return this.down("#content")},buttons:[{text:"\u6682\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){c.Dialog.showWait("\u6682\u5b58\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.saveExtConfig("PublicEditor","TextEditorCache",
m.getContentArea().getValue(),function(k,h){c.Dialog.hideWait();k?c.Dialog.toast("\u6682\u5b58\u6210\u529f\uff01"):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",h)})}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){var k=m.getContentArea();k&&k.setValue(null);c.Server.deleteExtConfig("PublicEditor","TextEditorCache")}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){c.Dialog.showWait("\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.deleteExtConfig("PublicEditor","TextEditorCache",
function(k){c.Dialog.hideWait();Ext.isFunction(d)&&d(m.getContentArea().getValue());m.close()})}}]});m.show()};n.showJson=function(b,a,d){c.Json.showFormatJson(b,d,a)};n.showFormatJson=function(b,a){c.Json.showFormatJson(b,a)};n.showLottie=function(b,a){c.Lottie.showLottie(b,a)};n.showFastDatePicker=function(b,a,d){return c.Dates.showDatePicker(b,a,d)};n.showFastColorPicker=function(b,a,d){return c.Color.showColorPicker(b,a,d)};n.showMusic=function(b,a){b&&Ext.isFunction(b.blur)&&b.blur();var d=(new Date).getTime();
Ext.create("Ext.window.Window",{title:"\u64ad\u653e\u97f3\u9891",layout:"fit",height:230,width:700,resizable:!1,constrain:!0,maximizable:!1,modal:!0,maximized:!1,iconCls:"extIcon extSee",draggable:!0,scrollable:!1,toFrontOnShow:!0,items:[{xtype:"container",layout:"border",iframePanel:!0,itemId:"playerPanel"}],listeners:{show:function(e){var f=this.down("#playerPanel");f.setLoading("\u52a0\u8f7d\u97f3\u9891\u6587\u4ef6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");var l=c.Base.formatUrlVersion("base/music/player.html");
f.update("\x3ciframe allowfullscreen\x3d'allowfullscreen' mozallowfullscreen\x3d'mozallowfullscreen' msallowfullscreen\x3d'msallowfullscreen' oallowfullscreen\x3d'oallowfullscreen' webkitallowfullscreen\x3d'webkitallowfullscreen' style\x3d'background-color: black;' name\x3d'showMusicFrame' src\x3d'"+l+"'  width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' \x3e");window.getMusicUrl=function(){return a};window.onMusicChange=function(m,k){if("ready"===m)e.getComponent("playerPanel").setLoading(!1),
k.play();else if("play"===m)Ext.getCmp("btnPlay"+d).setIconCls("extIcon extPause");else if("pause"===m)Ext.getCmp("btnPlay"+d).setIconCls("extIcon extPlay");else if("finish"===m)k.seekTo(0);else if("mute"===m)k.getMute()?Ext.getCmp("btnMute"+d).setIconCls("extIcon extMute"):Ext.getCmp("btnMute"+d).setIconCls("extIcon extUnmute");else if("loading"===m)e.getComponent("playerPanel").setLoading("\u52a0\u8f7d\u97f3\u9891\u6587\u4ef6\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");else if("audioprocess"===
m||"seek"===m)m=c.Dates.formatMillisecond(1E3*k.getCurrentTime(),"i:s"),k=c.Dates.formatMillisecond(1E3*k.getDuration(),"i:s"),e.setTitle("\u64ad\u653e\u97f3\u4e50  "+m+" / "+k)}}},bbar:{xtype:"toolbar",dock:"bottom",layout:{type:"hbox",align:"middle",pack:"center"},items:[{xtype:"button",id:"btnPlay"+d,iconCls:"extIcon extPlay",action:"play",handler:function(){window.showMusicFrame.window.switchPlay()}},{xtype:"button",id:"btnStop"+d,iconCls:"extIcon extStop",handler:function(){window.showMusicFrame.window.stop()}},
{xtype:"button",id:"btnMute"+d,iconCls:"extIcon extUnmute",handler:function(){window.showMusicFrame.window.switchMute()}}]}}).show()};n.showDeleteDataAlert=function(b,a,d,e){Ext.isEmpty(e)&&(e="\u5220\u9664");a=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/amazed.json"},{xtype:"label",maxWidth:250,userCls:"fast-dialog-message",
text:a},{xtype:"checkboxfield",boxLabel:"\u6211\u5df2\u4e86\u89e3\u6b64\u64cd\u4f5c\u662f\u6c38\u4e45\u6027\u4e14\u65e0\u6cd5\u64a4\u9500",listeners:{change:function(l,m){f.down("#deleteBtn").setDisabled(!m)}}}]});var f=Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extDelete",width:280,layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,unpin:!1,items:[a],modal:!0,buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){f.close()}},{text:e,
itemId:"deleteBtn",disabled:!0,iconCls:"extIcon extOk",handler:function(){f.close();Ext.isFunction(d)&&d()}},"-\x3e"]});f.show()};n.showConfirm=function(b,a,d,e){c.Dialog.hideWait();e||(e={yes:"\u786e\u5b9a",no:"\u53d6\u6d88"});a=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/question.json"},{xtype:"label",maxWidth:300,
margin:"5 5 10 5",userCls:"fast-dialog-message",html:a}]});var f=Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extQuestion2",width:320,layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,items:[a],modal:!0,unpin:!1,buttons:["-\x3e",{text:e.no,iconCls:"extIcon extClose",handler:function(){Ext.isFunction(d)&&d("no");f.close()}},{text:e.yes,iconCls:"extIcon extOk",handler:function(){Ext.isFunction(d)&&d("yes");f.close()}},"-\x3e"]});f.show()};n.showPrompt=function(b,
a,d,e,f){c.Dialog.hideWait();f={xtype:"textfield",itemId:"inputContent",value:f};e&&(f.xtype="textareafield",f.grow=!0,f.growMax=320);a=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"stretch"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"label",userCls:"fast-dialog-message",html:a},f]});var l=Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extEdit",width:280,layout:{type:"vbox",pack:"center",align:"stretch"},constrain:!0,
resizable:!1,items:[a],modal:!0,listeners:{show:function(m){setTimeout(function(){m.query("#inputContent")[0].focus()},200)}},buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){l.close();Ext.isFunction(d)&&d("no")}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){Ext.isFunction(d)&&d("ok",l.query("#inputContent")[0].getValue());l.close()}},"-\x3e"]});l.show()};n.showTip=function(b,a,d){var e="ShowTip"+c.System.ManagerHandler.getManagerId()+$.md5(b+
a);if(Cookies.get(e))Ext.isFunction(d)&&d("ok");else{c.Dialog.hideWait();a=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"label",maxWidth:300,userCls:"fast-dialog-message",html:a},{xtype:"checkboxfield",boxLabel:"\u4e0b\u6b21\u4e0d\u5728\u5f39\u51fa\u6b64\u63d0\u9192",listeners:{change:function(l,m){m?Cookies.set(e,!0,{expires:30}):Cookies.remove(e)}}}]});var f=Ext.create("Ext.window.Window",
{title:b,iconCls:"extIcon extInfo2",maxWidth:500,maxHeight:800,minWidth:220,layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,unpin:!1,items:[a],modal:!0,listeners:{show:function(l){l.focus()},render:function(l,m){new Ext.util.KeyMap({target:l.getEl(),key:13,fn:function(k,h){f.close();Ext.isFunction(d)&&d("ok")},scope:this})}},buttons:["-\x3e",{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){var l=this.up("window");l&&l.close();Ext.isFunction(d)&&d("ok")}},
"-\x3e"]});f.show()}};n.showWarning=function(b,a){b=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/amazed.json"},{xtype:"label",maxWidth:250,margin:"5 5 10 5",html:b}]});var d=Ext.create("Ext.window.Window",{title:"\u7cfb\u7edf\u8b66\u544a",iconCls:"extIcon extWarn",width:280,layout:{type:"vbox",pack:"center",align:"middle"},
maximizable:!1,fixed:!0,draggable:!1,animateDisable:!0,constrain:!0,resizable:!1,alwaysOnTop:!0,toFrontOnShow:!0,items:[b],cls:"fast-warning-window",modal:!0,buttons:["-\x3e",{text:"\u6211\u5df2\u77e5\u6653",iconCls:"extIcon extOk",handler:function(){d.close();a()}},"-\x3e"]});d.show()};return n}();c.Dialog=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loadECharts=function(b,a){this.loadJs(function(){if(b.echarts)b.echarts.hideLoading(),b.echarts.setOption(a);else{var d=c.Base.getTargetBodyElement(b);if(d){var e="";if(!Ext.isEmpty(c.ECharts.echartsThemeFile)){e=c.ECharts.echartsThemeFile.lastIndexOf("/");var f=c.ECharts.echartsThemeFile.lastIndexOf(".");e=c.ECharts.echartsThemeFile.substring(e+1,f)}b.echarts=echarts.init(d,e);b.echarts.setOption(a);b.on("destroy",function(l){c.ECharts.getECharts(l)&&
(c.ECharts.getECharts(l).dispose(),l.echarts=null)});b.on("resize",function(l){c.ECharts.getECharts(l)&&c.ECharts.getECharts(l).resize({animation:{duration:1E3}})})}else console.error("\u52a0\u8f7dECharts\u5931\u8d25\uff01\u65e0\u6cd5\u83b7\u53d6\u76ee\u6807\u63a7\u4ef6\u7684BodyElement\uff01")}})};n.loadJs=function(b){c.PluginLoader.loadPlugins("ECharts",[c.ECharts.echartsJsFile,c.ECharts.echartsThemeFile],b)};n.getECharts=function(b){if(b.echarts)return b.echarts;console.error("\u83b7\u53d6ECharts\u5931\u8d25\uff01\u76ee\u6807\u63a7\u4ef6\u672a\u52a0\u8f7decharts\uff01");
return null};n.hasECharts=function(b){return!!b.echarts};n.showECharts=function(b,a,d){var e=parseInt((.6*document.body.clientWidth).toFixed(0)),f=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extReport whiteColor",height:f,width:e,layout:"border",resizable:!0,maximizable:!0,constrain:!0,modal:d,padding:"10 10 10 10",bodyStyle:{background:"#ffffff"},listeners:{show:function(l){c.ECharts.loadECharts(l,a)}}}).show()};n.showEntityECharts=
function(b,a,d,e){var f=parseInt((.6*document.body.clientWidth).toFixed(0)),l=parseInt((.7*document.body.clientHeight).toFixed(0)),m=Ext.Date.format(Ext.Date.add(new Date,Ext.Date.MONTH,-1),"Y-m-d"),k=Ext.Date.format(new Date,"Y-m-d");d.type=0;d.chartTitle=a;d.beginDate=m;d.endDate=k;e||(e=[{text:"\u5e74\u56fe\u8868",value:4},{text:"\u6708\u56fe\u8868",value:1},{text:"\u65e5\u56fe\u8868",value:0},{text:"\u65f6\u56fe\u8868",value:2},{text:"\u65f6\u5206\u56fe\u8868",value:3}]);var h=Ext.create("Ext.window.Window",
{title:a,animateTarget:b,height:l,width:f,minWidth:f,minHeight:l,iconCls:"extIcon extReport",layout:"border",resizable:!0,maximizable:!0,constrain:!0,modal:!0,refreshECharts:function(){var g=this;c.ECharts.hasECharts(g)&&(g.setLoading(!1),c.ECharts.getECharts(g).showLoading());c.Server.showEcharts(d,function(p,q,r){g.setLoading(!1);p?c.ECharts.loadECharts(g,r):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",q)})},bodyStyle:{background:"#fcfcfc"},tbar:{xtype:"toolbar",overflowHandler:"menu",items:[{xtype:"combo",
fieldLabel:"\u56fe\u8868\u7c7b\u578b",labelWidth:60,valueField:"value",editable:!1,value:0,listeners:{change:function(g,p,q,r){d.type=p;h.refreshECharts()}},store:Ext.create("Ext.data.Store",{fields:["id","text"],data:e})},{xtype:"daterangefield",fieldLabel:"\u65e5\u671f\u8303\u56f4",flex:1,margin:"0 0 0 5",maxRangeMonth:12,beginDate:m,endDate:k,labelWidth:60,onClearValue:function(){d.beginDate=this.beginDate;d.endDate=this.endDate;h.refreshECharts()},onAfterSelect:function(){d.beginDate=this.beginDate;
d.endDate=this.endDate;h.refreshECharts()}},{xtype:"button",text:"\u6298\u7ebf\u56fe",iconCls:"extIcon extPolyline",margin:"0 5 0 5",handler:function(){d.chartType="line";h.refreshECharts()}},{xtype:"button",text:"\u67f1\u72b6\u56fe",iconCls:"extIcon extReport",margin:"0 5 0 5",handler:function(){d.chartType="bar";h.refreshECharts()}},{xtype:"button",text:"\u5806\u53e0\u56fe",iconCls:"extIcon extMore",margin:"0 5 0 5",handler:function(){d.chartType="stack";h.refreshECharts()}}]},listeners:{show:function(g){h.setLoading("\u8bf7\u7a0d\u540e\u2026\u2026");
g.refreshECharts()}}});h.show()};n.echartsJsFile="base/echarts/echarts.min.js";n.echartsThemeFile="";return n}();c.ECharts=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function b(){}b.showEditor=function(a,d,e){return new Ext.Promise(function(f,l){var m=Ext.create("Ext.container.Container",{layout:"border",region:"center",iframePanel:!0,border:0,iframeName:"MonacoEditorFrame"+(new Date).getTime(),loadEditor:function(){var g=this;g.setLoading("\u52a0\u8f7d\u7f16\u8f91\u5668\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");window[this.iframeName+"LoadDone"]=function(){g.loadExtLib();g.setValue(d,e);g.setLoading(!1)};var p=c.Base.formatUrlVersion("base/monaco-editor/index.html",
{});this.update("\x3ciframe name\x3d'"+this.iframeName+"'  src\x3d'"+p+"' width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' /\x3e")},setValue:function(g,p){window[this.iframeName].window.createEditor({value:g,language:p,automaticLayout:!0,accessibilitySupport:"on",autoClosingBrackets:"always",autoClosingDelete:"always",autoClosingOvertype:"always",autoClosingQuotes:"always",renderLineHighlight:"gutter",scrollBeyondLastLine:!1})},getValue:function(){return window[this.iframeName].window.getValue()},
loadExtLib:function(){}});l=parseInt((.7*document.body.clientWidth).toFixed(0));var k=parseInt((.9*document.body.clientHeight).toFixed(0)),h=Ext.create("Ext.window.Window",{title:"\u7f16\u8f91\u5185\u5bb9",height:k,width:l,minHeight:500,minWidth:600,iconCls:"extIcon extConvertCode",layout:"fit",resizable:!0,maximizable:!0,animateTarget:a,constrain:!0,items:[m],modal:!0,unpin:!0,listeners:{show:function(){m.loadEditor()},close:function(g){c.Base.runCallBack(f);window[m.iframeName]=null;window[m.iframeName+
"LoadDone"]=null}},buttons:[{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){h.close()}},{text:"\u4fdd\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){c.Base.runCallBack(f,m.getValue());h.close()}}]});h.show()})};b.showDiffEditor=function(a,d,e,f,l){Ext.isEmpty(l)&&(l="");return new Ext.Promise(function(m,k){var h=Ext.create("Ext.container.Container",{layout:"border",region:"center",iframePanel:!0,border:0,iframeName:"MonacoEditorFrame"+(new Date).getTime(),loadEditor:function(){var q=
this;q.setLoading("\u52a0\u8f7d\u7f16\u8f91\u5668\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");window[this.iframeName+"LoadDone"]=function(){q.loadExtLib();q.setValue(d,e,f);q.setLoading(!1)};var r=c.Base.formatUrlVersion("base/monaco-editor/index.html",{});this.update("\x3ciframe name\x3d'"+this.iframeName+"'  src\x3d'"+r+"' width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' /\x3e")},setValue:function(q,r,t){window[this.iframeName].window.createDiffEditor(q,r,t)},getValue:function(){return window[this.iframeName].window.getValue()},
loadExtLib:function(){}});k=parseInt((.7*document.body.clientWidth).toFixed(0));var g=parseInt((.9*document.body.clientHeight).toFixed(0)),p=Ext.create("Ext.window.Window",{title:"\u7f16\u8f91\u5185\u5bb9"+l,height:g,width:k,minHeight:500,minWidth:600,iconCls:"extIcon extConvertCode",layout:"fit",resizable:!0,maximizable:!0,animateTarget:a,constrain:!0,items:[h],modal:!0,unpin:!0,listeners:{show:function(){h.loadEditor()},close:function(q){c.Base.runCallBack(m);window[h.iframeName]=null;window[h.iframeName+
"LoadDone"]=null}},buttons:[{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){p.close()}},{text:"\u4fdd\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){c.Base.runCallBack(m,h.getValue());p.close()}}]});p.show()})};return b}();c.MonacoEditor=u;u=function(){function b(){}b.showEditor=function(a,d){c.Dialog.showWait("\u83b7\u53d6\u6e90\u7801\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.loadSource(d,function(e,f,l){c.Dialog.hideWait();e?c.MonacoEditor.showEditor(a,
l,n.JavaScript).then(function(m){c.Dialog.showWait("\u4fdd\u5b58\u6e90\u7801\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.saveSource(d,m,function(k,h){c.Dialog.hideWait();k?c.Dialog.toast(h):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",h)})}):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",f)})};return b}();c.MonacoEditorEntity=u;var n;(function(b){b.TypeScript="typescript";b.JavaScript="javascript";b.CSS="css";b.LESS="less";b.SCSS="scss";b.JSON="json";b.HTML="html";b.JAVA="java";b.SQL="sql";
b.MySql="mysql";b.XML="xml";b.INI="ini";b.Text="plaintext";b.MarkDown="markdown"})(n=c.MonacoEditorLanguage||(c.MonacoEditorLanguage={}))})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loadTinymceJs=function(b){c.PluginLoader.loadPlugins("Tinymce",[c.Tinymce.tinymceJsPath],b)};n.initTinymce=function(b,a){b.promotion=!1;c.Tinymce.initializing?c.Tinymce.stackInitConfig.push({config:b,callback:a}):(c.Tinymce.initializing=!0,c.Tinymce.loadTinymceJs(function(){tinymce.init(b).then(function(d){a(d);c.Tinymce.initializing=!1;(d=c.Tinymce.stackInitConfig.pop())&&c.Tinymce.initTinymce(d.config,d.callback)})}))};n.tinymceJsPath="base/tinymce/tinymce.min.js";
n.initializing=!1;n.stackInitConfig=[];return n}();c.Tinymce=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.initEntity=function(b,a){b&&(b.shortTitle=a,b.showWinList=function(d,e,f,l,m){(new c.SimpleEntity(this)).showWinList(d,e,f,l,m)},b.showDetails=function(d,e){(new c.SimpleEntity(this)).showDetails(d,e)},b.showSelect=function(d,e,f,l,m,k){return(new c.SimpleEntity(this)).showSelect(d,e,f,l,m,k)},b.getRecords=function(d){return(new c.SimpleEntity(this)).getRecords(d)})};n.getEntity=function(b){return c.System.EntitiesHandler.getEntity(b)};n.isFulltextColumn=
function(b,a){if(b=c.Entity.getEntity(b))if(b=b.fulltextColumns)for(var d=0;d<b.length;d++)if(b[d].name===a)return!0;return!1};n.wrapConfigs=function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];var e=[],f=function(l){if(Ext.isArray(l))for(var m=0;m<l.length;m++)f(l[m]);else if(l.items&&Ext.isArray(l.items)){m=[];for(var k=0,h=l.items;k<h.length;k++)m=m.concat(c.Entity.wrapConfigs(b,h[k]));l.items=m;e.push(l)}else e.push(c.Entity.wrapConfig(b,l))};for(d=0;d<a.length;d++)f(a[d]);
return e};n.wrapConfig=function(b,a){if(Ext.isEmpty(b)||Ext.isEmpty(a))return null;if(!Ext.isObject(a))return a;if(a.hasOwnProperty("fieldLabel")){var d=c.Entity.getRealAttr(a);if(Ext.isEmpty(d))return a;var e=c.Entity.getEditorField(b,d);if(!e)return a;if(a.hasOwnProperty("xtype")&&a.xtype!==e.xtype)return console.warn("\u914d\u7f6e\u7c7b\u578b\u3010"+a.xtype+"\u3011\u4e0egetEditorField\u65b9\u6cd5\u8fd4\u56de\u7684\u7c7b\u578b\u3010"+a.xtype+"\u3011\u914d\u7f6e\u4e0d\u4e00\u81f4\uff01\u5df2\u8df3\u8fc7\uff01"),
a;a=Ext.Object.merge(e,a)}else if(a.hasOwnProperty("dataIndex")){d=c.Entity.getRealAttr(a);if(Ext.isEmpty(d))return a;e=c.Entity.getEditorField(b,d);if(!e)return a;e.name=d;Ext.isEmpty(a.field)&&(a.field={});Ext.isString(a.field)&&(a.field={xtype:a.field});var f=!0;a.field.hasOwnProperty("xtype")&&a.field.xtype!==e.xtype&&(f=!1);Ext.isObject(a.field)&&f&&(a.field=Ext.Object.merge(e,a.field));Ext.isEmpty(a.renderer)&&(a.renderer=c.Entity.getColumnRender(b,d));a.configField=a.field}return a};n.getEditorField=
function(b,a,d){if(Ext.isEmpty(b))return null;if(Ext.isFunction(b.getEditorField))return(d=c.Listeners.getFire().onEntityGetEditorField(b,a))?d:b.getEditorField(a);if(d){if(Ext.isObject(d.field))return d.field;if(Ext.isString(d.field))return{xtype:d.field}}return{xtype:"textfield",multiSplit:null}};n.getEditorFieldObject=function(b,a,d){return(b=c.Entity.getEditorField(b,a,d))?Ext.create(b):Ext.create({xtype:"textfield",multiSplit:null})};n.getColumnRender=function(b,a){if(Ext.isEmpty(b))return null;
if(Ext.isFunction(b.getColumnRender)){var d=c.Listeners.getFire().onEntityGetColumnRender(b,a);return d?d:b.getColumnRender(a)}return c.Renders.normal()};n.getRealAttr=function(b){return b?b.hasOwnProperty("columnName")?b.columnName:Ext.isObject(b.field)&&b.field.hasOwnProperty("name")?b.field.name:b.hasOwnProperty("dataIndex")?b.dataIndex:c.Base.toString(b.name,"").replace("data.",""):null};n.getEditorFieldByColumn=function(b,a){return Ext.isEmpty(b)?Ext.isObject(a.field)?a.field:{xtype:a.field}:
c.Entity.getEditorField(b,c.Entity.getRealAttr(a),a)};n.getEditorFieldObjectByColumn=function(b,a){return Ext.isEmpty(b)?Ext.isObject(a.field)?a.field:{xtype:a.field}:c.Entity.getEditorFieldObject(b,c.Entity.getRealAttr(a),a)};return n}();c.Entity=u;u=function(){function n(b){this._shortTitle=(this._entity=b)?c.Base.toString(b.shortTitle,"\u6570\u636e"):"\u6570\u636e"}n.prototype.getGridConfig=function(b,a,d,e){return{entityList:!0,tabPanelList:!1,mainEntityList:!0,selModel:c.Base.toBool(e.multi,
!0)?c.Grid.getGridSelModel():null,region:"center",multiColumnSort:!0,border:0,columnLines:!0,contextMenu:!0,power:c.Base.toBool(e.power,!0),columnContextMenu:!0,defaultToolBar:c.Base.toBool(e.defaultToolBar,!0),columnSearch:!0,store:b,enableLocking:!0,reserveScrollbar:!0,operate:new c.GridOperate({alertDelete:!0,alertUpdate:!0,autoUpdate:!1,autoDetails:!1,hoverTip:!1,excelOut:!0,excelIn:!0,showDetailsButton:!0,showUpdateButton:!0}),filter:new c.ExtCreateFilter({enable:!0,key:this._entity.entityCode,
method:"getList"}),where:{},listParams:{},columns:c.Entity.wrapConfigs(this._entity,a),tbar:c.Base.toBool(e.toolbar,!0)?{xtype:"toolbar",overflowHandler:"menu",items:d}:null,onBeforeLoad:function(f,l,m){return!0},bbar:c.Grid.getPageToolBar(b),plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2})],viewConfig:{loadingText:"\u6b63\u5728\u4e3a\u60a8\u5728\u52a0\u8f7d\u6570\u636e\u2026"}}};n.prototype.showWinList=function(b,a,d,e,f){if(this._entity){this._entity.menu={id:$.md5(a),text:a};
d=this._entity.getList(d,f);if(f=d.down("[entityList\x3dtrue]"))f.code=$.md5(a),f.operate.autoDetails=!1;e||(e=!1);f=parseInt((.6*document.body.clientWidth).toFixed(0));var l=parseInt((.7*document.body.clientHeight).toFixed(0));a=Ext.create("Ext.window.Window",{title:a,height:l,width:f,layout:"border",resizable:!0,constrain:!0,maximizable:!0,animateTarget:b,modal:e,listeners:{show:function(m){m.focus()}},items:[d]});null!=b?(a.setIcon(b.icon),a.setIconCls(b.iconCls)):a.setIconCls("extIcon extSee");
a.show()}};n.prototype.showSelect=function(b,a,d,e,f,l){if(this._entity){var m=this;return new Ext.Promise(function(k,h){m._entity.menu={id:$.md5(a),text:a};Ext.isObject(f)||(f={});f.multi=e;h=m._entity.getList(d,f);var g=h.down("[entityList\x3dtrue]");g&&(g.code=$.md5(a),g.operate.autoDetails=!1,g.entitySelect=!0);var p=parseInt((.6*document.body.clientWidth).toFixed(0)),q=parseInt((.7*document.body.clientHeight).toFixed(0)),r=Ext.create("Ext.window.Window",{title:a,height:q,width:p,iconCls:"extIcon extSelect",
layout:"border",resizable:!0,constrain:!0,maximizable:!0,animateTarget:b,items:[h],modal:!0,listeners:{close:function(t,v){c.Base.runCallBack(k)},show:function(t){t.focus()}},buttons:[{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){c.Base.runCallBack(k);r.close()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){c.Base.runCallBack(k,g.getSelection());r.close()}}]});l&&l.add(r);r.show()})}};n.prototype.showDetails=function(b,a){if(this._entity){var d=this;a=c.Store.getEntityDataStore(this._entity,
a);c.Dialog.showWait("\u8bf7\u7a0d\u540e\u2026\u2026");a.load(function(e){c.Dialog.hideWait();0===e.length?Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u672a\u83b7\u5f97\u5230\u8be6\u60c5\u6570\u636e\uff01"):c.Grid.showDetailsWindow(b,d._shortTitle+"\u8be6\u60c5",d._entity,e[0])})}};n.prototype.getRecords=function(b){var a=this;return new Ext.Promise(function(d,e){c.Store.getEntityDataStore(a._entity,b).load(function(f,l,m){d(f)})})};n.prototype.showAdd=function(b,a,d){var e=this,f=this.guessLabelWidth(a);
Ext.isEmpty(d)&&(d={});return new Ext.Promise(function(l,m){var k=Ext.create("Ext.form.FormPanel",{url:"entity/save",cacheKey:e._entity.entityCode,bodyPadding:5,method:"POST",region:"center",fileUpload:!0,autoScroll:!1,border:0,defaults:{labelWidth:f,margin:"5 5 5 5",labelAlign:"right",allowBlankTip:!0,emptyText:"default"},filter:new c.ExtCreateFilter({enable:!0,key:e._entity.entityCode,method:"showAdd"}),layout:"column",listeners:{render:function(p,q){new Ext.util.KeyMap({target:p.getEl(),key:13,
fn:function(r,t){k.submitForm(e._entity).then(function(v){v.success&&(l(v),k.deleteCache(),g.close())})},scope:this})}},extraParams:{},items:c.Entity.wrapConfigs(e._entity,a)});Ext.override(k,d);m=parseInt((.4*document.body.clientWidth).toFixed(0));var h=parseInt((.8*document.body.clientHeight).toFixed(0)),g=Ext.create("Ext.window.Window",{title:"\u6dfb\u52a0"+e._shortTitle,icon:b.icon,iconCls:b.iconCls,width:m,minWidth:200,maxHeight:h,layout:{type:"vbox",align:"stretch"},autoScroll:!0,resizable:!0,
maximizable:!0,constrain:!0,animateTarget:b,items:[k],modal:!0,unpin:!0,listeners:{show:function(p){k.restoreCache();p.focus()}},buttons:[{text:"\u6682\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){k.saveCache()}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){k.form.reset();k.deleteCache()}},{text:"\u6dfb\u52a0",iconCls:"extIcon extOk",handler:function(){k.submitForm(e._entity).then(function(p){p.success&&(k.deleteCache(),g.close(),l(p))})}}]});g.show()})};n.prototype.guessLabelWidth=
function(b){for(var a=0,d=0;d<b.length;d++)a=Math.max(c.Base.guessTextWidth(b[d].fieldLabel),a);return a};return n}();c.SimpleEntity=u})(FastExt||(FastExt={}));var FastEnum;
(function(c){(function(u){u._blank="_blank";u._self="_self";u._parent="_parent";u._top="_top";u.framename="framename"})(c.Target||(c.Target={}));(function(u){u.left="left";u.right="right"})(c.AppendPosition||(c.AppendPosition={}));(function(u){u.sum="sum";u.avg="avg";u.min="min";u.max="max"})(c.ComputeType||(c.ComputeType={}));(function(u){u[u.mouse_right_click=0]="mouse_right_click";u[u.mouse_in_out=1]="mouse_in_out"})(c.HelpEnumType||(c.HelpEnumType={}));(function(u){u.left="left";u.top="top";u.right=
"right";u.bottom="bottom"})(c.TooltipAnchorType||(c.TooltipAnchorType={}));(function(u){u.gridcolumn="gridcolumn";u.button="button";u.menuitem="menuitem"})(c.PowerType||(c.PowerType={}));(function(u){u.rectangle_overlay="rectangle_overlay";u.polygon_overlay="polygon_overlay";u.district_layer="district_layer";u.image_layer="image_layer";u.marker_overlay="marker_overlay"})(c.MapItemType||(c.MapItemType={}))})(FastEnum||(FastEnum={}));
(function(c){var u=function(){function n(){}n.__onLoaded=function(){n.initErrorHandler()};n.geErrorInfo=function(b){return b?b.error&&b.error.stack?b.error.stack:b.stack?b.stack:b.message?b.message:b.reason?b.reason:b.toString():""};n.initErrorHandler=function(){window.addEventListener("error",function(b){try{console.error(b),c.Server.reportException(c.ErrorHandler.geErrorInfo(b))}catch(a){console.error(a)}});window.addEventListener("unhandledrejection",function(b){try{c.Server.reportException(c.ErrorHandler.geErrorInfo(b))}catch(a){console.error(a)}})};
return n}();c.ErrorHandler=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.runObject=function(b,a){if(Ext.isEmpty(a))return a;for(var d=RegExp("\\${([^{}]*)}","g"),e,f=[];e=d.exec(a);)f.push(e[1]);window.RunObject=b;for(b=0;b<f.length;b++)d=f[b],e=eval("RunObject."+d),a=a.replace(new RegExp("\\${"+d+"}","g"),e);return a};n.asyncMethod=function(b,a){return new Ext.Promise(function(d,e){try{if(0<a)setTimeout(function(){var l=c.Eval.evalMethod(b);d(l)},a);else{var f=c.Eval.evalMethod(b);d(f)}}catch(l){d(null),console.error("method:"+
b,l)}})};n.evalMethod=function(b){if(Ext.isObject(b)){var a=eval(b.name);return a.apply(a,b.args)}return Ext.isString(b)?eval(b):null};return n}();c.Eval=u})(FastExt||(FastExt={}));var FastExtend;
(function(c){var u=function(){function n(){}n.__onLoaded=function(){String.prototype.endWith=function(b){return!b||""===b||0===this.length||b.length>this.length?!1:this.substring(this.length-b.length)===b};String.prototype.startWith=function(b){return!b||""===b||0===this.length||b.length>this.length?!1:this.substr(0,b.length)===b};String.prototype.trim=function(b,a){return b?"left"===a||"l"===a?this.replace(new RegExp("^\\"+b+"+","g"),""):"right"===a||"r"===a?this.replace(new RegExp("\\"+b+"+$","g"),
""):this.replace(new RegExp("^\\"+b+"+|\\"+b+"+$","g"),""):this.replace(/^\s+|\s+$/g,"")};String.prototype.firstUpperCase=function(){return this.replace(/^\S/,function(b){return b.toUpperCase()})};String.prototype.truthLength=function(){return this.replace(/[\u0391-\uFFE5]/g,"aa").length};String.prototype.trimAllSymbol=function(){return this.replace(/[ |~|`|!|@|#|\$|%|\^|&|\*|\(|\)|\-|_|\+|=|\||\\|\[|\]|\{|\}|;|:|"|'|,|<|\.|>|\/|\?/\uff0c/\u3002/\uff1b/\uff1a/\u201c/\u201d/\u300b/\u300a/\|/\{/\}/\u3001/!/~/`]/g,
"")};String.prototype.replaceAll=function(b,a){return this.replace(new RegExp(b.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26"),"g"),a)}};return n}();c.StringExtend=u;u=function(){function n(){}n.__onLoaded=function(){Array.prototype.exists=function(b){for(var a=0;a<this.length;a++)if(this[a]===b)return!0;return!1};Array.prototype.pushAt=function(b,a){this.splice(b,0,a)};Array.prototype.remove=function(b){b=this.indexOf(b);0<=b&&this.splice(b,1)}};return n}();c.ArrayExtend=u;u=function(){function n(){this.iframePanel=
!1;this.helpAnchorOffset=-1}n.__onLoaded=function(){Ext.Component.prototype.getEditorMenu=function(){try{return this.up("menu[editorMenu\x3dtrue]")}catch(b){console.error(b)}}};return n}();c.ComponentExtend=u;u=function(){return function(){this.contextMenu=!0;this.entityAddButton=this.entityDeleteButton=this.entityUpdateButton=this.bindDetail=!1}}();c.ButtonExtend=u;u=function(){return function(){this.firstLoadedData=this.menuPanelList=!1;this.showUpdateButton=this.defaultToolBarMore=this.defaultToolBarLink=
this.defaultToolBar=!0}}();c.GridExtend=u;u=function(){function n(){this.extraParams={}}n.__onLoaded=function(){Ext.form.FormPanel.prototype.setFieldValue=function(b,a){(b=this.getForm().findField(b))&&b.setValue(a)};Ext.form.FormPanel.prototype.justSetFieldValue=function(b,a){var d=this.getForm(),e=d.findField(b);e?e.setValue(a):(d.extraParams||(d.extraParams={}),d.extraParams[b]=a)};Ext.form.FormPanel.prototype.getFieldValue=function(b){return(b=this.getForm().findField(b))?b.getValue():null};Ext.form.FormPanel.prototype.getField=
function(b){return this.getForm().findField(b)};Ext.form.FormPanel.prototype.submitForm=function(b,a,d,e,f){var l=this;a||(a={});d||(d="\u6b63\u5728\u63d0\u4ea4\u4e2d\u2026\u2026");Ext.isEmpty(e)&&(e="toast");Ext.isEmpty(f)&&(f=!0);return l.submiting?new Ext.Promise(function(m,k){k({success:!1,message:"\u6570\u636e\u6b63\u5728\u63d0\u4ea4\u4e2d\uff0c\u4e0d\u53ef\u91cd\u590d\u63d0\u4ea4\uff01"})}):new Ext.Promise(function(m,k){k={submitEmptyText:!1,params:a,success:function(g,p){l.submiting=!1;FastExt.Dialog.hideWait();
"alert"===e?Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",p.result.message,function(q){"ok"===q&&m(p.result)}):("toast"===e&&FastExt.Dialog.toast(p.result.message),m(p.result))},failure:function(g,p){l.submiting=!1;FastExt.Dialog.hideWait();f&&p.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",p.result.message)}};b&&(k.params.entityCode=b.entityCode,b.menu&&(k.params.menu=FastExt.Store.getStoreMenuText({entity:b})));var h=l.getForm();h.isValid()?(l.submiting=!0,FastExt.Dialog.showWait(d),h.submit(k)):
l.submiting=!1})};Ext.form.FormPanel.prototype.saveCache=function(b){Ext.isEmpty(b)&&(b=this.cacheKey);var a={};this.getForm().getFields().each(function(d,e){Ext.isDate(d.getValue())?a[d.getName()]=Ext.Date.format(d.getValue(),d.format):a[d.getName()]=d.getValue()});b={configKey:b,configType:"FormPanelCache",configValue:Ext.encode(a)};FastExt.Dialog.showWait("\u6682\u5b58\u6570\u636e\u4e2d\u2026\u2026");$.post(FastExt.Server.saveExtConfigUrl(),b,function(d){FastExt.Dialog.hideWait();d.success?FastExt.Dialog.toast("\u6682\u5b58\u6210\u529f\uff01"):
FastExt.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",d.message)})};Ext.form.FormPanel.prototype.restoreCache=function(b){Ext.isEmpty(b)&&(b=this.cacheKey);var a=this;b={configKey:b,configType:"FormPanelCache"};$.post(FastExt.Server.showExtConfigUrl(),b,function(d){if(d.success){var e=Ext.decode(d.data.configValue);a.getForm().getFields().each(function(f,l){e.hasOwnProperty(f.getName())&&f.setValue(e[f.getName()])})}})};Ext.form.FormPanel.prototype.deleteCache=function(b){Ext.isEmpty(b)&&(b=this.cacheKey);
b={configKey:b,configType:"FormPanelCache"};$.post(FastExt.Server.deleteExtConfigUrl(),b,function(a){})}};return n}();c.FormPanelExtend=u;u=function(){return function(){this.multiple=!1}}();c.FileFieldExtend=u;u=function(){function n(){this.fromHeadSearch=!1;this.extraParams={};this.multiSplit=null}n.__onLoaded=function(){Ext.form.field.Base.prototype.blur=function(){try{this.inputEl&&this.inputEl.blur()}catch(b){console.error(b)}};Ext.form.field.Base.prototype.addTriggers=function(b){try{if(Ext.isFunction(this.getTriggers)&&
Ext.isFunction(this.setTriggers)){var a=this.getTriggers();a?this.setTriggers(FastExt.Json.mergeJson(a,b)):this.setTriggers(b)}}catch(d){console.error(d)}}};return n}();c.FieldExtend=u;u=function(){return function(){this.useHistory=!1;this.comment=""}}();c.TextFieldExtend=u;u=function(){return function(){this.searchable=!1}}();c.ComboBoxFieldExtend=u;u=function(){return function(){this.excelHeader=this.excelOutHeader=this.search=!0;this.comment=""}}();c.ColumnExtend=u;u=function(){return function(){this.holdShow=
!1}}();c.MenuExtend=u;u=function(){return function(){this.actionTimer=this.actionCopy=this.actionDeleteAll=!0}}();c.EntityExtend=u})(FastExtend||(FastExtend={}));
(function(c){var u=function(){function n(){}n.formatLength=function(b){return 1024>b?b+"B":1048576>b?(b/1024).toFixed(2)+"KB":(b/1024/1024).toFixed(2)+"M"};n.isSuffixFile=function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];d=b.substring(b.lastIndexOf("/")+1).toString().toLowerCase();for(var e=0;e<a.length;e++){var f=a[e].replace(".","").toLowerCase();if(d.endWith("."+f)||d.startWith(f+"-"))return!0}return!1};n.officeViewer=function(b,a){if(a)a=c.Form.buildForm("officeViewer",{url:b},
FastEnum.Target._blank),a.submit(),$(a).remove();else{a=parseInt((.8*document.body.clientWidth).toFixed(0));var d=parseInt((.9*document.body.clientHeight).toFixed(0)),e="officeViewerLoadDone"+(new Date).getTime(),f=Ext.create("Ext.container.Container",{layout:"border",region:"center",border:0,iframePanel:!0,listeners:{afterrender:function(l,m){this.setLoading("\u6b63\u5728\u8bfb\u53d6\u6587\u6863\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");var k=this;c.Server.saveCache(b,function(h,g,p){h?k.update("\x3ciframe onload\x3d'"+
e+"()' src\x3d'officeViewer?cache\x3d"+p+"'  width\x3d'100%' height\x3d'100%' frameborder\x3d'0'\x3e"):(c.Dialog.hideWait(),c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",g))})}}});window[e]=function(){f.setLoading(!1)};Ext.create("Ext.window.Window",{title:"\u9884\u89c8\u6587\u6863",iconCls:"extIcon extSee",maximizable:!0,height:d,width:a,minHeight:500,minWidth:600,resizable:!0,layout:"fit",items:[f],constrain:!0,justTop:!0,listeners:{close:function(){window[e]=null}}}).show()}};n.uploadFile=function(b,
a,d,e){return new Ext.Promise(function(f,l){l="\u4e0a\u4f20\u6587\u4ef6";var m="files",k=-1,h=-1,g="file";if(c.FileModule.validate(a,"fileModules")){1===a.length&&(l="\u4e0a\u4f20"+a[0].tipMsg,m=a[0].type,k=a[0].width,h=a[0].height);Ext.isEmpty(e)&&(e=!0);b&&(b.name&&(g=b.name),b.dataIndex&&(g=b.dataIndex));var p=Ext.create("Ext.form.FormPanel",{url:"upload",method:"POST",bodyPadding:5,fileUpload:!0,width:400,callBacked:!1,border:0,layout:"column",items:[{xtype:"filefield",fieldLabel:l,labelWidth:60,
labelAlign:"right",buttonText:"\u9009\u62e9\u6587\u4ef6",allowBlank:!1,name:g,multiple:d,columnWidth:1,listeners:{change:function(t,v,w){if(null!=v&&0!==v.length){t="";for(w=0;w<a.length;w++){var z=a[w];if(z.match(v)){p.doSubmit();return}t=t+"\u6216"+z.tipMsg}p.form&&p.form.reset();Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u4e0a\u4f20\u6709\u6548\u7684"+t.substring(1))}}}},{xtype:"hiddenfield",name:"type",value:m},{xtype:"hiddenfield",name:"file.width",value:k},{xtype:"hiddenfield",name:"file.height",
value:h}],doSubmit:function(){var t=p.form;if(t.isValid()){var v=new Ext.LoadMask({msg:"\u6b63\u5728\u4e0a\u4f20\u9644\u4ef6\u4e2d\u2026",target:r});v.show();var w=function(){t.submit({success:function(x,y){c.Dialog.toast("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01");f.called||(f.called=!0,f(y.result.data));r.close()},failure:function(x,y){v.destroy();y.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4e0a\u4f20\u5931\u8d25\uff01"+y.result.message)}})},z=function(x){if(x>=a.length)w();else{var y=
a[x];Ext.isFunction(y.onFileSelect)?y.onFileSelect(p.getForm().findField(g)).then(function(A){Ext.isEmpty(A)?z(x+1):(v.destroy(),p.form&&p.form.reset(),Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",A))}):z(x+1)}};z(0)}},listeners:{render:function(t){try{new Ext.util.KeyMap({target:t.getEl(),key:13,fn:p.doSubmit,scope:Ext.getBody()})}catch(v){console.error(v)}}}}),q="btnSubmit"+(new Date).getTime(),r=Ext.create("Ext.window.Window",{title:l,layout:"fit",resizable:!1,scrollable:!1,width:500,items:p,modal:!0,
iconCls:"extIcon extUpload",animateTarget:b,constrain:!0,toFrontOnShow:!0,buttons:[{text:"\u4f7f\u7528\u5730\u5740",iconCls:"extIcon extEdit",hidden:!e,handler:function(){Ext.Msg.prompt("\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u6587\u4ef6\u5730\u5740","\u586b\u5199\u81ea\u5b9a\u4e49\u7684\u6587\u4ef6\u8def\u5f84\uff08http\uff09\uff1a",function(t,v){"ok"!==t||Ext.isEmpty(v)||(f.called||(f.called=!0,t=v.split("@"),v={url:t[0]},1<t.length&&(v.name=t[1]),2<t.length&&(v.length=t[t.length-1]),f(v)),r.close())})}},
{text:"\u7f51\u7edc\u540c\u6b65",iconCls:"extIcon extLink",handler:function(){Ext.Msg.prompt("\u4ece\u7f51\u7edc\u4e2d\u4e0b\u8f7d\u6587\u4ef6","\u586b\u5199\u7f51\u7edc\u6587\u4ef6\u8def\u5f84\uff08http\uff09\uff1a",function(t,v){"ok"===t&&(c.Dialog.showWait("\u6b63\u5728\u540c\u6b65\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026"),t={url:v,__accept:"application/json"},$.post(c.Server.uploadUrl(),t,function(w){c.Dialog.hideWait();w.success?(c.Dialog.toast("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01"),
f.called||(f.called=!0,f(w.data)),r.close()):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4e0a\u4f20\u5931\u8d25\uff01"+w.message)}))})}},"-\x3e",{text:"\u91cd\u7f6e",width:88,iconCls:"extIcon extReset",handler:function(){p.form&&p.form.reset()}},{text:"\u4e0a\u4f20",width:88,id:q,iconCls:"extIcon extOk",handler:function(){p.doSubmit()}}],listeners:{show:function(t,v){p.getForm().findField(g).fileInputEl.dom.click();Ext.getCmp(q).focus()},close:function(t,v){f.called||(f.called=!0,f())}}});r.show()}})};
n.showFiles=function(b,a,d,e,f,l,m,k){if(c.FileModule.validate(d,"fileModules")){var h=!0;b&&Ext.isFunction(b.blur)&&(b.blur(),h=c.Base.toBool(b.autoFileName,!0));var g=[],p=c.Renders.file();1===d.length?(p=eval(d[0].renderer),f||(f=d[0].tipMsg+l?"\u67e5\u770b":"\u7ba1\u7406")):f||(f="\u9644\u4ef6\u7ba1\u7406");if(!Ext.isEmpty(e)){var q=e;Ext.isString(e)&&(q=Ext.JSON.decode(e));for(e=0;e<q.length;e++){var r=q[e],t=r.split("@"),v=t[0];v=v.substring(v.lastIndexOf("/")+1);var w=-1;1<t.length&&(v=t[1]);
2<t.length&&(w=t[2]);g.push({url:r,name:v,length:w})}}q=[];q.push({header:"\u6587\u4ef6",dataIndex:"url",flex:1,align:"center",renderer:p});if(b.showFileName||m)q.push({header:"\u6587\u4ef6\u540d",dataIndex:"name",width:150,align:"center",field:l?null:{xtype:"textfield",listeners:{change:function(){x.modify=!0}}},renderer:c.Renders.normal()}),(b.showFileLength||k)&&q.push({header:"\u5927\u5c0f",dataIndex:"length",width:100,align:"center",field:l?null:{xtype:"numberfield",listeners:{change:function(){x.modify=
!0}}},renderer:c.Renders.fileSize()});q.push({xtype:"rowplaceholder",minWidth:30});var z=Ext.now(),x=Ext.create("Ext.data.Store",{autoLoad:!0,data:g}),y=Ext.create("Ext.grid.Panel",{selModel:c.Grid.getGridSelModel(),store:x,columnLines:!0,cellTip:!0,border:0,columns:q,plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2})],selType:"cellmodel",tbar:l?null:[{xtype:"button",text:"\u5220\u9664",id:"btnDeleteFile"+z,iconCls:"extIcon extDelete",disabled:!0,handler:function(){var B=y.getSelectionModel().getSelection();
0===B.length?c.Dialog.toast("\u8bf7\u60a8\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6\uff01"):Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u60a8\u786e\u5b9a\u7acb\u5373\u5220\u9664\u9009\u4e2d\u7684\u9644\u4ef6\u5417\uff1f",function(C,H){if("yes"===C){var I={};Ext.Array.each(B,function(D,E){I["path["+E+"]"]=D.get("url")});c.Dialog.showWait("\u6b63\u5728\u5220\u9664\u4e2d\u2026\u2026");c.Server.deleteAttach(I,function(D,E){c.Dialog.hideWait();D?(y.getSelectionModel().deselectAll(),c.Dialog.toast("\u5220\u9664\u6210\u529f\uff01"),
Ext.Array.each(B,function(F,G){x.remove(F);x.modify=!0})):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",E)})}})}},{xtype:"button",text:"\u4e0a\u4f20",iconCls:"extIcon extUpload",handler:function(){c.File.uploadFile(this,d,!0).then(function(B){if(B){if(Ext.isArray(B))for(var C=0;C<B.length;C++)h||(B[C].name=""),x.add(B[C]);else h||(B.name=""),x.add(B);x.modify=!0}})}}],listeners:{selectionchange:function(){var B=this.getSelectionModel().getSelection(),C=Ext.getCmp("btnDeleteFile"+z);C&&C.setDisabled(!(0<
B.length))}}}),A=Ext.create("Ext.window.Window",{title:f,height:400,width:500,minWidth:400,minHeight:300,layout:"fit",resizable:!0,modal:!0,constrain:!0,iconCls:"extIcon extFolder",animateTarget:b,items:[y],buttons:l?null:[{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){var B=[],C=!1;x.each(function(H,I){var D=H.get("url");if(b.showFileName){D=D+"@"+H.get("name");if(Ext.isEmpty(H.get("name")))return c.Dialog.toast("\u7b2c"+(I+1)+"\u6761\u9644\u4ef6\uff0c\u8bf7\u7f16\u8f91\u6587\u4ef6\u540d\uff01"),
C=!0,c.Component.shakeComment(A),!1;if(b.showFileLength&&(D=D+"@"+H.get("length"),Ext.isEmpty(H.get("length"))))return c.Dialog.toast("\u7b2c"+(I+1)+"\u6761\u9644\u4ef6\uff0c\u8bf7\u7f16\u8f91\u6587\u4ef6\u5927\u5c0f\uff01"),C=!0,c.Component.shakeComment(A),!1}B.push(D)});C||(null!=a&&a(Ext.encode(B)),A.close())}}],listeners:{close:function(){}}});A.show()}};return n}();c.File=u;u=function(){function n(){}n.validate=function(b,a){return Ext.isEmpty(b)?(c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",
"\u53c2\u6570"+a+"\u5fc5\u4f20\uff01"),!1):Ext.isArray(b)?0===b?(c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u53c2\u6570"+a+"\u96c6\u5408\u4e0d\u53ef\u4e3a\u7a7a\uff01"),!1):!0:(c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u53c2\u6570"+a+"\u5fc5\u9700Array\u683c\u5f0f\uff01"),!1)};n.file=function(){return{tipMsg:"\u6587\u4ef6",type:"file",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if((new RegExp(/\.*$/i)).test(b[a]))return!0;
return!1}}};n.image=function(b,a){Ext.isEmpty(b)&&(b=-1);Ext.isEmpty(a)&&(a=-1);return{width:b,height:a,tipMsg:"\u56fe\u7247",type:"images",renderer:"FastExt.Renders.image(24)",match:function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];for(e=0;e<d.length;e++)if(c.File.isSuffixFile(d[e],"jpg","png","gif","jpeg","svg","bmp","webp"))return!0;return!1}}};n.mp4=function(b){return{tipMsg:"mp4",type:"videos",maxDuration:b,onFileSelect:function(a){var d=this;Ext.isEmpty(a.extra)&&(a.extra=
{});return new Ext.Promise(function(e,f){if(Ext.isEmpty(d.maxDuration))e();else{f=URL.createObjectURL(a.fileInputEl.dom.files[0]);var l=new Audio(f);l.addEventListener("loadedmetadata",function(m){a.extra.duration=l.duration;1E3*l.duration>parseInt(d.maxDuration)?e("\u89c6\u9891\u6700\u5927\u65f6\u957f\u4e0d\u5f97\u8d85\u8fc7"+d.maxDuration/1E3+"\u79d2\uff01"):e()})}})},renderer:"FastExt.Renders.file()",match:function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];for(d=0;d<a.length;d++)if(c.File.isSuffixFile(a[d],
"mp4"))return!0;return!1}}};n.mp3=function(){return{tipMsg:"mp3",type:"music",renderer:"FastExt.Renders.file()",onFileSelect:function(b){Ext.isEmpty(b.extra)&&(b.extra={});return new Ext.Promise(function(a,d){d=URL.createObjectURL(b.fileInputEl.dom.files[0]);var e=new Audio(d);e.addEventListener("loadedmetadata",function(f){b.extra.duration=e.duration;a()})})},match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"mp3"))return!0;
return!1}}};n.word=function(){return{tipMsg:"word\u6587\u6863",type:"words",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"doc","docx"))return!0;return!1}}};n.excel=function(){return{tipMsg:"excel\u6587\u6863",type:"excels",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"xls",
"xlsx"))return!0;return!1}}};n.ppt=function(){return{tipMsg:"ppt\u6587\u6863",type:"ppt",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"ppt","pptx"))return!0;return!1}}};n.pdf=function(){return{tipMsg:"pdf\u6587\u6863",type:"pdf",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],
"pdf"))return!0;return!1}}};n.zip=function(){return{tipMsg:"zip\u538b\u7f29\u5305",type:"zip",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"zip","rar"))return!0;return!1}}};n.text=function(){return{tipMsg:"txt\u6587\u6863",type:"txt",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],
"txt"))return!0;return!1}}};n.data=function(){return{tipMsg:"\u6570\u636e\u6587\u4ef6",type:"data",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"data"))return!0;return!1}}};n.json=function(){return{tipMsg:"JSON\u6587\u4ef6",type:"json",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],
"json"))return!0;return!1}}};n.apk=function(){return{tipMsg:"\u5b89\u5353\u5b89\u88c5\u5305\uff08APK\uff09",type:"apk",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"apk"))return!0;return!1}}};n.ipa=function(){return{tipMsg:"\u82f9\u679c\u5b89\u88c5\u5305\uff08IPA\uff09",type:"ipa",renderer:"FastExt.Renders.file()",match:function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];
for(a=0;a<b.length;a++)if(c.File.isSuffixFile(b[a],"ipa"))return!0;return!1}}};return n}();c.FileModule=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getFieldMinHeight=function(b){Ext.isEmpty(b)&&(b=!1);return b?34:32};n.asyncForm=function(b,a){return new Ext.Promise(function(d){var e=c.Form.buildForm(b,a);e.submit();$(e).remove();d()})};n.buildForm=function(b,a,d){Ext.isEmpty(d)&&(d=FastEnum.Target._self);var e=$("\x3cform\x3e\x3c/form\x3e");e.attr("action",b);e.attr("method","post");e.attr("target",d);for(var f in a)b=$("\x3cinput type\x3d'text' name\x3d'"+f+"' /\x3e"),b.attr("value",a[f]),e.append(b);
$(document.body).append(e);return e};n.isDateField=function(b){return b?"datefield"===b||"datefield"===b.xtype:!1};n.isNumberField=function(b){return b?"numberfield"===b||"numberfield"===b.xtype:!1};n.isTextField=function(b){return b?"textfield"===b||"textfield"===b.xtype:!1};n.isComboField=function(b){return b?"combobox"===b||"combo"===b.xtype:!1};n.isFileField=function(b){return b?"fastfile"===b||"fastfile"===b.xtype||"fastfilefield"===b||"fastfilefield"===b.xtype:!1};n.isFilesField=function(b){return b?
"fastfiles"===b||"fastfiles"===b.xtype||"fastfilesfield"===b||"fastfilesfield"===b.xtype:!1};n.isEnumField=function(b){return b?"enumcombo"===b||"enumcombobox"===b||"enumcombo"===b.xtype||"enumcombobox"===b.xtype:!1};n.isContentField=function(b){return b?"contentfield"===b||"content"===b||"contentfield"===b.xtype||"content"===b.xtype:!1};n.isHtmlContentField=function(b){return b?"htmlcontentfield"===b||"htmlcontent"===b||"htmlcontentfield"===b.xtype||"htmlcontent"===b.xtype:!1};n.isMonacoEditorField=
function(b){return b?"fastmonacofield"===b||"fastmonaco"===b||"fastmonacofield"===b.xtype||"fastmonaco"===b.xtype:!1};n.isLinkField=function(b){return b?"linkfield"===b||"link"===b||"linkfield"===b.xtype||"link"===b.xtype:!1};n.isTargetField=function(b){return b?"targetfield"===b||"target"===b||"targetfield"===b.xtype||"target"===b.xtype:!1};n.isPCAField=function(b){return b?"pcafield"===b||"pca"===b||"pcafield"===b.xtype||"pca"===b.xtype:!1};n.isMapField=function(b){return b?"mapfield"===b||"map"===
b||"mapfield"===b.xtype||"map"===b.xtype:!1};n.getFieldError=function(b){var a=b.getErrors();0===a.length&&(a=[b.invalidText]);Ext.isEmpty(a[0])&&(a[0]="\u6570\u636e\u9519\u8bef\uff01");return a};n.showJsonForm=function(b,a,d,e,f){Ext.isEmpty(f)&&(f=!0);Ext.isString(d)&&(d=c.Json.jsonToObject(d));Ext.isEmpty(e)&&(e="[]");Ext.isString(e)&&(e=c.Json.jsonToObject(e));return new Ext.Promise(function(l,m){m=[];for(var k=0,h=d;k<h.length;k++){for(var g=h[k],p=0,q=e;p<q.length;p++){var r=q[p];r.name===g.name&&
(g=c.Json.mergeJson(g,r))}p=c.Json.mergeJson({xtype:"textfield",columnWidth:1,allowBlank:!1},g);p.source=g;m.push(p)}var t=Ext.create("Ext.form.FormPanel",{bodyPadding:5,cacheKey:$.md5(a),region:"center",border:0,autoScroll:!0,defaults:{labelWidth:100,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199",flex:1},layout:{type:"vbox",pack:"start",align:"stretch"},doReturn:function(){if(this.getForm().isValid()){var w=[];this.getForm().getFields().each(function(z){var x=z.source;x.value=
z.getValue();w.push(x)});l(w);return!0}return!1},listeners:{render:function(w,z){new Ext.util.KeyMap({target:w.getEl(),key:13,fn:function(x,y){t.doReturn()&&(t.deleteCache(),v.close())},scope:this})}},items:m}),v=Ext.create("Ext.window.Window",{title:a,icon:b.icon,iconCls:b.iconCls,animateTarget:b,width:550,minWidth:200,autoScroll:!0,layout:{type:"vbox",pack:"start",align:"stretch"},resizable:!0,maximizable:!0,constrain:!0,items:[t],modal:f,listeners:{show:function(w){t.restoreCache();w.focus()}},
buttons:[{text:"\u6682\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){t.saveCache()}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){t.form&&t.form.reset();t.deleteCache()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){t.doReturn()&&(t.deleteCache(),v.close())}}]});v.show()})};return n}();c.Form=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.onFastAfterTabActive=function(){try{(this.operate.refreshData||c.System.ConfigHandler.isGridRefreshData())&&this.getStore().reload()}catch(b){console.error(b)}};n.onFastViewRead=function(b,a){b.getHeaderContainer().sortOnClick=!1};n.onFastBeforeDestroy=function(){c.Base.toBool(this.destroySaveUI,!0)&&this.saveUIConfig(!1);this.hideEmptyTip()};n.onFastColumnMove=function(b,a,d,e,f){a.groupHeaderText=a.isSubHeader?a.ownerCt.text:null;this.saveUIConfig(!0)};
n.onFastColumnResize=function(b,a,d,e){this.sortOnClick=!1;this.saveUIConfig(!0)};n.onFastColumnsChanged=function(b,a){b.sortOnClick=!1;this.saveUIConfig(!0)};n.onFastHeaderTriggerClick=function(b,a,d,e,f){Ext.isEmpty(a.dataIndex)||this.fromRecycle||(b.sortOnClick=!1,b.triggerColumn=a)};n.onFastHeaderContextMenu=function(b,a,d,e,f){Ext.isEmpty(a.dataIndex)||this.fromRecycle||(b.sortOnClick=!1,b.onHeaderTriggerClick(a,d,a.triggerEl))};n.onFastHeaderMenuCreate=function(b,a,d,e){this.columnHeadMenu=
a;c.Grid.configGridHeadMenu(this)};n.onFastHeaderClick=function(b,a,d,e,f){if(!Ext.isEmpty(a.dataIndex)&&(b.sortOnClick=!1,!c.Grid.showColumnSearchMenu(a)))b.onHeaderTriggerClick(a,d,a.triggerEl)};n.onFastSortChange=function(b,a,d,e){Ext.isEmpty(a.dataIndex)||(a.sortDirection=d,c.Grid.refreshColumnStyle(a),this.saveUIConfig(!0))};n.onFastCellContextMenu=function(b,a,d,e,f,l,m,k){!Ext.isEmpty(m.position.column.dataIndex)&&!this.fromRecycle&&Ext.isObject(this.contextMenu)&&0<this.contextMenu.items.length&&
(this.contextMenu.cellIndex=d,this.contextMenu.record=e,this.contextMenu.rowIndex=l,this.contextMenu.cellTd=a,this.contextMenu.tr=f,this.contextMenu.cellContext=m.position,b.getSelectionModel().select(e),b.fireEvent("selectionchange",b,e,k),c.Menu.fireMenuEvent(this.contextMenu,"onBeforeShow"),c.Menu.refreshItem(this.contextMenu),this.contextMenu.showAt(m.getXY()))};n.onFastCellDblclick=function(){this.doEdit=!0};n.onFastBeforeEdit=function(b,a,d){if(!this.checkEditor())return c.Dialog.toast("\u65e0\u7f16\u8f91\u6743\u9650\uff08E-1\uff09\uff01"),
!1;if(!c.Base.toBool(this.doEdit,!0))return!1;this.doEdit=!1;if(!c.Base.toBool(a.column.editable,!0))return c.Dialog.toast("\u65e0\u7f16\u8f91\u6743\u9650\uff08E-2\uff09\uff01"),!1;if(a.column.hasListener("beforeedit")&&!a.column.fireEvent("beforeedit",a))return!1;b=a.column.field;if(!b)return c.Dialog.toast("\u65e0\u7f16\u8f91\u6743\u9650\uff08E-3\uff09\uff01"),!1;d=Ext.get(a.cell);b.labelTitle=a.column.text;b.record=a.record;b.fromColumn=!0;b.height=c.Grid.getRowMinHeight();if(b.hasListener("beforeedit")&&
!b.fireEvent("beforeedit",b)||!c.Listeners.getFire().onBeforeEditorField(b,a.record))return!1;Ext.isFunction(b.setValue)&&!c.Base.toBool(a.column.password,!1)&&(Ext.isObject(a.value)||Ext.isArray(a.value)?b.setValue(JSON.stringify(a.value),a.record):b.setValue(a.value,a.record));Ext.isFunction(b.startEdit)&&b.startEdit();if(Ext.isFunction(b.showWindow))return b.showWindow(d,function(f){Ext.isEmpty(a.value)&&Ext.isEmpty(f.getValue())||c.Store.setRecordValue(a.record,a.field,f)}),!1;a.column.editMenu||
(a.column.editMenu=Ext.create("Ext.menu.Menu",{modal:!0,layout:"fit",showSeparator:!1,shadow:!1,editorMenu:!0,items:[{xtype:"container",layout:"fit",width:d.getWidth(),height:d.getHeight(),style:{background:"#ffffff",borderWidth:1,borderColor:"#ffffff",color:"#eeeee"},border:0,items:[b]}],listeners:{show:function(f,l){f.items.get(0).items.get(0).focus();try{new Ext.util.KeyMap({target:f.getEl(),key:13,fn:function(m,k){f.hide()},scope:this})}catch(m){console.error(m)}},beforehide:function(f,l){l=f.items.get(0).items.get(0);
return l.isValid()?!0:(l=c.Form.getFieldError(l),c.Dialog.toast(l[0]),c.Component.shakeComment(f,function(){f.holdShow=!1}),f.holdShow=!0,!1)},hide:function(f,l){f.context&&(l=f.items.get(0).items.get(0))&&((Ext.isEmpty(f.context.value)||c.Base.toBool(f.context.column.password,!1))&&Ext.isEmpty(l.getValue())?Ext.isFunction(l.endEdit)&&l.endEdit():(c.Store.setRecordValue(f.context.record,f.context.field,l),Ext.isFunction(l.endEdit)&&l.endEdit(),l.setValue(null)))}}}),a.column.editMenu.addCls("edit-menu"));
var e=0;Ext.isFunction(b.getTriggers)&&(e=b.getTriggers()?Object.keys(b.getTriggers()).length:0);a.column.editMenu.setWidth(Math.max(a.column.getWidth(),120+30*e));a.column.editMenu.setHeight(c.Grid.getRowMinHeight());a.column.editMenu.context=a;a.column.editMenu.showBy(d,"tl");return!1};n.onFastSelectionChange=function(b,a,d){try{a&&!this.fromStoreChange&&Ext.isFunction(this.recordSelect)&&this.recordSelect(),Ext.isFunction(this.refreshSelect)&&this.refreshSelect(),Ext.isFunction(this.refreshDetailsPanel)&&
this.refreshDetailsPanel(),Ext.isFunction(this.refreshToolPaging)&&this.refreshToolPaging()}catch(e){c.Dialog.showException(e,"\u6309\u94ae\u9009\u4e2d\u68c0\u6d4b\uff01[selectionchange]")}};n.onFastStoreEndUpdate=function(){try{var b=this;if(!b.getStore()||b.getStore().holdUpdate)return!0;var a=b.getStore().getUpdatedRecords();Ext.each(b.updateButtons,function(d,e){d.setDisabled(0===a.length)});b.operate&&b.operate.autoUpdate&&(b.setLoading("\u63d0\u4ea4\u6570\u636e\u4e2d\u2026\u2026"),c.Store.commitStoreUpdate(b.getStore()).then(function(){b.setLoading(!1)}))}catch(d){c.Dialog.showException(d,
"endupdate")}};n.onFastStoreDataChanged=function(){this.fireLoadResotreSelect&&this.restoreSelect();this.showEmptyTip()};n.onFastStoreLoad=function(){this.fireLoadResotreSelect||(this.fireLoadResotreSelect=!0,this.restoreSelect())};n.onFastStoreBeforeLoad=function(){this.hideEmptyTip()};n.onFastHeadMenuBeforeShow=function(b){var a=this;c.Grid.hasColumnField(b.activeHeader)||(b.activeHeader.batchUpdate=!1,b.activeHeader.operation=!1,b.activeHeader.searchLink=!1,b.activeHeader.batchRandom=!1);if(c.Grid.isFilesColumn(b.activeHeader)||
c.Grid.isFileColumn(b.activeHeader)||c.Grid.isLinkColumn(b.activeHeader)||c.Grid.isMapColumn(b.activeHeader)||c.Grid.isTargetColumn(b.activeHeader)||c.Grid.isPCAColumn(b.activeHeader))b.activeHeader.batchRandom=!1;c.Grid.isContentColumn(b.activeHeader)&&(b.activeHeader.searchLink=!1);if(!b.configHeadMenu){b.configHeadMenu=!0;var d=[];Ext.isEmpty(b.activeHeader.comment)||d.push({text:"\u67e5\u770b\u8bf4\u660e",iconCls:"extIcon extQuestion2",onBeforeShow:function(){Ext.isEmpty(b.activeHeader.comment)?
this.hide():this.show()},handler:function(){c.Dialog.showHtml(this,"\u67e5\u770b\u3010"+b.activeHeader.text+"\u3011\u7684\u8bf4\u660e",b.activeHeader.comment,!1)}});c.Menu.isSplitLineLast(d)||d.push("-");c.Base.toBool(a.columnMenu.lookField,!0)&&c.System.ManagerHandler.isSuperRole()&&d.push({text:"\u67e5\u770b\u5217\u4fe1\u606f",iconCls:"extIcon extField",onBeforeShow:function(){c.Base.toBool(b.activeHeader.lookField,!0)?this.show():this.hide()},handler:function(){var f={name:b.activeHeader.dataIndex,
text:b.activeHeader.text,width:b.activeHeader.getWidth()};c.Json.toFormatJsonHtml(c.Json.objectToJson(f),!1,function(l){c.Dialog.showAlert("\u67e5\u770b\u5217\u4fe1\u606f",l)})}});c.System.ManagerHandler.isSuperRole()&&c.System.ConfigHandler.isDebug()&&!c.Base.toBool(a.entitySelect,!1)&&d.push({text:"\u67e5\u770b\u5217\u7f16\u8f91\u5668",iconCls:"extIcon extField",handler:function(){c.Json.toFormatJsonHtml(c.Json.objectToJson(b.activeHeader.configField),!1,function(f){c.Dialog.showAlert("\u67e5\u770b\u5217\u7f16\u8f91\u5668",
f)})}});c.Menu.isSplitLineLast(d)||d.push("-");var e={text:"\u6570\u636e\u4fee\u6539",iconCls:"extIcon extEdit grayColor",menu:[]};c.Base.toBool(a.columnMenu.batchUpdate,!0)&&e.menu.push({text:"\u6279\u91cf\u4fee\u6539\u5f53\u524d\u9875\u9762\u6570\u636e",iconCls:"extIcon extEdit",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkEditor()?c.Base.toBool(b.activeHeader.editable,!0)?c.Base.toBool(b.activeHeader.batchUpdate,!0)?this.show():this.hide():this.hide():this.hide()},handler:function(){c.Grid.showBatchEditColumnMenu(b.activeHeader)}});
c.Base.toBool(a.columnMenu.batchUpdateDB,!0)&&e.menu.push({text:"\u6279\u91cf\u66f4\u65b0\u5f53\u524d\u6240\u6709\u6570\u636e",iconCls:"extIcon extEdit",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkEditor()?c.Base.toBool(b.activeHeader.editable,!0)?c.Base.toBool(b.activeHeader.batchUpdateDB,!0)?this.show():this.hide():this.hide():this.hide()},handler:function(){c.Grid.showBatchUpdateColumnWindow(b.activeHeader)}});c.Base.toBool(a.columnMenu.batchReplaceDB,!0)&&e.menu.push({text:"\u6279\u91cf\u66ff\u6362\u5f53\u524d\u6240\u6709\u6570\u636e",
iconCls:"extIcon extEdit",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkEditor()?c.Base.toBool(b.activeHeader.editable,!0)?c.Base.toBool(b.activeHeader.batchReplaceDB,!0)?this.show():this.hide():this.hide():this.hide()},handler:function(){c.Grid.showBatchReplaceColumnWindow(b.activeHeader)}});0<e.menu.length&&d.push(e);e={text:"\u6570\u636e\u6e05\u9664",iconCls:"extIcon extClear grayColor",menu:[]};c.Base.toBool(b.activeHeader.batchClear,!0)&&e.menu.push({text:"\u6e05\u9664\u65e0\u6548\u6570\u636e",
iconCls:"extIcon extClear grayColor",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkDelete()?c.Base.toBool(b.activeHeader.batchClear,!0)?this.show():this.hide():this.hide()},handler:function(){c.Dialog.showDeleteDataAlert("\u6e05\u9664\u65e0\u6548\u6570\u636e","\u5c06\u6e05\u9664\u5c5e\u6027\u3010"+b.activeHeader.configText+"\u3011\u5728\u3010\u5f53\u524d\u5f53\u524d\u6761\u4ef6\u3011\u4e0b\u4e3a\u7a7a\u7684\u6240\u6709\u65e0\u6548\u6570\u636e\uff01\u8bf7\u60a8\u786e\u5b9a\u64cd\u4f5c\uff01",
function(){c.Dialog.showWait("\u6b63\u5728\u6e05\u9664\u6570\u636e\u4e2d\u2026\u2026");var f=c.Grid.getColumnGrid(b.activeHeader);f={entityCode:f.getStore().entity.entityCode,field:b.activeHeader.dataIndex,menu:c.Store.getStoreMenuText(f.getStore()),storeId:f.getStore().getStoreCode()};c.Server.clearEntity(f,function(l,m){c.Dialog.hideWait();l&&c.Grid.getColumnGrid(b.activeHeader).getStore().loadPage(1);c.Dialog.showAlert("\u6e05\u7406\u7ed3\u679c",m)})},"\u6e05\u9664")}});c.Base.toBool(b.activeHeader.batchClearRepeat,
!0)&&(e.menu.push({text:"\u6e05\u9664\u91cd\u590d\u6570\u636e-\u4fdd\u7559\u6700\u65b0",iconCls:"extIcon extDelRepeat grayColor",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkDelete()?c.Base.toBool(b.activeHeader.batchClearRepeat,!0)?this.show():this.hide():this.hide()},handler:function(){c.Dialog.showDeleteDataAlert("\u6e05\u9664\u91cd\u590d\u6570\u636e-\u4fdd\u7559\u6700\u65b0","\u5c06\u6e05\u9664\u5c5e\u6027\u3010"+b.activeHeader.configText+"\u3011\u5728\u3010\u5f53\u524d\u5f53\u524d\u6761\u4ef6\u3011\u4e0b\u91cd\u590d\u7684\u6570\u636e\uff0c\u5e76\u4fdd\u7559\u6700\u65b0\u7684\u4e00\u6761\u6570\u636e\uff01\u8bf7\u60a8\u786e\u5b9a\u64cd\u4f5c\uff01",
function(){c.Dialog.showWait("\u6b63\u5728\u6e05\u9664\u6570\u636e\u4e2d\u2026\u2026");var f=c.Grid.getColumnGrid(b.activeHeader);f={entityCode:f.getStore().entity.entityCode,field:b.activeHeader.dataIndex,type:1,menu:c.Store.getStoreMenuText(f.getStore()),storeId:f.getStore().getStoreCode()};c.Server.clearRepeatEntity(f,function(l,m){c.Dialog.hideWait();l&&c.Grid.getColumnGrid(b.activeHeader).getStore().loadPage(1);c.Dialog.showAlert("\u6e05\u7406\u7ed3\u679c",m)})},"\u6e05\u9664")}}),e.menu.push({text:"\u6e05\u9664\u91cd\u590d\u6570\u636e-\u4fdd\u7559\u6700\u65e9",
iconCls:"extIcon extDelRepeat grayColor",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkDelete()?c.Base.toBool(b.activeHeader.batchClearRepeat,!0)?this.show():this.hide():this.hide()},handler:function(){c.Dialog.showDeleteDataAlert("\u6e05\u9664\u91cd\u590d\u6570\u636e-\u4fdd\u7559\u6700\u65e9","\u5c06\u6e05\u9664\u5c5e\u6027\u3010"+b.activeHeader.configText+"\u3011\u5728\u3010\u5f53\u524d\u5f53\u524d\u6761\u4ef6\u3011\u4e0b\u91cd\u590d\u7684\u6570\u636e\uff0c\u5e76\u4fdd\u7559\u6700\u65e9\u7684\u4e00\u6761\u6570\u636e\uff01\u8bf7\u60a8\u786e\u5b9a\u64cd\u4f5c\uff01",
function(){c.Dialog.showWait("\u6b63\u5728\u6e05\u9664\u6570\u636e\u4e2d\u2026\u2026");var f=c.Grid.getColumnGrid(b.activeHeader);f={entityCode:f.getStore().entity.entityCode,field:b.activeHeader.dataIndex,type:0,menu:c.Store.getStoreMenuText(f.getStore()),storeId:f.getStore().getStoreCode()};c.Server.clearRepeatEntity(f,function(l,m){c.Dialog.hideWait();l&&c.Grid.getColumnGrid(b.activeHeader).getStore().loadPage(1);c.Dialog.showAlert("\u6e05\u7406\u7ed3\u679c",m)})},"\u6e05\u9664")}}));0<e.menu.length&&
d.push(e);d.push({text:"\u6570\u636e\u5bf9\u9f50",iconCls:"extIcon extColumn grayColor",menu:[{text:"\u5411\u5de6\u5bf9\u9f50",iconCls:"extIcon extAlignLeft grayColor",handler:function(){b.activeHeader.setAlignContent("left")}},{text:"\u5c45\u4e2d\u5bf9\u9f50",iconCls:"extIcon extAlignCenter grayColor",handler:function(){b.activeHeader.setAlignContent("center")}},{text:"\u5411\u53f3\u5bf9\u9f50",iconCls:"extIcon extAlignRight grayColor",handler:function(){b.activeHeader.setAlignContent("right")}}]});
e={text:"\u6570\u636e\u751f\u6210",iconCls:"extIcon extAnim grayColor",menu:[]};c.Base.toBool(a.columnMenu.batchRandom,!0)&&c.System.ManagerHandler.isSuperRole()&&e.menu.push({text:"\u751f\u6210\u968f\u673a\u6570\u636e",iconCls:"extIcon extRandom",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).checkEditor()?c.Base.toBool(b.activeHeader.editable,!0)?c.Base.toBool(b.activeHeader.batchRandom,!0)?this.show():this.hide():this.hide():this.hide()},handler:function(){c.Grid.showBatchEditColumnRandomWindow(b.activeHeader)}});
0<e.menu.length&&d.push(e);a.getStore().entity&&c.Base.toBool(a.columnMenu.operation,!0)&&d.push({text:"\u6570\u636e\u8ba1\u7b97",iconCls:"extIcon extMath",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).fromRecycle?this.hide():c.Base.toBool(b.activeHeader.operation,!1)?this.show():this.hide()},menu:[{text:"\u8ba1\u7b97\u603b\u548c",iconCls:"extIcon extMath",handler:function(){c.Grid.showColumnCompute(a,b.activeHeader,FastEnum.ComputeType.sum)}},{text:"\u8ba1\u7b97\u5e73\u5747\u503c",
iconCls:"extIcon extMath",handler:function(){c.Grid.showColumnCompute(a,b.activeHeader,FastEnum.ComputeType.avg)}},{text:"\u8ba1\u7b97\u6700\u5927\u503c",iconCls:"extIcon extMath",handler:function(){c.Grid.showColumnCompute(a,b.activeHeader,FastEnum.ComputeType.max)}},{text:"\u8ba1\u7b97\u6700\u5c0f\u503c",iconCls:"extIcon extMath",handler:function(){c.Grid.showColumnCompute(a,b.activeHeader,FastEnum.ComputeType.min)}}]});c.Menu.isSplitLineLast(d)||d.push("-");c.Base.toBool(a.columnMenu.cancelSort,
!0)&&d.push({text:"\u53d6\u6d88\u6392\u5e8f",iconCls:"extIcon extCancelOrder",onBeforeShow:function(){c.Grid.getColumnGrid(b.activeHeader).fromRecycle?this.hide():c.Base.toBool(b.activeHeader.cancelSort,!0)?this.show():this.hide()},handler:function(){try{var f=a.getStore().getSorters();0!==f.count()&&(f.removeByKey(b.activeHeader.dataIndex),a.getStore().loadPage(1),b.activeHeader.sortDirection=null,c.Grid.refreshColumnStyle(b.activeHeader),a.saveUIConfig(!0))}catch(l){c.Dialog.showException(l)}}});
b.insert(0,d)}c.Menu.fireMenuEvent(b,"onBeforeShow");c.Menu.refreshItem(b)};return n}();c.GridEvent=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.doRefreshPowerEnable=function(){try{Ext.isEmpty(this.updateButtons)||0===this.updateButtons.length?this.updateEnable=!1:this.updateEnable=0<c.Component.countVisible(this.updateButtons);Ext.isEmpty(this.addButtons)||0===this.addButtons.length?this.addEnable=!1:this.addEnable=0<c.Component.countVisible(this.addButtons);Ext.isEmpty(this.deleteButtons)||0===this.deleteButtons.length?this.deleteEnable=!1:this.deleteEnable=0<c.Component.countVisible(this.deleteButtons);
if(!this.checkAdd())for(var b=this.query("[checkAddPower\x3dtrue]"),a=0;a<b.length;a++)b[a].setHidden(!0),b[a].setDisabled(!0);if(!this.checkDelete()){var d=this.query("[checkDeletePower\x3dtrue]");for(a=0;a<d.length;a++)d[a].setHidden(!0),d[a].setDisabled(!0)}if(!this.checkUpdate()){var e=this.query("[checkUpdatePower\x3dtrue]");for(a=0;a<e.length;a++)e[a].setHidden(!0),e[a].setDisabled(!0)}if(!this.operate.deleteAllData){var f=this.query("[checkDeleteAllPower\x3dtrue]");for(a=0;a<f.length;a++)f[a].setHidden(!0),
f[a].setDisabled(!0)}if(!this.operate.copyData){var l=this.query("[checkCopyPower\x3dtrue]");for(a=0;a<l.length;a++)l[a].setHidden(!0),l[a].setDisabled(!0)}}catch(m){console.error(m)}};n.doRefreshSelect=function(){try{var b=this;b.selectButtons&&Ext.each(b.selectButtons,function(a,d){if(a){d=b.getSelection().length;b.selectCount&&(d=b.selectCount);var e=a.checkSelect,f=!1;if(Ext.isFunction(e))f=!e(b.getSelection());else if("multiple"===e||"m"===e||1<e)f=!(0<d);else if("radio"===e||"r"===e||"single"===
e||"s"===e||1===e)f=1!==d;c.Button.setDisabled(a,f)}})}catch(a){console.error(a)}};n.doRefreshToolPaging=function(){var b=this.child("#pagingToolBar");b&&(b.selectCount=this.getSelection().length,b.updateInfo())};n.doRecordSelect=function(){try{if(c.Base.toBool(c.Cache.memory.holdGridRecordSelectHistory,!1))this.restoreSelect();else{if(this.selectRecordHistoryShowing)for(var b=0;b<this.selectRecordHistoryShowing.length;b++){var a=this.selectRecordHistoryShowing[b];this.removeRecordHistory(a)}this.selectRecordHistoryShowing=
[];var d=this.getSelectionModel().getSelection(!0);for(b=0;b<d.length;b++)a=d[b],this.hasRecordHistory(a)||(this.getSelectRecordHistory().push(a),this.selectRecordHistoryShowing.push(a))}}catch(e){console.error(e)}};n.doHasRecordHistory=function(b){try{var a=this.getStore().entity;if(a)for(var d=0;d<this.getSelectRecordHistory().length;d++){var e=this.getSelectRecordHistory()[d];if(c.Store.isSameRecordByEntity(a,e,b))return!0}}catch(f){console.error(f)}return!1};n.doRemoveRecordHistory=function(b){try{var a=
this.getStore().entity;if(a){for(var d=[],e=0;e<this.getSelectRecordHistory().length;e++){var f=this.getSelectRecordHistory()[e];c.Store.isSameRecordByEntity(a,f,b)&&d.push(e)}for(e=0;e<d.length;e++)this.getSelectRecordHistory().splice(d[e],1)}}catch(l){console.error(l)}};n.doRestoreSelect=function(){var b=this;try{if(b.selectHistoryConfig&&0===parseInt(b.selectHistoryConfig.state)&&!c.Base.toBool(b.closeSelectHistoryLoad,!1))b.clearSelectRecordHistory();else{b.selectRecordHistoryShowing=[];var a=
b.getStore().entity;if(a)for(var d=function(f){var l=b.getSelectRecordHistory()[f];b.getStore().each(function(m,k){c.Store.isSameRecordByEntity(a,l,m)&&b.selectRecordHistoryShowing.push(m)})},e=0;e<b.getSelectRecordHistory().length;e++)d(e);0<b.selectRecordHistoryShowing.length&&(b.getSelectionModel().select(b.selectRecordHistoryShowing),b.refreshSelect())}}finally{b.closeSelectHistoryLoad=!1}};n.doGetSelectRecordHistory=function(){try{if(!this.selectRecordHistory){this.selectRecordHistory=[];var b=
c.Cache.memory["GridSelectHistory"+this.code];b&&Ext.isArray(b)&&(this.selectRecordHistory=Ext.Array.clone(b))}return this.selectRecordHistory}catch(a){console.error(a)}return[]};n.doClearSelectRecordHistory=function(){try{this.selectRecordHistory=[],Ext.isFunction(this.refreshSelectHistoryCount)&&this.refreshSelectHistoryCount(),c.Cache.memory["GridSelectHistory"+this.code]=null}catch(b){console.error(b)}};n.doRefreshSelectHistoryCount=function(){try{if(this.ownerCt)for(var b=this.ownerCt.query("[selectHistoryCount\x3dtrue]"),
a=0;a<b.length;a++)Ext.isFunction(b[a].setValue)&&b[a].setValue(this.getSelectRecordHistory().length)}catch(d){console.error(d)}};n.doRefreshDetailsPanel=function(){if(!c.Base.toBool(this.refreshingDetailsPanel,!1))try{if(this.refreshingDetailsPanel=!0,this.detailsPanels&&0!==this.detailsPanels.length)for(var b=0;b<this.detailsPanels.length;b++){var a=this.detailsPanels[b];a&&(a.fromWindow?Ext.isFunction(a.setRecord)&&a.setRecord(this):this.operate&&this.operate.autoDetails?Ext.isFunction(a.setRecord)&&
a.setRecord(this):a.close())}}finally{this.refreshingDetailsPanel=!1}};n.doSaveUIConfig=function(b){try{var a=this;if(c.Base.toBool(a.firstLoadedData,!1)){b&&c.Server.setSilence(!0);var d=a.getStore().entity;c.Grid.saveGridColumn(a).then(function(){c.Grid.saveGridButton(a,d).then(function(){c.Server.setSilence(!1)})})}}catch(e){console.error(e)}};n.doHideEmptyTip=function(){c.Lottie.unloadJsonAnimById(this.getId()+"-empty-anim");$("#"+this.getId()+"-empty-tip").remove()};n.doShowEmptyTip=function(){try{if(this.body&&
(this.hideEmptyTip(),!(this.getStore()&&0<this.getStore().getCount()))){Ext.isEmpty(this.emptyConfig)&&(this.emptyConfig={lottie:"base/lottie/empty_data.json",width:"40%",height:"40%",opacity:.8,filter:""});var b="\x3cdiv id\x3d'"+this.getId()+"-empty-tip' style\x3d'pointer-events: none;position: absolute;top: 0;left: 0;right: 0;bottom: 0;z-index: 9;display: flex;align-items: center;justify-content: center;flex-direction: column;'\x3e\x3cdiv id\x3d'"+this.getId()+"-empty-anim' style\x3d'width:"+this.emptyConfig.width+
";height:"+this.emptyConfig.height+";filter: "+this.emptyConfig.filter+";opacity: "+this.emptyConfig.opacity+";'\x3e\x3c/div\x3e\x3c/div\x3e";$("#"+this.body.el.id).append($(b));c.Lottie.loadJsonAnimByEl($("#"+this.getId()+"-empty-anim")[0],this.emptyConfig.lottie)}}catch(a){console.error(a)}};n.doCheckEditor=function(){return!c.Base.toBool(this.updateEnable,!0)||c.Base.toBool(this.fromRecycle,!1)?!1:!0};n.doCheckAdd=function(b){Ext.isEmpty(b)&&(b=!1);return!b&&c.System.ManagerHandler.isSuperRole()?
!0:this.addEnable};n.doCheckDelete=function(b){Ext.isEmpty(b)&&(b=!1);return!b&&c.System.ManagerHandler.isSuperRole()?!0:this.deleteEnable};n.doCheckUpdate=function(b){Ext.isEmpty(b)&&(b=!1);return!b&&c.System.ManagerHandler.isSuperRole()?!0:c.Base.toBool(this.updateEnable,!0)};n.doCheckRefreshTimer=function(b){try{this.timerConfig&&(0===parseInt(this.timerConfig.state)?(this.stopRefreshTimer(),b&&c.Dialog.toast("\u5df2\u5173\u95ed\u5b9a\u65f6\u5668\uff01")):(this.startRefreshTimer(),b&&c.Dialog.toast("\u5df2\u542f\u52a8\u5b9a\u65f6\u5668\uff01")))}catch(a){console.error(a)}};
n.doStartRefreshTimer=function(){try{var b=this;b.timerTimeout&&clearTimeout(b.timerTimeout);if(b.timerConfig){var a=b.child("#pagingToolBar");if(a){var d=a.down("button[toolType\x3dtimerBtn]");d&&(1===parseInt(b.timerConfig.state)?(d.setIconCls(d.baseIconCls+" redColor"),d.setUserCls("redBorder")):(d.setIconCls(d.baseIconCls+" grayColor"),d.setUserCls("")))}0!==parseInt(b.timerConfig.state)&&(b.timerTimeout=setTimeout(function(){b&&b.timerConfig&&(b.disabledLoadMaskOnce=1===parseInt(b.timerConfig.silence),
b.getStore()&&(b.getStore().reload(),b.startRefreshTimer()))},1E3*parseInt(b.timerConfig.value)))}}catch(e){console.error(e)}};n.doStopRefreshTimer=function(){try{this.timerTimeout&&clearTimeout(this.timerTimeout);this.timerConfig&&(this.timerConfig.state=0);var b=this.child("#pagingToolBar");if(b){var a=b.down("button[toolType\x3dtimerBtn]");a&&(1===parseInt(this.timerConfig.state)?(a.setIconCls(a.baseIconCls+" redColor"),a.setUserCls("redBorder")):(a.setIconCls(a.baseIconCls+" grayColor"),a.setUserCls("")))}}catch(d){console.error(d)}};
n.doShowDataLog=function(b){var a=this.getSelection()[0];eval("new ExtSystemDataLogEntity()").showWinList(b,"\u64cd\u4f5c\u65e5\u5fd7",{dataType:this.getStore().entity.tableName,dataId:a.get(this.getStore().entity.idProperty[0])},!0)};return n}();c.GridMethod=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function b(){}b.onGridInitComponent=function(a){if(!c.Base.toBool(a.fastGridInited,!1)){a.fastGridInited=!0;var d=c.Grid.getGridView(a);d&&(d.rowHeight=c.Grid.getRowMinHeight());a.bufferedRenderer=!0;a.firstLoadedData=!1;a.entityList&&(a.getStore()&&(a.getStore().grid=a,a.getStore().where&&(a.fromRecycle=a.getStore().where["^fromRecycle"])),c.Grid.configGridDefault(a),c.Grid.configGridMethod(a),c.Grid.configGridContextMenu(a),c.Grid.configGridListeners(a),c.Grid.configNormalGridListeners(a));
a.dataList&&(c.Grid.configGridMethod(a),c.Grid.configNormalGridListeners(a))}};b.onGridAfterRender=function(a){if(!c.Base.toBool(a.fastGridAfterRendered,!1)&&(a.fastGridAfterRendered=!0,a.entityList)){c.Grid.configGridHistory(a);a.up("[menuContainer\x3dtrue]")&&(a.menuPanelList=!0);var d=a.up("window");if(d&&!c.Base.toBool(d.shown,!1))d.on("show",c.Grid.startLoadData,a,{single:!0});else c.Grid.startLoadData.apply(a)}};b.startLoadData=function(){var a=this;c.Grid.configGridLayout(a).then(function(){c.System.InitHandler.isSilenceGlobalSaving()||
(Ext.isFunction(a.refreshPowerEnable)&&a.refreshPowerEnable(),c.Grid.configGridTip(a),c.Grid.configDefaultToolBar(a),c.Grid.refreshGridNumberColumn(a));a.setLoading(!1);a.getStore().grid=a;if(c.System.InitHandler.isSilenceGlobalSaving()){a.firstLoadedData=!0;a.getStore().loadData([c.Grid.buildNullData(a)]);var d=a.up("[menuContainer\x3dtrue]");d&&d.close();c.System.InitHandler.doNextSilenceMenu()}else c.Power.isPower()?(a.firstLoadedData=!0,a.getStore().loadData([c.Grid.buildTempData(a)])):(a.firstLoadedData=
!0,a.getStore().isLoaded()||(a.getStore().loadPage(1),a.checkRefreshTimer(!1)))})};b.getGridView=function(a){return(a=a.getView())?"Ext.grid.locking.View"===a.$className?a.normalView:a:null};b.getRowMinHeight=function(){return c.System.ConfigHandler.getGridRowHeight()};b.buildNullData=function(a){var d={};if(!a)return d;Ext.each(a.getColumns(),function(e,f){Ext.isEmpty(e.dataIndex)||(d[e.dataIndex]=null)});return d};b.buildTempData=function(a){var d={};if(!a)return d;Ext.each(a.getColumns(),function(e,
f){Ext.isEmpty(e.dataIndex)||(d[e.dataIndex]="\u6a21\u62df\u6570\u636e",c.Grid.isDateColumn(e)?d[e.dataIndex]=Ext.Date.format(new Date,"Y-m-d H:i:s"):c.Grid.isFilesColumn(e)&&(d[e.dataIndex]="[]"))});return d};b.addGridContextMenu=function(a,d,e){if(a.contextMenu&&d){if(!Ext.isFunction(a.contextMenu.getXType)){var f=Ext.create("Ext.menu.Menu",{scrollToHidden:!0,items:[]});Ext.isArray(a.contextMenu)&&f.add(a.contextMenu);a.contextMenu=f}Ext.isEmpty(e)?a.contextMenu.add(d):a.contextMenu.insert(e,d)}};
b.configGridDefault=function(a){a.selectButtons||(a.selectButtons=[]);a.tipHelp=!1};b.configGridHistory=function(a){a.selectHistoryConfig||(a.selectHistoryConfig={state:0,cache:0,count:0},c.Base.toBool(a.entitySelect,!1)&&(a.selectHistoryConfig.state=1,a.selectHistoryConfig.cache=1),c.Grid.checkHistoryConfig(a))};b.configGridContextMenu=function(a){var d=0,e=function(f,l){return"\x26nbsp;\x3cdiv style\x3d'background: #e3e3e3;border-radius: 3px;display:inline-flex;line-height:20px;'\x3e\x26nbsp;\x3cdiv style\x3d'color: black;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;font-size:smaller;max-width:"+
l+"px;'\x3e"+f+"\x3c/div\x3e\x26nbsp;\x3c/div\x3e\x26nbsp;"};a.getStore().entity&&c.Grid.addGridContextMenu(a,{iconCls:"extIcon extDetails editColor",text:"\u67e5\u770b\u8be6\u60c5",handler:function(f,l){c.Grid.showGridSelectDetailsWindow(f,a)}},d++);a.getStore().entity&&a.getStore().entity.data_log&&c.Grid.addGridContextMenu(a,{iconCls:"extIcon extHistory color30",text:"\u64cd\u4f5c\u65e5\u5fd7",handler:function(f,l){a.showDataLog(this)}},d++);c.Grid.addGridContextMenu(a,"-",d++);c.System.ManagerHandler.isSuperRole()&&
c.Grid.addGridContextMenu(a,{iconCls:"extIcon extSee editColor",text:"\u67e5\u770b\u6570\u636e\u7ed3\u6784",handler:function(f,l){c.Dialog.showJson(this,"\u67e5\u770b\u539f\u59cb\u6570\u636e\u7ed3\u6784",c.Json.objectToJson(a.contextMenu.record.data))}},d++);c.Grid.addGridContextMenu(a,{iconCls:"extIcon extCopy2",text:"\u590d\u5236\u6570\u636e",menu:[{text:"\u590d\u5236\u5355\u5143\u683c\u6570\u636e",iconCls:"extIcon extCopy2",onBeforeShow:function(){var f=a.contextMenu,l=f.record,m=f.cellContext.column.dataIndex;
c.Grid.isFileColumn(f.cellContext.column)||c.Grid.isFilesColumn(f.cellContext.column)||c.Grid.isContentColumn(f.cellContext.column)||Ext.isEmpty(l.get(m))?(this.hide(),this.setText("\u590d\u5236\u6570\u636e")):(this.setText("\u590d\u5236"+e($(f.cellTd).text(),$(f.cellTd).outerWidth(!0))),this.show())},handler:function(){c.Base.copyToBoard($(a.contextMenu.cellTd).text().trim());c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01")}},{text:"\u590d\u5236\u6574\u884c\u6570\u636e",iconCls:"extIcon extCopy2",
handler:function(){var f="";$(a.contextMenu.tr).find("td").each(function(){f+=$(this).text()+"\t"});c.Base.copyToBoard(f);c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01")}},{text:"\u590d\u5236\u5355\u5143\u683c\u5b9e\u9645\u6570\u636e",iconCls:"extIcon extCopy2",handler:function(){var f=a.contextMenu,l=f.record;f=f.cellContext.column.dataIndex;var m=l.get(f);Ext.isEmpty(m)?c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u590d\u5236\u5931\u8d25\uff0c\u6682\u65e0\u5b9e\u9645\u6570\u636e\uff01"):(Ext.isArray(l.get(f))?
c.Base.copyToBoard(Ext.encode(l.get(f))):c.Base.copyToBoard(l.get(f)),c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01"))}}]},d++);c.Grid.addGridContextMenu(a,"-",d++);c.Grid.addGridContextMenu(a,{iconCls:"extIcon extEdit editColor",text:"\u7f16\u8f91\u5355\u5143\u683c\u6570\u636e",onBeforeShow:function(){var f=this.ownerCt,l=f.record,m=f.cellContext.column.dataIndex;Ext.isEmpty(m)||1!==a.getSelection().length||!a.checkEditor()?this.hide():c.Base.toBool(f.cellContext.column.editable,!0)?(f.cellContext.column.field||
f.cellContext.column.hasListener("dblclick")||this.hide(),this.show(),!c.Grid.isContentColumn(f.cellContext.column)&&!Ext.isEmpty(l.get(m))&&0<$(f.cellTd).text().length?this.setText("\u7f16\u8f91"+e($(f.cellTd).text(),$(f.cellTd).outerWidth(!0))):this.setText("\u7f16\u8f91\u5355\u5143\u683c\u6570\u636e")):this.hide()},handler:function(){var f=this.ownerCt;f.cellContext.column.field?(a.doEdit=!0,a.findPlugin("cellediting").startEditByPosition(f.cellContext)):f.cellContext.column.fireEvent("dblclick",
a,this,f.rowIndex)}},d++);a.getStore().entity&&(c.Grid.addGridContextMenu(a,{iconCls:"extIcon extSearch searchColor",text:"\u67e5\u627e\u5355\u5143\u683c\u6570\u636e",onBeforeShow:function(){var f=this.ownerCt,l=f.record,m=f.cellContext.column.dataIndex;Ext.isEmpty(m)||!c.Grid.canColumnSearch(f.cellContext.column)||c.Grid.isContentColumn(f.cellContext.column)||1!==a.getSelection().length?this.hide():(this.show(),Ext.isEmpty(l.get(m))?this.setText("\u67e5\u627e\u5355\u5143\u683c\u6570\u636e"):this.setText("\u67e5\u627e"+
e($(f.cellTd).text(),$(f.cellTd).outerWidth(!0))))},handler:function(){var f=this.ownerCt;f.cellContext.column.searchValue(f.record.get(f.cellContext.column.dataIndex))}},d++),c.Grid.addGridContextMenu(a,{iconCls:"extIcon extClear",text:"\u6e05\u7a7a\u5355\u5143\u683c\u6570\u636e",onBeforeShow:function(){var f=this.ownerCt,l=f.record,m=f.cellContext.column.dataIndex;Ext.isEmpty(m)||1!==a.getSelection().length||!a.checkEditor()?this.hide():(this.show(),!c.Grid.isContentColumn(f.cellContext.column)&&
!Ext.isEmpty(l.get(m))&&0<$(f.cellTd).text().length?this.setText("\u6e05\u7a7a"+e($(f.cellTd).text(),$(f.cellTd).outerWidth(!0))):this.setText("\u6e05\u7a7a\u5355\u5143\u683c\u6570\u636e"))},handler:function(){var f=this.ownerCt;a.getStore().entity?a.getStore().entity.idProperty?Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u60a8\u786e\u5b9a"+this.text+"\u5417\uff1f",function(l,m){if("yes"===l){l=f.record;m=f.cellContext.column.dataIndex;Ext.isObject(f.cellContext.column.field)&&!Ext.isEmpty(f.cellContext.column.field.name)&&
(m=f.cellContext.column.field.name);for(var k={entityCode:a.getStore().entity.entityCode},h=0;h<a.getStore().entity.idProperty.length;h++){var g=a.getStore().entity.idProperty[h];k["data."+g]=l.get(g)}k.menu=a.getStore().entity.comment;k["data."+m]="\x3cnull\x3e";c.Dialog.showWait("\u6b63\u5728\u6e05\u7a7a\u4e2d\u2026\u2026");c.Server.updateEntity(k,function(p,q){c.Dialog.hideWait();p?(c.Dialog.toast("\u6e05\u9664\u6210\u529f\uff01"),a.getStore().reload()):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",
q)})}}):c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u6b64\u529f\u80fd\uff01"):c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u6b64\u529f\u80fd\uff01")}},d++));c.Grid.addGridContextMenu(a,"-",d++)};b.configGridHeadMenu=function(a){if(c.Base.toBool(a.columnContextMenu,!0)&&a.columnHeadMenu&&(a.columnMenu||(a.columnMenu=new c.GridColumnMenu),a.columnMenu)){var d=a.columnHeadMenu;d.scrollToHidden=!0;d.on("beforeshow",c.GridEvent.onFastHeadMenuBeforeShow,a)}};b.configDefaultToolBar=
function(a){if(a){var d=a.down("toolbar[dock\x3d'top']");try{if(d)if(c.Base.toBool(a.fromRecycle,!1))d.setHidden(!0);else{var e=0;a.getStore().entity&&a.getStore().entity.data_log&&d.insert(e++,{xtype:"button",text:"\u64cd\u4f5c\u65e5\u5fd7",checkSelect:1,animMinMax:!0,iconCls:"extIcon extHistory color30",handler:function(){a.showDataLog(this)}});!c.Power.isPower()&&a.getStore().entity&&(c.Base.toBool(a.showDetailsButton,!0)&&c.Base.toBool(a.operate.showDetailsButton,!0)&&d.insert(e++,{xtype:"button",
text:"\u67e5\u770b\u8be6\u60c5",checkSelect:1,animMinMax:!0,contextMenu:!1,iconCls:"extIcon extDetails searchColor",handler:function(){c.Grid.showGridSelectDetailsWindow(this,a)}}),c.Base.toBool(a.showUpdateButton,!0)&&c.Base.toBool(a.operate.showUpdateButton,!0)&&a.checkUpdate(!0)&&d.insert(e++,{xtype:"button",text:"\u4fee\u6539\u6570\u636e",checkSelect:1,checkUpdatePower:!0,contextMenu:!1,animMinMax:!0,iconCls:"extIcon extEdit editColor",handler:function(){c.Grid.showDataEditorWin(this,a)}}),0<
e&&d.insert(e,"-"));if(a.operate&&c.Base.toBool(a.defaultToolBar,!0)){e={xtype:"button",text:"\u66f4\u591a\u64cd\u4f5c",iconCls:"extIcon extMore grayColor",menu:[]};c.Base.toBool(a.operate.excelOut,!0)&&(c.Menu.isSplitLineLast(e.menu)||e.menu.push("-"),e.menu.push({text:"\u5bfc\u51faExcel",iconCls:"extIcon extExcel",handler:function(){c.System.InitHandler.checkMaxMemory(function(){c.Grid.exportGrid(a)})}}));c.Base.toBool(a.operate.excelIn,!0)&&a.checkAdd()&&(e.menu.push({text:"\u5bfc\u5165Excel",
iconCls:"extIcon extExcel",menu:[{text:"\u4e0b\u8f7d\u6a21\u677f",iconCls:"extIcon extExcelModule searchColor",handler:function(){c.Grid.downExcelModel(a)}},{text:"\u5bfc\u5165\u6570\u636e",iconCls:"extIcon extExcelImport searchColor",handler:function(){var p=this;c.System.InitHandler.checkMaxMemory(function(){var q={entityCode:a.getStore().entity.entityCode};c.Grid.importExcel(p,q,a.importExcelItems).then(function(r){r&&a.getStore().loadPage(1)})})}}]}),e.menu.push("-"));c.System.ManagerHandler.isSuperRole()&&
(c.Menu.isSplitLineLast(e.menu)||e.menu.push("-"),c.Base.toBool(a.operate.downloadData,!0)&&e.menu.push({iconCls:"extIcon extDownload searchColor",text:"\u4e0b\u8f7d\u6570\u636e",handler:function(){c.System.InitHandler.checkMaxMemory(function(){c.Grid.downDataGrid(a)})}}),c.Base.toBool(a.operate.uploadData,!0)&&e.menu.push({iconCls:"extIcon extUpload searchColor",text:"\u4e0a\u4f20\u6570\u636e",handler:function(){var p=this;c.System.InitHandler.checkMaxMemory(function(){var q={entityCode:a.getStore().entity.entityCode};
c.Grid.loadDataGrid(p,q).then(function(r){r&&a.getStore().loadPage(1)})})}}),e.menu.push("-"),a.getStore().entity&&e.menu.push({iconCls:"extIcon extSee searchColor",text:"\u67e5\u770b\u5b9e\u4f53",handler:function(){c.Dialog.showJson(this,"\u67e5\u770b\u5b9e\u4f53\u4fe1\u606f",JSON.stringify(Object.getPrototypeOf(a.getStore().entity)))}}),a.getStore().entity&&e.menu.push({iconCls:"extIcon extColumn searchColor",text:"\u67e5\u770b\u6240\u6709\u5217\u4fe1\u606f",handler:function(){if(a){for(var p=a.getColumns(),
q=[],r=0;r<p.length;r++){var t=p[r];Ext.isEmpty(t.dataIndex)||q.push({name:t.dataIndex,text:$("\x3cdiv\x3e"+t.configText+"\x3c/div\x3e").text()})}c.Dialog.showJson(this,"\u67e5\u770b\u6240\u6709\u5217\u4fe1\u606f",JSON.stringify(q))}else c.Dialog.toast("\u5bb9\u5668\u65e0\u6548\uff01")}}),e.menu.push("-"),a.getStore().entity&&c.Base.toBool(a.getStore().entity.layer,!1)&&e.menu.push({iconCls:"extIcon extPower redColor",text:"\u66f4\u65b0\u6743\u9650\u503c",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192",
"\u786e\u5b9a\u66f4\u65b0\u8868\u683c\u7684\u6570\u636e\u6743\u9650\u503c\u5417\uff1f\u786e\u5b9a\u540e\u5c06\u540c\u65f6\u66f4\u65b0\u4e0e\u5f53\u524d\u8868\u683c\u6709\u5173\u8054\u7684\u6240\u6709\u8868\u683c\u7684\u6743\u9650\u503c\uff01\u5982\u679c\u6570\u636e\u5e93\u6570\u636e\u91cf\u8fbe\u5230\u5343\u4e07\u7ea7\u522b\u65f6\uff0c\u66f4\u65b0\u65f6\u95f4\u4f1a\u8f83\u957f\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",function(p,q){if("yes"==p){var r={entityCode:a.getStore().entity.entityCode};c.LoginLayout.validOperate("\u66f4\u65b0\u8868\u683c\u7684\u6570\u636e\u6743\u9650\u5c42\u7ea7\u503c",
function(){c.Dialog.showWait("\u6b63\u5728\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.updateLayer(r,function(t,v){c.Dialog.hideWait();c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",v)})},30)}})}}),a.getStore().entity&&e.menu.push({iconCls:"extIcon extCopy2 redColor",text:"\u66f4\u65b0\u540c\u5217\u503c",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u786e\u5b9a\u66f4\u65b0\u8868\u683c\u7684\u6570\u636e\u7ed1\u5b9a\u503c\u5417\uff1f\u786e\u5b9a\u540e\u5c06\u540c\u65f6\u66f4\u65b0\u4e0e\u5f53\u524d\u8868\u683c\u6709\u5173\u8054\u7684\u6240\u6709\u8868\u683c\u7684\u76f8\u540c\u5217\u7684\u503c\uff01\u8bf7\u60a8\u8c28\u614e\u64cd\u4f5c\uff01",
function(p,q){if("yes"==p){var r={entityCode:a.getStore().entity.entityCode};c.LoginLayout.validOperate("\u66f4\u65b0\u8868\u683c\u7684\u76f8\u540c\u5217\u7684\u503c",function(){c.Dialog.showWait("\u6b63\u5728\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.updateSame(r,function(t,v){c.Dialog.hideWait();c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",v)})},30)}})}}),e.menu.push("-"));c.Menu.isSplitLineLast(e.menu)||e.menu.push("-");e.menu.push({iconCls:"extIcon extSet",text:"\u529f\u80fd\u8bbe\u7f6e",
handler:function(){c.Grid.setGrid(this,a)}});var f={xtype:"button",text:"\u76f8\u5173\u67e5\u8be2",checkSelect:1,iconCls:"extIcon extIntersect grayColor",menu:[]};a.linkMenu&&(f.menu=a.linkMenu);if(a.getStore()&&a.getStore().entity){var l=c.System.EntitiesHandler.getEntity(a.getStore().entity);if(l.linkTables)for(var m=a.query("button[entityCode]"),k=function(p){var q=l.linkTables[p];if(q.linkColumns){p=!1;for(var r=0;r<m.length;r++)if(m[r].entityCode===q.entityCode){p=!0;break}if(!c.System.EntitiesHandler.getEntity(q.entityCode).js||
p)return"continue";var t={text:q.comment};if(q.menu){if(t.icon=q.menu.icon,!c.System.MenuHandler.existMenu(q.menu.id))return"continue"}else if(t.iconCls="extIcon extSearch searchColor",!c.System.ManagerHandler.isSuperRole())return"continue";if(1==q.linkColumns.length){var v=q.linkColumns[0];t.text=c.Base.toString(v.link_menu_text,q.comment);t.handler=function(){var w={};w["t."+v.name]=a.getSelection()[0].get(v.linkKey);w["^"+v.linkText[0]]=a.getSelection()[0].get(v.linkText[0]);eval("new "+q.entityCode+
"()").showWinList(this,q.comment+"\u3010"+v.comment+"\u3011",w,!0)};c.Base.toBool(v.to_link_menu,!0)&&f.menu.push(t)}else if(1<q.linkColumns.length){t.menu=[];p=function(w){var z=q.linkColumns[w];w={icon:c.Server.getIcon("icon_column.svg"),text:c.Base.toString(z.link_menu_text,"\u5339\u914d"+z.comment),handler:function(){var x={};x["t."+z.name]=a.getSelection()[0].get(z.linkKey);x["^"+z.linkText[0]]=a.getSelection()[0].get(z.linkText[0]);eval("new "+q.entityCode+"()").showWinList(this,q.comment+"\u3010"+
z.comment+"\u3011",x,!0)}};c.Base.toBool(z.to_link_menu,!0)&&t.menu.push(w)};for(r=0;r<q.linkColumns.length;r++)p(r);0<t.menu.length&&(1===t.menu.length&&(t=t.menu[0]),f.menu.push(t))}}},h=0;h<l.linkTables.length;h++)k(h)}d.add("-\x3e");c.System.ConfigHandler.isGridDefaultLinkButton()&&c.System.ManagerHandler.isSuperRole()&&c.Base.toBool(a.defaultToolBarLink,!0)&&0<f.menu.length&&d.add(f);c.Base.toBool(a.defaultToolBarMore,!0)&&d.add(e);if(a.help){var g=a.helpTitle?a.helpTitle:"\u5e2e\u52a9\u6587\u6863";
d.add({xtype:"button",iconCls:"extIcon extQuestion2 color75",text:g,animMinMax:!0,_help:a.help,_helpTitle:g,handler:function(){this._help.toString().toLowerCase().endWith(".md")?c.Markdown.showMarkdownFile(this,this._helpTitle,this._help,{modal:!1,width:300,height:parseInt((.8*document.body.clientHeight).toFixed(0))}):c.Dialog.showLink(this,this._helpTitle,this._help,{modal:!1,width:300,height:parseInt((.8*document.body.clientHeight).toFixed(0))})}})}}}}finally{d&&0===d.items.length&&d.setHidden(!0)}}};
b.configGridTip=function(a){if(a){var d=c.Grid.getGridView(a);d&&(a.tip=new Ext.ToolTip({target:d.el,delegate:".x-grid-cell-inner",trackMouse:!0,renderTo:Ext.getBody(),listeners:{beforeshow:function(e){if(a.operate&&!a.operate.hoverTip)return!1;console.log(e.triggerElement);var f=$(e.triggerElement).text();if(Ext.isEmpty(f)||"\u65e0"===f||"\x26nbsp;"===f||" "===f||"\u00a0"===f)return!1;f=$(e.triggerElement).find("[data-details-id]");if(0<f.length){f=$(f).attr("data-details-id");var l=window[f];l||
(l=c.Cache.memory[f]);if(l)return e.update(l),!0}e.update($(e.triggerElement).html())}}}))}};b.configGridMethod=function(a){a&&!a.configGridMethod&&(a.configGridMethod=!0,a.refreshPowerEnable=c.GridMethod.doRefreshPowerEnable,a.refreshSelect=c.GridMethod.doRefreshSelect,a.recordSelect=c.GridMethod.doRecordSelect,a.refreshToolPaging=c.GridMethod.doRefreshToolPaging,a.hasRecordHistory=c.GridMethod.doHasRecordHistory,a.removeRecordHistory=c.GridMethod.doRemoveRecordHistory,a.restoreSelect=c.GridMethod.doRestoreSelect,
a.getSelectRecordHistory=c.GridMethod.doGetSelectRecordHistory,a.clearSelectRecordHistory=c.GridMethod.doClearSelectRecordHistory,a.refreshSelectHistoryCount=c.GridMethod.doRefreshSelectHistoryCount,a.refreshDetailsPanel=c.GridMethod.doRefreshDetailsPanel,a.saveUIConfig=c.GridMethod.doSaveUIConfig,a.showEmptyTip=c.GridMethod.doShowEmptyTip,a.hideEmptyTip=c.GridMethod.doHideEmptyTip,a.checkEditor=c.GridMethod.doCheckEditor,a.checkAdd=c.GridMethod.doCheckAdd,a.checkDelete=c.GridMethod.doCheckDelete,
a.checkUpdate=c.GridMethod.doCheckUpdate,a.checkRefreshTimer=c.GridMethod.doCheckRefreshTimer,a.startRefreshTimer=c.GridMethod.doStartRefreshTimer,a.stopRefreshTimer=c.GridMethod.doStopRefreshTimer,a.showDataLog=c.GridMethod.doShowDataLog)};b.configGridListeners=function(a){a&&!a.configListener&&(a.configListener=!0,a.on("aftertabactive",c.GridEvent.onFastAfterTabActive,a),a.on("viewready",c.GridEvent.onFastViewRead,a),a.on("beforedestroy",c.GridEvent.onFastBeforeDestroy,a),a.on("columnmove",c.GridEvent.onFastColumnMove,
a),a.on("columnresize",c.GridEvent.onFastColumnResize,a),a.on("columnschanged",c.GridEvent.onFastColumnsChanged,a),a.on("headertriggerclick",c.GridEvent.onFastHeaderTriggerClick,a),a.on("headercontextmenu",c.GridEvent.onFastHeaderContextMenu,a),a.on("headermenucreate",c.GridEvent.onFastHeaderMenuCreate,a),a.on("headerclick",c.GridEvent.onFastHeaderClick,a),a.on("sortchange",c.GridEvent.onFastSortChange,a),a.on("cellcontextmenu",c.GridEvent.onFastCellContextMenu,a),a.getStore().on("endupdate",c.GridEvent.onFastStoreEndUpdate,
a),a.on("celldblclick",c.GridEvent.onFastCellDblclick,a),a.on("beforeedit",c.GridEvent.onFastBeforeEdit,a),a.on("selectionchange",c.GridEvent.onFastSelectionChange,a),a.getStore().on("datachanged",c.GridEvent.onFastStoreDataChanged,a),a.getStore().on("load",c.GridEvent.onFastStoreLoad,a))};b.configNormalGridListeners=function(a){a&&!a.configNormalGridListeners&&(a.configNormalGridListeners=!0,a.getStore().on("datachanged",c.GridEvent.onFastStoreDataChanged,a),a.getStore().on("beforeload",c.GridEvent.onFastStoreBeforeLoad,
a))};b.configGridLayout=function(a){return new Ext.Promise(function(d,e){a?(c.System.InitHandler.isSilenceGlobalSaving()||c.Grid.getGridView(a).setLoading("\u521d\u59cb\u5316\u914d\u7f6e\u4e2d\u2026\u2026"),c.Grid.restoreGridOperate(a).then(function(){c.Grid.restoreGridColumn(a).then(function(){c.Grid.getGridView(a).setLoading(!1);d(!0)})})):d(!0)})};b.getGridInWindowSize=function(a,d,e){Ext.isEmpty(d)&&(d=.4);Ext.isEmpty(e)&&(e=.4);d=parseInt((a.getWidth()*d).toFixed(0));a=parseInt((a.getHeight()*
e).toFixed(0));return{width:d,height:a}};b.showGridSelectDetailsWindow=function(a,d){var e=parseInt((.4*document.body.clientWidth).toFixed(0)),f=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:"\u67e5\u770b\u8be6\u60c5",subtitle:"",height:f,width:e,minHeight:450,minWidth:400,iconCls:"extIcon extDetails",layout:"border",resizable:!0,collapsible:!0,constrain:!0,maximizable:!0,animateTarget:a,record:d.getSelectionModel().getSelection()[0],tools:[{type:"help",
callback:function(l,m,k){c.Dialog.showJson(this,"\u67e5\u770b\u539f\u59cb\u6570\u636e\u7ed3\u6784",c.Json.objectToJson(l.record.data))}}],listeners:{show:function(l){l.focus()}},items:[c.Grid.getDetailsPanel(d,!0)]}).show()};b.getDetailsPanel=function(a,d){if(d||c.System.ConfigHandler.isGridDetailsPanel()){a.detailsPanels||(a.detailsPanels=[]);var e={subtitle:"",layout:"border",cls:"fast-list-details-panel",collapsedCls:"fast-list-details-panel-collapsed",border:0,autoScroll:!1,scrollable:!1,closeAction:"hide",
dataId:-1,currIsClosed:!1,closeTimer:null,detailsPanel:!0,isWindow:d,setRecord:function(l){try{var m=this;if(!m.items)return!1;m.closeTimer&&window.clearTimeout(m.closeTimer);if(null!=l){var k=l.getSelectionModel().getSelection();if(1===k.length){if(m.isWindow&&m.record&&!c.Store.isSameRecord(m.record,k[0]))return!1;m.record=k[0];m.items.get(0).setRecord(l,k[0]);m.show()}else m.isVisible()&&!this.isWindow&&(m.closeTimer=setTimeout(function(){m.close()},88))}else m.close()}catch(h){c.Dialog.showException(h)}return!0},
listeners:{afterrender:function(){this.isWindow&&this.setRecord(a)},collapse:function(l,m){this.down("#close").hide()},beforeexpand:function(l,m){this.down("#close").show()},destroy:function(l){a.detailsPanels=Ext.Array.remove(a.detailsPanels,l)}},items:[c.Grid.builderDetailsGrid(d)]};d?e.region="center":(e.title="\u6570\u636e\u8be6\u60c5",e.iconCls="extIcon extDetails",e.collapsed=!0,e.split=!0,e.hidden=!0,e.region="east",e.maxWidth=parseInt((document.body.clientWidth/2).toFixed(0)),e.width=parseInt((.3*
document.body.clientWidth).toFixed(0)),e.minWidth=200,e.tools=[{type:"gear",callback:function(){c.Grid.setGrid(this,a)}},{type:"close",itemId:"close",callback:function(){f.collapse()}}]);var f=Ext.create("Ext.panel.Panel",e);f.fromWindow=d;a.detailsPanels.push(f);return f}};b.builderDetailsGrid=function(a){Ext.isEmpty(a)&&(a=!1);return Ext.create("Ext.grid.Panel",{border:0,scrollable:"y",region:"center",store:Ext.create("Ext.data.Store",{groupField:"groupHeaderText",autoLoad:!1,fields:[]}),hideHeaders:!0,
deferRowRender:!1,cls:"fast-grid-details",superGrid:null,features:[{ftype:"grouping",collapsible:!1,hideGroupedHeader:!0,expandTip:null,collapseTip:null,groupHeaderTpl:["\x3cb\x3e{name:this.formatName}\x3c/b\x3e",{formatName:function(d){return d.toString().startsWith("BASE")?"\u57fa\u672c\u5c5e\u6027":d}}]}],setRecord:function(d,e){try{if(d&&e){this.recordId=e.getId();this.superGrid=d;e.store=d.getStore();for(var f=d.getColumns(),l=[],m="BASE-"+(new Date).getTime(),k=0,h=0;h<f.length;h++){var g=f[h];
if(!Ext.isEmpty(g.dataIndex)&&(c.Base.toBool(g.hideable,!0)||c.Grid.isTreeColumn(g))){var p={text:g.configText,value:e.get(g.dataIndex),dataIndex:g.dataIndex,columnName:g.columnName,groupHeaderText:g.groupHeaderText,renderer:g.renderer,index:g.getIndex(),record:e,linkColumn:g,entity:d.getStore().entity,configEditor:c.Base.toBool(g.editable,!0),editor:!1};Ext.isEmpty(g.field)&&(p.configEditor=!1);d.checkEditor()||(p.configEditor=!1);p.groupHeaderText?m="BASE-"+h+"-"+(new Date).getTime():p.groupHeaderText=
m;l.push(p);k=Math.max(c.Base.guessTextWidth(p.text,5),k)}}l.sort(function(r,t){return r.index-t.index});this.getStore().loadData(l);var q=c.Grid.getGridView(this);q&&q.getHeaderAtIndex(0).setWidth(k)}}catch(r){}},columns:[{header:"\u540d\u79f0",dataIndex:"text",align:"right",width:120,tdCls:"tdVTop",renderer:function(d,e,f){if(Ext.isEmpty(d))return"";e.style=c.Grid.detailsGridKeyStyle;return"\x3cb\x3e"+d+"\uff1a\x3c/b\x3e"}},{header:"\u503c",dataIndex:"value",flex:1,align:"left",renderer:function(d,
e,f,l,m,k,h){try{e.style=c.Grid.detailsGridValueStyle;var g=f.get("renderer");if(Ext.isFunction(g)){var p=g(d,e,f.get("record"),l,m,k,h,!0);return Ext.isEmpty(p)?"\x3cfont color\x3d'#ccc'\x3e\u65e0\x3c/font\x3e":p}return d}catch(q){return d}}},{xtype:"actioncolumn",width:80,sortable:!1,menuDisabled:!0,renderer:function(d,e){e.style=c.Grid.detailsGridActionStyle;return d},items:[{iconCls:"extIcon extEdit editColor marginRight5 textBlackShadowWhite",tooltip:"\u7f16\u8f91\u6570\u636e",align:"center",
isDisabled:function(d,e,f,l,m){return!c.Base.toBool(m.get("editor"),!1)},getClass:function(d,e,f){return c.Base.toBool(f.get("editor"),!1)?"extIcon extEdit editColor marginRight5 textBlackShadowWhite":""},handler:c.Grid.showDetailsEditMenu},{iconCls:"extIcon extCopy2 searchColor textBlackShadowWhite",tooltip:"\u590d\u5236\u6570\u636e",align:"center",isDisabled:function(d,e,f,l,m){return!c.Base.toBool(m.get("doCopy"),!1)},getClass:function(d,e,f){return c.Base.toBool(f.get("doCopy"),!1)?"extIcon extCopy2 searchColor textBlackShadowWhite":
""},handler:c.Grid.copyDetailsValue}]},{xtype:"rowplaceholder",minWidth:30}],tbar:{flex:1,emptyText:"\u67e5\u627e\u5c5e\u6027\uff08\u8f7b\u6572\u56de\u8f66\u952e\uff09",margin:"5",xtype:"textfield",doSearch:function(){var d=this.ownerCt,e=d.getStore(),f=0,l=e.getAt(0).get("dataIndex"),m=null,k=this.getValue();Ext.isEmpty(k)||e.each(function(h,g){var p=h.get("text").toString(),q=h.get("value");if(0<=p.indexOf(k))f=g,l=h.get("dataIndex"),m=p;else if(!Ext.isEmpty(q)&&0<=q.toString().indexOf(k))return f=
g,l=h.get("dataIndex"),m=p,!1});c.Grid.scrollToColumn(d.superGrid,l,m);d.getSelectionModel().select(f);c.Grid.getGridView(d).focusRow(f)},triggers:{search:{cls:"text-search",handler:function(){this.doSearch()}}},listeners:{render:function(d,e){try{new Ext.util.KeyMap({target:d.getEl(),key:13,fn:function(f,l){this.doSearch()},scope:this})}catch(f){console.error(f)}}}},bbar:{xtype:"label",style:{background:"#ffffff"},text:"\u5c0f\u6280\u5de7\uff1a\u53cc\u51fb\u5c5e\u6027\u53ef\u5feb\u901f\u5b9a\u4f4d\u5de6\u4fa7\u8868\u683c\u5bf9\u5e94\u7684\u5217\uff01",
padding:"10"},viewConfig:{enableTextSelection:!0},toggleActionColumn:function(d){if(this.lasClickRecord){if(this.lasClickRecord.getId()===d.getId())return;this.lasClickRecord.set("editor",!1);this.lasClickRecord.set("doCopy",!1)}d.set("doCopy",!0);d.set("editor",d.get("configEditor"));this.lasClickRecord=d},listeners:{itemclick:function(d,e,f,l,m,k){this.toggleActionColumn(e)},select:function(d,e){this.toggleActionColumn(e)},itemdblclick:function(){try{var d=this.getSelectionModel().getSelection();
0!=d.length&&c.Grid.scrollToColumn(this.superGrid,d[0].get("dataIndex"),d[0].get("text"))}catch(e){c.Dialog.showException(e,"details:itemdblclick")}}}})};b.hasSearchColumn=function(a){var d=!1;if(!a)return!1;Ext.each(a.getColumns(),function(e,f){if(!Ext.isEmpty(e.dataIndex)&&e.where&&0<e.where.length)return d=!0,!1});return d};b.getColumn=function(a,d,e){if(!a)return null;a=a.getColumns();for(e=0;e<a.length;e++){var f=a[e];if(f.dataIndex===d)return f}return null};b.checkColumnSearch=function(a){try{if(!a)return!1;
var d=!1;Ext.each(a.getColumns(),function(l){if(l.where&&0<l.where.length)return d=!0,!1});var e=a.child("#pagingToolBar");if(e){var f=e.down("button[toolType\x3dsearchBtn]");f&&(d?(f.setIconCls("extIcon extSearch redColor"),f.setUserCls("redBorder")):(f.setIconCls("extIcon extSearch grayColor"),f.setUserCls("")))}}catch(l){console.error(l)}};b.hasColumnField=function(a){try{if(Ext.isObject(a.field)||!Ext.isEmpty(a.field))return!0}catch(d){console.error(d)}return!1};b.isColumnType=function(a){return"gridcolumn"===
a||"gridcolumn"===a.xtype};b.isTreeColumn=function(a){return a?"treecolumn"===a.xtype:!1};b.isIdPropertyColumn=function(a){var d=c.Grid.getColumnGrid(a);if(d&&(d=d.getStore())&&d.entity&&d.entity.idProperty)for(var e=0;e<d.entity.idProperty.length;e++){var f=d.entity.idProperty[e];if(c.Base.toString(a.dataIndex,"")===f)return!0}return!1};b.isDateColumn=function(a){return a?c.Form.isDateField(a.field):!1};b.isNumberColumn=function(a){return a?c.Form.isNumberField(a.field):!1};b.isComboColumn=function(a){return a?
c.Form.isComboField(a.field):!1};b.isFileColumn=function(a){return a?c.Form.isFileField(a.field):!1};b.isContentColumn=function(a){return a?c.Form.isHtmlContentField(a.field)||c.Form.isContentField(a.field)||c.Form.isMonacoEditorField(a.field):!1};b.isHtmlContentColumn=function(a){return a?c.Form.isHtmlContentField(a.field):!1};b.isFilesColumn=function(a){return a?c.Form.isFilesField(a.field):!1};b.isEnumColumn=function(a){return a?c.Form.isEnumField(a.field):!1};b.isLinkColumn=function(a){return a?
c.Form.isLinkField(a.field):!1};b.isMapColumn=function(a){return a?c.Form.isMapField(a.field):!1};b.isPCAColumn=function(a){return a?c.Form.isPCAField(a.field):!1};b.isTargetColumn=function(a){return a?c.Form.isTargetField(a.field):!1};b.getGridSelModel=function(a){var d=0;c.System.ConfigHandler.isGridRowNumber()&&(d=46);Ext.isEmpty(a)||(d=a?46:0);return Ext.create("Ext.grid.selection.SpreadsheetModel",{pruneRemoved:!1,checkboxSelect:!0,hasLockedHeader:!0,cellSelect:!1,checkboxHeaderWidth:40,dragSelect:!0,
extensible:!1,rowNumbererHeaderWidth:d,listeners:{focuschange:function(e,f,l,m){}}})};b.refreshGridNumberColumn=function(a){if(a.operate){var d=a.getSelectionModel();d&&d.numbererColumn&&(c.Base.toBool(a.operate.showRowNumber)?d.numbererColumn.setWidth(Math.max(d.numbererColumn.getWidth(),52)):d.numbererColumn.setWidth(0))}};b.checkConfigGridNumberColumn=function(a){try{if(!a)return!1;var d=a.getSelectionModel();if(d&&d.numbererColumn)return 0<d.numbererColumn.configWidth}catch(e){}return!1};b.blinkColumn=
function(a){if(!a.blinking){a.blinking=!0;a.blinkTimout&&(clearTimeout(a.blinkTimout),delete a.blinkTimout);Ext.isEmpty(a.configColor)&&(a.configColor=a.getEl().getStyle("color")||"");Ext.isEmpty(a.configBackground)&&(a.configBackground=a.getEl().getStyle("background")||"");var d="#e41f00";0<a.configBackground.indexOf("linear-gradient")&&(d="linear-gradient(0deg, #e41f00, #fefefe)");a.setStyle({color:"white",background:d});a.blinkTimout=setTimeout(function(){a.setStyle({color:a.configColor,background:a.configBackground});
a.blinking=!1;delete a.blinkTimout},1E3)}};b.scrollToColumn=function(a,d,e){a&&(d=c.Grid.getColumn(a,d,e),c.Grid.blinkColumn(d),e=d.getLocalX(),d.isSubHeader&&(e+=d.ownerCt.getLocalX()),a.scrollTo(e,0,!0))};b.setGrid=function(a,d){var e=Ext.create("Ext.form.Panel",{bodyPadding:5,region:"center",autoScroll:!0,viewModel:{data:d.operate},defaults:{labelWidth:6*c.System.ConfigHandler.getFontSizeNumber()+8},items:[{xtype:"checkboxfield",fieldLabel:"\u663e\u793a\u5e8f\u53f7",labelAlign:"right",columnWidth:1,
name:"showRowNumber",bind:"{showRowNumber}",uncheckedValue:!1,boxLabel:"\u81ea\u7136\u5e8f\u53f7\uff0c\u5728\u5217\u8868\u4e2d\u7684\u663e\u793a\u51fa\u81ea\u7136\u5e8f\u53f7\uff01"},{xtype:"checkboxfield",fieldLabel:"\u5220\u9664\u63d0\u9192",labelAlign:"right",name:"alertDelete",columnWidth:1,bind:"{alertDelete}",uncheckedValue:!1,hidden:!d.deleteEnable,boxLabel:"\u5220\u9664\u6570\u636e\u65f6\uff0c\u7cfb\u7edf\u4f1a\u5f39\u51fa\u786e\u8ba4\u5220\u9664\u6846\uff0c\u907f\u514d\u8bef\u64cd\u4f5c\u5220\u9664\uff01"},
{xtype:"checkboxfield",fieldLabel:"\u4fee\u6539\u63d0\u9192",labelAlign:"right",columnWidth:1,name:"alertUpdate",bind:"{alertUpdate}",hidden:!d.updateEnable,uncheckedValue:!1,boxLabel:"\u4fee\u6539\u6570\u636e\u65f6\uff0c\u7cfb\u7edf\u4f1a\u5f39\u51fa\u786e\u8ba4\u4fee\u6539\u6846\uff0c\u907f\u514d\u8bef\u64cd\u4f5c\u4fee\u6539\uff01"},{xtype:"checkboxfield",fieldLabel:"\u81ea\u52a8\u63d0\u4ea4",labelAlign:"right",columnWidth:1,name:"autoUpdate",bind:"{autoUpdate}",hidden:!d.updateEnable,uncheckedValue:!1,
boxLabel:"\u53cc\u51fb\u7f16\u8f91\u4fee\u6539\u6570\u636e\u540e\uff0c\u7cfb\u7edf\u81ea\u52a8\u63d0\u4ea4\u88ab\u4fee\u6539\u7684\u6570\u636e\uff01"},{xtype:"checkboxfield",fieldLabel:"\u5f39\u51fa\u8be6\u60c5",labelAlign:"right",columnWidth:1,name:"autoDetails",bind:"{autoDetails}",uncheckedValue:!1,boxLabel:"\u70b9\u51fb\u6570\u636e\u65f6\uff0c\u53f3\u4fa7\u81ea\u52a8\u5f39\u51fa\u6b64\u6570\u636e\u7684\u8be6\u60c5\u7a97\u4f53\uff01"},{xtype:"checkboxfield",fieldLabel:"\u60ac\u6d6e\u9605\u89c8",
labelAlign:"right",columnWidth:1,name:"hoverTip",bind:"{hoverTip}",uncheckedValue:!1,boxLabel:"\u5f53\u9f20\u6807\u60ac\u6d6e\u5728\u6570\u636e\u8d85\u8fc72\u79d2\u540e\uff0c\u4f1a\u5728\u9f20\u6807\u53f3\u4e0b\u65b9\u5f39\u51fa\u6b64\u6570\u636e\u7684\u9605\u89c8\uff01"},{xtype:"checkboxfield",fieldLabel:"\u6570\u636e\u5237\u65b0",labelAlign:"right",columnWidth:1,name:"refreshData",bind:"{refreshData}",uncheckedValue:!1,boxLabel:"\u79bb\u5f00\u6b64\u6807\u7b7e\u9875\u540e\uff0c\u518d\u6b21\u8fd4\u56de\u6b64\u6807\u7b7e\u9875\u65f6\u5c06\u5237\u65b0\u5f53\u524d\u6807\u7b7e\u9875\u7684\u5217\u8868\u6570\u636e\uff01"}]}),
f=parseInt((.3*document.body.clientWidth).toFixed(0)),l=Ext.create("Ext.window.Window",{title:"\u529f\u80fd\u8bbe\u7f6e",iconCls:"extIcon extSet",height:460,width:f,minHeight:400,minWidth:300,layout:"border",resizable:!1,animateTarget:a,items:[e],modal:!0,constrain:!0,buttons:["-\x3e",{text:"\u4fdd\u5b58\u914d\u7f6e",iconCls:"extIcon extSave whiteColor",handler:function(){c.Dialog.showWait("\u6b63\u5728\u4fdd\u5b58\u4e2d\u2026");c.Server.saveExtConfig(d.code,"GridOperate",Ext.encode(e.getForm().getValues()),
function(m,k){c.Dialog.hideWait();m?(d.operate=e.getForm().getValues(),c.Dialog.toast("\u529f\u80fd\u8bbe\u7f6e\u6210\u529f\uff01"),c.Grid.refreshGridNumberColumn(d),l.close()):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",k)})}},{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){l.close()}}]});l.show()};b.getColumnEnumName=function(a){return c.Grid.isEnumColumn(a)&&Ext.isObject(a.field)?a.field.enumName:null};b.getColumnFieldType=function(a){return Ext.isObject(a.field)?a.field.xtype:
a.field};b.exportGrid=function(a){if(a.getStore().entity){var d="\u60a8\u786e\u5b9a\u5bfc\u51fa\u5f53\u524d\u6761\u4ef6\u4e0b\u7684\u6240\u6709\u6570\u636e\u5417\uff1f",e=a.getSelection();if(0<e.length)d="\u60a8\u786e\u5b9a\u5bfc\u51fa\u9009\u4e2d\u7684"+e.length+"\u6761\u6570\u636e\u5417\uff1f";else if(0===a.getStore().getTotalCount()){c.Dialog.toast("\u5f53\u524d\u9875\u9762\u6682\u65e0\u6570\u636e\uff01");return}var f=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",
border:0,layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/question.json"},{xtype:"label",text:d},{xtype:"checkboxfield",boxLabel:"\u5bfc\u51fa\u65f6\u81ea\u52a8\u751f\u6210\u6570\u636e\u5e8f\u53f7",uncheckedValue:!1,name:"exportIndex"}]}),l=function(k){if(a)if(a.getStore().entity){a.getStore().entity&&(k.title=a.getStore().entity.comment);if(0<e.length){if(!a.getStore().entity.idProperty){c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u9009\u4e2d\u5bfc\u51fa\u529f\u80fd\uff01");
return}for(var h=0;h<e.length;h++)for(var g=e[h],p=0;p<a.getStore().entity.idProperty.length;p++){var q=a.getStore().entity.idProperty[p],r="where['"+q+"#']";k[r]||(k[r]=[]);k[r].push(g.get(q))}}Ext.each(a.getColumns(),function(t,v){t.isHidden()||!c.Base.toBool(t.excelOutHeader,!0)||Ext.isEmpty(t.dataIndex)||(k["column["+v+"].index"]=v,k["column["+v+"].width"]=t.width,k["column["+v+"].text"]=t.configText,k["column["+v+"].groupHeaderText"]=t.groupHeaderText,k["column["+v+"].enum"]=c.Grid.getColumnEnumName(t),
k["column["+v+"].dataIndex"]=c.Entity.getRealAttr(t),k["column["+v+"].valueIndex"]=t.dataIndex,k["column["+v+"].file"]=c.Grid.isFileColumn(t),k["column["+v+"].files"]=c.Grid.isFilesColumn(t),k["column["+v+"].type"]=c.Grid.getColumnFieldType(t),k["column["+v+"].comment"]=t.excelComment||t.comment,c.Grid.isDateColumn(t)&&(k["column["+v+"].format"]=t.field.format))});c.Dialog.showWait("\u6b63\u5728\u5bfc\u51fa\u4e2d\u2026\u2026");c.Server.exportExcel(c.Store.mergeStoreParamBySelect(a.getStore(),k),function(t,
v,w){c.Dialog.hideWait();t?(c.Dialog.toast(w),m.close(),location.href="attach/"+v):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5bfc\u51fa\u5931\u8d25\uff01"+w)})}else c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u6b64\u529f\u80fd\uff01")},m=Ext.create("Ext.window.Window",{title:"\u5bfc\u51faExcel",height:330,iconCls:"extIcon extExcel",width:300,layout:"border",constrain:!0,resizable:!1,items:[f],modal:!0,buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){m.close()}},
{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){l(f.getForm().getValues())}},"-\x3e"]});m.show()}else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5bfc\u51fa\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!")};b.downExcelModel=function(a){var d=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",border:0,layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/question.json"},
{xtype:"label",text:"\u786e\u5b9a\u4e0b\u8f7d\u5bfc\u5165\u6570\u636e\u7684Excel\u6a21\u677f\u5417\uff1f"},{xtype:"checkboxfield",boxLabel:"\u5305\u542b\u5df2\u9690\u85cf\u7684\u5217",uncheckedValue:!1,name:"exportHidden"}]}),e=function(l){if(a){c.Dialog.showWait("\u6b63\u5728\u751f\u6210\u4e2d\u2026\u2026");var m={entityCode:a.getStore().entity.entityCode};a.getStore().entity&&(m.title=a.getStore().entity.comment);Ext.each(a.getColumns(),function(k,h){if(!(c.Grid.isFileColumn(k)||c.Grid.isFilesColumn(k)||
!c.Base.toBool(k.excelHeader,!0)||!c.Base.toBool(l.exportHidden,!1)&&k.isHidden()||Ext.isEmpty(k.dataIndex))){var g=h;10>h&&(g="0"+h);m["column["+g+"].index"]=h;m["column["+g+"].width"]=k.width;m["column["+g+"].text"]=k.configText;m["column["+g+"].groupHeaderText"]=k.groupHeaderText;m["column["+g+"].enum"]=c.Grid.getColumnEnumName(k);m["column["+g+"].type"]=c.Grid.getColumnFieldType(k);m["column["+g+"].comment"]=k.excelComment||k.comment;m["column["+g+"].dataIndex"]=c.Entity.getRealAttr(k);m["column["+
g+"].excelHeaderText"]=k.excelHeaderText;c.Grid.isDateColumn(k)&&(m["column["+g+"].format"]=k.field.format)}});c.Server.excelModule(m,function(k,h,g){c.Dialog.hideWait();k?(f.close(),c.Dialog.toast("\u6a21\u677f\u751f\u6210\u6210\u529f\uff01"),location.href="attach/"+h):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u751f\u6210\u5931\u8d25\uff01"+g)})}},f=Ext.create("Ext.window.Window",{title:"\u4e0b\u8f7d\u6a21\u677f",height:320,iconCls:"extIcon extExcel",width:280,layout:"border",constrain:!0,resizable:!1,
items:[d],modal:!0,buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){f.close()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){e(d.getForm().getValues())}},"-\x3e"]});f.show()};b.importExcel=function(a,d,e,f){return new Ext.Promise(function(l,m){e=e?Ext.Array.clone(e):[];f||(f=c.Server.importEntityExcelUrl());e.push({xtype:"filefield",fieldLabel:"Excel\u6587\u4ef6",buttonText:"\u9009\u62e9\u6587\u4ef6",allowBlank:!1,name:"file",columnWidth:1,listeners:{change:function(p,
q,r){null==q||0==q.length||c.FileModule.excel().match(q)||(k.form&&k.form.reset(),Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u4e0a\u4f20\u6709\u6548\u7684Excel\u6587\u6863\uff01"))}}});var k=Ext.create("Ext.form.FormPanel",{url:f,method:"POST",margin:"5",fileUpload:!0,width:400,callBacked:!1,border:0,layout:"column",defaults:{labelWidth:80,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},items:e,doSubmit:function(){var p=k.form;if(p.isValid()){var q=new Ext.LoadMask({msg:"\u6b63\u5728\u5bfc\u5165\u4e2d\u2026",
target:g});q.show();p.submit({params:d,success:function(r,t){q.destroy();Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",t.result.message,function(){c.Base.runCallBack(l,t.result);g.close()})},failure:function(r,t){q.destroy();t.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5bfc\u5165\u5931\u8d25\uff01"+t.result.message)}})}},listeners:{render:function(p){try{new Ext.util.KeyMap({target:p.getEl(),key:13,fn:k.doSubmit,scope:Ext.getBody()})}catch(q){console.error(q)}}}}),h="btnSubmit"+(new Date).getTime(),
g=Ext.create("Ext.window.Window",{title:"\u5bfc\u5165Excel\u6570\u636e",layout:"fit",resizable:!1,scrollable:!1,items:[k],modal:!0,iconCls:"extIcon extUpload",animateTarget:a,constrain:!0,buttons:[{text:"\u91cd\u7f6e",width:88,iconCls:"extIcon extReset",handler:function(){k.form&&k.form.reset()}},{text:"\u4e0a\u4f20",width:88,id:h,iconCls:"extIcon extOk",handler:function(){k.doSubmit()}}],listeners:{show:function(p,q){1===e.length&&(k.getForm().findField("file").fileInputEl.dom.click(),Ext.getCmp(h).focus())}}});
g.show()})};b.downDataGrid=function(a){if(a.getStore().entity){var d="\u60a8\u786e\u5b9a\u4e0b\u8f7d\u5f53\u524d\u6761\u4ef6\u4e0b\u7684\u6240\u6709\u6570\u636e\u5417\uff1f",e=a.getSelection();if(0<e.length)d="\u60a8\u786e\u5b9a\u4e0b\u8f7d\u9009\u4e2d\u7684"+e.length+"\u6761\u6570\u636e\u5417\uff1f";else if(0===a.getStore().getTotalCount()){c.Dialog.toast("\u5f53\u524d\u9875\u9762\u6682\u65e0\u6570\u636e\uff01");return}a.getStore().entity?Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192",d,function(f,l){if("yes"===
f){f={};a.getStore().entity&&(f.title=a.getStore().entity.comment);if(0<e.length){if(!a.getStore().entity.idProperty){c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u4e0b\u8f7d\u9009\u4e2d\u6570\u636e\u529f\u80fd\uff01");return}for(l=0;l<e.length;l++)for(var m=e[l],k=0;k<a.getStore().entity.idProperty.length;k++){var h=a.getStore().entity.idProperty[k],g="where['"+h+"#']";f[g]||(f[g]=[]);f[g].push(m.get(h))}}c.Dialog.showWait("\u6b63\u5728\u4e0b\u8f7d\u4e2d\u2026\u2026");c.Server.downData(c.Store.mergeStoreParamBySelect(a.getStore(),
f),function(p,q,r){c.Dialog.hideWait();p?(c.Dialog.toast(q),location.href="attach/"+r):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",q)})}}):c.Dialog.toast("\u5f53\u524d\u5217\u8868\u4e0d\u652f\u6301\u6b64\u529f\u80fd\uff01")}else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4e0b\u8f7d\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!")};b.loadDataGrid=function(a,d){return new Ext.Promise(function(e,f){var l=Ext.create("Ext.form.FormPanel",{url:c.Server.loadEntityDataUrl(),method:"POST",margin:"5",
fileUpload:!0,width:400,callBacked:!1,border:0,layout:"column",defaults:{labelWidth:80,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},items:[{xtype:"filefield",fieldLabel:"\u6570\u636e\u6587\u4ef6",buttonText:"\u9009\u62e9\u6587\u4ef6",allowBlank:!1,name:"file",columnWidth:1,listeners:{change:function(h,g,p){null==g||0==g.length||c.FileModule.data().match(g)||(l.form&&l.form.reset(),Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u4e0a\u4f20\u6709\u6548\u7684\u6570\u636e\u6587\u4ef6\uff01"))}}}],
doSubmit:function(){var h=l.form;if(h.isValid()){var g=new Ext.LoadMask({msg:"\u6b63\u5728\u4e0a\u4f20\u4e2d\u2026",target:k});g.show();h.submit({params:d,success:function(p,q){g.destroy();Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",q.result.message,function(){c.Base.runCallBack(e,q.result);k.close()})},failure:function(p,q){g.destroy();q.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4e0a\u4f20\u5931\u8d25\uff01"+q.result.message)}})}},listeners:{render:function(h){try{new Ext.util.KeyMap({target:h.getEl(),
key:13,fn:l.doSubmit,scope:Ext.getBody()})}catch(g){console.error(g)}}}}),m="btnSubmit"+(new Date).getTime(),k=Ext.create("Ext.window.Window",{title:"\u4e0a\u4f20\u5b9e\u4f53\u6570\u636e",layout:"fit",resizable:!1,scrollable:!1,items:[l],modal:!0,iconCls:"extIcon extUpload",animateTarget:a,constrain:!0,buttons:[{text:"\u91cd\u7f6e",width:88,iconCls:"extIcon extReset",handler:function(){l.form&&l.form.reset()}},{text:"\u4e0a\u4f20",width:88,id:m,iconCls:"extIcon extOk",handler:function(){l.doSubmit()}}],
listeners:{show:function(h,g){l.getForm().findField("file").fileInputEl.dom.click();Ext.getCmp(m).focus()}}});k.show()})};b.saveGridColumn=function(a){if(Ext.isEmpty(a.code))return c.Base.getEmptyPromise();if(a)return new Ext.Promise(function(d,e){try{var f={noneManager:!0},l=!1,m=!1;a.getStore()&&a.getStore().entity&&(l=Ext.isFunction(a.getStore().entity.getColumnRender),m=Ext.isFunction(a.getStore().entity.getEditorField),c.Base.toBool(a.menuPanelList,!1)&&(f.entityCode=a.getStore().entity.entityCode),
c.System.InitHandler.isSilenceGlobalSaving()&&(f.entityCode=a.getStore().entity.entityCode),c.Base.toBool(a.mainEntityList,!0)||delete f.entityCode,a.columnEntityCode&&(f.entityCode=a.columnEntityCode));var k={};Ext.each(a.getColumns(),function(h,g){if(Ext.isEmpty(h.dataIndex))"rownumberer"===h.xtype&&(g={},g.width=h.width,g.text=h.configText,k.rownumberer=g);else if(c.System.ManagerHandler.isSuperRole()||h.hideable||!h.hidden){g={column:!0};g.width=h.width;g.hidden=h.isHidden();g.locked=h.isLocked();
g.text=h.configText;g.dataIndex=h.dataIndex;g.columnName=h.columnName;g.align=h.align;g.groupHeaderText=h.groupHeaderText;g.detailsable=h.detailsable;h.groupHeaderText&&"x-column-header"===h.ownerCt.componentCls&&h.ownerCt.isHidden()&&(g.hidden=!0);a.getStore().entity&&(g.entityCode=a.getStore().entityCode);var p=a.getStore().getSorters().getByKey(h.dataIndex);p&&(g.sortDirection=p.getDirection());g.searchLink=h.searchLink;g.searchExclude=h.searchExclude;g.index=h.getIndex();g.canEdit=a.checkEditor()&&
c.Base.toBool(h.editable,!0);g.version=c.Base.toString(a.columnsVersion,"1");l||(g.rendererFunction=h.rendererFunction,(p=c.Renders.getRenderFunStr(h))&&Ext.isEmpty(g.rendererFunction)&&(g.rendererFunction=p));m||(a.checkEditor()&&c.Base.toBool(h.editable,!0)?g.editorField=c.Grid.getColumnSimpleEditorJson(h):g.editorField="");k[h.code]=g}});k.PageTool={pageSize:a.getStore().pageSize,column:!1};c.Server.saveExtConfig(a.code,"GridColumn",Ext.encode(k),function(h,g){d(h)},f)}catch(h){e(h)}})};b.saveGridButton=
function(a,d){return Ext.isEmpty(a.code)||Ext.isEmpty(d)||!c.Base.toBool(a.menuPanelList,!1)?c.Base.getEmptyPromise():new Ext.Promise(function(e,f){try{var l=[];Ext.each(a.bindDetailButtons,function(k,h){h={};h.text=k.text;h.iconCls=k.iconCls;h.icon=k.icon;h.handler=k.handler.toString();l.push(h)});var m={entityCode:d.entityCode};c.Server.saveExtConfig(d.entityCode,"GridButton",Ext.encode(l),function(k,h){e(k)},m)}catch(k){f(k)}})};b.restoreGridButton=function(a){return new Ext.Promise(function(d,
e){try{c.Server.showExtConfig(a,"GridButton",function(f,l){var m=[];f&&(m=Ext.decode(l));d(m)})}catch(f){e(f)}})};b.restoreGridColumn=function(a){return new Ext.Promise(function(d,e){try{Ext.isEmpty(a.code)?e("Grid\u7f16\u53f7[code]\u4e0d\u53ef\u4e3a\u7a7a\uff01"):a&&c.Server.showExtConfig(a.code,"GridColumn",function(f,l){if(a){var m={};f&&(m=Ext.decode(l));var k=m.rownumberer;f=[];var h={};l=[];var g=a.getColumns(),p=[];null!==a.getStore()&&a.getStore().entity&&(p=a.getStore().entity.idProperty);
for(var q=0;q<g.length;q++){var r=g[q];if("checkcolumn"!==r.xtype)if(k&&"rownumberer"===r.xtype)0<parseInt(r.width)&&(r.width=k.width);else if(!c.Base.toBool(a.power,!0)||r.hideable||!r.hidden){var t=r.cloneConfig();t.restoreConfig=!0;t.groupHeaderText=r.groupHeaderText;t.index=q;if(c.System.ConfigHandler.isGridColumnRestore()&&m.hasOwnProperty(r.code)){var v=m[r.code],w;for(w in v)"renderer"!==w&&"rendererFunction"!==w&&(t[w]=v[w])}Ext.isEmpty(t.sortDirection)||Ext.isEmpty(r.dataIndex)||l.push({property:t.dataIndex,
direction:t.sortDirection.toUpperCase()});Ext.isEmpty(t.groupHeaderText)||(v=t.groupHeaderText,h.hasOwnProperty(v)||(h[v]=[]),h[v].push(f.length));if(c.System.ConfigHandler.isGridIDColumnHidden()&&p&&!Ext.isEmpty(r.dataIndex))for(r=0;r<p.length;r++)t.dataIndex===p[r]&&(t.hidden=!0);c.Base.toString(t.version,"1")!==c.Base.toString(a.columnsVersion,"1")&&(t.index=q);f.push(t)}}k=[];for(w in h)if(g=h[w],!(2>g.length)){p=999999;t=[];for(q=0;q<g.length;q++)r=g[q],p=Math.min(p,r),t.push(f[r]);t.sort(function(x,
y){return x.index-y.index});f[p]={index:p,text:w,menuDisabled:!0,columns:t};k=k.concat(t)}for(q=0;q<k.length;q++)f=Ext.Array.remove(f,k[q]);var z=!1;f.sort(function(x,y){z=!Ext.isEmpty(x.flex)||!Ext.isEmpty(y.flex);return x.index-y.index});m.hasOwnProperty("PageTool")&&(m=m.PageTool,a.getStore().pageSize=Math.min(m.pageSize,c.Store.maxPageSize),(w=a.down("combo[pageTool\x3dtrue]"))&&w.setValue(Math.min(m.pageSize,c.Store.maxPageSize)));c.System.InitHandler.isSilenceGlobalSaving()||a.getStore().sort(l);
m={xtype:"rowplaceholder",minWidth:30};z||(m.flex=1);f.push(m);a.reconfigure(f);d()}})}catch(f){e(f)}})};b.restoreGridOperate=function(a){return new Ext.Promise(function(d,e){try{Ext.isEmpty(a.code)?e("Grid\u7f16\u53f7[code]\u4e0d\u53ef\u4e3a\u7a7a\uff01"):c.Server.showExtConfig(a.code,"GridOperate",function(f,l){var m={};f&&(m=Ext.decode(l));a&&(!m.hasOwnProperty("showRowNumber")&&c.Grid.checkConfigGridNumberColumn(a)&&(m.showRowNumber=!0),a.operate||(a.operate=new n),a.operate=c.Json.mergeJson(new n,
a.operate),a.operate=c.Json.mergeJson(a.operate,m),d())})}catch(f){e(f)}})};b.getColumnGrid=function(a){a.grid||(a.grid=a.up("treepanel,grid"));return a.grid.ownerGrid?a.grid.ownerGrid:a.grid};b.getHeaderContainerGrid=function(a){a.grid||(a.grid=a.up("treepanel,grid"));return a.grid.ownerGrid?a.grid.ownerGrid:null};b.showColumnCompute=function(a,d,e){try{if(d)if(a.getStore().entity){var f=a.getSelection();if(0<f.length){a=null;for(var l="",m=0;m<f.length;m++){var k=parseFloat(f[m].get(d.dataIndex));
"sum"===e?(l=d.configText+"\u603b\u548c\uff1a",a||(a=0),a+=k):"avg"===e?(l=d.configText+"\u5e73\u5747\u503c\uff1a",a||(a=0),a+=k):"min"===e?(l=d.configText+"\u6700\u5c0f\u503c\uff1a",a||(a=k),a=Math.min(k,a)):"max"===e&&(l=d.configText+"\u6700\u5927\u503c\uff1a",a||(a=k),a=Math.max(k,a))}"avg"===e&&(a/=f.length);try{Ext.isFunction(d.renderer)?Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5f53\u524d\u9009\u4e2d\u7684\u6570\u636e\uff0c"+l+d.renderer(a)):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5f53\u524d\u9009\u4e2d\u7684\u6570\u636e\uff0c"+
l+a)}catch(h){Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5f53\u524d\u9009\u4e2d\u7684\u6570\u636e\uff0c"+l+a)}}else l={entityCode:a.getStore().entity.entityCode,field:d.dataIndex,type:e,storeId:a.getStore().getStoreCode()},c.Dialog.showWait("\u6b63\u5728\u8ba1\u7b97\u4e2d\u2026\u2026"),$.post(c.Server.computeUrl(),l,function(h){c.Dialog.hideWait();var g="";"sum"===e?g=d.configText+"\u603b\u548c\uff1a":"avg"===e?g=d.configText+"\u5e73\u5747\u503c\uff1a":"min"===e?g=d.configText+"\u6700\u5c0f\u503c\uff1a":
"max"===e&&(g=d.configText+"\u6700\u5927\u503c\uff1a");try{Ext.isFunction(d.renderer)?Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",g+d.renderer(h.data)):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",g+h.data)}catch(p){Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",g+h.data)}})}else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8ba1\u7b97\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!");else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8ba1\u7b97\u5931\u8d25!\u8ba1\u7b97\u5217\u65e0\u6548\uff01")}catch(h){console.error(h)}};
b.getColumnSimpleEditor=function(a,d){try{var e={};Ext.isObject(a.field)?e.xtype=a.field.xtype:Ext.isString(a.field)?e.xtype=a.field:e.xtype="textfield";Ext.isObject(a.config.field)&&(e=d?c.Base.copy(a.config.field):a.config.field);if(d){if(c.Form.isContentField(a.field)||c.Form.isHtmlContentField(a.field)||c.Form.isTargetField(a.field)||c.Form.isFileField(a.field)||c.Form.isFilesField(a.field)||c.Form.isMonacoEditorField(a.field))e.xtype="textfield";c.Form.isPCAField(a.field)&&(e.selectType=1,0<=
a.text.indexOf("\u7701")&&(e.level=1),0<=a.text.indexOf("\u5e02")&&(e.level=2),0<=a.text.indexOf("\u533a")&&(e.level=3))}Ext.isEmpty(e.xtype)&&(e.xtype="textfield");e.dataIndex=a.dataIndex;d&&(e.columnSearchField=!0);return e}catch(f){console.error(f)}return null};b.getColumnSimpleEditorJson=function(a,d){return(a=c.Grid.getColumnSimpleEditor(a,d))?c.Json.objectToJsonUnsafe(a):null};b.showBatchEditColumnMenu=function(a){var d=Ext.create(a.getConfigField());if(d){d.flex=1;d.emptyText="\u8bf7\u8f93\u5165";
var e=function(l){if(!Ext.isEmpty(l.getValue())){var m=c.Grid.getColumnGrid(a),k=m.getStore();k&&(k.holdUpdate=!0,m=m.getSelectionModel().getSelection(),0<m.length?Ext.each(m,function(h,g){c.Store.setRecordValue(h,a.dataIndex,l)}):k.each(function(h,g){c.Store.setRecordValue(h,a.dataIndex,l)}),k.holdUpdate=!1,k.fireEvent("endupdate"))}},f="\u6279\u91cf\u4fee\u6539\u5f53\u524d\u9875\u7684\u3010"+a.configText+"\u3011\u6570\u636e";0<c.Grid.getColumnGrid(a).getSelection().length&&(f="\u6279\u91cf\u4fee\u6539\u9009\u62e9\u7684"+
c.Grid.getColumnGrid(a).getSelection().length+"\u6761\u3010"+a.configText+"\u3011\u6570\u636e");Ext.isFunction(d.setEmptyText)&&d.setEmptyText(f);d.editable=!0;Ext.isFunction(d.showWindow)?d.showWindow(a,function(l){e(l)},f):(a.batchEditMenu||(a.batchEditMenu=Ext.create("Ext.menu.Menu",{showSeparator:!1,scrollToHidden:!0,layout:"fit",shadow:!1,editorMenu:!0,modal:!0,doUpdate:function(){var l=this,m=l.items.get(0).items.get(0);if(m)if(m.isValid()){var k=this.down("button[name\x3d'confirm']");k.setText("\u7a0d\u7b49");
k.setDisabled(!0);(new Ext.Promise(function(h,g){e(m);m.setValue(null);h()})).then(function(){k.setText("\u786e\u5b9a");k.setDisabled(!1);l.hide()})}else c.Component.shakeComment(l),c.Dialog.toast(c.Form.getFieldError(m)[0])},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},style:{background:"#ffffff",borderWidth:1,borderColor:"#ffffff",color:"#eeeee"},border:0,items:[d,{xtype:"button",text:"\u786e\u5b9a",name:"confirm",iconCls:"extIcon extOk",margin:"0 0 0 2",height:c.Form.getFieldMinHeight(!1),
handler:function(){a.batchEditMenu.doUpdate()}}]}],listeners:{show:function(l,m){l.items.get(0).items.get(0).focus()}}}),a.batchEditMenu.addCls("edit-menu"),a.batchEditMenu.addCls("edit-details-menu")),a.batchEditMenu.setWidth(Math.max(a.getWidth(),225)),a.batchEditMenu.setHeight(a.getHeight()),a.batchEditMenu.showBy(a,"tl"))}else c.Dialog.toast("\u65e0\u7f16\u8f91\u6743\u9650\uff08E-4\uff09\uff01")};b.showBatchUpdateColumnWindow=function(a){var d=Ext.create(a.getConfigField());if(d){d.flex=1;d.emptyText=
"\u8bf7\u8f93\u5165";d.editable=!0;var e=c.Grid.getColumnGrid(a).getStore(),f="\u6279\u91cf\u66f4\u65b0\u3010"+a.configText+"\u3011\uff0c\u5f53\u524d\u6761\u4ef6\u4e0b\u5171"+e.getTotalCount()+"\u6761\u6570\u636e\u3002",l=function(h,g,p){c.Dialog.showWait("\u6b63\u5728\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");var q={entityCode:e.entity.entityCode,storeId:e.getStoreCode()};q.menu=e.entity.comment;q.field=g;q.fieldValue=p;c.Server.updateDBEntity(q,function(r,t){c.Dialog.hideWait();r?
(c.Dialog.toast(t),e.reload(),h&&h.close()):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",t)})};if(Ext.isFunction(d.showWindow))d.showWindow(a,function(h){c.Dialog.showConfirm("\u7cfb\u7edf\u63d0\u9192","\u5c06\u6279\u91cf\u66f4\u65b0\u6570\u636e\uff0c\u6b64\u66f4\u65b0\u662f\u6c38\u4e45\u6027\u4e14\u65e0\u6cd5\u64a4\u9500\uff01\u8bf7\u60a8\u786e\u8ba4\uff01",function(g){"yes"===g&&l(null,c.Entity.getRealAttr(a),h.getValue())})},f);else{d.columnWidth=1;d.dataField=!0;var m=Ext.create("Ext.form.FormPanel",
{bodyPadding:5,region:"center",border:0,defaults:{margin:"5 5 5 5"},layout:{type:"vbox",align:"stretch"},items:[d,{xtype:"checkboxfield",height:50,boxLabel:f+"\x3cb style\x3d'color:red;'\x3e\u6211\u5df2\u4e86\u89e3\u6b64\u66f4\u65b0\u662f\u6c38\u4e45\u6027\u4e14\u65e0\u6cd5\u64a4\u9500 \uff01\x3c/b\x3e",listeners:{change:function(h,g){k.down("#updateBtn").setDisabled(!g)}}}]}),k=Ext.create("Ext.window.Window",{title:"\u6279\u91cf\u66f4\u65b0\u6570\u636e",subtitle:"v3",iconCls:"extIcon extEdit",width:450,
layout:{type:"vbox",pack:"center",align:"stretch"},items:[m],modal:!0,constrain:!0,resizable:!1,unpin:!1,buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){k.close()}},{text:"\u7acb\u5373\u66f4\u65b0",itemId:"updateBtn",disabled:!0,iconCls:"extIcon extOk whiteColor",handler:function(){var h=c.Entity.getRealAttr(a),g=m.down("[dataField\x3dtrue]");g&&l(k,h,g.getValue())}}]});k.show()}}else c.Dialog.toast("\u65e0\u7f16\u8f91\u6743\u9650\uff08E-5\uff09\uff01")};b.showBatchReplaceColumnWindow=
function(a){var d=c.Grid.getColumnGrid(a).getStore(),e="\u6279\u91cf\u66ff\u6362\u3010"+a.configText+"\u3011\uff0c\u5f53\u524d\u6761\u4ef6\u4e0b\u5171"+d.getTotalCount()+"\u6761\u6570\u636e\u3002",f=Ext.create("Ext.form.FormPanel",{bodyPadding:5,region:"center",autoScroll:!0,border:0,defaults:{margin:"5 5 5 5",labelWidth:80,labelAlign:"right"},layout:{type:"vbox",align:"stretch"},items:[{name:"replace",xtype:"textfield",fieldLabel:"\u66ff\u6362\u7684\u5b57\u7b26",columnWidth:1,allowBlank:!1},{name:"toValue",
xtype:"textfield",fieldLabel:"\u65b0\u7684\u5b57\u7b26",columnWidth:1,allowBlank:!1},{xtype:"checkboxfield",boxLabel:e+"\x3cb style\x3d'color:red;'\x3e\u6211\u5df2\u4e86\u89e3\u6b64\u66ff\u6362\u662f\u6c38\u4e45\u6027\u4e14\u65e0\u6cd5\u64a4\u9500 \uff01\x3c/b\x3e",height:50,listeners:{change:function(m,k){l.down("#updateBtn").setDisabled(!k)}}}]}),l=Ext.create("Ext.window.Window",{title:"\u6279\u91cf\u66ff\u6362\u6570\u636e",iconCls:"extIcon extEdit",width:450,layout:{type:"vbox",pack:"center",align:"stretch"},
items:[f],modal:!0,constrain:!0,resizable:!1,unpin:!1,doUpdate:function(m){var k=this;c.Dialog.showWait("\u6b63\u5728\u66ff\u6362\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");m.entityCode=d.entity.entityCode;m.storeId=d.getStoreCode();m.menu=d.entity.comment;m.field=c.Entity.getRealAttr(a);c.Server.replaceDBEntity(m,function(h,g){c.Dialog.hideWait();h?(c.Dialog.toast(g),d.reload(),k.close()):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",g)})},buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",
handler:function(){l.close()}},{text:"\u7acb\u5373\u66ff\u6362",itemId:"updateBtn",disabled:!0,iconCls:"extIcon extOk whiteColor",handler:function(){l.doUpdate(f.getValues())}}]});l.show()};b.showBatchEditColumnRandomWindow=function(a){if(Ext.isFunction(window.showRandomData))window.showRandomData(a);else{var d="Random"+Ext.now(),e=1,f=!1,l="Y-m-d H:i:s",m=c.Grid.getColumnGrid(a).getStore().getTotalCount(),k="\u6279\u91cf\u968f\u673a\u751f\u6210\u5f53\u524d\u9875\u7684\u3010"+a.configText+"\u3011\u5217\u6570\u636e";
0<c.Grid.getColumnGrid(a).getSelection().length&&(k="\u6279\u91cf\u968f\u673a\u751f\u6210\u9009\u62e9\u7684"+c.Grid.getColumnGrid(a).getSelection().length+"\u6761\u3010"+a.configText+"\u3011\u5217\u6570\u636e",m=c.Grid.getColumnGrid(a).getSelection().length);if(c.Grid.isNumberColumn(a))e=2,f=!0;else if(c.Grid.isDateColumn(a))e=3,Ext.isObject(a.field)&&(l=a.field.format),f=!0;else if(c.Grid.isEnumColumn(a)||c.Grid.isComboColumn(a)){e=5;f=!0;var h=[],g=Ext.create(a.field);g.getStore().each(function(x,
y){h.push(x.get(g.valueField))});var p=h.join(",")}else c.Grid.isContentColumn(a)&&(e=4);var q={xtype:"fieldcontainer",layout:"column",columnWidth:1,id:d+"_1",defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},random:function(){var x=[],y=Ext.getCmp(d+"_textPrefix").getValue(),A=Ext.getCmp(d+"_textStartNumber").getValue();for(A=parseInt(A);A<Number.MAX_VALUE&&(x.push(y+A),x.length!==m);A++);return x},items:[{xtype:"fieldset",columnWidth:1,layout:"column",
defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},title:"\u6587\u5b57\u8bbe\u7f6e",items:[{fieldLabel:"\u6587\u5b57\u524d\u7f00",id:d+"_textPrefix",allowBlank:!1,xtype:"textfield"},{fieldLabel:"\u5f00\u59cb\u5e8f\u6570",id:d+"_textStartNumber",value:1,allowBlank:!1,xtype:"numberfield"}]}]},r={xtype:"fieldcontainer",layout:"column",columnWidth:1,id:d+"_2",hidden:!0,disabled:!0,defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,
emptyText:"\u8bf7\u586b\u5199"},random:function(){var x=[],y=Ext.getCmp(d+"_dotNumber").getValue(),A=Ext.getCmp(d+"_minNumber").getValue(),B=Ext.getCmp(d+"_maxNumber").getValue();if(A>B)c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u6700\u5927\u6570\u5b57\u5fc5\u987b\u5927\u4e8e\u6700\u5c0f\u6570\u5b57\uff01");else{for(var C=0;C<Number.MAX_VALUE&&(x.push((Math.random()*(B-A)+A).toFixed(y)),x.length!==m);C++);return x}},items:[{xtype:"fieldset",columnWidth:1,layout:"column",defaults:{labelWidth:60,
margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},title:"\u6570\u5b57\u8bbe\u7f6e",items:[{fieldLabel:"\u4fdd\u7559\u4f4d\u6570",id:d+"_dotNumber",value:0,allowBlank:!1,xtype:"numberfield"},{fieldLabel:"\u6700\u5c0f\u6570\u5b57",id:d+"_minNumber",value:0,allowBlank:!1,xtype:"numberfield"},{fieldLabel:"\u6700\u5927\u6570\u5b57",id:d+"_maxNumber",allowBlank:!1,xtype:"numberfield"}]}]};l={xtype:"fieldcontainer",layout:"column",columnWidth:1,id:d+"_3",hidden:!0,disabled:!0,
defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},random:function(){var x=[],y=Ext.getCmp(d+"_minDate").getValue();y=Ext.Date.parse(y,c.Base.guessDateFormat(y));var A=Ext.getCmp(d+"_maxDate").getValue();A=Ext.Date.parse(A,c.Base.guessDateFormat(A));if(y.getTime()>A.getTime())c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u6700\u5927\u65e5\u671f\u5fc5\u987b\u5927\u4e8e\u6700\u5c0f\u65e5\u671f\uff01");else{for(var B=0;B<Number.MAX_VALUE;B++){var C=
A.getTime()-y.getTime();C=Math.random()*C+y.getTime();x.push(Ext.Date.format(new Date(C),Ext.getCmp(d+"_minDate").format));if(x.length===m)break}return x}},items:[{xtype:"fieldset",columnWidth:1,layout:"column",defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},title:"\u65e5\u671f\u8bbe\u7f6e",items:[{fieldLabel:"\u6700\u5c0f\u65e5\u671f",xtype:"datefield",id:d+"_minDate",allowBlank:!1,format:l},{fieldLabel:"\u6700\u5927\u65e5\u671f",xtype:"datefield",
id:d+"_maxDate",allowBlank:!1,format:l}]}]};var t={xtype:"fieldcontainer",layout:"column",columnWidth:1,id:d+"_4",hidden:!0,disabled:!0,defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},random:function(){var x=[],y=Ext.getCmp(d+"_minLength").getValue(),A=Ext.getCmp(d+"_maxLength").getValue(),B=Ext.getCmp(d+"_longTextList").getValue();if(y>A)c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u6700\u5927\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e\u6700\u5c0f\u957f\u5ea6\uff01");
else{B=B.toString().trimAllSymbol().split("");for(var C=0;C<Number.MAX_VALUE;C++){for(var H=c.Base.randomInt(y,A),I=[],D=0;D<Number.MAX_VALUE;D++){var E=c.Base.randomInt(0,B.length-1);I.push(B[E]);if(I.length===H)break}x.push(I.join(""));if(x.length===m)break}return x}},items:[{xtype:"fieldset",columnWidth:1,layout:"column",defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},title:"\u6587\u5b57\u8bbe\u7f6e",items:[{fieldLabel:"\u6587\u5b57\u5e93",
id:d+"_longTextList",allowBlank:!1,xtype:"textfield",listeners:{change:function(x,y,A,B){Ext.getCmp(d+"_maxLength").setValue(y.truthLength())}}},{fieldLabel:"\u6700\u5c0f\u957f\u5ea6",id:d+"_minLength",value:1,minValue:1,allowBlank:!1,xtype:"numberfield"},{fieldLabel:"\u6700\u5927\u957f\u5ea6",id:d+"_maxLength",allowBlank:!1,minValue:1,xtype:"numberfield"}]}]};p={xtype:"fieldcontainer",layout:"column",columnWidth:1,id:d+"_5",hidden:!0,disabled:!0,defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",
columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},random:function(){for(var x=[],y=Ext.getCmp(d+"_numberList").getValue().toString().split(","),A=0;A<Number.MAX_VALUE;A++){var B=y[c.Base.randomInt(0,y.length-1)];if(!Ext.isEmpty(B)&&(x.push(B),x.length===m))break}return x},items:[{xtype:"fieldset",columnWidth:1,layout:"column",defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},title:"\u6570\u5b57\u96c6\u5408\u8bbe\u7f6e",items:[{fieldLabel:"\u6570\u5b57\u96c6\u5408",
id:d+"_numberList",allowBlank:!1,value:p,xtype:"textfield"},{xtype:"displayfield",value:"\u4ee5\u82f1\u6587\u9017\u53f7\uff08,\uff09\u4e3a\u5206\u9694\u7b26\uff01"}]}]};var v=Ext.create("Ext.form.Panel",{bodyPadding:5,region:"center",autoScroll:!0,layout:"column",defaults:{labelWidth:60,margin:"5 5 5 5",labelAlign:"right",columnWidth:1,emptyText:"\u8bf7\u586b\u5199"},items:[{xtype:"combo",name:"autoType",fieldLabel:"\u968f\u673a\u7c7b\u578b",editable:!1,displayField:"text",valueField:"id",value:1,
listeners:{change:function(x,y,A,B){Ext.getCmp(d+"_"+A).setHidden(!0);Ext.getCmp(d+"_"+A).setDisabled(!0);Ext.getCmp(d+"_"+y).setHidden(!1);Ext.getCmp(d+"_"+y).setDisabled(!1)}},store:Ext.create("Ext.data.Store",{fields:["id","text"],data:[{text:"\u6587\u672c",id:1},{text:"\u957f\u6587\u672c",id:4},{text:"\u6570\u5b57",id:2},{text:"\u6570\u5b57\u96c6\u5408",id:5},{text:"\u65e5\u671f",id:3}]})},q,r,l,t,p]}),w=function(x){var y=c.Grid.getColumnGrid(a),A=y.getStore();0!==x.length&&A&&(A.holdUpdate=!0,
y=y.getSelectionModel().getSelection(),0<y.length?Ext.each(y,function(B,C){Ext.isObject(x[C])?c.Store.setRecordValue(B,a.dataIndex,x[C]):B.set(a.dataIndex,x[C])}):A.each(function(B,C){Ext.isObject(x[C])?c.Store.setRecordValue(B,a.dataIndex,x[C]):B.set(a.dataIndex,x[C])}),A.holdUpdate=!1,A.fireEvent("endupdate"))},z=Ext.create("Ext.window.Window",{title:k,height:360,iconCls:"extIcon extRandom",width:450,layout:"border",items:[v],modal:!0,constrain:!0,listeners:{show:function(){var x=v.getField("autoType");
x.setValue(e);x.setReadOnly(f)}},buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){z.close()}},{text:"\u7acb\u5373\u751f\u6210",iconCls:"extIcon extOk whiteColor",handler:function(){if(v.getForm().isValid()){var x=v.getFieldValue("autoType");(x=Ext.getCmp(d+"_"+x).random())&&0!==x.length&&(w(x),z.close())}}}]});z.show()}};b.refreshColumnStyle=function(a){try{if(!Ext.isEmpty(a.dataIndex)){var d=a.sortDirection;d=Ext.isEmpty(d)?"\x3cfont size\x3d'1'\x3e\x3c/font\x3e":
"ASC"===d?'\x3cspan  style\x3d"color: '+c.Grid.operateWarnColor+'; font-size: xx-small; "\x3e\x26nbsp;\x26nbsp;[\u6b63\u5e8f]\x3c/span\x3e':'\x3cspan  style\x3d"color: '+c.Grid.operateWarnColor+'; font-size: xx-small; "\x3e\x26nbsp;\x26nbsp;[\u5012\u5e8f]\x3c/span\x3e';Ext.isEmpty(a.sumText)&&(a.sumText="\x3cfont size\x3d'1'\x3e\x3c/font\x3e");a.searching?(a.setText(c.Base.getSVGIcon("extSearch")+"\x26nbsp;"+a.configText+a.sumText+d+"\x26nbsp;"),a.setStyle("color",c.Grid.operateWarnColor)):(a.setText("\x26nbsp;"+
a.configText+a.sumText+d+"\x26nbsp;"),a.setStyle("color","#000000"));c.Grid.checkColumnSort(c.Grid.getColumnGrid(a))}}catch(e){console.error(e)}};b.checkColumnSort=function(a){try{var d=0<a.getStore().getSorters().length,e=a.child("#pagingToolBar");if(e){var f=e.down("button[toolType\x3dsortBtn]");d?(f.setIconCls("extIcon extSort redColor"),f.setUserCls("redBorder")):(f.setIconCls("extIcon extSort grayColor"),f.setUserCls(""))}}catch(l){console.error(l)}};b.checkHistoryConfig=function(a){var d=a.child("#pagingToolBar");
d&&(d=d.down("button[toolType\x3dselectHistoryBtn]"))&&(1===parseInt(a.selectHistoryConfig.state)?(d.setIconCls(d.baseIconCls+" redColor"),d.setUserCls("redBorder")):(d.setIconCls(d.baseIconCls+" grayColor"),d.setUserCls("")))};b.configColumnProperty=function(a){try{a.configText=a.text,a.toSearchKey=function(d,e){return"colWhere['@"+this.getIndex()+c.Base.toString(d.link,"\x26")+this.dataIndex+d.compare+":index"+e+"']"},a.containsSearchWhere=function(d){this.where||(this.where=[]);for(var e=0,f=this.where;e<
f.length;e++){var l=f[e];if(l.link===d.link&&l.compare===d.compare&&l.value===d.value)return!0}return!1},a.searchValue=function(d){this.where||(this.where=[]);d={link:"\x26",compare:"\x3d",value:d};this.containsSearchWhere(d)||(this.where.push(d),this.doSearch())},a.getRenderCacheKey=function(){return $.md5(c.Grid.getColumnGrid(this).code+"-"+this.dataIndex+"-render")},a.clearSearch=function(){var d=c.Grid.getColumnGrid(this).getStore().proxy.extraParams;if(this.where){var e=[],f;for(f in d)0<=f.indexOf("colWhere")&&
0<=f.indexOf(this.dataIndex)&&e.push(f);for(f=0;f<e.length;f++)delete d[e[f]]}this.where=[];this.searchMenu=null;this.searching=!1;c.Grid.refreshColumnStyle(this)},a.doSearch=function(d){var e=c.Grid.getColumnGrid(this).getStore().proxy.extraParams;if(this.where){for(var f=!1,l=0;l<this.where.length;l++){var m=this.where[l];Ext.isEmpty(m.link)&&(m.link="\x26");if(!Ext.isEmpty(m.compare)&&!Ext.isEmpty(m.value)){var k=this.toSearchKey(m,l),h=m.value;0<=m.compare.indexOf("?")&&(h="%"+m.value+"%");"??"===
m.compare&&(h=m.value,f=!0);e[k]=h}}f&&(c.Grid.clearColumnSort(c.Grid.getColumnGrid(this)),c.Grid.checkColumnSort(c.Grid.getColumnGrid(this)));e["colWhere['^"+this.dataIndex+"@SearchExclude']"]=this.searchExclude;c.Base.toBool(d,!0)&&c.Grid.getColumnGrid(this).getStore().loadPage(1);this.searching=0!==this.where.length;c.Grid.refreshColumnStyle(this)}},a.setAlignContent=function(d){var e=this.getId();e=$("[data-columnid\x3d"+e+"]");for(var f=0;f<e.length;f++)$(e[f]).children().css("text-align",d);
this.align=d;c.Grid.getColumnGrid(this).saveUIConfig(!0)},a.getConfigField=function(){var d=a.configField;Ext.isEmpty(d)&&(d=a.field);Ext.isEmpty(d)&&(d={xtype:"textfield"});Ext.isObject(d)&&Ext.isEmpty(d.xtype)&&(d.xtype="textfield");return d},a.where&&0<a.where.length&&a.doSearch(!1),a.groupHeaderText=a.isSubHeader?a.ownerCt.text:null,Ext.isEmpty(a.field)&&(a.editable=!1)}catch(d){console.error(d)}};b.configColumnListener=function(a){};b.buildSearchItem2=function(a,d){try{var e=!1,f=c.Grid.getColumnGrid(a);
f&&f.getStore()&&f.getStore().entity&&(e=c.Entity.isFulltextColumn(f.getStore().entity.entityCode,a.dataIndex));var l=c.Grid.getColumnSimpleEditor(a,!0);if(!l)return;l.useHistory=!0;l.code=a.dataIndex;l.fromHeadSearch=!0;l.validator=null;l.flex=1;l.margin="2 0 0 0";l.repeatTriggerClick=!1;l.onClearValue=function(){var k=this.up("container");Ext.isFunction(k.removeSearch)?k.removeSearch():k.destroy()};l.triggers={close:{cls:"text-clear",hideOnReadOnly:!1,handler:function(){this.onClearValue()}}};c.Form.isEnumField(l)?
l.editable=!1:l.editable=!0;l.emptyText="\u8bf7\u8f93\u5165\u6761\u4ef6\u503c";if(!d){d={link:"\x26",compare:"\x3d",value:""};if(c.Form.isTextField(l)||c.Form.isLinkField(l)||c.Form.isMapField(l)||c.Form.isHtmlContentField(l)||c.Form.isContentField(l))d.compare="?";e&&(d.compare="??");c.Form.isDateField(l)&&(d.compare="\x3e\x3d")}var m={full:e,date:c.Form.isDateField(l)};l.value=d.value;l.submitValue=!1;l.name="value";l.itemId="editorField";l.strict=0<=d.compare.indexOf("\x3e")||0<=d.compare.indexOf("\x3c")||
0<=d.compare.indexOf("\x3d");l.grid=f;return{xtype:"container",margin:"0",searchItem:!0,border:0,flex:1,region:"center",layout:{type:"hbox",align:"stretch"},toParam:function(){var k={};this.items.each(function(h){if(Ext.isFunction(h.getValue)){var g=!0;Ext.isFunction(h.validate)?g=h.validate():Ext.isFunction(h.isValid)&&(g=h.isValid());if(g)Ext.isDate(h.getValue())?k[h.getName()]=Ext.Date.format(h.getValue(),h.format):k[h.getName()]=h.getValue();else return c.Component.shakeComment(h),c.Dialog.toast(c.Form.getFieldError(h)[0]),
k=null,!1}});return k},setParam:function(k){this.items.each(function(h){Ext.isFunction(h.getValue)&&("compare"===h.getName()?h.setValue(k.compare):"link"===h.getName()?h.setValue(k.link):h.setValue(k.value))})},refreshField:function(){var k=this.getComponent("compare").getValue(),h=this.getComponent("editorField");if(h&&h.rendered)if(Ext.isFunction(h.setReadOnlyAttr)&&h.setReadOnlyAttr(!1),"~"==k||"!~"==k)h.setValue("\x3cNULL\x3e"),Ext.isFunction(h.setReadOnlyAttr)&&h.setReadOnlyAttr(!0);else if("#"==
k||"!#"==k)h.setValue("\x3cREPEAT\x3e"),Ext.isFunction(h.setReadOnlyAttr)&&h.setReadOnlyAttr(!0)},getSearchField:function(){return this.getComponent("editorField")},items:[{xtype:"combo",name:"link",value:c.Base.toString(d.link,"\x26"),margin:"2 2 0 0",width:35,valueField:"text",editable:!1,hideTrigger:!0,tpl:Ext.create("Ext.XTemplate",'\x3cul class\x3d"x-list-plain"\x3e\x3ctpl for\x3d"."\x3e','\x3cli role\x3d"option" class\x3d"x-boundlist-item" style\x3d"font-size: 12px;"\x3e{desc}\x3c/li\x3e',"\x3c/tpl\x3e\x3c/ul\x3e"),
listeners:{afterrender:function(k,h){k.getPicker().setMinWidth(100)}},store:c.Store.getCompareLinkDataStore()},{xtype:"combo",name:"compare",value:d.compare,itemId:"compare",margin:"2 2 0 0",width:65,valueField:"text",displayField:"desc",editable:!1,hideTrigger:!0,tpl:Ext.create("Ext.XTemplate",'\x3cul class\x3d"x-list-plain"\x3e\x3ctpl for\x3d"."\x3e','\x3cli role\x3d"option" class\x3d"x-boundlist-item" style\x3d"font-size: 12px;"\x3e{desc}\x3c/li\x3e',"\x3c/tpl\x3e\x3c/ul\x3e"),listeners:{afterrender:function(k,
h){k.getPicker().setMinWidth(100)},change:function(k,h,g){var p=k.ownerCt.getComponent("editorField");"~"!=g&&"!~"!=g&&"#"!=g&&"!#"!=g||p.setValue(null);0<=h.indexOf("\x3e")||0<=h.indexOf("\x3c")||0<=h.indexOf("\x3d")?p.strict=!0:p.strict=!1;k.ownerCt.refreshField()}},store:c.Store.getCompareDataStore(m)},l],listeners:{afterrender:function(k,h){k.refreshField()}}}}catch(k){console.error(k)}return null};b.buildSearchItem=function(a,d){try{var e=!1,f=c.Grid.getColumnGrid(a);f&&f.getStore()&&f.getStore().entity&&
(e=c.Entity.isFulltextColumn(f.getStore().entity.entityCode,a.dataIndex));var l=c.Grid.getColumnSimpleEditor(a,!0);if(!l)return;l.useHistory=!0;l.code=a.dataIndex;l.fromHeadSearch=!0;l.validator=null;l.flex=1;l.repeatTriggerClick=!1;l.onClearValue=function(){var k=this.up("container");Ext.isFunction(k.removeSearch)?k.removeSearch():c.Animate.startCloseAnimateByHeight(k)};l.triggers={close:{cls:"text-clear",weight:99,hideOnReadOnly:!1,handler:function(){this.onClearValue()}}};c.Form.isEnumField(l)?
l.editable=!1:l.editable=!0;l.emptyText="\u8bf7\u8f93\u5165\u6761\u4ef6\u503c";if(!d){d={link:"\x26",compare:"\x3d",value:""};if(c.Form.isTextField(l)||c.Form.isLinkField(l)||c.Form.isMapField(l)||c.Form.isHtmlContentField(l)||c.Form.isContentField(l))d.compare="?";e&&(d.compare="??");c.Form.isDateField(l)&&(d.compare="\x3e\x3d")}var m={full:e,date:c.Form.isDateField(l)};l.value=d.value;l.submitValue=!1;l.param=!0;l.name="value";l.itemId="editorField";l.strict=0<=d.compare.indexOf("\x3e")||0<=d.compare.indexOf("\x3c")||
0<=d.compare.indexOf("\x3d");l.grid=f;return{xtype:"fieldset",margin:"0 0 3 0",title:"",searchItem:!0,flex:1,region:"center",padding:"6 6 6 6",defaults:{columnWidth:1,margin:"3 3 3 3"},layout:{type:"vbox",pack:"center",align:"stretch"},getParamItems:function(){return this.query("[param\x3dtrue]")},toParam:function(){for(var k={},h=0,g=this.getParamItems();h<g.length;h++){var p=g[h];if(Ext.isFunction(p.getValue)){var q=!0;Ext.isFunction(p.validate)?q=p.validate():Ext.isFunction(p.isValid)&&(q=p.isValid());
if(q)Ext.isDate(p.getValue())?k[p.getName()]=Ext.Date.format(p.getValue(),p.format):k[p.getName()]=p.getValue();else return c.Component.shakeComment(p),c.Dialog.toast(c.Form.getFieldError(p)[0]),null}}return k},setParam:function(k){for(var h=0,g=this.getParamItems();h<g.length;h++){var p=g[h];Ext.isFunction(p.getValue)&&("compare"===p.getName()?p.setValue(k.compare):"link"===p.getName()?p.setValue(k.link):p.setValue(k.value))}},refreshField:function(){var k=this.down("#editorField");if(k){var h=this.down("#matchType"),
g=this.down("#link").getDisplayValue(),p=this.down("#compare"),q=p.getValue();p=p.getDisplayValue();h.setTitle(g+"_"+p);if(k.rendered)if(c.Component.simpleReadOnly(k,!1),"~"==q||"!~"==q)k.setValue("\x3cNULL\x3e"),c.Component.simpleReadOnly(k,!0);else if("#"==q||"!#"==q)k.setValue("\x3cREPEAT\x3e"),c.Component.simpleReadOnly(k,!0)}},getSearchField:function(){return this.down("#editorField")},items:[{xtype:"fieldset",title:"\u5339\u914d\u65b9\u5f0f",collapsible:!0,collapsed:!0,layout:"column",itemId:"matchType",
padding:"6 6 6 6",defaults:{columnWidth:1,margin:"3 3 3 3"},items:[{xtype:"container",layout:{type:"hbox",pack:"center",align:"stretch"},items:[{xtype:"combo",name:"link",itemId:"link",margin:"0 6 0 0",value:c.Base.toString(d.link,"\x26"),param:!0,flex:1,valueField:"text",displayField:"desc",editable:!1,hideTrigger:!1,tpl:Ext.create("Ext.XTemplate",'\x3cul class\x3d"x-list-plain"\x3e\x3ctpl for\x3d"."\x3e','\x3cli role\x3d"option" class\x3d"x-boundlist-item" style\x3d"font-size: 12px;"\x3e{desc}\x3c/li\x3e',
"\x3c/tpl\x3e\x3c/ul\x3e"),listeners:{change:function(k,h,g){k.up("[searchItem\x3dtrue]").refreshField()}},store:c.Store.getCompareLinkDataStore()},{xtype:"combo",name:"compare",value:d.compare,flex:1,itemId:"compare",param:!0,valueField:"text",displayField:"desc",editable:!1,hideTrigger:!1,tpl:Ext.create("Ext.XTemplate",'\x3cul class\x3d"x-list-plain"\x3e\x3ctpl for\x3d"."\x3e','\x3cli role\x3d"option" class\x3d"x-boundlist-item" style\x3d"font-size: 12px;"\x3e{desc}\x3c/li\x3e',"\x3c/tpl\x3e\x3c/ul\x3e"),
listeners:{change:function(k,h,g){k=k.up("[searchItem\x3dtrue]");var p=k.getComponent("editorField");"~"!=g&&"!~"!=g&&"#"!=g&&"!#"!=g||p.setValue(null);0<=h.indexOf("\x3e")||0<=h.indexOf("\x3c")||0<=h.indexOf("\x3d")?p.strict=!0:p.strict=!1;k.refreshField()}},store:c.Store.getCompareDataStore(m)}]}]},l],listeners:{afterrender:function(k,h){k.refreshField()}}}}catch(k){console.error(k)}return null};b.canColumnSearch=function(a){c.Grid.getColumnGrid(a);return c.Base.toBool(c.Grid.getColumnGrid(a).columnSearch,
!0)?c.Grid.isFilesColumn(a)||c.Grid.isFileColumn(a)?c.Base.toBool(a.search,!1)||c.Base.toBool(a.searchable,!1):c.Base.toBool(a.search,!0)&&c.Base.toBool(a.searchable,!0)&&!c.Base.toBool(a.encrypt,!1)?!0:!1:!1};b.showColumnSearchMenu=function(a){try{if(!c.Grid.canColumnSearch(a))return!1;a.searchMenu=Ext.create("Ext.menu.Menu",{padding:c.Grid.columnSearchMenuPadding,power:!1,showSeparator:!1,columnSearchMenu:!0,editorMenu:!0,scrollToHidden:!0,style:{background:"#ffffff"},fixedItemCount:2,addSearchItem:function(f){var l=
this.items.length-this.fixedItemCount;5<=l||this.insert(l,c.Grid.buildSearchItem(a,f))},doSearch:function(){var f=[];this.items.each(function(l,m){if(l.searchItem){l=l.toParam();if(!l)return f=null,!1;Ext.isEmpty(l.value)||(l.index=m,f.push(l))}});f&&(a.clearSearch(),a.where=f,a.doSearch(),this.hide())},items:[{xtype:"container",layout:"fit",margin:"5",border:0,hidden:!0,itemId:"configSearch",items:[{xtype:"fieldset",title:"\u914d\u7f6e\u641c\u7d22\u5ffd\u7565\u7684\u5b57\u7b26",layout:"column",margin:"0",
items:[{xtype:"textfield",labelAlign:"right",columnWidth:1,itemId:"searchExclude",value:a.searchExclude,name:"searchExclude",emptyText:"\u8bf7\u8f93\u5165\u5b57\u7b26",listeners:{change:function(f,l,m,k){a.searchExclude=l}}}]}]},{xtype:"container",layout:{type:"hbox",align:"stretch"},margin:c.Grid.columnSearchMenuPadding+" 0 0 0",border:0,items:[{xtype:"button",iconCls:"extIcon extSet fontSize14",contextMenu:!1,hidden:!0,handler:function(){var f=this.ownerCt.ownerCt.getComponent("configSearch");f.setHidden(!f.isHidden())}},
{xtype:"button",text:"\u641c\u7d22",flex:1,contextMenu:!1,iconCls:"extIcon extSearch",margin:"0 "+c.Grid.columnSearchMenuPadding+" 0 0",handler:function(){this.ownerCt.ownerCt.doSearch();c.Grid.saveGridColumn(c.Grid.getColumnGrid(a))}},{xtype:"button",iconCls:"extIcon extPlus fontSize14",contextMenu:!1,handler:function(){this.ownerCt.ownerCt.addSearchItem()}}]}],listeners:{show:function(f,l){a.addCls("x-column-header-open");f.items.length===f.fixedItemCount&&f.addSearchItem();(l=f.down("#searchExclude"))&&
l.setValue(a.searchExclude);var m=0;f.items.each(function(k,h){Ext.isFunction(k.getSearchField)&&(k=k.getSearchField(),k.hasListener("beforeedit")&&k.fireEvent("beforeedit",k,m),m++)});try{new Ext.util.KeyMap({target:f.getEl(),key:13,fn:function(k,h){f.doSearch()},scope:f})}catch(k){console.error(k)}},hide:function(f,l){delete a.searchMenu;a.removeCls("x-column-header-open");f.close()}}});if(a.where)for(var d=0;d<a.where.length;d++){var e=a.where[d];Ext.isEmpty(e.index)&&(e.index=d);e.index<a.searchMenu.items.length-
a.searchMenu.fixedItemCount?a.searchMenu.items.getAt(e.index).setParam(e):a.searchMenu.addSearchItem(e)}a.searchMenu.addCls("header-search-menu");a.searchMenu.setWidth(Math.max(parseInt(a.getWidth()),358));a.searchMenu.showBy(a,"tl-bl?");return!0}catch(f){console.error(f)}return!1};b.showColumnSearchWin=function(a,d){if(a.searchWin)c.Component.shakeComment(a.searchWin);else{var e=c.Store.getGridColumnStore(d,!0),f=function(k,h){return{xtype:"fieldset",title:"\u5b57\u6bb5\u641c\u7d22",layout:{type:"vbox",
pack:"center",align:"stretch"},defaults:{columnWidth:1,margin:"3 3 3 3"},padding:"10 10 10 10",margin:"5 5 5 5",setInputField:function(g,p){1<this.items.getCount()&&this.remove(this.items.get(1),!0);g=c.Grid.buildSearchItem(c.Grid.getColumn(d,g.get("id"),g.get("text")),p);g.removeSearch=function(){var q=this.up("container");q&&c.Animate.startCloseAnimateByHeight(q)};this.insert(1,g)},toParam:function(){var g={},p=this.items.get(0);p=p.getStore().findRecord("id",p.getValue(),0,!1,!1,!0);g.text=p.get("text");
g.dataIndex=p.get("id");p=this.items.get(1);return g=c.Json.mergeJson(g,p.toParam())},items:[{xtype:"combo",valueField:"id",displayField:"text",margin:"0 0 5 0",value:k.get("id"),editable:!1,listeners:{change:function(g,p,q,r){q=this.up("container");g=g.getStore().findRecord("id",p,0,!1,!1,!0);q.setInputField(g)}},store:e}],listeners:{afterrender:function(g){g.setInputField(k,h)}}}},l=d.searchItems;l||(l=[]);var m=Ext.create("Ext.form.FormPanel",{border:0,layout:{type:"vbox",align:"stretch"},scrollable:!0,
padding:0,defaults:{labelWidth:80,labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},items:l});l=c.Grid.getGridInWindowSize(d,.4,.5);a.searchWin=Ext.create("Ext.window.Window",{title:"\u641c\u7d22\u6570\u636e",layout:"fit",constrain:!0,iconCls:"extIcon extSearch",resizable:!0,minHeight:200,minWidth:400,height:l.height,width:l.width,animateTarget:a,items:[m],refreshSearchItem:function(k){if(e&&d){m.removeAll();for(var h=d.getColumns(),g=0;g<h.length;g++){var p=h[g];if(p.where){var q=e.findRecord("id",
p.dataIndex,0,!1,!1,!0);if(q)for(var r=0;r<p.where.length;r++)m.add(f(q,p.where[r]))}}0===m.items.length&&0<e.getCount()&&k&&m.add(f(e.getAt(0)))}},listeners:{close:function(k,h){a.searchWin.gridLoad&&a.searchWin.gridLoad.destroy();e&&e.destroy();a.searchWin=null}},buttons:[{text:"\u6e05\u7a7a\u6761\u4ef6",iconCls:"extIcon extClear whiteColor",handler:function(){m.removeAll();d&&(Ext.each(d.getColumns(),function(k){k.clearSearch()}),d.getStore().loadPage(1))}},"-\x3e",{text:"\u6dfb\u52a0\u6761\u4ef6",
iconCls:"extIcon extPlus",handler:function(){m.add(f(e.getAt(0)));m.scrollTo(0,35*m.items.length+105,!1)}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){if(d){Ext.each(d.getColumns(),function(h){h.clearSearch()});var k=[];m.items.each(function(h){if(h.toParam){if((h=h.toParam())&&!Ext.isEmpty(h.value)){var g=c.Grid.getColumn(d,h.dataIndex,h.text);if(!g)return!1;g.where||(g.where=[]);delete h.dataIndex;delete h.text;g.where.push(h);k.push(g)}}else g={},g["where['"+h.name+"']"]=h.getValue(),
Ext.apply(d.getStore().proxy.extraParams,g)});Ext.each(k,function(h){h.doSearch(!1)});d.getStore().loadPage(1)}}}]});a.searchWin.gridLoad=d.on("load",function(){try{a.searchWin.refreshSearchItem(!1)}catch(k){console.error(k)}},this,{destroyable:!0});a.searchWin.refreshSearchItem(!0);d.ownerCt.add(a.searchWin)}a.searchWin.show()};b.getPageToolBar=function(a){var d=!1;a.entity&&c.Base.toBool(a.entity.recycle,!1)&&(d=!0);var e=!1;a.where&&c.Base.toBool(a.where["^fromRecycle"],!1)&&(e=!0);var f=c.Store.getStoreMenuText(a),
l=Ext.create("Ext.toolbar.Paging",{store:a,dock:"bottom",itemId:"pagingToolBar",pageSize:a.pageSize,displayInfo:!0,overflowHandler:"scroller"}),m={xtype:"combo",pageTool:!0,displayField:"text",valueField:"id",editable:!1,width:100,value:Math.min(a.pageSize,c.Store.maxPageSize),store:c.Store.getPageDataStore(),listeners:{change:function(q,r,t){c.System.InitHandler.isSilenceGlobalSaving()||null==r||0==r||(q.getStore().getById(r)?(-1===r?(this.ownerCt.pageSize=a.getTotalCount(),a.pageSize=a.getTotalCount(),
Ext.isEmpty(q.totalCount)||(this.ownerCt.pageSize=q.totalCount,a.pageSize=q.totalCount)):(this.ownerCt.pageSize=r,a.pageSize=r),a.loadPage(1),a.grid&&a.grid.saveUIConfig(!0)):(q.totalCount=r,q.setValue(-1)))}}},k={xtype:"button",tooltip:"\u62f7\u8d1d\u6570\u636e",subtext:"\u62f7\u8d1d\u6570\u636e@"+f,checkSelect:2,iconCls:"extIcon extCopy2 grayColor",checkAddPower:!0,checkCopyPower:!0,handler:function(){var q=a.grid.getSelection();0===q.length?c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u9009\u62e9\u9700\u8981\u590d\u5236\u7684\u6570\u636e\uff01"):
Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u60a8\u786e\u5b9a\u590d\u5236\u9009\u4e2d\u7684"+q.length+"\u6761\u6570\u636e\u5417\uff1f",function(r,t){"yes"===r&&(c.Dialog.showWait("\u6b63\u5728\u590d\u5236\u6570\u636e\u4e2d\u2026\u2026"),c.Store.commitStoreCopy(a.grid.getStore(),q).then(function(v){v&&(a.grid.getSelectionModel().deselectAll(),a.grid.getStore().isGrouped()&&c.Grid.getGridView(a.grid).getFeature("group").collapseAll(),c.Dialog.hideWait())}))})}};f={xtype:"button",tooltip:"\u6e05\u7a7a\u6570\u636e",
subtext:"\u6e05\u7a7a\u6570\u636e@"+f,checkDeleteAllPower:!0,checkDeletePower:!0,iconCls:"extIcon extClear grayColor",handler:function(){if(0===a.getTotalCount())c.Dialog.toast("\u5f53\u524d\u9875\u9762\u6682\u65e0\u6570\u636e\uff01");else{var q=c.Store.getStoreMenuText(a.grid.getStore()),r=function(){c.LoginLayout.validOperate("\u6e05\u7a7a\u3010"+q+"\u3011\u6570\u636e",function(){c.Dialog.showWait("\u6b63\u5728\u6e05\u7a7a\u6570\u636e\u4e2d\u2026\u2026");var w={entityCode:a.entity.entityCode,all:!0,
storeId:a.getStoreCode()};w.menu=a.entity.comment;c.Server.deleteEntity(w,function(z,x){c.Dialog.hideWait();z&&a.loadPage(1);c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",x)})},30)},t=Ext.create("Ext.form.FormPanel",{bodyPadding:10,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/amazed.json"},{xtype:"label",text:"\u3010\u3010 \u8bf7\u60a8\u8c28\u614e\u64cd\u4f5c \u3011\u3011"},
{xtype:"label",text:"\u60a8\u786e\u5b9a\u6e05\u7a7a\u5f53\u524d\u6761\u4ef6\u4e0b\u7684"+a.getTotalCount()+"\u6761\u6570\u636e\u5417\uff1f"},{xtype:"label",text:"\u5f53\u524d\u64cd\u4f5c\u9875\u9762\u300a"+q+"\u300b"},{xtype:"checkboxfield",boxLabel:"\x3cb style\x3d'color:red;'\x3e\u6211\u5df2\u4e86\u89e3\u6b64\u64cd\u4f5c\u662f\u6c38\u4e45\u6027\u4e14\u65e0\u6cd5\u64a4\u9500\x3c/b\x3e",listeners:{change:function(w,z){v.down("#deleteBtn").setDisabled(!z)}}}]}),v=Ext.create("Ext.window.Window",{title:"\u6e05\u7a7a\u6570\u636e",
iconCls:"extIcon extClear",layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,cls:"fast-red-window",items:[t],modal:!0,buttons:["-\x3e",{text:"\u53d6\u6d88",iconCls:"extIcon extClose",handler:function(){v.close()}},{text:"\u6e05\u7a7a",itemId:"deleteBtn",disabled:!0,iconCls:"extIcon extOk",handler:function(){r();v.close()}},"-\x3e"],listeners:{show:function(w){c.Component.shakeComment(w)}}});v.show()}}};e&&(f.tooltip="\u6e05\u7a7a\u56de\u6536\u7ad9");var h={xtype:"button",
tooltip:"\u56de\u6536\u7ad9",iconCls:"extIcon extRecycle grayColor",handler:function(){c.Grid.showRecycleGrid(this,a)}},g={xtype:"button",toolType:"timerBtn",tooltip:"\u5b9a\u65f6\u5237\u65b0",iconCls:"extIcon extAlarm grayColor",baseIconCls:"extIcon extAlarm",handler:function(){c.Grid.showTimerRefreshGrid(this,a.grid)}},p={xtype:"button",toolType:"reportBtn",tooltip:"\u56fe\u8868\u67e5\u770b",iconCls:"extIcon extReport grayColor",handler:function(){c.Grid.showEChartConfigWin(this,a.grid)}};l.insert(0,
m);l.insert(0,{xtype:"label",text:"\u6bcf\u9875",margin:"0 10 0 10"});m=l.child("#refresh");m=l.items.indexOf(m);a.entity&&c.Base.toBool(a.entity.actionTimer,!0)&&l.insert(++m,g);l.insert(++m,"-");l.insert(++m,{xtype:"button",toolType:"searchBtn",tooltip:"\u641c\u7d22\u6570\u636e",iconCls:"extIcon extSearch grayColor",handler:function(){c.Grid.showColumnSearchWin(this,a.grid)}});l.insert(++m,{xtype:"button",toolType:"sortBtn",tooltip:"\u6392\u5e8f\u6570\u636e",iconCls:"extIcon extSort grayColor",
handler:function(){c.Grid.showColumnSortWin(this,a.grid)}});l.insert(++m,{xtype:"button",toolType:"selectHistoryBtn",tooltip:"\u6570\u636e\u9009\u62e9\u5668",iconCls:"extIcon extSelect grayColor",baseIconCls:"extIcon extSelect",handler:function(){c.Grid.showSelectRecordHistory(this,a.grid)}});e&&(l.insert(++m,"-"),l.insert(++m,{xtype:"button",tooltip:"\u8fd8\u539f\u6570\u636e",checkSelect:2,iconCls:"extIcon extReback grayColor",handler:function(){c.Grid.rebackGridData(a.grid)}}));l.insert(++m,"-");
e||a.entity&&c.Base.toBool(a.entity.actionCopy,!0)&&l.insert(++m,k);a.entity&&c.Base.toBool(a.entity.actionDeleteAll,!0)&&c.System.ManagerHandler.isSuperRole()&&l.insert(++m,f);a.entity&&!Ext.isEmpty(a.entity.echartsDate)&&(l.insert(++m,"-"),l.insert(++m,p));!e&&d&&(l.insert(++m,"-"),l.insert(++m,h));return l};b.showRecycleGrid=function(a,d){if(d){var e="\u56de\u6536\u7ad9";d.entity&&(e=d.entity.comment+"-\u56de\u6536\u7ad9");var f=eval("new "+d.entity.entityCode+"()");f.menu={id:$.md5(e),text:e};
f=f.getList(c.Json.mergeJson({"^fromRecycle":!0},d.where));f.down("[entityList\x3dtrue]").code=$.md5(d.entity.entityCode+"\u56de\u6536\u7ad9");d=parseInt((.7*document.body.clientWidth).toFixed(0));var l=parseInt((.8*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:e,iconCls:"extIcon extRecycle",layout:"fit",height:l,width:d,minHeight:500,minWidth:600,constrain:!0,resizable:!0,modal:!0,maximizable:!0,animateTarget:a,maximized:!1,items:[f]}).show()}};b.rebackGridData=function(a){return new Ext.Promise(function(d,
e){if(a.getStore().entity)if(0===a.getSelection().length)c.Dialog.toast("\u8bf7\u60a8\u5148\u9009\u62e9\u9700\u8981\u8fd8\u539f\u7684\u6570\u636e\uff01");else{e=a.getSelection().length;var f=function(){c.Dialog.showWait("\u6b63\u5728\u8fd8\u539f\u6570\u636e\u4e2d\u2026\u2026");c.Store.commitStoreReback(a.getStore(),a.getSelection()).then(function(l,m){l&&(a.getSelectionModel().deselectAll(),a.getStore().isGrouped()&&c.Grid.getGridView(a).getFeature("group").collapseAll(),c.Dialog.hideWait(),Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",
"\u8fd8\u539f\u6210\u529f\uff01"));d(l)})};Ext.Msg.show({title:"\u7cfb\u7edf\u63d0\u9192",icon:Ext.Msg.QUESTION,message:"\u60a8\u786e\u5b9a\u8fd8\u539f\u9009\u4e2d\u7684"+e+"\u6761\u6570\u636e\u5417\uff1f",buttons:Ext.Msg.YESNO,defaultFocus:"no",callback:function(l,m){"yes"===l&&f()}})}else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u8fd8\u539f\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!")})};b.showColumnSortWin=function(a,d){if(a.sortWin)c.Component.shakeComment(a.sortWin);else{var e=
c.Store.getGridColumnStore(d),f=function(k,h){h||(h="ASC");return{xtype:"container",flex:1,columnWidth:1,layout:"hbox",margin:"0 0 2 0",border:0,toParam:function(){var g={},p=this.items.get(0);g.property=p.getValue();p=this.items.get(1);g.direction=p.getValue();return g},items:[{xtype:"combo",region:"west",valueField:"id",flex:.5,margin:"2 0 0 2",value:k.get("id"),displayField:"text",editable:!1,store:e},{xtype:"combo",flex:.5,valueField:"value",editable:!1,margin:"2 2 0 2",value:h,triggers:{close:{cls:"text-clear",
handler:function(){this.ownerCt.destroy()}}},store:Ext.create("Ext.data.Store",{fields:["id","text"],data:[{text:"\u65e0",value:"NONE"},{text:"\u6b63\u5e8f",value:"ASC"},{text:"\u5012\u5e8f",value:"DESC"}]})}]}},l=Ext.create("Ext.form.FormPanel",{margin:"5",border:0,layout:"column",width:460,scrollable:!0,defaults:{labelWidth:80,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},items:[]}),m=c.Grid.getGridInWindowSize(d);a.sortWin=Ext.create("Ext.window.Window",{title:"\u6392\u5e8f\u6570\u636e",
layout:"fit",constrain:!0,iconCls:"extIcon extSort",resizable:!0,minHeight:200,minWidth:400,height:m.height,width:m.width,animateTarget:a,items:[l],refreshSortItem:function(k){l.removeAll();d.getStore().getSorters().each(function(h){var g=e.findRecord("id",h.getProperty(),0,!1,!1,!0);g&&l.add(f(g,h.getDirection()))});0===l.items.length&&k&&l.add(f(e.getAt(0),"NONE"))},listeners:{close:function(k,h){a.sortWin.gridLoad&&a.sortWin.gridLoad.destroy();e&&e.destroy();a.sortWin=null}},buttons:[{text:"\u6dfb\u52a0\u6761\u4ef6",
iconCls:"extIcon extPlus",handler:function(){l.add(f(e.getAt(0)));l.scrollTo(0,35*l.items.length+105,!1)}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){c.Grid.clearColumnSort(d);var k=[];l.items.each(function(h){h=h.toParam();k.push(h);var g=c.Grid.getColumn(d,h.property);g.sortDirection=h.direction;c.Grid.refreshColumnStyle(g)});0<k.length?d.getStore().sort(k):d.getStore().loadPage(1);c.Grid.checkColumnSort(d)}}]});a.sortWin.gridLoad=d.on("load",function(){try{a.sortWin.refreshSortItem(!1)}catch(k){console.error(k)}},
this,{destroyable:!0});a.sortWin.refreshSortItem(!0);d.ownerCt.add(a.sortWin)}a.sortWin.show()};b.clearColumnSort=function(a){a.getStore().getSorters().clear();a&&Ext.each(a.getColumns(),function(d){d.sortDirection=null;c.Grid.refreshColumnStyle(d)})};b.showTimerRefreshGrid=function(a,d){if(a.timerWin)c.Component.shakeComment(a.timerWin);else{d.timerConfig||(d.timerConfig={state:0,value:30});var e=Ext.create("Ext.form.FormPanel",{margin:"5",border:0,layout:"column",width:400,scrollable:!0,defaults:{labelWidth:120,
margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},viewModel:{data:d.timerConfig},items:[{xtype:"combo",name:"state",displayField:"text",valueField:"id",fieldLabel:"\u662f\u5426\u542f\u52a8",editable:!1,flex:1,columnWidth:1,value:0,allowBlank:!1,bind:"{state}",store:c.Store.getYesOrNoDataStore()},{xtype:"combo",name:"silence",displayField:"text",valueField:"id",fieldLabel:"\u9759\u9ed8\u5237\u65b0",editable:!1,flex:1,columnWidth:1,value:0,allowBlank:!1,bind:"{silence}",store:c.Store.getYesOrNoDataStore()},
{xtype:"numberfield",name:"value",bind:"{value}",fieldLabel:"\u65f6\u95f4\u95f4\u9694\uff08\u79d2\uff09",columnWidth:1,minValue:1,value:30,decimalPrecision:0,allowBlank:!1}]}),f=c.Grid.getGridInWindowSize(d);a.timerWin=Ext.create("Ext.window.Window",{title:"\u5b9a\u65f6\u5237\u65b0\u6570\u636e",layout:"fit",constrain:!0,iconCls:"extIcon extAlarm",resizable:!0,minHeight:200,minWidth:400,height:f.height,width:f.width,animateTarget:a,items:[e],listeners:{close:function(l,m){a.timerWin=null}},buttons:[{text:"\u786e\u5b9a",
iconCls:"extIcon extOk",handler:function(){e.getForm().isValid()&&(d.timerConfig=e.getValues(),d.checkRefreshTimer(!0),a.timerWin.close())}}]});d.ownerCt.add(a.timerWin)}a.timerWin.show()};b.showEChartConfigWin=function(a,d){if(a.reportWin)c.Component.shakeComment(a.reportWin);else{var e=c.Store.getChartGridColumnStore(d),f=function(m,k){k||(k="count");return{xtype:"container",flex:1,columnWidth:1,layout:"hbox",margin:"0 0 2 0",border:0,toParam:function(){var h={},g=this.items.get(0);h.property=g.getValue();
var p=this.items.get(1);h["function"]=p.getValue();h.details=g.getDisplayValue()+"\u3010"+p.getDisplayValue()+"\u3011";return h},items:[{xtype:"combo",region:"west",valueField:"id",flex:.5,margin:"2 0 0 2",value:m.get("id"),displayField:"text",editable:!1,store:e},{xtype:"combo",flex:.5,valueField:"value",editable:!1,margin:"2 2 0 2",value:k,triggers:{close:{cls:"text-clear",handler:function(){this.ownerCt.destroy()}}},store:Ext.create("Ext.data.Store",{fields:["id","text"],data:[{text:"\u8ba1\u6570",
value:"count"},{text:"\u5e73\u5747\u503c",value:"avg"},{text:"\u6c42\u548c",value:"sum"},{text:"\u6700\u5927\u503c",value:"max"},{text:"\u6700\u5c0f\u503c",value:"min"}]})}]}},l=Ext.create("Ext.form.FormPanel",{margin:"5",border:0,layout:"column",width:400,scrollable:!0,defaults:{labelWidth:80,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},items:[]});a.reportWin=Ext.create("Ext.window.Window",{title:"\u56fe\u8868\u67e5\u770b",layout:"fit",constrain:!0,iconCls:"extIcon extReport",
resizable:!0,minHeight:200,minWidth:400,height:200,animateTarget:a,items:[l],listeners:{close:function(m,k){a.reportWin=null},show:function(m){m.setLoading("\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.showExtConfig(d.getStore().entity.entityCode,"EChartsColumn",function(k,h,g){if(k)for(k=c.Json.jsonToObject(h),h=0;h<k.length;h++){g=k[h];var p=e.findRecord("id",g.property,0,!1,!1,!0);p&&l.add(f(p,g["function"]))}m.setLoading(!1);0===l.items.length&&l.add(f(e.getAt(0),"count"))})}},buttons:[{text:"\u6dfb\u52a0\u7edf\u8ba1",
iconCls:"extIcon extPlus",handler:function(){l.add(f(e.getAt(0)));l.scrollTo(0,35*l.items.length+105,!1)}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){var m={entityCode:d.getStore().entity.entityCode,columnDate:d.getStore().entity.echartsDate,storeId:d.getStore().getStoreCode()},k=[];l.items.each(function(h,g){h=h.toParam();k.push(h);for(var p in h)m["echarts["+g+"]."+p]=h[p]});c.Server.saveExtConfig(d.getStore().entity.entityCode,"EChartsColumn",c.Json.objectToJson(k),function(){});
c.ECharts.showEntityECharts(this,d.getStore().entity.comment+"\u3010\u56fe\u8868\u3011",m)}}]});d.ownerCt.add(a.reportWin)}a.reportWin.show()};b.deleteGridData=function(a){return new Ext.Promise(function(d,e){if(a.getStore().entity)if(0===a.getSelection().length)c.Dialog.toast("\u8bf7\u60a8\u5148\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u6570\u636e\uff01");else{e=a.getSelection().length;var f=function(){c.Dialog.showWait("\u6b63\u5728\u5220\u9664\u6570\u636e\u4e2d\u2026\u2026");c.Store.commitStoreDelete(a.getStore(),
a.getSelection()).then(function(l){l&&(a.getSelectionModel().deselectAll(),a.getStore().isGrouped()&&c.Grid.getGridView(a).getFeature("group").collapseAll(),c.Dialog.hideWait());d(l)})};a.operate&&a.operate.alertDelete?c.Dialog.showDeleteDataAlert("\u786e\u8ba4\u5220\u9664\u6570\u636e","\u60a8\u786e\u5b9a\u5220\u9664\u9009\u4e2d\u7684"+e+"\u6761\u6570\u636e\u5417\uff1f",f):f()}else Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u5220\u9664\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!")})};
b.updateGridData=function(a){return new Ext.Promise(function(d,e){a.getStore().entity?0===a.getStore().getUpdatedRecords().length?c.Dialog.toast("\u5f53\u524d\u6682\u65e0\u6570\u636e\u88ab\u4fee\u6539\uff01"):a.operate&&a.operate.alertUpdate?Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u60a8\u786e\u5b9a\u63d0\u4ea4\u88ab\u4fee\u6539\u7684\u6570\u636e\u5417\uff1f",function(f,l){"yes"===f&&(c.Dialog.showWait("\u6b63\u5728\u4fee\u6539\u6570\u636e\u4e2d\u2026\u2026"),c.Store.commitStoreUpdate(a.getStore()).then(function(m){d(m);
c.Dialog.hideWait()}))}):(c.Dialog.showWait("\u6b63\u5728\u4fee\u6539\u6570\u636e\u4e2d\u2026\u2026"),c.Store.commitStoreUpdate(a.getStore()).then(function(f){d(f);c.Dialog.hideWait()})):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4fee\u6539\u5931\u8d25\uff01Grid\u7684DataStore\u672a\u7ed1\u5b9aEntity!")})};b.showPublicDetailsWindow=function(a,d,e,f,l){c.Grid.showDetailsWindow(a,d,e,f,l,{noneManager:!0})};b.showDetailsWindow=function(a,d,e,f,l,m){if(e&&f){var k=[e.code];if(e.idProperty)for(var h=
0;h<e.idProperty.length;h++){var g=e.idProperty[h];k.push(g+":"+f.get(g))}1==k.length&&k.push((new Date).getTime());c.Dialog.showWait("\u83b7\u53d6\u914d\u7f6e\u4e2d\u2026\u2026");var p=$.md5(JSON.stringify(k));c.Grid.restoreGridButton(e.entityCode).then(function(q){var r=e.entityCode;Ext.isEmpty(f.get("columnEntityCode"))||(r=f.get("columnEntityCode"));c.Server.showColumns(r,function(t,v,w){c.Dialog.hideWait();if(t){w=Ext.decode(v);v=[];var z=1;t=0;for(var x in w)if(w.hasOwnProperty(x)){var y=w[x];
if(!Ext.isEmpty(y.dataIndex)&&c.Base.toBool(y.detailsable,!0)){var A={value:f.get(y.dataIndex),groupHeaderText:y.groupHeaderText,record:f,entity:e,configEditor:c.Base.toBool(y.canEdit),dataIndex:y.dataIndex,columnName:y.columnName,editor:!1};for(C in y)y.hasOwnProperty(C)&&(A[C]=y[C]);if(!Ext.isEmpty(y.editorField)){var B=c.Json.jsonToObject(y.editorField);null==B||Ext.isEmpty(B.xtype)||(A.configEditor=!0)}c.Base.toBool(f.get(y.dataIndex+"Editor"),!0)||(A.configEditor=!1);c.Base.toBool(f.get("__editor"),
!0)||(A.configEditor=!1);A.groupHeaderText?z++:A.groupHeaderText=z;v.push(A);t=Math.max(c.Base.guessTextWidth(A.text,5),t)}}v.sort(function(D,E){return D.index-E.index});x=Ext.create("Ext.data.Store",{fields:[],autoLoad:!1,groupField:"groupHeaderText"});x.loadData(v);x.sort("index","ASC");var C=Ext.ComponentQuery.query("window[detailsWinId\x3d"+p+"]");if(0<C.length)C[0].getComponent("detailsGrid").setStore(x),Ext.WindowManager.bringToFront(C[0],!0),c.Component.shakeComment(C[0]);else{x=Ext.create("Ext.grid.Panel",
{border:0,scrollable:"y",region:"center",store:x,itemId:"detailsGrid",cls:"fast-grid-details",hideHeaders:!0,features:[{ftype:"grouping",collapsible:!1,hideGroupedHeader:!0,expandTip:null,collapseTip:null,groupHeaderTpl:["\x3cb\x3e{name:this.formatName}\x3c/b\x3e",{formatName:function(D){return Ext.isNumeric(D)?"\u57fa\u672c\u5c5e\u6027":D}}]}],columns:[{header:"\u540d\u79f0",power:!1,dataIndex:"text",width:t,tdCls:"tdVTop",align:"right",renderer:function(D,E,F){E.style=c.Grid.detailsGridKeyStyle;
return"\x3cb\x3e"+D+"\uff1a\x3c/b\x3e"}},{header:"\u503c",dataIndex:"value",power:!1,flex:1,align:"left",renderer:function(D,E,F,G,J,K,L){try{E.style=c.Grid.detailsGridValueStyle;var N=F.get("columnName");Ext.isEmpty(N)&&(N=F.get("dataIndex"));var M=c.Entity.getColumnRender(e,N);if(Ext.isEmpty(M)){var O=F.get("rendererFunction");O&&(M=eval(O))}Ext.isEmpty(M)||(D=M(D,E,F.get("record"),G,J,K,L,!0));return Ext.isEmpty(D)||"null"===D?"\x3cfont color\x3d'#ccc'\x3e\u65e0\x3c/font\x3e":D}catch(P){return D}}},
{xtype:"actioncolumn",width:80,sortable:!1,menuDisabled:!0,renderer:function(D,E){E.style=c.Grid.detailsGridActionStyle;return D},items:[{iconCls:"extIcon extEdit editColor marginRight5 textBlackShadowWhite",tooltip:"\u7f16\u8f91\u6570\u636e",align:"center",isDisabled:function(D,E,F,G,J){return!c.Base.toBool(J.get("editor"),!1)},getClass:function(D,E,F){return c.Base.toBool(F.get("editor"),!1)?"extIcon extEdit marginRight5 textBlackShadowWhite":""},handler:c.Grid.showDetailsEditMenu},{iconCls:"extIcon extCopy2 searchColor textBlackShadowWhite",
tooltip:"\u590d\u5236\u6570\u636e",align:"center",isDisabled:function(D,E,F,G,J){return!c.Base.toBool(J.get("doCopy"),!1)},getClass:function(D,E,F){return c.Base.toBool(F.get("doCopy"),!1)?"extIcon extCopy2 searchColor textBlackShadowWhite":""},handler:c.Grid.copyDetailsValue}]},{xtype:"rowplaceholder",minWidth:30}],viewConfig:{loadMask:{msg:"\u6b63\u5728\u4e3a\u60a8\u5728\u52a0\u8f7d\u6570\u636e\u2026"},enableTextSelection:!0},toggleActionColumn:function(D){if(this.lasClickRecord){if(this.lasClickRecord.getId()===
D.getId())return;this.lasClickRecord.set("editor",!1);this.lasClickRecord.set("doCopy",!1)}D.set("doCopy",!0);D.set("editor",D.get("configEditor"));this.lasClickRecord=D},listeners:{itemclick:function(D,E){this.toggleActionColumn(E)},select:function(D,E){this.toggleActionColumn(E)}}});l||(l=[]);C=l;t=c.System.MenuHandler.searchMenusByEntityCode(e.entityCode);var H=function(D){if(D)try{c.SystemLayout.selectMenu(D.id)}finally{e.idProperty&&c.Component.futureQuery("[menuId\x3d"+D.id+"]",function(E){if(E)for(var F=
function(J){var K=e.idProperty[J];c.Component.futureQuery("[dataIndex\x3d"+K+"]",function(L){if(L){if(!c.Base.toBool(L[0].restoreConfig,!1))return!1;L[0].searchValue(f.get(K))}return!0},15E3,E[0])},G=0;G<e.idProperty.length;G++)F(G);return!0},3E4)}else c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u6253\u5f00\u5931\u8d25\uff01\u60a8\u6216\u6ca1\u6709\u6b64\u529f\u80fd\u7684\u7ba1\u7406\u6743\u9650\uff01")};if(0<t.length&&c.System.ManagerHandler.isSuperRole()){var I={text:"\u8fdb\u5165\u7ba1\u7406\u754c\u9762",
iconCls:"extIcon extManage whiteColor",menu:[]};v=function(D){I.menu.push({text:c.System.MenuHandler.getPlainMenu(D,"\x26nbsp;\x3e\x26nbsp;"),icon:D.icon,handler:function(){H(D)}})};for(w=0;w<t.length;w++)v(t[w]);C.push(I)}if(0<q.length){t={text:"\u5176\u4ed6\u64cd\u4f5c",iconCls:"extIcon extMore whiteColor",menu:[]};for(v=0;v<q.length;v++)w=q[v],t.menu.push({text:w.text,iconCls:w.iconCls,icon:w.icon,functionStr:w.handler,handler:function(D,E){var F=[];try{var G={getSelection:function(){return[f]},
getSelectionModel:function(){return G}};window[e.getListThisVarName]=e;F.push(e.getListThisVarName);window[e.getListGridVarName]=G;F.push(e.getListGridVarName);c.Documents.loadFunction(this.functionStr).apply(D,E)}catch(J){console.error(J,this.functionStr,e)}finally{for(D=0;D<F.length;D++)window[F[D]]=null}}});C.push(t)}t=parseInt((.4*document.body.clientWidth).toFixed(0));v=parseInt((.7*document.body.clientHeight).toFixed(0));w=[];c.System.ManagerHandler.isSuperRole()&&w.push({type:"help",callback:function(D,
E,F){c.Dialog.showJson(this,"\u67e5\u770b\u539f\u59cb\u6570\u636e\u7ed3\u6784",c.Json.objectToJson(f.data))}});Ext.create("Ext.window.Window",{title:d,detailsWinId:p,height:v,width:t,minHeight:450,iconCls:"extIcon extDetails",minWidth:400,layout:"border",resizable:!0,constrain:!0,maximizable:!0,animateTarget:a,tools:w,listeners:{destroy:function(D,E){},show:function(D){D.focus()}},items:[x],buttons:0<C.length?C:null}).show()}}else c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",w)},m)})}};b.createDetailsGrid=
function(a,d,e,f){for(var l=[],m=0,k=0;k<a.length;k++){var h=a[k];h&&(l.push(h),m=Math.max(c.Base.guessTextWidth(h.name,4),m))}var g=Ext.create("Ext.data.Store",{autoLoad:!1,fields:[],data:l});a={region:"center",border:0,columnLines:!0,store:g,cls:"fast-grid-details",viewConfig:{enableTextSelection:!0},updateData:function(p){g.setData(p)},columns:[c.Json.mergeJson({header:"\u540d\u79f0",dataIndex:"name",width:m,align:"right",renderer:function(p,q,r){q.style=c.Grid.detailsGridKeyStyle;return"\x3cb\x3e"+
p+"\uff1a\x3c/b\x3e"},listeners:{dblclick:function(p,q,r,t,v,w,z){}}},e),c.Json.mergeJson({header:"\u503c",dataIndex:"value",flex:1,align:"left",renderer:function(p,q,r){try{q.style=c.Grid.detailsGridValueStyle;var t=r.get("renderer");if(Ext.isFunction(t)){var v=t(p,q,r.get("record"),-1,-1,null,null,!0);return Ext.isEmpty(v)?"\x3cfont color\x3d'#ccc'\x3e\u65e0\x3c/font\x3e":v}return p}catch(w){return p}},listeners:{dblclick:function(p,q,r,t,v,w,z){}}},f),{xtype:"rowplaceholder",minWidth:30}]};return Ext.create("Ext.grid.Panel",
c.Json.mergeJson(a,d))};b.showDetailsEditMenu=function(a,d,e,f,l,m){e=m.get("entity");f=m.get("columnName");Ext.isEmpty(f)&&(f=m.get("dataIndex"));var k;if(l=m.get("linkColumn"))(k=c.Entity.getRealAttr(l))&&(f=k),k=Ext.create(l.configField);k||(k=c.Entity.getEditorFieldObject(e,f));k||(k=Ext.create(c.Json.jsonToObjectUnsafe(m.get("editorField"))));if(k){if(a.getSelectionModel().selectRange(d,d),d=a.getCell(m,1,!0),k.flex=1,k.emptyText="\u8bf7\u8f93\u5165",k.region="center",k.record=m.get("record"),
k.fromColumn=!0,(!k.hasListener("beforeedit")||k.fireEvent("beforeedit"))&&c.Listeners.getFire().onBeforeEditorField(k,k.record)){"password"!==c.Base.toString(k.inputType,"none")&&Ext.isFunction(k.setValue)&&(e=m.get("value"),Ext.isObject(e)||Ext.isArray(e)?k.setValue(JSON.stringify(e),m.get("record")):k.setValue(e,m.get("record")));Ext.isFunction(k.startEdit)&&k.startEdit();var h=function(p){if(p.isValid()&&!Ext.isEmpty(p.getValue())){var q=m.get("record").store;q?(q.holdUpdate=!0,c.Store.setRecordValue(m.get("record"),
m.get("dataIndex"),p),c.Store.setRecordValue(m,"value",p),a&&a.setLoading("\u63d0\u4ea4\u6570\u636e\u4e2d\u2026\u2026"),c.Store.commitStoreUpdate(q).then(function(r){q.holdUpdate=!1;a&&a.setLoading(!1);r&&m.store.commitChanges()})):m.store.commitChanges()}};if(Ext.isFunction(k.showWindow))k.showWindow(d,function(p){h(p)});else{var g=Ext.create("Ext.menu.Menu",{showSeparator:!1,layout:"fit",scrollToHidden:!0,modal:!0,editorMenu:!0,shadow:!1,doUpdate:function(){if(!this.putRecorded){var p=this.items.get(0).items.get(0);
p.isValid()?(this.putRecorded=!0,h(p),this.hide()):(c.Component.shakeComment(this),c.Dialog.toast(c.Form.getFieldError(p)[0]))}},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},style:{background:"#ffffff",borderWidth:1,borderColor:"#ffffff",color:"#eeeee"},border:0,items:[k,{xtype:"button",text:"\u786e\u5b9a",name:"confirm",region:"east",iconCls:"extIcon extOk",margin:"0 0 0 2",height:c.Form.getFieldMinHeight(!0),handler:function(){g.doUpdate()}}]}],listeners:{show:function(p,q){p.items.get(0).items.get(0).focus()},
hide:function(p){var q=a.up("[detailsPanel\x3dtrue]");q&&(q.holdFloatView=!1);q=p.items.get(0).items.get(0);Ext.isFunction(q.endEdit)&&q.endEdit();p.close()}}});g.addCls("edit-menu");g.addCls("edit-details-menu");g.setWidth(d.getWidth());g.setHeight(c.Grid.getRowMinHeight());g.showBy(d,"tl");if(k=a.up("[detailsPanel\x3dtrue]"))k.holdFloatView=!0}}}else c.Dialog.toast("\u6b64\u5c5e\u6027\u65e0\u6cd5\u7f16\u8f91\uff01")};b.showDataEditorWin=function(a,d){if(d)if(0===d.getSelection().length)c.Dialog.toast("\u8bf7\u9009\u62e9\u4e00\u884c\u9700\u8981\u4fee\u6539\u7684\u6570\u636e\uff01");
else{var e=d.getStore();if(e){var f=d.getStore().entity;if(f){for(var l=d.getColumns(),m=[],k=d.getSelection()[0],h={},g={},p=80,q=0;q<l.length;q++){var r=l[q];if(!Ext.isEmpty(r.field)&&c.Base.toBool(r.editable,!0)){var t=r.field;Ext.isObject(t)||(t={xtype:t});if(!Ext.isEmpty(t.xtype)){t.hasOwnProperty("initialConfig")&&(t=t.initialConfig);var v=Ext.clone(t),w=c.Entity.getRealAttr(r);v.name="data."+w;w=r.configText;v=Ext.create(v);v.columnWidth=1;v.fieldLabel=w;v.configFieldLabel=w;v.emptyText="\u8bf7\u8f93\u5165"+
w;v.ghostDataIndex=r.dataIndex;v.realEditorField=!0;v.record=k;Ext.isEmpty(v.itemId)&&(Ext.isEmpty(t.name)?v.itemId=r.dataIndex:v.itemId=t.name);Ext.isFunction(v.setValue)&&"password"!==v.inputType&&(t=k.get(r.dataIndex),Ext.isObject(t)||Ext.isArray(t)?v.setValue(JSON.stringify(t),k):v.setValue(t,k));if(Ext.isEmpty(r.groupHeaderText)){if(v.hasListener("beforeedit")&&!v.fireEvent("beforeedit",v))return!1;p=Math.max(p,14*w.length+28);m.push(v)}else h.hasOwnProperty(r.groupHeaderText)||(h[r.groupHeaderText]=
Ext.create({xtype:"fieldset",title:r.groupHeaderText,columnWidth:1,layout:"column",defaults:{labelWidth:80,margin:"5 5 5 5",labelAlign:"right",allowBlankTip:!0,emptyText:"\u8bf7\u586b\u5199"}}),g[r.groupHeaderText]=[],m.push(h[r.groupHeaderText])),g[r.groupHeaderText].push(v),h[r.groupHeaderText].defaults.labelWidth=Math.max(h[r.groupHeaderText].defaults.labelWidth,14*w.length+28)}}}for(var z in g)h[z].add(g[z]);if(0===m.length)c.Dialog.toast("\u65e0\u4fee\u6539\u6743\u9650\uff01");else{if(d.hasListener("beforeeditwin")&&
!d.fireEvent("beforeeditwin",d,m))return!1;var x=Ext.create("Ext.form.FormPanel",{cacheKey:f.entityCode+"Editor",bodyPadding:5,method:"POST",region:"center",fileUpload:!0,autoScroll:!1,border:0,defaults:{labelWidth:Math.min(p,188),margin:"5 5 5 5",labelAlign:"right",allowBlankTip:!0},layout:"column",items:m});d=parseInt((.4*document.body.clientWidth).toFixed(0));l=parseInt((.8*document.body.clientHeight).toFixed(0));var y=Ext.create("Ext.window.Window",{title:"\u4fee\u6539\u6570\u636e",subtitle:f.entityCode,
width:d,icon:a.icon,iconCls:a.iconCls,minWidth:200,maxHeight:l,layout:{type:"vbox",align:"stretch"},autoScroll:!0,resizable:!0,maximizable:!0,constrain:!0,animateTarget:a,items:[x],modal:!0,unpin:!0,listeners:{show:function(A){x.restoreCache();A.focus()}},buttons:[{text:"\u6682\u5b58",iconCls:"extIcon extSave whiteColor",handler:function(){x.saveCache()}},{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){x.form&&x.form.reset();x.deleteCache()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",
handler:function(){if(e){e.holdUpdate=!0;for(var A=0,B=x.query("[realEditorField\x3dtrue]");A<B.length;A++){var C=B[A];C.isValid()&&(Ext.isEmpty(C.getValue())||c.Store.setRecordValue(k,C.ghostDataIndex,C))}c.Dialog.showWait("\u63d0\u4ea4\u6570\u636e\u4e2d\u2026\u2026");c.Store.commitStoreUpdate(e).then(function(H){c.Dialog.hideWait();e.holdUpdate=!1;H?(e.commitChanges(),x.deleteCache(),y.close()):e.rejectChanges()})}}}]});y.show()}}else c.Dialog.toast("\u65e0\u6cd5\u4fee\u6539\u6b64\u884c\u6570\u636e\uff0c\u672a\u7ed1\u5b9a\u5b9e\u4f53\u4fe1\u606f\uff01")}else c.Dialog.toast("\u65e0\u6cd5\u4fee\u6539\u6b64\u884c\u6570\u636e\uff0c\u6570\u636e\u6e90\u65e0\u6548\uff01")}};
b.copyDetailsValue=function(a,d,e,f,l,m){a=a.getCell(m,1,!0);c.Base.copyToBoard($(a.dom).text().trim());c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01")};b.showSelectRecordHistory=function(a,d){Ext.isEmpty(d.showHistoryState)&&(d.showHistoryState=0);if(a.selectHistoryWin)c.Component.shakeComment(a.selectHistoryWin);else{d.selectHistoryConfig||(d.selectHistoryConfig={state:0,count:0});d.selectHistoryConfig.count=d.getSelectRecordHistory().length;var e=Ext.create("Ext.form.FormPanel",{margin:"5",border:0,
layout:"column",width:400,scrollable:!0,defaults:{labelWidth:140,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},viewModel:{data:d.selectHistoryConfig},items:[{xtype:"combo",name:"state",displayField:"text",valueField:"id",fieldLabel:"\u662f\u5426\u8bb0\u5fc6\u9009\u62e9",editable:!1,flex:1,columnWidth:1,value:0,allowBlank:!1,bind:"{state}",store:c.Store.getYesOrNoDataStore()},{xtype:"numberfield",name:"count",bind:"{count}",selectHistoryCount:!0,fieldLabel:"\u5df2\u9009\u4e2d\u6570\u636e\uff08\u6761\uff09",
columnWidth:1,value:0,readOnly:!0}]}),f=c.Grid.getGridInWindowSize(d);a.selectHistoryWin=Ext.create("Ext.window.Window",{title:"\u6570\u636e\u9009\u62e9\u5668",layout:"fit",constrain:!0,iconCls:"extIcon extSelect",resizable:!0,minHeight:100,minWidth:400,height:f.height,width:f.width,animateTarget:a,items:[e],listeners:{close:function(l,m){a.selectHistoryWin.gridSelectinoChange&&a.selectHistoryWin.gridSelectinoChange.destroy();a.selectHistoryWin.gridLoad&&a.selectHistoryWin.gridLoad.destroy();a.selectHistoryWin=
null}},buttons:[{text:"\u67e5\u770b\u9009\u4e2d\u7684\u6570\u636e",iconCls:"extIcon extSee",showSelectHistoryBtn:!0,listeners:{render:function(){this.checkState()}},resetState:function(){d.showHistoryState=0;this.checkState()},checkState:function(){1===d.showHistoryState?(this.setText("\u53d6\u6d88\u67e5\u770b"),this.setIconCls("extIcon extReset")):(this.setText("\u67e5\u770b\u9009\u4e2d\u7684\u6570\u636e"),this.setIconCls("extIcon extSee"))},handler:function(){d.closeSelectHistoryLoad=!0;0===d.showHistoryState?
(d.getStore().loadData(d.getSelectRecordHistory()),d.showHistoryState=1,this.checkState()):d.getStore().reload()}},"-\x3e",{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){e.getForm().isValid()&&(d.selectHistoryConfig=e.getValues(),0===parseInt(d.selectHistoryConfig.state)?(c.Dialog.toast("\u5df2\u5173\u95ed\u9009\u4e2d\u6570\u636e\u7684\u8bb0\u5fc6\u5668\uff01"),d.clearSelectRecordHistory(),d.getStore().reload()):(c.Dialog.toast("\u5df2\u542f\u7528\u9009\u4e2d\u6570\u636e\u7684\u8bb0\u5fc6\u5668\uff01"),
d.recordSelect()),c.Grid.checkHistoryConfig(d),a.selectHistoryWin.close())}}]});a.selectHistoryWin.gridSelectinoChange=d.on("selectionchange",function(){d.refreshSelectHistoryCount()},this,{destroyable:!0});a.selectHistoryWin.gridLoad=d.on("load",function(){try{d.showHistoryState=0;for(var l=d.ownerCt.query("[showSelectHistoryBtn\x3dtrue]"),m=0;m<l.length;m++)Ext.isFunction(l[m].resetState)&&l[m].resetState()}catch(k){console.error(k)}},this,{destroyable:!0});d.ownerCt.add(a.selectHistoryWin)}a.selectHistoryWin.show()};
b.operateWarnColor="red";b.columnSearchMenuPadding=8;b.detailsGridKeyStyle="color:#000000;overflow:auto;text-overflow: ellipsis;white-space:normal !important;word-break:break-word;";b.detailsGridValueStyle="overflow:auto;text-overflow: ellipsis;white-space:normal !important;word-break:break-word;display:flex;align-items:center;line-height:24px;";b.detailsGridActionStyle="display: flex; align-items: center;justify-content: center;";return b}();c.Grid=u;var n=function(){return function(b){this.alertUpdate=
this.alertDelete=!0;this.autoUpdate=!1;this.autoDetails=!0;this.refreshData=this.hoverTip=!1;this.copyData=this.deleteAllData=this.uploadData=this.downloadData=this.excelIn=this.excelOut=!0;this.showRowNumber=!1;this.showUpdateButton=this.showDetailsButton=!0;if(b)for(var a in b)this[a]=b[a]}}();c.GridOperate=n;u=function(){return function(){this.lookField=this.searchLink=this.operation=this.batchReplaceDB=this.batchUpdateDB=this.batchUpdate=this.batchRandom=this.cancelSort=!0}}();c.GridColumnMenu=
u})(FastExt||(FastExt={}));(function(c){var u=function(){function n(){}n.loadHighlight=function(b){c.PluginLoader.loadPlugins("Highlight",[c.Highlight.highlightJsPath,c.Highlight.highlightStylePath],b)};n.highlightCode=function(b,a,d){c.Highlight.loadHighlight(function(){d(hljs.highlight(b,{language:a}).value)})};n.highlightJsPath="base/highlight/highlight.min.js";n.highlightStylePath="base/highlight/idea.min.css";return n}();c.Highlight=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.registerListener=function(){var b=window.XMLHttpRequest;window.XMLHttpRequest=function(){var a=new b,d=function(f){f.lengthComputable&&!c.Server.isSilenceRequest()&&c.System.InitHandler.isInit()&&(f=f.loaded/f.total,Number.isFinite(f)||(f=1),c.ProgressBaseLineLayout.getProgressLine(c.System.ConfigHandler.getFrontColor()).animate(f))},e=function(f){};a.addEventListener("loadstart",function(f){c.Server.isSilenceRequest()||c.System.InitHandler.isInit()&&
c.ProgressBaseLineLayout.getProgressLine(c.System.ConfigHandler.getFrontColor()).set(0)});a.addEventListener("progress",d);a.addEventListener("load",function(f){c.Server.isSilenceRequest()||(c.System.InitHandler.isInit()&&c.ProgressBaseLineLayout.getProgressLine(c.System.ConfigHandler.getFrontColor()).animate(1),c.Server.checkResponse(this),c.Server.checkVersion(this),c.Server.checkManager(this),c.Server.checkRestart(this))});a.addEventListener("abort",e);a.addEventListener("error",e);a.addEventListener("readystatechange",
function(){if(1===this.readyState){var f=function(p,q){var r=l();return f=function(t,v){return r[t-124]},f(p,q)},l=function(){var p="6464017ZoDKLg 33678UxitIQ 3196352tciKgj tokenPublicKey 2925552xOrBQn 1442526bkiNcd Base64 Documents 6430HudTiN 923149UlNeeB System headToken token SecurityHandler util 174LAIBlJ 27572vdzmrX 5FRKAkY".split(" ");l=function(){return p};return l()},m=(new Date).getTime().toString();this.setRequestHeader("security-code",c.System.SecurityHandler.getSecurityCode());this.setRequestHeader("timestamp",
m);var k=c.Server.getSessionId();Ext.isEmpty(k)||this.setRequestHeader("SessionId",k);k=f;(function(p,q){var r=f;for(p=p();;)try{if(-parseInt(r(141))+parseInt(r(130))/2*(parseInt(r(129))/3)+-parseInt(r(134))/4+parseInt(r(131))/5*(-parseInt(r(137))/6)+-parseInt(r(132))/7+parseInt(r(136))/8+parseInt(r(133))/9*(parseInt(r(140))/10)===q)break;else p.push(p.shift())}catch(t){p.push(p.shift())}})(l,685299);var h=c[k(139)].loadFunction(Ext[k(128)][k(138)].decode(c[k(124)][k(127)][k(135)])),g=c[k(139)].loadFunction(Ext[k(128)][k(138)].decode(c[k(124)].SecurityHandler[k(125)]));
h=h();this.setRequestHeader(k(126),g(h,m))}});a.upload.addEventListener("progress",d);return new Proxy(a,{set:function(f,l,m,k){f[l]=m;return!0},get:function(f,l,m){var k=f[l];if(Ext.isFunction(k))return function(){for(var w=[],z=0;z<arguments.length;z++)w[z]=arguments[z];return k.apply(f,w)};if(c.Server.isProjectRequest(f)&&(m=f.getResponseHeader("Security-Response"),("response"===l||"responseText"===l)&&"true"===m&&("responseText"===l&&Ext.isString(k)&&(k=c.Json.jsonToObject(k)),Ext.isArray(k)))){if(!f.responseDecrypted){var h=
function(w,z){var x=g();return h=function(y,A){return x[y-375]},h(w,z)},g=function(){var w="responseDecrypted parse ECB pad 6537930zBhzgs 2165272ehdiJT 316110AAeoYP 11gOZjEk AES 304VtaYwx jsonToObject 60263kcgtWn 5013366lDDzMa __c1 System SecurityHandler getSecurityCode decrypt 89703JcXdky Pkcs7 enc setPrivateKey __c2 Utf8 243565awTcEw mode 42iFHUAN 14bWqxZi Base64 util".split(" ");g=function(){return w};return g()};m=h;(function(w,z){var x=h;for(w=w();;)try{if(parseInt(x(393))/1*(-parseInt(x(379))/
2)+parseInt(x(394))/3+-parseInt(x(387))/4+parseInt(x(376))/5*(-parseInt(x(378))/6)+parseInt(x(386))/7+-parseInt(x(391))/8*(parseInt(x(400))/9)+parseInt(x(388))/10*(-parseInt(x(389))/11)===z)break;else w.push(w.shift())}catch(y){w.push(w.shift())}})(g,890605);var p=new JSEncrypt;p[m(403)](window[m(404)+c[m(396)][m(397)][m(398)]()]());var q=window[m(395)+c.System[m(397)][m(398)]()]();q=p.decrypt(q);p=CryptoJS[m(402)][m(375)][m(383)](q);q=[];for(var r=0,t=k;r<t.length;r++){var v=t[r];v=CryptoJS[m(390)][m(399)](v,
p,{mode:CryptoJS[m(377)][m(384)],padding:CryptoJS[m(385)][m(401)]}).toString(CryptoJS.enc[m(375)]);q.push(Ext[m(381)][m(380)].decode(v))}f[m(382)]=c.Json[m(392)](q.join(""));console.log("\u89e3\u5bc6\u54cd\u5e94\u7684\u6570\u636e\uff01")}return"responseText"===l?c.Json.objectToJson(f.responseDecrypted):f.responseDecrypted}return k}})}};return n}();c.HttpListener=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getRealUrl=function(b){return b.split("@")[0]};n.rotateOSSImgUrl=function(b,a){if(!Ext.isEmpty(b)&&!Ext.isEmpty(a)){var d=b.split("/");return d[d.length-1].startWith("svg-")?b:0<=b.toString().indexOf("?")?b+"\x26x-oss-process\x3dimage/rotate,"+a:b+"?x-oss-process\x3dimage/rotate,"+a}return b};n.smallOSSImgUrl=function(b,a){Ext.isEmpty(a)&&(a=20);a=a.replace("px","");if(!Ext.isEmpty(b)){var d=b.split("/");if(d[d.length-1].startWith("svg-"))return b;if(0<=
b.indexOf("media-amazon.com/images"))return b=b.split("/"),d=b[b.length-1].split("."),d[1]="_SL"+a+"_",b[b.length-1]=d.join("."),b.join("/");d=!1;for(var e=0,f=c.System.ConfigHandler.getOSSHosts();e<f.length;e++)if(0===b.indexOf(f[e])){d=!0;break}if(!d)return b;0>b.toString().indexOf("?")&&(b+="?__v\x3d1");e=c.System.ConfigHandler.getOSSType();d="";"ali"===e?d="\x26x-oss-process\x3dimage/resize,h_"+a+",m_lfit":"tencent"===e?d="\x26imageMogr2/thumbnail/!"+a+"x"+a+"r":"ctyun"===e&&(d="\x26__t\x3dctyun",
b=b.split("?"),b=b[0]+"@oosImage|"+a+"w?"+b[1]);return b+d}return b};n.showImage=function(b,a,d,e){Ext.isEmpty(e)&&(e=!1);var f=null;b&&Ext.isFunction(b.getAttribute)&&(f=b.getAttribute("data-container-id"));var l=[];Ext.isArray(a)?l=a:l.push({url:a});f&&c.Image.showAllRelationImage&&$("#"+f).find("img").each(function(r,t){t=$(t);if(t.attr("data-container-id")&&t.attr("data-details-id")){r=t.attr("data-details-id");t=t.attr("src");c.Cache.memory.hasOwnProperty(r)&&(t=c.Cache.memory[r]);if(Ext.isString(a)&&
t===a)return!0;l.push({url:t})}});f=-1;if(null!=Ext.getStore("ImageViewStore")){b=Ext.getStore("ImageViewStore");e=[];for(var m=0,k=l;m<k.length;m++){var h=k[m],g=b.findRecord("url",h.url);g?Ext.isString(a)&&a===h.url&&(f=b.indexOf(g)):e.push(h)}b.add(e);-1===f&&(f=b.count()-1);b.imgSelectIndex=f;Ext.getCmp("ImageViewGrid").getSelectionModel().select(f)}else{-1===f&&(f=0);var p=Ext.create("Ext.data.Store",{fields:["url"],autoLoad:!1,imgSelectIndex:f,id:"ImageViewStore",data:l}),q=Ext.create("Ext.grid.Panel",
{store:p,region:"west",hideHeaders:!0,id:"ImageViewGrid",width:125,disabled:!0,border:1,scrollable:"y",columns:[{header:"\u6587\u4ef6",dataIndex:"url",flex:1,align:"center",renderer:c.Renders.image(14,-1,!1,!1)}],tbar:[{xtype:"button",border:1,text:"\u6253\u5305\u4e0b\u8f7d",iconCls:"extIcon extDownload",handler:function(r){c.Dialog.showWait("\u6b63\u5728\u6253\u5305\u4e2d\uff0c\u8bf7\u7a0d\u5019\u2026\u2026");var t={};p.each(function(v,w){t["path"+w]=c.Image.getRealUrl(v.get("url"))});c.Server.zipFile(t,
function(v,w,z){c.Dialog.hideWait();v?c.Base.openUrl(z,FastEnum.Target._blank):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",w)})}}],listeners:{selectionchange:function(r,t){try{r=0;var v=this.getStore(),w=this.ownerCt.down("#arrowRight"),z=this.ownerCt.down("#arrowLeft");1<v.getCount()?(this.setHidden(!1),r=120,w&&(w.setHidden(!1),w.setDisabled(v.count()-1===v.indexOf(t[0]))),z&&(z.setHidden(!1),z.setDisabled(0===v.indexOf(t[0])))):(this.setHidden(!0),w&&w.setHidden(!0),z&&z.setHidden(!0));setTimeout(function(){window.imgViewFrame&&
Ext.isFunction(window.imgViewFrame.window.showImage)&&window.imgViewFrame.window.showImage(c.Base.formatUrl(t[0].get("url")),c.System.ConfigHandler.getSystemHttp())},r)}catch(x){c.Dialog.showException(x,"showImage")}}}});window.imageViewerLoadDone=function(){Ext.getCmp("ImageViewGrid").setDisabled(!1);try{var r=Ext.getStore("ImageViewStore").imgSelectIndex;Ext.getCmp("ImageViewGrid").getSelectionModel().select(r)}catch(t){c.Dialog.showException(t,"showImage")}};window.imageViewerSize=function(r,t){Ext.getCmp("ImageViewWindow").setTitle("\u67e5\u770b\u56fe\u7247 "+
r+"x"+t)};f=Ext.create("Ext.panel.Panel",{layout:"fit",region:"center",border:0,height:"auto",iframePanel:!0,html:'\x3cdiv style\x3d"background: #000000;width: 100%;height: 100%;"\x3e\x3c/div\x3e',listeners:{afterrender:function(r,t){1>=p.getCount()?q.setHidden(!0):q.setHidden(!1);r.update("\x3ciframe style\x3d'background: #000000;width: 100%;height: 100%;' name\x3d'imgViewFrame'  src\x3d'"+c.Base.formatUrlVersion("base/image-view/index.html")+"' width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' /\x3e");
r.getEl().on("mouseleave",function(v){v=window.imgViewFrame.window.document.getElementsByTagName("div")[0];c.Base.dispatchTargetEvent(window.imgViewFrame.window.document,v,"pointerup");window.imgViewFrame.window.reset()})}},bbar:{xtype:"toolbar",dock:"bottom",layout:{type:"hbox",align:"middle",pack:"center"},items:[{xtype:"button",iconCls:"extIcon extReset",handler:function(){window.imgViewFrame.window.reset()}},{xtype:"button",iconCls:"extIcon extZoomOut",handler:function(){window.imgViewFrame.window.zoomOut()}},
{xtype:"button",iconCls:"extIcon extZoomIn",handler:function(){window.imgViewFrame.window.zoomIn()}},{xtype:"button",iconCls:"extIcon extOneOne",handler:function(){window.imgViewFrame.window.oneOne()}},{xtype:"button",iconCls:"extIcon extArrowLeft",itemId:"arrowLeft",hidden:!0,handler:function(){var r=Ext.getCmp("ImageViewGrid"),t=r.getSelection(),v=0;0<t.length&&(v=r.getStore().indexOf(t[0]));Ext.getCmp("ImageViewGrid").getSelectionModel().select(Math.max(v-1,0))}},{xtype:"button",iconCls:"extIcon extArrowRight",
itemId:"arrowRight",hidden:!0,handler:function(){var r=Ext.getCmp("ImageViewGrid"),t=r.getSelection(),v=0;0<t.length&&(v=r.getStore().indexOf(t[0]));Ext.getCmp("ImageViewGrid").getSelectionModel().select(Math.min(v+1,r.getStore().count()-1))}},{xtype:"button",iconCls:"extIcon extRefresh",handler:function(){window.imgViewFrame.window.rotate()}},{xtype:"button",iconCls:"extIcon extLeftRight",handler:function(){window.imgViewFrame.window.flipA()}},{xtype:"button",iconCls:"extIcon extTopBottom",handler:function(){window.imgViewFrame.window.flipB()}},
{xtype:"button",iconCls:"extIcon extDownload2",handler:function(){var r=q.getSelectionModel().getSelection();c.Base.download(c.Image.getRealUrl(r[0].get("url")))}}]}});m=parseInt((.6*document.body.clientWidth).toFixed(0));k=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:"\u67e5\u770b\u56fe\u7247",height:k,width:m,minHeight:500,minWidth:600,id:"ImageViewWindow",layout:"border",iconCls:"extIcon extImage",resizable:!0,alwaysOnTop:!0,maximizable:!0,modal:e,
constrain:!0,animateTarget:b,items:[q,f],listeners:{close:function(r){p.destroy();Ext.isFunction(d)&&d()}}}).show()}};n.showAllRelationImage=!0;return n}();c.Image=u})(FastExt||(FastExt={}));(function(c){var u=function(){function n(){}n.load=function(){c.System.__onLoaded();for(var b=0,a=[FastDefine,FastExtend,FastOverrider,c];b<a.length;b++){var d=a[b],e;for(e in d)"System"!==e&&Ext.isFunction(d[e].__onLoaded)&&d[e].__onLoaded()}};return n}();c.Initializer=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loader=function(b){c.PluginLoader.loadPlugins("JqueryPrintArea",[c.JqueryPrintArea.printAreaJsPath],b)};n.print=function(b){c.JqueryPrintArea.loader(function(){$(b).printArea()})};n.printAreaJsPath="base/jquery/jquery.printarea.js";return n}();c.JqueryPrintArea=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loaderFormatter=function(b){c.PluginLoader.loadPlugins("JsonFormatter",[c.Json.formatterJsPath],b)};n.toFormatJsonHtml=function(b,a,d){c.Json.loaderFormatter(function(){a&&(b=b.replace(/\\/g,"\\\\"),b=b.replace(/\\"/g,'\\\\"'));d((new JSONFormat(b,4)).toString())})};n.jsonToObject=function(b,a){try{return Ext.isString(b)?JSON.parse(b):b}catch(d){a&&(console.warn(b),console.error(d))}return null};n.objectToJson=function(b,a){try{return JSON.stringify(b)}catch(d){a&&
(console.warn(b),console.error(d))}return null};n.objectToJsonUnsafe=function(b){return JSON.stringify(b,function(a,d){return"function"===typeof d?d.toString():d})};n.jsonToObjectUnsafe=function(b){try{return JSON.parse(b,function(a,d){return d.indexOf&&-1<d.indexOf("function")?eval("(function(){return "+d+" })()"):d})}catch(a){}return null};n.mergeJson=function(b,a){var d={};if(!Ext.isEmpty(b))for(var e in b)d[e]=b[e];if(!Ext.isEmpty(a))for(e in a)d[e]=a[e];return d};n.deepMergeJson=function(b,a){var d=
{};if(!Ext.isEmpty(b))for(var e in b)d[e]=b[e];if(!Ext.isEmpty(a))for(e in a){var f=d[e];b=a[e];if(Ext.isArray(f)&&Ext.isArray(b)){b=[].concat(b);for(var l=0;l<f.length;l++){var m=f[l];0<=b.indexOf(m)||b.push(m)}d[e]=b}else Ext.isObject(f)&&Ext.isObject(b)?d[e]=c.Json.deepMergeJson(f,b):d[e]=b}return d};n.showFormatJson=function(b,a,d){try{b&&Ext.isFunction(b.blur)&&b.blur();Ext.isEmpty(d)&&(d="\u67e5\u770bJSON\u6570\u636e");var e=parseInt((.6*document.body.clientWidth).toFixed(0)),f=parseInt((.7*
document.body.clientHeight).toFixed(0)),l=Ext.create("Ext.window.Window",{title:d,height:f,width:e,minHeight:500,minWidth:600,animateTarget:b,layout:"fit",resizable:!0,maximizable:!0,iconCls:"extIcon extSee",autoScroll:!0,modal:!0,bodyStyle:{background:"#ffffff"},constrain:!0,buttons:[{text:"\u4fdd\u7559\u8f6c\u4e49\u7b26",iconCls:"extIcon extConvertCode whiteColor",handler:function(){c.Base.toBool(this.keepChar,!1)?(c.Json.toFormatJsonHtml(a,!1,function(m){l.update("\x3cdiv style\x3d'padding: 20px;'\x3e"+
m+"\x3c/div\x3e")}),this.setText("\u4fdd\u7559\u8f6c\u4e49\u7b26"),this.keepChar=!1):(c.Json.toFormatJsonHtml(a,!0,function(m){l.update("\x3cdiv style\x3d'padding: 20px;'\x3e"+m+"\x3c/div\x3e")}),this.setText("\u89e3\u6790\u8f6c\u4e49\u7b26"),this.keepChar=!0)}},"-\x3e",{text:"\u590d\u5236JSON\u6570\u636e",iconCls:"extIcon extCopy2 whiteColor",handler:function(){c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01");c.Base.copyToBoard(a)}}],listeners:{show:function(){var m=this;this.setLoading("\u683c\u5f0f\u5316\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");
c.Json.toFormatJsonHtml(a,!1,function(k){m.setLoading(!1);m.update("\x3cdiv style\x3d'padding: 20px;'\x3e"+k+"\x3c/div\x3e")})}}});l.show()}catch(m){console.error(m),c.Dialog.showText(b,null,"\u67e5\u770b\u6570\u636e",a)}};n.formatterJsPath="base/json-formatter/json-formatter.min.js";return n}();c.Json=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.setCurrClickTarget=function(b){this._currClickTarget=b};n.getCurrClickTarget=function(){return this._currClickTarget};n.setMouseClickXY=function(b,a){this._mouseClickX=b;this._mouseClickY=a};n.getMouseClickXY=function(){return{x:this._mouseClickX,y:this._mouseClickY}};n.getBodyContainer=function(){this._systemBodyContainer||(Ext.getDoc().on("contextmenu",function(b){b.stopEvent()}),Ext.tip.QuickTipManager.init(),Ext.QuickTips.init(),this._systemBodyContainer=
Ext.create("Ext.container.Viewport",{layout:"fit",border:0,renderTo:Ext.getBody()}),Ext.isEmpty(c.System.ConfigHandler.getConfig("system-error-message").value)||c.Dialog.toast(c.System.ConfigHandler.getConfig("system-error-message").value));return this._systemBodyContainer};n.selectMenu=function(b){this.showByMenuId(b)};n.showByMenuId=function(b){c.System.ConfigHandler.isNormalLayout()?c.NormalLayout.TabContainer.showByMenuId(b):c.System.ConfigHandler.isDesktopLayout()&&c.DesktopLayout.showWindowMenuById(null,
b)};n.showByMenu=function(b){c.System.ConfigHandler.isNormalLayout()&&c.NormalLayout.TabContainer.show(b)};n.showMenuByPath=function(b){c.SystemLayout.showByLevel(b)};n.showByLevel=function(b){(b=c.System.MenuHandler.findMenu(b))&&c.SystemLayout.showByMenuId(b.id)};n.closeAllTab=function(){c.System.ConfigHandler.isNormalLayout()&&c.NormalLayout.TabContainer.closeAll()};n.showByCmp=function(b,a,d,e){var f=Ext.getCmp(a);if(f)c.Component.shakeComment(f);else{f=parseInt((.6*document.body.clientWidth).toFixed(0));
var l=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:d,id:a,height:l,width:f,layout:"border",icon:e,resizable:!0,constrain:!0,maximizable:!0,modal:!1,listeners:{show:function(m){m.focus()}},items:[b]}).show()}};n.changeMenuTheme=function(b,a){try{var d=c.System.MenuHandler.getMenu(b);d&&d.baseCls?c.System.ConfigHandler.isEnableTabTheme()&&(c.SystemLayout.clearAllMenuTheme(),c.SystemLayout.getBodyContainer().setUserCls(d.baseCls)):c.SystemLayout.clearAllMenuTheme()}catch(e){console.error(e)}finally{a()}};
n.clearAllMenuTheme=function(){c.SystemLayout.getBodyContainer().setUserCls("")};n._currClickTarget=null;return n}();c.SystemLayout=u;u=function(){function n(){}n.showLoginPanel=function(){var b=c.SystemLayout.getBodyContainer();b.removeAll();var a=c.System.ConfigHandler.getSystemTitle(),d=c.System.ConfigHandler.getLoginBackground(),e=c.System.ConfigHandler.getLoginLottieJson(),f=c.System.ConfigHandler.getThemeColor(),l=c.System.ConfigHandler.getLoginLogo(),m="normal"===c.System.ConfigHandler.getLoginType(),
k=c.System.ConfigHandler.getSystemCopyright(),h=c.System.ConfigHandler.getSystemCopyrightUrl(),g=c.System.ConfigHandler.getIndexUrl(),p=c.System.ConfigHandler.getSystemVersion(),q=(new Date).getFullYear();d=c.Base.formatUrl(d,{bg:f,dot:f});e=c.Base.formatUrl(e,{bg:f});d=Ext.create("Ext.panel.Panel",{layout:"fit",border:0,iframePanel:!0,html:"\x3ciframe name\x3d'loginFrame'  src\x3d'"+d+"' width\x3d'100%' height\x3d'100%' style\x3d'border: 0; overflow-x: hidden;background-color: "+f+"'/\x3e"});var r=
"\x3cdiv align\x3d'center' class\x3d'fast-system-login-head-container' style\x3d'color:"+f+";'\x3e\x3cimg  class\x3d'fast-system-login_logo'  width\x3d'80px' height\x3d'80px;' src\x3d'"+c.Base.formatUrlVersion(l)+"' alt\x3d'logo' /\x3e\x3ch2\x3e"+a+"\x3c/h2\x3e\x3c/div\x3e";l&&0!==l.length||(r="\x3cdiv align\x3d'center' class\x3d'fast-system-login-head-container' style\x3d'color:"+f+";'\x3e\x3ch2\x3e"+a+"\x3c/h2\x3e\x3c/div\x3e");a=Ext.create("Ext.panel.Panel",{region:"north",layout:"fit",bodyCls:"bgNull",
width:"100%",bodyStyle:{},border:0,height:"auto",html:r});l=Cookies.get("loginNameValue");var t=Cookies.get("loginPasswordValue"),v=Cookies.get("loginMemberValue");Ext.isEmpty(v)&&(v="0");r=2*c.System.ConfigHandler.getFontSizeNumber();t=[{xtype:"textfield",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLogin"\x3e\x3c/use\x3e\x3c/svg\x3e',margin:"10 10 0 0",name:"loginName",id:"loginName",allowBlank:!1,blankText:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d",emptyText:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d",
value:l,anchor:"100%"},{xtype:"textfield",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLogPwd"\x3e\x3c/use\x3e\x3c/svg\x3e',inputType:"password",margin:"10 10 0 0",allowBlank:!1,blankText:"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801",emptyText:"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801",value:t,submitValue:!1,name:"loginPassword",anchor:"100%"},c.Captcha.getLoginCaptchaCmp(),{name:"loginMember",xtype:"combo",fieldLabel:'\x3csvg class\x3d"svgIcon" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extLoginRemember2"\x3e\x3c/use\x3e\x3c/svg\x3e',
margin:"10 10 0 0",displayField:"text",valueField:"id",editable:!1,anchor:"100%",value:v,submitValue:!1,allowBlank:!1,store:Ext.create("Ext.data.Store",{data:[{id:"-1",text:"\u4e0d\u8bb0\u4f4f"},{id:"0",text:"\u8bb0\u4f4f\u7528\u6237\u540d"},{id:"1",text:"\u8bb0\u4f4f\u7528\u6237\u540d\u548c\u5bc6\u7801"}]})},{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",text:"\u7acb\u5373\u767b\u5f55",itemId:"btnLogin",tipText:"\u767b\u5f55\u7cfb\u7edf",
margin:"10 10 10 10",iconCls:"extIcon extLogin2",flex:1,handler:function(){x()}}]}];l={height:540,width:988};c.Listeners.getFire().onInitLoginPanel(t,l);var w=Ext.create("Ext.form.FormPanel",{url:c.Server.loginUrl(),method:"POST",bodyCls:"fast-bg-null",border:0,width:"100%",layout:"anchor",region:"center",bodyStyle:{},padding:"10 10 10 10",items:[{xtype:"fieldset",title:"",layout:"anchor",padding:"10 10 0 10",defaults:{labelAlign:"right",labelWidth:r,labelSeparator:"",labelStyle:"font-size: 24px !important;color: #666666;"},
items:t}],listeners:{render:function(B){try{new Ext.util.KeyMap({target:B.getEl(),key:13,fn:x,scope:Ext.getBody()})}catch(C){console.error(C)}}}}),z=function(){w.query("#captcha")[0].refreshCode()},x=function(){var B=w.form;if(B.isValid())c.Listeners.getFire().onBeforeManagerLogin(B.getValues(),function(){y()})},y=function(){var B=w.form;if(B.isValid()){var C=w.form.findField("loginPassword").getValue().trim(),H=w.form.findField("loginName").getValue().trim(),I=w.form.findField("loginMember").getValue().trim();
Cookies.set("loginNameValue",H,{expires:30});Cookies.set("loginMemberValue",I,{expires:30});1===parseInt(I)?Cookies.set("loginPasswordValue",C,{expires:30}):(0!==parseInt(I)&&Cookies.remove("loginNameValue"),Cookies.remove("loginPasswordValue"));var D=function(E){c.Base.toBool(E,!0)?c.Documents.addScript({src:g+"?v\x3d"+c.System.ConfigHandler.getSystemVersionInt()}):z()};B.submit({params:{loginPassword:$.md5(C)},waitMsg:"\u6b63\u5728\u4e3a\u60a8\u767b\u5f55\u2026\u2026",success:function(E,F){c.Listeners.getFire().onAfterManagerLogin(D)},
failure:function(E,F){z();if(-2===F.result.code)w.form.findField("loginPassword").reset();else{if(-3===F.result.code){c.Captcha.showGoogleAuthentication(1,D);return}if(-4===F.result.code){c.Captcha.showGoogleAuthentication(2,D);return}}F.result&&Ext.Msg.alert("\u767b\u5f55\u5931\u8d25",F.result.message,function(){-3===F.result.code&&w.form.findField("validateCode").focus()})}})}};r="_blank";0===h.indexOf("javascript:")&&(r="_self");k=Ext.create("Ext.panel.Panel",{region:"south",width:"100%",height:50,
bodyCls:"bgNull",border:0,html:"\x3cdiv align\x3d'center'\x3e\x3ca href\x3d'"+h+"' target\x3d'"+r+"' style\x3d'font-size: xx-small;color:#aaa;text-decoration:none;'\x3e"+k+"\x3c/a\x3e\x3c/div\x3e\x3cdiv align\x3d'center' style\x3d'font-size: xx-small;color:#aaa;margin-top: 5px;'\x3eCopyright \u00a9 "+q+" "+p+"\x3c/div\x3e"});k=Ext.create("Ext.panel.Panel",{region:"center",layout:{type:"vbox",align:"stretch",pack:"center"},border:0,items:[a,w,k]});f=Ext.create("Ext.panel.Panel",{region:"west",layout:"fit",
width:588,border:0,bodyStyle:{background:f},listeners:{render:function(B){c.Lottie.loadJsonAnim(B,e)},beforedestroy:function(B){c.Lottie.unloadJsonAnim(B)}}});var A=Ext.create("Ext.window.Window",{resizable:!1,header:!1,layout:"border",bodyCls:"fast-bg-null",closable:!1,toFrontOnShow:!0,constrain:!0,width:l.width,height:l.height,items:[f,k]});A.show(null,function(){A.query("#btnLogin")[0].focus();m||z()});b.add(d);b.add(A)};n.showLogout=function(){var b="\x3cdiv style\x3d'line-height: 170%;'\x3e\x3cb style\x3d'font-size: 16px;'\x3e\u60a8\u786e\u5b9a\u9000\u51fa\u5f53\u524d\u767b\u5f55\u7684\u8d26\u6237\u5417\uff1f\x3c/b\x3e\x3cbr/\x3e\x3cb style\x3d'font-size: 14px;'\x3e\u5f53\u524d\u8d26\u6237\uff1a"+
(c.System.ManagerHandler.getManagerName()+"\x3c/b\x3e");Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u793a",b+"\x3c/div\x3e",function(a){"yes"===a&&c.Server.logout()})};n.isShownSessionOutAlert=function(){return this._sessionOutAlert};n.showSessionOut=function(b){Ext.isEmpty(b)&&(b="\u7cfb\u7edf\u68c0\u6d4b\u5230\u60a8\u7684\u4f1a\u8bdd\u5df2\u5931\u6548\uff0c\u8bf7\u60a8\u91cd\u65b0\u767b\u5f55\uff01");Ext.getCmp("ManagerSessionOutWin")||this._sessionOutAlert||(c.Dialog.hideWait(),this._sessionOutAlert=!0,
b=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/error_normal.json"},{xtype:"label",maxWidth:250,margin:"5 5 10 5",html:b}]}),Ext.create("Ext.window.Window",{title:"\u8d26\u6237\u63d0\u9192",iconCls:"extIcon extSessionOut",id:"ManagerSessionOutWin",width:280,layout:{type:"vbox",pack:"center",align:"middle"},maximizable:!1,
sessionWin:!0,fixed:!0,draggable:!1,animateDisable:!0,constrain:!0,resizable:!1,alwaysOnTop:!0,toFrontOnShow:!0,items:[b],modal:!0,listeners:{destroy:function(a,d){c.Power.isPower()?window.parent.close():location.reload()}},buttons:["-\x3e",{text:"\u77e5\u9053\u4e86",iconCls:"extIcon extOk",handler:function(){c.Server.logout("\u9000\u51fa\u7cfb\u7edf\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026")}},"-\x3e"]}).show())};n.validOperate=function(b,a,d){if(b){var e=Cookies.get("ValidOperate"+$.md5(b));d||
(d=86400);if(e)a();else{var f="normal"===c.System.ConfigHandler.getLoginType();e=5*c.Base.getNumberValue(c.System.ConfigHandler.getFontSize())+8;var l=function(){var g=m.form;if(g.isValid()){var p=m.form.findField("loginPassword").getValue();g.submit({params:{loginPassword:$.md5(p),operate:b,timeout:d},waitMsg:"\u6b63\u5728\u4e3a\u60a8\u9a8c\u8bc1\u4e2d\u2026\u2026",success:function(q,r){h.close();a()},failure:function(q,r){k();r.result&&Ext.Msg.alert("\u9a8c\u8bc1\u5931\u8d25",r.result.message,function(){-3===
r.result.code&&m.form.findField("validateCode").focus()})}})}},m=Ext.create("Ext.form.FormPanel",{url:c.Server.validOperateUrl(),method:"POST",fileUpload:!0,border:0,width:"100%",layout:"anchor",region:"center",bodyStyle:{},padding:"10 10 0 10",items:[{xtype:"textfield",fieldLabel:"\u767b\u5f55\u8d26\u53f7",labelAlign:"right",labelWidth:e,margin:"10 10 0 0",name:"loginName",allowBlank:!1,readOnly:!0,value:c.System.ManagerHandler.getManagerLoginName(),blankText:"\u8bf7\u8f93\u5165\u5f53\u524d\u767b\u5f55\u540d",
emptyText:"\u8bf7\u8f93\u5165\u5f53\u524d\u767b\u5f55\u540d",anchor:"100%"},{xtype:"textfield",fieldLabel:"\u767b\u5f55\u5bc6\u7801",labelAlign:"right",labelWidth:e,inputType:"password",margin:"10 10 0 0",allowBlank:!1,blankText:"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801",emptyText:"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801",submitValue:!1,name:"loginPassword",anchor:"100%"},{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",layout:{type:"hbox",align:"stretch"},hidden:f,items:[{xtype:"textfield",
fieldLabel:"\u9a8c\u8bc1\u7801",labelAlign:"right",labelWidth:e,margin:"10 10 0 0",allowBlank:f,flex:1,name:"validateCode",emptyText:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",blankText:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},{xtype:"image",margin:"10 10 0 0",width:70,id:"imgCode",height:32}]},{xtype:"fieldcontainer",labelWidth:0,anchor:"100%",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",text:"\u53d6\u6d88",iconCls:"extIcon extReset",flex:1,tipText:"\u53d6\u6d88\u9a8c\u8bc1",margin:"10 5 10 10",
handler:function(){h.close()}},{xtype:"button",text:"\u786e\u5b9a",tipText:"\u786e\u5b9a\u9a8c\u8bc1",margin:"10 10 10 5",iconCls:"extIcon extOk",flex:1,handler:function(){l()}}]}],listeners:{render:function(g){try{new Ext.util.KeyMap({target:g.getEl(),key:13,fn:l,scope:Ext.getBody()})}catch(p){console.error(p)}}}}),k=function(){try{m.form.findField("validateCode").reset(),Ext.getCmp("imgCode").setSrc("showCaptcha?t\x3d"+Math.random())}catch(g){}};e=Ext.create("Ext.panel.Panel",{region:"south",layout:"fit",
width:"100%",border:0,html:"\x3cdiv align\x3d'center' style\x3d'font-size: small;color:red;text-decoration:none; padding-left: 40px;padding-right: 40px;padding-bottom: 10px;'\x3e\x3cb\x3e\u5b8c\u6210\u9a8c\u8bc1\u540e\u5c06\u7ee7\u7eed\u6267\u884c\u300a"+b+"\u300b\u64cd\u4f5c\x3c/b\x3e\x3c/div\x3e"});var h=Ext.create("Ext.window.Window",{title:"\u5f53\u524d\u64cd\u4f5c\u9700\u8981\u5b89\u5168\u9a8c\u8bc1",iconCls:"extIcon extPower",width:380,resizable:!1,layout:"vbox",toFrontOnShow:!0,modal:!0,constrain:!0,
items:[m,e]});h.show(null,function(){try{f||(k(),Ext.get("imgCode").on({click:function(){k()}}))}catch(g){}})}}};return n}();c.LoginLayout=u;u=function(){function n(){}n.showManagerInfo=function(b){if(this._manageInfoWindow)c.Component.shakeComment(this._manageInfoWindow);else{var a=[{name:"\u8d26\u6237\u540d\u79f0",value:c.System.ManagerHandler.getManagerName()},{name:"\u8d26\u6237\u767b\u5f55\u540d",value:c.System.ManagerHandler.getManagerLoginName()},{name:"\u8d26\u6237\u72b6\u6001",value:c.System.ManagerHandler.getManagerStateStr()},
{name:"\u8d26\u6237\u89d2\u8272",value:c.System.ManagerHandler.getRoleName()},{name:"\u89d2\u8272\u7c7b\u578b",value:c.System.ManagerHandler.getRoleTypeStr()},{name:"\u89d2\u8272\u72b6\u6001",value:c.System.ManagerHandler.getRoleStateStr()},{name:"\u5141\u8bb8\u767b\u5f55",value:c.System.ManagerHandler.getOnlineTypeStr()},{name:"\u6700\u540e\u4e00\u6b21\u767b\u5f55",value:c.System.ManagerHandler.getLastLoginTime()}];c.Listeners.getFire().onShowManagerInfo(a);a=c.Grid.createDetailsGrid(a,{power:!1,
hideHeaders:!0},{},{align:"center"});this._manageInfoWindow=Ext.create("Ext.window.Window",{title:"\u767b\u5f55\u7cfb\u7edf\u7684\u8d26\u6237\u4fe1\u606f",layout:"fit",constrain:!0,iconCls:"extIcon extManager2",resizable:!0,minHeight:200,minWidth:400,height:520,width:460,animateTarget:b,items:[a],listeners:{close:function(){c.ManagerLayout._manageInfoWindow=null}},buttons:[{text:"\u9000\u51fa\u767b\u5f55",iconCls:"extIcon extExits whiteColor",handler:function(){c.LoginLayout.showLogout()}},"-\x3e",
{text:"\u66f4\u591a\u64cd\u4f5c",iconCls:"extIcon extMore whiteColor",menu:[{text:"\u521d\u59cb\u5316\u914d\u7f6e",columnWidth:1,iconCls:"extIcon extRefresh extRole",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u5c06\u521d\u59cb\u5316\u7cfb\u7edf\u8bb0\u5fc6\u914d\u7f6e\uff0c\u786e\u5b9a\u7ee7\u7eed\u5417\uff1f",function(d,e){"yes"==d&&c.System.InitHandler.startSilenceSaveConfig()})}},{text:"\u4fee\u6539\u767b\u5f55\u5bc6\u7801",iconCls:"extIcon extResetPassword redColor",handler:function(){c.ManagerLayout.showModifyPassword(this)}}]}]})}this._manageInfoWindow.show()};
n.showModifyPassword=function(b){var a=Ext.create("Ext.form.FormPanel",{url:"controller/modifyPassword",method:"POST",fileUpload:!0,border:0,width:"100%",layout:"anchor",region:"center",bodyStyle:{},items:[{xtype:"textfield",fieldLabel:"\u5f53\u524d\u5bc6\u7801",labelAlign:"right",labelWidth:60,margin:"10 10 10 10",name:"managerPassword",allowBlank:!1,inputType:"password",blankText:"\u8bf7\u8f93\u5165\u7528\u6237\u5f53\u524d\u5bc6\u7801",anchor:"100%"},{xtype:"textfield",fieldLabel:"\u65b0\u5bc6\u7801",
labelAlign:"right",labelWidth:60,margin:"10 10 10 10",name:"newPassword",allowBlank:!1,inputType:"password",blankText:"\u8bf7\u8f93\u5165\u7528\u6237\u65b0\u5bc6\u7801",anchor:"100%"},{xtype:"textfield",fieldLabel:"\u786e\u8ba4\u5bc6\u7801",labelAlign:"right",labelWidth:60,margin:"10 10 10 10",name:"reNewPassword",allowBlank:!1,inputType:"password",blankText:"\u8bf7\u786e\u8ba4\u5bc6\u7801",anchor:"100%"},{xtype:"hiddenfield",name:"managerId",value:c.System.ManagerHandler.getManagerId()},{xtype:"fieldcontainer",
labelWidth:0,layout:"column",items:[{xtype:"button",text:"\u7acb\u5373\u4fee\u6539",margin:"10 10 10 5",iconCls:"extIcon extOk",columnWidth:1,handler:function(){d()}}]}],listeners:{render:function(f){try{new Ext.util.KeyMap({target:f.getEl(),key:13,fn:d,scope:Ext.getBody()})}catch(l){console.error(l)}}}}),d=function(){var f=a.form;f.isValid()&&f.submit({waitMsg:"\u6b63\u5728\u4fee\u6539\u4e2d\u2026\u2026",success:function(l,m){c.Dialog.toast(m.result.message);e.close();m.result.success&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",
"\u60a8\u5f53\u524d\u7684\u5bc6\u7801\u5df2\u88ab\u4fee\u6539\uff0c\u8bf7\u60a8\u91cd\u65b0\u767b\u5f55\uff01",function(){c.Server.logout()})},failure:function(l,m){m.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",m.result.message)}})},e=Ext.create("Ext.window.Window",{title:"\u4fee\u6539\u7ba1\u7406\u5458\u767b\u5f55\u5bc6\u7801",height:250,iconCls:"extIcon extResetPassword redColor",width:400,layout:"border",resizable:!1,maximizable:!1,animateTarget:b,constrain:!0,items:[a],modal:!0});e.show()};
return n}();c.ManagerLayout=u;u=function(){function n(){}n.getWelcomePanel=function(){var b=[],a=[];c.Listeners.getFire().onInitSystemWelcomeItems(new (function(){function e(){}e.prototype.addLeftPanel=function(f){b.push(f)};e.prototype.addRightPanel=function(f){a.push(f)};return e}()));c.System.ConfigHandler.isDataboard()&&b.push(c.Databoard.getPanel());b.push(c.IndexLayout.getSystemOperatePanel(!0));c.System.ManagerHandler.isSuperRole()&&(a.push(c.IndexLayout.getSystemVersionPanel(!0)),a.push(c.IndexLayout.getSystemConfigPanel(!0)));
var d=[Ext.create("Ext.panel.Panel",{layout:{type:"accordion"},region:"center",border:0,flex:.6,items:b})];0<a.length&&d.push(Ext.create("Ext.panel.Panel",{layout:"accordion",region:"east",border:0,flex:.4,collapsed:!1,split:!0,subtitle:"\u7cfb\u7edf\u53f3\u4fa7\u9762\u677f",items:a}));return Ext.create("Ext.panel.Panel",{layout:"border",region:"center",border:0,items:d,listeners:{activate:function(e){c.SystemLayout.clearAllMenuTheme()}}})};n.getSystemVersionPanel=function(b){var a=[{name:"\u9879\u76ee\u540d\u79f0",
value:c.System.ConfigHandler.getSystemTitle()},{name:"\u9879\u76ee\u7248\u672c",value:c.System.ConfigHandler.getSystemVersion()},{name:"\u9879\u76ee\u4f4d\u7f6e",value:c.System.ConfigHandler.getSystemRoot()},{name:"\u672c\u673aIP\u5730\u5740",value:c.System.ConfigHandler.getLocalhostIP()},{name:"\u7cfb\u7edf\u73af\u5883",value:c.System.ConfigHandler.getSystemOS()},{name:"\u7cfb\u7edf\u542f\u52a8\u65f6\u95f4",value:c.System.ConfigHandler.getSystemStartTime()},{name:"\u7cfb\u7edf\u5237\u65b0\u65f6\u95f4",
value:Ext.Date.format(new Date,"Y-m-d H:i:s")},{name:"\u6570\u636e\u5e93",value:c.System.ConfigHandler.getSystemDB()},{name:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60",value:c.System.ConfigHandler.getSystemDBPool()},{name:"\u9879\u76ee\u8fd0\u884c\u5bb9\u5668",value:c.System.ConfigHandler.getSystemServer()},{name:"\u8fd0\u884c\u5bb9\u5668\u4f4d\u7f6e",value:c.System.ConfigHandler.getSystemCatalina()},{name:"\u9879\u76ee\u6846\u67b6",value:"\x3ca href\x3d'http://www.fastchar.com' target\x3d'_blank' \x3e"+
c.System.ConfigHandler.getFastCharVersion()+"\x3c/a\x3e"},{name:"\u5f00\u53d1\u8bed\u8a00",value:c.System.ConfigHandler.getJavaVersion()+" + ExtJs"+Ext.getVersion().version+" + HTML5 + CSS3"},{name:"\u5f00\u53d1\u670d\u52a1\u5546",value:"\x3ca href\x3d'"+c.System.ConfigHandler.getDeveloperUrl()+"' target\x3d'_blank'\x3e"+c.System.ConfigHandler.getDeveloperTitle()+"\x3c/a\x3e"},{name:"\u7248\u6743\u5f52\u5c5e",value:"\x3ca href\x3d'"+c.System.ConfigHandler.getSystemCopyrightUrl()+"' target\x3d'_blank'\x3e"+
c.System.ConfigHandler.getSystemCopyright()+"\x3c/a\x3e"}];return c.Grid.createDetailsGrid(a,{title:b?"\u7cfb\u7edf\u57fa\u672c\u4fe1\u606f":null,iconCls:b?"extIcon extVersion":null,power:!1,hideHeaders:!0},{},{align:"center"})};n.getSystemConfigPanel=function(b){var a=Ext.create("Ext.form.FormPanel",{url:c.Server.saveSystemConfigUrl(),bodyPadding:5,method:"POST",region:"center",power:!1,border:0,title:b?"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e":null,iconCls:b?"extIcon extSet":null,autoScroll:!0,defaults:{labelWidth:100,
margin:"5 5 5 5",labelAlign:"right",emptyText:"\u8bf7\u586b\u5199"},viewModel:{data:null},layout:"column",items:[{xtype:"fieldset",title:"\u57fa\u672c\u8bbe\u7f6e",columnWidth:1,layout:"column",defaults:{anchor:"100%",margin:"5 5 5 5"},items:[{name:"theme_color",xtype:"colorfield",fieldLabel:"\u7cfb\u7edf\u4e3b\u9898\u989c\u8272",columnWidth:1,bind:"{theme_color}"},{name:"front_color",xtype:"colorfield",fieldLabel:"\u7cfb\u7edf\u524d\u666f\u989c\u8272",columnWidth:1,bind:"{front_color}"},{name:"system_layout",
fieldLabel:"\u7cfb\u7edf\u5e03\u5c40\u65b9\u5f0f",columnWidth:1,xtype:"combo",displayField:"text",valueField:"id",editable:!1,readOnly:!0,bind:"{system_layout}",store:c.Store.getSystemLayoutDataStore()},{name:"theme",fieldLabel:"\u7cfb\u7edf\u4e3b\u9898\u98ce\u683c",columnWidth:1,xtype:"combo",displayField:"text",valueField:"id",editable:!1,bind:"{theme}",store:c.Store.getThemeDataStore()},{name:"window_anim",fieldLabel:"\u7cfb\u7edf\u7a97\u4f53\u52a8\u753b",columnWidth:1,xtype:"combo",displayField:"text",
valueField:"id",editable:!1,bind:"{window_anim}",store:c.Store.getYesOrNoDataStore2()},{xtype:"button",text:"\u6062\u590d\u9ed8\u8ba4",iconCls:"extIcon extReset whiteColor",columnWidth:.5,handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u60a8\u786e\u5b9a\u6062\u590d\u7cfb\u7edf\u9ed8\u8ba4\u7684\u914d\u7f6e\u5417\uff1f",function(d,e){"yes"===d&&(c.Dialog.showWait("\u8bf7\u7a0d\u540e\u2026\u2026"),a.getForm().reset(),c.Server.deleteSystemConfig(function(f,l){c.Dialog.hideWait();f?location.reload():
c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",l)}))})}},{xtype:"button",text:"\u4fdd\u5b58\u914d\u7f6e",columnWidth:.5,iconCls:"extIcon extSave whiteColor",margin:"5 5 5 0 ",handler:function(){a.doSubmit()}}]},{xtype:"fieldset",title:"\u7cfb\u7edf\u914d\u7f6e",columnWidth:1,layout:"column",defaults:{anchor:"100%",margin:"5 5 5 5"},items:[{xtype:"button",text:"\u521d\u59cb\u5316\u7cfb\u7edf\u914d\u7f6e",columnWidth:1,iconCls:"extIcon extRefresh whiteColor",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192",
"\u5c06\u521d\u59cb\u5316\u7cfb\u7edf\u8bb0\u5fc6\u914d\u7f6e\uff0c\u786e\u5b9a\u7ee7\u7eed\u5417\uff1f",function(d,e){"yes"==d&&c.System.InitHandler.startSilenceSaveConfig()})}},{xtype:"button",text:"\u4e0b\u8f7d\u7cfb\u7edf\u914d\u7f6e",columnWidth:.5,iconCls:"extIcon extDownload whiteColor",handler:function(){c.Dialog.showWait("\u6b63\u5728\u83b7\u53d6\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u4e2d\u2026\u2026");$.post(c.Server.downSystemConfigUrl(),function(d){c.Dialog.hideWait();d.success?(c.Dialog.toast("\u83b7\u53d6\u6210\u529f\uff01"),
c.Base.openUrl(d.data,FastEnum.Target._self)):c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",d.message)})}},{xtype:"button",text:"\u4e0a\u4f20\u7cfb\u7edf\u914d\u7f6e",columnWidth:.5,margin:"5 5 5 0 ",iconCls:"extIcon extUpload whiteColor",handler:function(){c.IndexLayout.uploadSystemConfigData(this)}},{xtype:"button",text:"\u66f4\u65b0\u7cfb\u7edf\u6570\u636e\u6743\u9650",columnWidth:1,hidden:!c.System.ConfigHandler.isEnableLayer(),iconCls:"extIcon extPower whiteColor",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192",
"\u786e\u5b9a\u66f4\u65b0\u7cfb\u7edf\u6240\u6709\u8868\u683c\u7684\u6570\u636e\u6743\u9650\u503c\u5417\uff1f\u5982\u679c\u6570\u636e\u5e93\u6570\u636e\u91cf\u8fbe\u5230\u5343\u4e07\u7ea7\u522b\u65f6\uff0c\u66f4\u65b0\u65f6\u95f4\u4f1a\u8f83\u957f\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01",function(d,e){"yes"==d&&c.LoginLayout.validOperate("\u66f4\u65b0\u6240\u6709\u8868\u683c\u7684\u6570\u636e\u6743\u9650\u5c42\u7ea7\u503c",function(){c.Dialog.showWait("\u6b63\u5728\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");
c.Server.updateAllLayer(function(f,l){c.Dialog.hideWait();c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",l)})},30)})}},{xtype:"button",text:"\u66f4\u65b0\u7cfb\u7edf\u6570\u636e\u540c\u5217\u503c",columnWidth:1,hidden:!c.System.ConfigHandler.isEnableSame(),iconCls:"extIcon extCopy2 whiteColor",handler:function(){Ext.Msg.confirm("\u7cfb\u7edf\u63d0\u9192","\u786e\u5b9a\u66f4\u65b0\u7cfb\u7edf\u6240\u6709\u8868\u683c\u4e4b\u95f4\u6709\u5173\u8054\u7684\u76f8\u540c\u5b57\u6bb5\u503c\u5417\uff1f",function(d,
e){"yes"==d&&c.LoginLayout.validOperate("\u66f4\u65b0\u7cfb\u7edf\u8868\u683c\u76f8\u540c\u5b57\u6bb5",function(){c.Dialog.showWait("\u6b63\u5728\u66f4\u65b0\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Server.updateAllSame(function(f,l){c.Dialog.hideWait();c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",l)})},30)})}}]}],doSubmit:function(){var d=a.form;d.isValid()&&d.submit({waitMsg:"\u6b63\u5728\u4fdd\u5b58\u914d\u7f6e\u4e2d\u2026\u2026",success:function(e,f){Ext.Msg.alert("\u7cfb\u7edf\u8bbe\u7f6e",
"\u8bbe\u7f6e\u4fdd\u5b58\u6210\u529f\uff01",function(l){"ok"===l&&location.reload()})},failure:function(e,f){f.result&&Ext.Msg.alert("\u4fdd\u5b58\u5931\u8d25",f.result.message)}})}});c.Server.showSystemConfig(function(d,e){d&&(e=Ext.Object.merge(e,c.System.ConfigHandler.getSystemConfig()),a.getViewModel().setData(e))});return a};n.getSystemMonitorPanel=function(b){Ext.isEmpty(b)&&(b=!0);var a=Ext.create("Ext.panel.Panel",{layout:"column",region:"north",power:!1,border:0,bodyPadding:5,title:b?"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f":
null,iconCls:b?"extIcon extMonitor":null,closable:!1,autoScroll:!0,listeners:{afterrender:function(){d(a)}}}),d=function(e){b||e.setLoading("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u4e2d\u2026\u2026");c.Server.loadMonitor(function(f,l){e.setLoading(!1);e.removeAll();if(l){c.IndexLayout._monitor=l;var m=c.IndexLayout._monitor.desc,k=c.IndexLayout._monitor.data;f=function(h){var g=m[h],p=k[h],q=[],r;for(r in g)"title"!==r&&q.push({xtype:"textfield",fieldLabel:g[r],monitorIndex:h,bind:"{"+r+"}"});var t=
g.title;q[q.length-1].triggers={chart:{cls:"extIcon extReport2",hideOnReadOnly:!1,handler:function(){c.IndexLayout.showMonitorChart(t,this.monitorIndex)}}};e.add({xtype:"fieldset",title:t,columnWidth:1,collapsible:!0,id:"SystemMonitorFieldSet"+h,viewModel:{data:p},defaults:{anchor:"100%",labelAlign:"right",labelWidth:80,columnWidth:1,editable:!1,disabledCls:".x-item-disabled-normal"},items:q})};for(l=0;l<m.length;l++)f(l);e.add({xtype:"button",text:"\u5237\u65b0\u4fe1\u606f",columnWidth:1,margin:"5 5 5 5",
handler:function(h){h.setText("\u6b63\u5728\u5237\u65b0");h.setDisabled(!0);d(e)}})}})};return a};n.getMonitorData=function(b){return this._monitor&&this._monitor.data&&this._monitor.data.length>b?this._monitor.data[b]:null};n.showMonitorChart=function(b,a){var d="SystemMonitorChart"+a,e=Ext.getCmp(d);e&&Ext.isFunction(e.updateChart)?e.updateChart():Ext.create("Ext.window.Window",{title:b,iconCls:"extIcon extReport2 whiteColor",height:450,width:450,id:d,layout:"border",resizable:!0,maximizable:!0,
constrain:!0,padding:"10 10 10 10",bodyStyle:{background:"#ffffff"},refreshTimer:null,monitorIndex:a,monitorStopped:!1,updateChart:function(){if(this.monitorStopped)return!1;try{var f=c.IndexLayout.getMonitorData(this.monitorIndex);if(!f)return!1;var l=function(k,h,g,p){var q=g/h,r="green";.3<q&&(r="purple");.8<q&&(r="red");var t=" "+(100*q).toFixed(2)+"%";"%"===p&&(t="");return{series:[{type:"gauge",splitNumber:10,min:k,max:h,radius:"100%",itemStyle:{shadowColor:"rgba(0,138,255,0.45)",shadowBlur:10,
shadowOffsetX:2,shadowOffsetY:2,color:r},progress:{show:!0,roundCap:!0,width:18,itemStyle:{color:{type:"linear",x:0,y:1,x2:1,y2:0,colorStops:[{offset:0,color:"green"},{offset:1,color:r}]}}},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",
length:"75%",width:16,offsetCenter:[0,"5%"]},axisLine:{roundCap:!0,lineStyle:{width:18}},axisTick:{splitNumber:5,lineStyle:{width:2,color:"#999"}},splitLine:{length:12,lineStyle:{width:3,color:"#999"}},axisLabel:{distance:30,color:"#999",formatter:function(v){return"%"===p?v+"%":c.Base.toByteUnit(v,0)}},title:{show:!0},detail:{valueAnimation:!0,formatter:function(v){return"%"===p?v+"%":"{value|"+c.Base.toByteUnit(v)+"}\n{percent|"+t+"}"},rich:{percent:{fontSize:16,padding:[0,0,0,0]}},color:"auto"},
data:[{value:g}]}]}}(f.min,f.max,f.value,c.Base.toString(f.unit,"byte"));c.ECharts.loadECharts(this,l);var m=Ext.getCmp("SystemMonitorFieldSet"+this.monitorIndex);m&&m.getViewModel().setData(f);return!0}catch(k){console.error(k)}return!1},startTimer:function(f){var l=this;l.monitorStopped||(f&&this.setLoading("\u83b7\u53d6\u76d1\u63a7\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026"),this.stopTimer(),this.refreshTimer=setTimeout(function(){c.Server.loadMonitor(function(m,k){c.IndexLayout._monitor=
k;f&&l.setLoading(!1);Ext.isFunction(l.updateChart)&&l.updateChart()&&l.startTimer(!1)})},f?0:1E3))},stopTimer:function(){this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=null},listeners:{show:function(f){f.startTimer(!0)},beforedestroy:function(f){f.monitorStopped=!0;f.stopTimer()}}}).show()};n.getSystemOperatePanel=function(b){var a=Ext.create("Ext.data.Store",{autoLoad:!1,fields:[],id:"SystemLogStore",idProperty:"operateId",pageSize:50,proxy:{type:"ajax",url:c.Server.entityListUrl(),
actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},reader:{type:"json",root:"list",totalProperty:"totalRow"}}}),d=Ext.create("Ext.toolbar.Paging",{store:a,dock:"bottom",border:0,overflowHandler:"scroller",displayInfo:!0}),e=Ext.create("Ext.grid.Panel",{region:"center",border:0,power:!0,multiColumnSort:!0,iconCls:b?"extIcon extLog":null,columnLines:!0,title:b?"\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7":null,hideHeaders:!0,dataList:!0,store:a,columns:[{header:"\u64cd\u4f5c\u7c7b\u578b",
dataIndex:"systemLogType",align:"center",width:120},{header:"\u64cd\u4f5c\u4ecb\u7ecd",dataIndex:"systemLogContent",align:"center",flex:1},{header:"\u64cd\u4f5c\u65f6\u95f4",dataIndex:"systemLogDateTime",width:160,align:"center",rendererFunction:"renders.dateFormat('Y-m-d H:i:s')"},{header:"\u64cd\u4f5c",dataIndex:"systemLogId",width:100,align:"center",renderer:function(f){return c.Renders.toClickText("\u67e5\u770b\u8be6\u60c5","FastExt.IndexLayout.showSystemLogDetails("+f+")")}},{xtype:"rowplaceholder",
minWidth:30}],dockedItems:[d],viewConfig:{enableTextSelection:!0,loadMask:{msg:"\u6b63\u5728\u4e3a\u60a8\u5728\u52a0\u8f7d\u6570\u636e\u2026"}}});d.insert(d.items.getCount()-2,{xtype:"button",iconCls:"extIcon extSearch",tooltip:"\u641c\u7d22\u65e5\u5fd7",handler:function(){e.add(c.IndexLayout.showSearchSysOperate(e,this))}});d.insert(d.items.getCount()-3,"-");a.on("beforeload",function(f,l){l={};null!=e.whereSearchParams&&(l=e.whereSearchParams);Ext.apply(f.proxy.extraParams,l);Ext.apply(f.proxy.extraParams,
{entityCode:"ExtSystemLogEntity",limit:a.pageSize})});a.loadPage(1);return e};n.showSystemLogDetails=function(b){b=Ext.getStore("SystemLogStore").findRecord("systemLogId",b,0,!1,!1,!0);b=c.Grid.createDetailsGrid(function(e){var f=[],l={a__managerName:"\u7ba1\u7406\u5458",systemLogType:"\u64cd\u4f5c\u7c7b\u578b",systemLogContent:"\u64cd\u4f5c\u8be6\u60c5",systemLogIp:"\u6765\u81eaIP",systemLogClient:"\u6d4f\u89c8\u5668\u4fe1\u606f",systemSendData:"\u63d0\u4ea4\u7684\u6570\u636e",systemResultData:"\u8fd4\u56de\u7684\u6570\u636e",
systemLogDateTime:"\u64cd\u4f5c\u65f6\u95f4"},m;for(m in l)f.push({name:l[m],key:m,value:e[m]});return f}(b.getData()),{region:"center",power:!1,hideHeaders:!0},{width:168,flex:0},{align:"left",renderer:function(e,f,l){f.style="overflow:auto;text-overflow: ellipsis;white-space:normal !important;word-break:break-word; ";return"systemLogIp"===l.get("key")?"\x3ca href\x3d'https://www.ipuu.net/query/ip?search\x3d"+e+"' target\x3d'_blank'\x3e"+e+"\x3c/a\x3e":e},listeners:{dblclick:function(e,f,l,m,k,h,
g){e=e.getStore().getAt(l);l=e.get("key");"systemSendData"!==l&&"systemResultData"!==l||c.Dialog.showFormatJson(f,e.get("value"))}}});var a=parseInt((.5*document.body.clientWidth).toFixed(0)),d=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:"\u65e5\u5fd7\u8be6\u60c5",height:d,iconCls:"extIcon extDetails",width:a,layout:"border",resizable:!0,maximizable:!0,items:[b],modal:!0,constrain:!0}).show()};n.showSearchSysOperate=function(b,a){if(b.searchWin)c.Component.shakeComment(b.searchWin);
else{var d=b.whereSearchParams?b.whereSearchParams:{},e=Ext.create("Ext.form.FormPanel",{bodyPadding:5,region:"center",autoScroll:!0,layout:"column",defaults:{labelWidth:100,margin:"5 5 5 5",labelAlign:"right",emptyText:"\u53ef\u8f93\u5165\u2026"},items:[{fieldLabel:"\u5173\u952e\u5b57",columnWidth:1,name:"where['^search']",xtype:"textfield",value:d["where['^search']"]},{fieldLabel:"\u5f00\u59cb\u65f6\u95f4",columnWidth:.5,name:"where['systemLogDateTime\x3e\x3d']",xtype:"datefield",format:"Y-m-d",
value:d["where['systemLogDateTime\x3e\x3d']"]},{fieldLabel:"\u7ed3\u675f\u65f6\u95f4",columnWidth:.5,name:"where['systemLogDateTime\x3c\x3d']",xtype:"datefield",format:"Y-m-d",value:d["where['systemLogDateTime\x3c\x3d']"]},{fieldLabel:"\u64cd\u4f5c\u7528\u6237",columnWidth:.5,name:"where['a__managerName%?%']",xtype:"textfield",value:d["where['a__managerName%?%']"]},{fieldLabel:"\u64cd\u4f5c\u7c7b\u578b",columnWidth:.5,name:"where['systemLogType%?%']",xtype:"textfield",value:d["where['systemLogType%?%']"]}]});
d=a.text;Ext.isEmpty(d)&&(d="\u641c\u7d22\u7cfb\u7edf\u65e5\u5fd7");b.searchWin=Ext.create("Ext.window.Window",{title:d,width:500,minWidth:500,minHeight:110,height:250,layout:"border",constrain:!0,iconCls:"extIcon extSearch",resizable:!0,collapsible:!0,animateTarget:a,items:[e],listeners:{close:function(f,l){b.searchWin=null}},buttons:[{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){e.reset();b.whereSearchParams=e.getValues();b.getStore().loadPage(1)}},{text:"\u641c\u7d22",iconCls:"extIcon extSearch",
handler:function(){b.whereSearchParams=e.getValues();b.getStore().loadPage(1)}}]})}b.searchWin.show();return b.searchWin};n.uploadSystemConfigData=function(b){var a=Ext.create("Ext.form.FormPanel",{url:"loadSystemConfig",method:"POST",margin:"5",fileUpload:!0,width:400,callBacked:!1,border:0,layout:"column",items:[{xtype:"filefield",fieldLabel:"\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6",labelWidth:120,labelAlign:"right",buttonText:"\u9009\u62e9\u6587\u4ef6",allowBlank:!1,name:"systemConfigFile",columnWidth:1}],
doSubmit:function(){var f=a.form;if(f.isValid()){var l=new Ext.LoadMask({msg:"\u6b63\u5728\u4e0a\u4f20\u6587\u4ef6\u4e2d\u2026",target:e});l.show();f.submit({success:function(m,k){c.Dialog.toast(k.result.message);e.close()},failure:function(m,k){l.destroy();k.result&&Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192","\u4e0a\u4f20\u5931\u8d25\uff01"+k.result.message)}})}},listeners:{render:function(f){try{new Ext.util.KeyMap({target:f.getEl(),key:13,fn:a.doSubmit,scope:Ext.getBody()})}catch(l){console.error(l)}}}}),
d="btnSubmit"+(new Date).getTime(),e=Ext.create("Ext.window.Window",{title:"\u4e0a\u4f20\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6",layout:"fit",resizable:!1,scrollable:!1,width:500,items:a,modal:!0,iconCls:"extIcon extUpload",animateTarget:b,constrain:!0,buttons:[{text:"\u91cd\u7f6e",width:88,iconCls:"extIcon extReset",handler:function(){a.form.reset()}},{text:"\u4e0a\u4f20",width:88,id:d,iconCls:"extIcon extOk",handler:function(){a.doSubmit()}}],listeners:{show:function(f,l){a.getForm().findField("systemConfigFile").fileInputEl.dom.click();
Ext.getCmp(d).focus()}}});e.show()};n._monitor={data:[],desc:[]};return n}();c.IndexLayout=u;u=function(){function n(){}n.getProgressLine=function(b){try{Ext.isEmpty(b)&&(b="#f8c633");if(0>=$("#progress").length)return{set:function(){},animate:function(){}};this._progressLine||(this._progressLine=new ProgressBar.Line("#progress",{color:b,duration:1E3,easing:"easeInOut",from:{color:"#9c58b6"},to:{color:b},step:function(a,d,e){d.path.setAttribute("stroke",a.color)}}));return this._progressLine}catch(a){}return{set:function(){},
animate:function(){}}};return n}();c.ProgressBaseLineLayout=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function k(){}k.getPanel=function(){var h=c.Base.toString(c.System.ConfigHandler.getDataboard().title,"\u6570\u636e\u770b\u677f");return Ext.create("Ext.panel.Panel",{layout:"border",region:"center",border:0,title:h,iconCls:"extIcon extTable",items:[],scrollable:"y",bodyStyle:{background:"#ffffff"},loadData:function(){var g=this;this.setLoading("\u52a0\u8f7d\u6570\u636e\u4e2d\u2026\u2026");c.Server.getDataboardData(function(p,q,r){g.setLoading(!1);p&&(g.databoardContainer=
new n(r),g.update(g.databoardContainer.buildHtml()),g.databoardContainer.onResize(g.getWidth(),g.getHeight()),g.databoardContainer.onLoaded())})},updateSize:function(g,p){if(this.databoardContainer)this.databoardContainer.onResize(g,p)},listeners:{afterrender:function(g,p){g.loadData()},resize:function(g,p,q,r,t){g.updateSize(p,q)}}})};k.showEChars=function(h,g){c.ECharts.showEntityECharts(this,"\u6570\u636e\u8d8b\u52bf\u56fe",{entityCode:"ExtSystemDataEntity",columnDate:"dataDateTime",storeId:"ExtSystemDataEntity",
dataType:h,"echarts[0].property":"dataValue","echarts[0].function":"sum","echarts[0].details":g},[{text:"\u5e74\u56fe\u8868",value:4},{text:"\u6708\u56fe\u8868",value:1},{text:"\u65e5\u56fe\u8868",value:0}])};return k}();c.Databoard=u;var n=function(){function k(h){this._databoardGroups=[];this._databoardData=h}k.prototype.buildHtml=function(){for(var h=[],g=0,p=c.System.ConfigHandler.getDataboard().data;g<p.length;g++){var q=p[g];if("split_title"===q.type)this._databoardGroups.push(new m(q));else{if(q.items){for(var r=
q.items,t=0,v=r;t<v.length;t++){var w=v[t];w.render_type=q.type;w.render_group_title=q.title;var z=this.getDataboardData(w.id);z&&(w.value=z.value,w.render_trent=z.trend);Ext.isEmpty(w.render_color)&&(w.render_color="transparent");Ext.isEmpty(w.render_title_color)&&(w.render_title_color="unset");Ext.isEmpty(w.render_icon_color)&&(w.render_icon_color="unset")}0<r.length&&this._databoardGroups.push(new b(r))}if(q.groupId){r=[];t=0;for(v=this._databoardData;t<v.length;t++)w=v[t],q.groupId===w.groupId&&
(w.render_type=q.type,w.render_group_title=q.title,w.render_title=w.title,r.push(w));0<r.length&&this._databoardGroups.push(new b(r))}}}g=0;for(p=this._databoardGroups;g<p.length;g++)h.push(p[g].buildHtml());return'\x3cdiv class\x3d"fast-databoard-container"\x3e'+h.join("")+"\x3c/div\x3e"};k.prototype.getDataboardData=function(h){for(var g=0,p=this._databoardData;g<p.length;g++){var q=p[g];if(h===q.id)return q}};k.prototype.onLoaded=function(){for(var h=0,g=this._databoardGroups;h<g.length;h++)g[h].onLoaded()};
k.prototype.onResize=function(h,g){for(var p=0,q=this._databoardGroups;p<q.length;p++)q[p].onResize(h,g)};return k}(),b=function(){function k(h){this._databoardItems=[];this._data=h}k.prototype.buildHtml=function(){var h=[],g=this._data[0].render_type,p=!1;if("data_text_v"===g)for(var q=0,r=this._data;q<r.length;q++)g=r[q],this._databoardItems.push(new d(g));else if("data_text_h"===g)for(q=0,r=this._data;q<r.length;q++)g=r[q],this._databoardItems.push(new e(g));else"data_chart_pie"===g&&(this._databoardItems.push(new l(this._data)),
p=!0);g=0;for(q=this._databoardItems;g<q.length;g++)h.push(q[g].buildHtml());g=c.System.ConfigHandler.getDataboard();return c.Base.toBool(g.fill,!0)||p?'\x3cdiv class\x3d"fast-databoard-group"\x3e'+h.join((new a).buildHtml())+"\x3c/div\x3e":'\x3cdiv class\x3d"fast-databoard-group fast-databoard-group-h"\x3e'+h.join((new a).buildHtml())+"\x3c/div\x3e"};k.prototype.onLoaded=function(){for(var h=0,g=this._databoardItems;h<g.length;h++)g[h].onLoaded()};k.prototype.onResize=function(h,g){for(var p=0,q=
this._databoardItems;p<q.length;p++)q[p].onResize(h,g)};return k}();u=function(){function k(){}k.prototype.buildHtml=function(){return""};k.prototype.onLoaded=function(){};k.prototype.onResize=function(h,g){};return k}();var a=function(k){function h(){return null!==k&&k.apply(this,arguments)||this}__extends(h,k);h.prototype.buildHtml=function(){return'\x3cdiv class\x3d"fast-databoard-split-v"\x3e\x3c/div\x3e'};return h}(u),d=function(k){function h(g){var p=k.call(this)||this;p._data=g;return p}__extends(h,
k);h.prototype.buildHtml=function(){var g="",p="FastExt.Databoard.showEChars('"+this._data.id+"','"+this._data.chart_title+"')";this._data.render_click&&(p=this._data.render_click,"false"===this._data.render_click&&(p="",g="fast-databoard-cursor-none"));var q=c.Server.getIcon(this._data.render_icon,this._data.render_icon_color);g="class\x3d'fast-databoard-item "+g+"' style\x3d'background-color: "+this._data.render_color+";'";q='    \x3cimg class\x3d"fast-databoard-item-icon" src\x3d"'+q+'" alt\x3d"\u56fe\u6807"/\x3e    \x3cdiv class\x3d"fast-databoard-item-value"\x3e\x3cspan style\x3d"color:'+
this._data.render_value_color+';"\x3e'+this._data.value+"\x3c/span\x3e"+(new f(this._data)).buildHtml()+'\x3c/div\x3e    \x3cspan class\x3d"fast-databoard-item-title" style\x3d"color: '+this._data.render_title_color+';"\x3e'+this._data.render_title+"\x3c/span\x3e";return c.Documents.wrapOnClick(q,p,g)};return h}(u),e=function(k){function h(g){var p=k.call(this)||this;p._data=g;return p}__extends(h,k);h.prototype.buildHtml=function(){var g="",p="FastExt.Databoard.showEChars('"+this._data.id+"','"+
this._data.chart_title+"')";this._data.render_click&&(p=this._data.render_click,"false"===this._data.render_click&&(p="",g="fast-databoard-cursor-none"));var q=c.Server.getIcon(this._data.render_icon,this._data.render_icon_color);g="class\x3d'fast-databoard-item fast-databoard-item-h "+g+"' style\x3d'background-color: "+this._data.render_color+";'";q='    \x3cimg class\x3d"fast-databoard-item-icon fast-databoard-item-icon-h" src\x3d"'+q+'" alt\x3d"\u56fe\u6807"/\x3e \x3cdiv class\x3d"fast-databoard-item-info-v"\x3e   \x3cspan class\x3d"fast-databoard-item-title fast-databoard-item-title-h" style\x3d"color: '+
this._data.render_title_color+';"\x3e'+this._data.render_title+'\x3c/span\x3e    \x3cdiv class\x3d"fast-databoard-item-value fast-databoard-item-value-h"\x3e\x3cspan style\x3d"color:'+this._data.render_value_color+';"\x3e'+this._data.value+"\x3c/span\x3e"+(new f(this._data)).buildHtml()+"\x3c/div\x3e \x3c/div\x3e";return c.Documents.wrapOnClick(q,p,g)};return h}(u),f=function(k){function h(g){var p=k.call(this)||this;p._data=g;return p}__extends(h,k);h.prototype.buildHtml=function(){var g="";0===
this._data.render_trent?g="extRise greenColor":1===this._data.render_trent?g="extDecline redColor":2===this._data.render_trent&&(g="extFlat blueColor");return'\x3cspan class\x3d"fast-databoard-item-value-state extIcon '+g+'"\x3e\x3c/span\x3e'};return h}(u),l=function(k){function h(g){var p=k.call(this)||this;p._data=g;p._htmlId=c.Base.buildOnlyCode("Chart-");return p}__extends(h,k);h.prototype.onLoaded=function(){var g=this;c.ECharts.loadJs(function(){g.initECharts()})};h.prototype.onResize=function(g,
p){p=document.getElementById(this._htmlId);$(p).css("width",g+"px");this._echart&&this._echart.resize()};h.prototype.buildHtml=function(){return'\x3cdiv id\x3d"'+this._htmlId+'" class\x3d"fast-databoard-item-pie"\x3e\x3c/div\x3e'};h.prototype.initECharts=function(){var g=document.getElementById(this._htmlId);this._echart=echarts.init(g,null,{renderer:"canvas",useDirtyRect:!1});g=[];for(var p="",q=0,r=this._data;q<r.length;q++){var t=r[q];p=t.render_group_title;g.push({value:t.value,name:t.render_title})}console.log("data",
g);this._echart.setOption({title:{text:p,left:"center"},tooltip:{trigger:"item"},legend:{type:"scroll",orient:"horizontal",left:"center",bottom:0},series:[{type:"pie",radius:"70%",data:g,labelLine:{show:!1},label:{show:!1,position:"center"},itemStyle:{shadowBlur:3,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)",borderRadius:8},emphasis:{scaleSize:20,itemStyle:{shadowBlur:18,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})};return h}(u),m=function(k){function h(g){var p=k.call(this)||this;p._data=
g;return p}__extends(h,k);h.prototype.buildHtml=function(){return"\x3cdiv class\x3d'fast-databoard-split-title-container'\x3e\x3cimg class\x3d'fast-databoard-split-title-icon' src\x3d'"+c.Server.getIcon(this._data.render_icon,this._data.render_icon_color)+"' alt\x3d'icon'/\x3e\x3cspan class\x3d'fast-databoard-split-title'\x3e"+this._data.render_title+"\x3c/span\x3e\x3c/div\x3e"};return h}(u)})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.showSystemLayout=function(){var b=c.SystemLayout.getBodyContainer();b.removeAll();var a=c.System.ConfigHandler.getThemeColor(),d={background:"#ffffff"};c.DesktopLayout.desktopPanel=Ext.create("Ext.panel.Panel",{layout:{type:"hbox",align:"stretch"},bodyStyle:{background:"transparent",borderWidth:0},border:0,region:"center",anchor:"100% 100%",bbar:{xtype:"toolbar",overflowHandler:"menu",itemId:"DesktopToolBar",items:[{xtype:"button",overflowText:"\u7cfb\u7edf\u83dc\u5355",
iconCls:"extIcon extMore whiteColor",cls:"fast-desktop-toolbar-btn",help:c.System.MenuHandler.getPlainIconMenuHtmlBySVG({iconCls:"extMore",text:"\u7cfb\u7edf\u83dc\u5355"}),style:{background:a},focusCls:"fast-desktop-toolbar-btn-focus",helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,reorderable:!1,handler:function(){c.DesktopLayout.toggleStartMenu(this)}},{xtype:"tbseparator",reorderable:!1},{xtype:"tbspacer",reorderable:!1,desktopFixedMenuAnchor:!0},{xtype:"tbfill",
reorderable:!1,desktopMenuAnchor:!0},{xtype:"button",iconCls:"extIcon extLog blackColor",cls:"fast-desktop-toolbar-btn",overflowText:"\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7",help:c.System.MenuHandler.getPlainIconMenuHtmlBySVG({iconCls:"extLog",text:"\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7"}),style:d,helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,reorderable:!1,handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7",c.IndexLayout.getSystemOperatePanel(!1))}},
{xtype:"tbseparator",reorderable:!1},{xtype:"button",iconCls:"extIcon extVersion blackColor",cls:"fast-desktop-toolbar-btn",overflowText:"\u7cfb\u7edf\u57fa\u672c\u4fe1\u606f",reorderable:!1,help:c.System.MenuHandler.getPlainIconMenuHtmlBySVG({iconCls:"extVersion",text:"\u7cfb\u7edf\u57fa\u672c\u4fe1\u606f"}),style:d,helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u57fa\u672c\u4fe1\u606f",
c.IndexLayout.getSystemVersionPanel(!1))}},{xtype:"button",iconCls:"extIcon extMonitor blackColor",cls:"fast-desktop-toolbar-btn",reorderable:!1,overflowText:"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f",help:c.System.MenuHandler.getPlainIconMenuHtmlBySVG({iconCls:"extMonitor",text:"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f"}),style:d,helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f",
c.IndexLayout.getSystemMonitorPanel(!1))}},{xtype:"button",iconCls:"extIcon extSet blackColor",cls:"fast-desktop-toolbar-btn",reorderable:!1,overflowText:"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e",help:c.System.MenuHandler.getPlainIconMenuHtmlBySVG({iconCls:"extSet",text:"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e"}),style:d,helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e",
c.IndexLayout.getSystemConfigPanel(!1))}}],userCls:"fast-desktop-tool-bar",plugins:[{ptype:"boxreorderer",listeners:{StartDrag:c.DesktopEvent.onFastToolbarStartDrag,Drop:c.DesktopEvent.onFastToolbarDrop}}],listeners:{afterlayout:function(){this.getEl().on("dblclick",function(){c.DesktopLayout.hideAllDesktopWin()});this.getEl().on("contextmenu",function(e){e.stopEvent()})},render:function(){c.Dialog.hideWait()}}},addDesktopItem:function(e,f){f?f.addDesktopItem(e):c.DesktopLayout.checkMenuFolder(e)?
this.child("[alignRight\x3dfalse]").addDesktopItem(e):this.child("[alignRight\x3dtrue]").addDesktopItem(e)},removeDesktopItem:function(e){for(var f=this.query("[desktopItemContainer\x3dtrue]"),l=0;l<f.length&&!c.Base.toBool(f[l].folderLocked,!1);l++)f[l].removeDesktopItem(e)},checkMuuriGridReady:function(){var e=this.query("[desktopItemContainer\x3dtrue]");if(0<e.length){for(var f=0;f<e.length;f++)if(!c.Base.toBool(e[f].muuriReady,!1))return!1;return!0}return!1},rebindMuuriGrid:function(){var e=this.query("[desktopItemContainer\x3dtrue]");
if(0<e.length)for(var f=0;f<e.length;f++)e[f].bindMuuriGrid()},resetDesktop:function(e){try{this.removeAll();c.DesktopLayout.removeAllDesktopToolbarFixedButton();this.configMenus=e;var f=c.DesktopLayout.getAllDesktopMenuInfo(e);e=[];var l=[],m=[],k;for(k in f){var h=f[k];c.DesktopLayout.checkMenuInFolder(h)||h.desktop&&(Ext.isEmpty(h.desktop_align)?c.DesktopLayout.checkMenuFolder(h)?l.push(h):e.push(h):"right"===h.desktop_align?e.push(h):l.push(h));h.desktop_fixed&&m.push(h)}e.sort(function(g,p){return g.desktop_index-
p.desktop_index});l.sort(function(g,p){return g.desktop_index-p.desktop_index});m.sort(function(g,p){return g.desktop_fixed_index-p.desktop_fixed_index});this.add(c.DesktopLayout.buildDesktopItemPanel(l,!1,!0,!1),c.DesktopLayout.buildDesktopItemPanel(e,!0,!0,!1));c.DesktopLayout.addDesktopToolbarFixedButton(m,!0)}finally{this.rebindMuuriGrid(),c.Dialog.hideWait(),f=c.Windows.getMenuIdFromLocation(),(f=c.DesktopLayout.getMenu(f))&&c.DesktopLayout.showWindowMenu(null,f,!0),c.DesktopLayout.desktopInitFinish=
!0}},reorderDesktop:function(){try{this.removeAll();var e=c.DesktopLayout.getAllDesktopMenuInfo(this.configMenus),f=[],l=[],m;for(m in e){var k=e[m];c.DesktopLayout.checkMenuInFolder(k)||k.desktop&&(c.DesktopLayout.checkMenuFolder(k)?l.push(k):f.push(k))}f.sort(function(h,g){return h.desktop_index-g.desktop_index});l.sort(function(h,g){return h.desktop_index-g.desktop_index});this.add(c.DesktopLayout.buildDesktopItemPanel(l,!1,!0,!1),c.DesktopLayout.buildDesktopItemPanel(f,!0,!0,!1))}finally{this.rebindMuuriGrid()}},
listeners:{afterrender:function(){this.getEl().on("contextmenu",c.DesktopEvent.onFastDesktopContextMenu,this);c.DesktopLayout.restoreSystemDesktopMenus()}}});a="base/desktop/desktop_bg_img_default.jpg";(d=c.System.ConfigHandler.getDesktopBgImages())&&0<d.length&&(a=d[0]);c.DesktopLayout.desktopContainer=Ext.create("Ext.container.Container",{layout:"border",border:0,style:{backgroundImage:"url('"+a+"')",backgroundSize:"cover"},items:[c.DesktopLayout.getSystemHeaderPanel(["headContainer","fast-desktop-header-container"]),
c.DesktopLayout.desktopPanel]});b.add(c.DesktopLayout.desktopContainer)};n.getSystemHeaderPanel=function(b){var a=c.System.ConfigHandler.getThemeColor(),d=c.System.ConfigHandler.getFrontColor(),e=c.System.ConfigHandler.getSystemLogo(),f=c.System.ConfigHandler.getSystemTitle();Ext.isEmpty(e)&&(e="icons/icon_head_system.svg");Ext.isEmpty(b)&&(b="headContainer");d=[{xtype:"image",src:c.Base.formatUrl(e),height:35,width:35,cls:"fast-system-head-logo",margin:"10 5 5 5",style:{borderRadius:"10px"}},{xtype:"label",
margin:"0 0 0 5",html:"\x3cdiv class\x3d'fast-system-head-title' style\x3d'color: "+d+";' \x3e"+f+"\x3c/div\x3e"},"-\x3e",{xtype:"button",iconCls:"extIcon extManager2 searchColor",text:c.System.ManagerHandler.getManagerName(),minWidth:155,cls:"fast-system-head-button",handler:function(){c.ManagerLayout.showManagerInfo(this)}},{xtype:"button",iconCls:"extIcon extExits redColor",text:"\u9000\u51fa\u767b\u5f55",cls:"fast-system-head-button",handler:function(){c.LoginLayout.showLogout()}}];b=Ext.create("Ext.toolbar.Toolbar",
{height:55,padding:"0 0 0 0",border:0,flex:1,power:!1,cls:b,id:"SystemHeadButtons",style:{background:a},items:d});a=Ext.create("Ext.toolbar.Toolbar",{border:0,padding:"0 0 0 0",flex:1,height:3,style:{background:a},html:'\x3cdiv class\x3d"progress" id\x3d"progress"\x3e\x3c/div\x3e'});return Ext.create("Ext.container.Container",{layout:"absolute",region:"north",height:55,border:0,hidden:c.Power.config,items:[b,a],listeners:{afterlayout:function(){c.Base.toBool(this.bindFullscreen,!1)||(this.bindFullscreen=
!0,this.getEl().on("dblclick",function(){c.Windows.toggleFullscreen()}))}}})};n.getMenu=function(b){return c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(b)?c.DesktopLayout.desktopAllMenusInfo[b]:c.System.MenuHandler.getMenu(b)};n.getMenuByMuuriGridItem=function(b){b=$(b.getElement());var a=b.attr("data-menu-id");b.attr("data-menu-type");return Ext.isEmpty(a)?null:c.DesktopLayout.getMenu(a)};n.restoreSystemDesktopMenus=function(){window.indexLottie&&(window.indexLottie.destroy(),window.indexLottie=
null);Ext.MessageBox.updateProgress(1,"\u5373\u5c06\u5b8c\u6210\u64cd\u4f5c\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85","\u7cfb\u7edf\u521d\u59cb\u5316\u6210\u529f\uff01\u83b7\u53d6\u83dc\u5355\u4e2d\u2026");c.System.ConfigHandler.isEnableDesktopMenuRecord()?c.DesktopLayout.restoreMenu().then(function(b){c.DesktopLayout.desktopPanel.resetDesktop(c.Json.jsonToObject(b));c.Listeners.getFire().onSystemReady()}):(c.DesktopLayout.desktopPanel.resetDesktop({}),c.Listeners.getFire().onSystemReady())};n.getAllDesktopMenuInfo=
function(b){for(var a=function(h,g){for(var p=[],q=0;q<g.length;q++){var r=Ext.clone(g[q]);r.parent=h;r.desktop=c.Base.toBool(r.desktop,1===r.depth);r.desktop_fixed=c.Base.toBool(r.desktop_fixed);if(r.desktop||r.desktop_fixed)r.leaf||(r.desktop_type="folder"),p.push(r);r.children&&(r=a(r,r.children),p=p.concat(r))}return p},d=a(null,c.System.MenuHandler.getMenus()),e=0;e<d.length;e++){var f=d[e],l=c.Objects.safeObject(c.DesktopLayout.desktopAllMenusInfo[f.id]);c.DesktopLayout.desktopAllMenusInfo[f.id]=
Ext.Object.merge(l,f)}d=[];if(b)for(var m in b)d.push(b[m]);for(e=0;e<d.length;e++){b=d[e];(l=c.DesktopLayout.desktopAllMenusInfo[b.id])||(l=c.System.MenuHandler.getMenu(b.id));if(!l)if("user"===c.Base.toString(b.desktop_from,"none"))l={};else continue;c.DesktopLayout.desktopAllMenusInfo[b.id]=Ext.Object.merge(l,b)}for(var k in c.DesktopLayout.desktopAllMenusInfo)e=c.DesktopLayout.desktopAllMenusInfo[k],Ext.isEmpty(e.desktop_folder_id)&&(e.desktop_folder_id="desktop"),Ext.isEmpty(e.treeGroup)&&(e.treeGroup=
c.Base.buildOnlyCode("F"));return c.DesktopLayout.desktopAllMenusInfo};n.buildDesktopItemPanel=function(b,a,d,e){var f="muuri-grid-container-"+c.DesktopLayout.muuriContainerIdIndex++;return{xtype:"container",layout:"fit",border:0,desktopItemContainer:!0,alignRight:a,horizontal:d,flex:1,anchor:"100% 100%",configMenus:b,muuriReady:!1,muuriGridContainerId:f,html:"\x3cdiv id\x3d'"+f+"-root' style\x3d'width: 100%;height: 100%;display: flex;justify-content:"+(a?"end":"start")+"; overflow: "+(e?"auto":"hidden")+
";padding: 5px;'\x3e\x3cdiv id\x3d'"+f+"' style\x3d'width: 100%;height: 100%; position: relative;' \x3e\x3c/div\x3e\x3c/div\x3e",listeners:{destroy:function(){c.MuuriTool.releaseMuuriGrid(this);c.DesktopLayout.refreshMuuriGridContainers()}},getMuuriGridContainerId:function(){return this.muuriGridContainerId},bindMuuriGrid:function(l){var m=this;c.MuuriTool.justBindToContainer(this,{dragEnabled:!c.Base.toBool(this.folderLocked,!1),dragContainer:document.body,layout:{alignRight:this.alignRight,horizontal:this.horizontal,
fillGaps:!0,rounding:!0},dragStartPredicate:c.DesktopEvent.onFastMuuriGridDragStartPredicate,dragSort:c.DesktopEvent.onFastMuuriGridDragSort,dragSortPredicate:c.DesktopEvent.onFastMuuriGridDragSortPredicate},function(k){m.configMenus&&m.addDesktopItems(m.configMenus);m.muuriReady=!0;k.containerId=m.getId();k.on("dragReleaseEnd",c.DesktopEvent.onFastMuuriGridDragEnd);k.on("add",c.DesktopEvent.onFastMuuriGridChange);k.on("remove",c.DesktopEvent.onFastMuuriGridChange);k.on("dragInit",c.DesktopEvent.onFastMuuriGridDragInit);
k.on("send",c.DesktopEvent.onFastMuuriGridSend);c.DesktopLayout.refreshMuuriGridContainers();m.ownerCt&&m.ownerCt.updateLayout();l&&l()})},addDesktopItems:function(l){if(l){var m=c.MuuriTool.getMuuriGrid(this);if(m){for(var k=[],h=0;h<l.length;h++){var g=l[h];c.Base.toBool(g.desktop_temp,!1)||(g.desktop=!0,c.DesktopLayout.desktopAllMenusInfo[g.id]=g);k.push(c.DesktopLayout.buildDesktopItem(g))}0<k.length&&m.add(k)}}},addDesktopItem:function(l){if(l)if(Ext.isArray(l))this.addDesktopItems(l);else{var m=
c.MuuriTool.getMuuriGrid(this);m&&(c.Base.toBool(l.desktop_temp,!1)||(l.desktop=!0,c.DesktopLayout.desktopAllMenusInfo[l.id]=l),m.add(c.DesktopLayout.buildDesktopItem(l)))}},removeDesktopItem:function(l){if(l){var m=c.MuuriTool.getMuuriGrid(this);if(m){for(var k=$("#"+this.muuriGridContainerId).find("[data-menu-id\x3d"+l.id+"]"),h=[],g=0;g<k.length;g++){var p=m.getItem(k[g]);p&&h.push(p)}c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(l.id)&&(c.DesktopLayout.desktopAllMenusInfo[l.id].desktop=!1);
m.remove(h,{removeElements:!0})}}},removeAllDesktopItem:function(){var l=c.MuuriTool.getMuuriGrid(this);if(l){for(var m=l.getItems(),k=[],h=0;h<m.length;h++){k.push(m[h]);var g=$(m[h].getElement()).attr("data-menu-id");c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(g)&&(c.DesktopLayout.desktopAllMenusInfo[g].desktop=!1)}l.remove(k,{removeElements:!0})}},getAllDesktopItemMenus:function(){var l=c.MuuriTool.getMuuriGrid(this);if(!l)return[];l=l.getItems();for(var m=[],k=0;k<l.length;k++){var h=l[k].getElement(),
g=$(h);h=g.attr("data-menu-id");g=g.attr("data-menu-type");!Ext.isEmpty(h)&&(h=c.DesktopLayout.getMenu(h))&&(c.Base.toBool(this.alignRight,!1)?h.desktop_align="right":h.desktop_align="left",h.desktop_type=g,h.desktop_index=k,m.push(h))}return m},muuriGridLayout:function(){var l=c.MuuriTool.getMuuriGrid(this);l&&l.layout()}}};n.buildDesktopItem=function(b){var a=c.DesktopLayout.getDesktopButtonMaxWidth(),d=c.DesktopLayout.getDesktopButtonTitleMaxWidth();if(0===Object.keys(b).length)return $("\x3cdiv style\x3d'width: "+
a+"px;position: absolute;margin: 5px;background:transparent;pointer-events: none;'\x3e\x3cdiv \x3e \x3cdiv   style\x3d'height:"+2*a+"px;'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")[0];Ext.isEmpty(b.desktop_type)&&(b.desktop_type="item");var e=c.DesktopLayout.safeGetMenuColor(b),f=b.color5,l=c.Base.toBool(b.desktop_locked,!1),m=c.DesktopLayout.checkMenuFolder(b);Ext.isEmpty(f)&&(f=c.DesktopLayout.checkMenuFolder(b)?"#FFEE99":"#f0f0f0");var k=[b.icon];if(m){k=[];for(var h=c.DesktopLayout.getFolderChildMenus(b.id),
g=0;g<h.length&&(k.push(c.DesktopLayout.safeGetMenuIcon(h[g])),4!==k.length);g++);}g=e;c.System.ConfigHandler.isThemeWrap()&&(g="linear-gradient(0deg,"+e+", "+f+");");a="\x3cdiv data-desktop-menu-item\x3d'true' data-menu-id\x3d'"+b.id+"' data-menu-type\x3d'"+b.desktop_type+"'  style\x3d'position: absolute;background:transparent;display: flex;align-items: center;justify-content: center;'\x3e\x3cdiv class\x3d'fast-desktop-item' style\x3d'padding: 5px;'\x3e \x3cdiv data-menu-bg\x3d'true' class\x3d'"+
(m?"fast-desktop-item-icon-grid":"fast-desktop-item-icon")+"' style\x3d'height:"+a+"px;background:"+g+";width:"+a+"px; box-shadow: "+(m?"0px 0px 1px 1px black;":"0px 1px 1px black;")+"'\x3e";for(g=0;g<k.length;g++)a+="\x3cimg data-menu-icon\x3d'true' src\x3d'"+c.DesktopLayout.takeIcon(k[g],"#ffffff")+"'  alt\x3d'"+b.text+"' /\x3e";a+=(l?"\x3cdiv style\x3d'background: black;width:5px;height:5px;position: absolute;left: 13px;top: 8px;border-radius: 5px;'\x3e\x3c/div\x3e":"")+"\x3c/div\x3e \x3cdiv data-menu-text\x3d'true' style\x3d'width: "+
d+"px;' class\x3d'fast-desktop-item-title'\x3e"+b.text+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";b=$(a);b.on("click",c.DesktopEvent.onFastDesktopItemClick);b.on("contextmenu",c.DesktopEvent.onFastDesktopItemContextMenu);return b[0]};n.getDesktopButtonMaxWidth=function(){Ext.isEmpty(c.DesktopLayout.desktopButtonMaxWidth)&&(c.DesktopLayout.desktopButtonMaxWidth=parseInt((document.body.clientWidth/36).toFixed(0)));return c.DesktopLayout.desktopButtonMaxWidth};n.getDesktopButtonTitleMaxWidth=function(){return c.DesktopLayout.getDesktopButtonMaxWidth()+
10};n.toggleStartMenu=function(b){if(!c.DesktopLayout.startMenu){b=parseInt((.25*document.body.clientWidth).toFixed(0));var a=Ext.create("Ext.panel.Panel",{border:0,region:"center",bodyStyle:{borderWidth:0},cls:"treelist-with-nav",scrollable:"y",items:[{xtype:"treelist",id:"leftTreeList",reference:"treelist",expanderOnly:!1,singleExpand:!1,ui:"nav",scrollable:"y",expanderFirst:!1,selectOnExpander:!0,highlightPath:!0,store:{type:"tree",root:{expanded:!0,children:c.System.MenuHandler.getMenus()}},listeners:{itemclick:function(e,
f,l){f.node.data.leaf&&c.DesktopLayout.showWindowMenu("button",f.node.data)},itemcontextmenu:function(e,f,l){c.DesktopEvent.onFastMenuItemContextMenu(e,f.getNode().data,l)}}}],listeners:{resize:function(e,f,l,m,k,h){e=128>=f;l=Ext.getCmp("leftTreeList");m=l.ownerCt.ownerCt;l.setMicro(e);e?m.setWidth(44):m.setWidth(f)}}});a=Ext.create("Ext.panel.Panel",{layout:"border",region:"center",border:0,bodyStyle:{borderWidth:0},width:b,minWidth:44,maxWidth:500,subtitle:"\u5de6\u4fa7\u83dc\u5355",split:!0,style:{background:"#32404e"},
items:[a]});var d=parseInt((.8*document.body.clientHeight).toFixed(0));c.DesktopLayout.startMenu=Ext.create("Ext.menu.Menu",{showSeparator:!1,layout:"border",padding:"0 0 0 0",border:0,style:{background:"#32404e",borderWidth:0},userCls:"desktop-start-menu",width:b,height:d,items:[a],listeners:{hide:function(e,f){}}})}c.DesktopLayout.startMenu.showBy(c.DesktopLayout.desktopPanel.down("#DesktopToolBar"))};n.hideAllDesktopWin=function(){for(var b=Ext.ComponentQuery.query("[desktopWin\x3dtrue]"),a=0;a<
b.length;a++){var d=b[a];d.hideAction&&"destroy"===d.hideAction?d.hide(d.animateTarget,d.destroy,d):d.hide()}};n.closeAllDesktopWin=function(){for(var b=Ext.ComponentQuery.query("[desktopWin\x3dtrue]"),a=0;a<b.length;a++)b[a].close()};n.getInsertMenuButtonIndex=function(){var b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar"),a=b.down("[desktopMenuAnchor\x3dtrue]");return a?b.items.indexOf(a):1};n.getInsertFixedButtonIndex=function(){var b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar"),
a=b.down("[desktopFixedMenuAnchor\x3dtrue]");return a?b.items.indexOf(a):1};n.showWindowMenuById=function(b,a,d){this.showWindowMenu(b,c.System.MenuHandler.getMenu(a),d)};n.showWindowMenu=function(b,a,d){if(!c.DesktopLayout.muuriDragging&&a&&!c.DesktopLayout.hasWindowMenu(a))if(c.DesktopLayout.checkMenuFolder(a))c.DesktopLayout.showFolder(b,a,d);else{var e=parseInt((.8*document.body.clientWidth).toFixed(0)),f=parseInt((.9*document.body.clientHeight).toFixed(0)),l=Ext.create("Ext.window.Window",{title:c.DesktopLayout.getMenuPath(a,
"#ffffff","20px"),realTitle:a.text,menuId:a.id,menuData:a,menuContainer:!0,height:f,width:e,minHeight:500,minWidth:800,layout:"fit",resizable:!0,constrainHeader:!0,maximizable:!0,entityWindow:!0,desktopWin:!0,tools:[{type:"minus",callback:function(m){m.hide()}}],listeners:{show:function(m){m.shown=!0;m.methodInvoked&&!c.System.InitHandler.isSilenceGlobalSaving()||c.Eval.asyncMethod(a.method).then(function(k){if(null!=k){var h=k.down("[entityList\x3dtrue]");h&&(h.where=c.Json.mergeJson({},h.where),
h.code=$.md5(a.id),h.buildCodeText=a.text);m.add(k);m.methodInvoked=!0}});c.DesktopLayout.refreshActiveToolbarButton()},destroy:c.DesktopEvent.onFastWindowMenuDestroy,activate:c.DesktopLayout.refreshActiveToolbarButton,hide:c.DesktopLayout.refreshActiveToolbarButton,close:c.DesktopLayout.refreshActiveToolbarButton,drag:function(){c.DesktopLayout.disabledMenuPathClick=!0},dragend:function(m,k){(new Ext.util.DelayedTask(function(){c.DesktopLayout.disabledMenuPathClick=!1},this)).delay(100)}}});c.DesktopLayout.addDesktopToolbarButton(a);
d&&c.DesktopLayout.activeToolbarButton(a.id);Ext.isObject(b)&&(l.animateTarget=b);(b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar"))?(e=(document.body.clientWidth-e)/2,f=(document.body.clientHeight-b.getHeight()-f)/2,l.showAt(e,f)):l.show()}};n.closeToolbarMenuButton=function(b){if(b&&b.menuWin)b.menuWin.close(),b.menuWin=null;else{var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");a&&a.remove(b,!0)}};n.closeOtherToolbarMenuButton=function(b,a){var d=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");
if(d){d=d.query("[desktopMenuButton\x3dtrue]");for(var e=-1,f=0;f<d.length;f++)b.getId()===d[f].getId()?e=f:"all"===a?c.DesktopLayout.closeToolbarMenuButton(d[f]):"right"===a&&0<=e?c.DesktopLayout.closeToolbarMenuButton(d[f]):"left"===a&&0>e&&c.DesktopLayout.closeToolbarMenuButton(d[f])}};n.closeAllToolbarMenuButton=function(){var b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(b){b=b.query("[desktopMenuButton\x3dtrue]");for(var a=0;a<b.length;a++)c.DesktopLayout.closeToolbarMenuButton(b[a])}};
n.showWindowPanel=function(b,a,d){b||(b={getId:function(){return(new Date).getTime()}});if(d){var e=Ext.ComponentQuery.query("[buttonId\x3d"+b.getId()+"]");if(0<e.length)c.Component.shakeComment(e[0]),d&&d.destroy();else{e=parseInt((.4*document.body.clientWidth).toFixed(0));var f=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:a,height:f,width:e,minHeight:500,minWidth:800,iconCls:b.iconCls,layout:"fit",buttonId:b.getId(),hideAction:"destroy",desktopWin:!0,
resizable:!0,constrainHeader:!0,maximizable:!0,items:[d],listeners:{show:c.DesktopLayout.refreshActiveToolbarButton,activate:c.DesktopLayout.refreshActiveToolbarButton,close:c.DesktopLayout.refreshActiveToolbarButton}}).show()}}};n.refreshActiveToolbarButton=function(){if(c.DesktopLayout.desktopInitFinish){var b=c.DesktopLayout.getTopDesktopWindow();b?(Ext.isEmpty(c.DesktopLayout.lastActiveMenuId)||b.menuId===c.DesktopLayout.lastActiveMenuId||c.DesktopLayout.deactiveToolbarButton(c.DesktopLayout.lastActiveMenuId),
c.DesktopLayout.activeToolbarButton(b.menuId),c.Windows.pushLocationHistory({text:b.realTitle||b.title,id:b.menuId})):(Ext.isEmpty(c.DesktopLayout.lastActiveMenuId)||c.DesktopLayout.deactiveToolbarButton(c.DesktopLayout.lastActiveMenuId),c.Windows.pushLocationHistory({text:"\u9996\u9875"}))}};n.activeToolbarButton=function(b){var a=c.DesktopLayout.desktopPanel.down("[menuButtonId\x3d"+b+"]");a&&a.addCls("fast-desktop-toolbar-btn-active");c.DesktopLayout.lastActiveMenuId=b};n.deactiveToolbarButton=
function(b){(b=c.DesktopLayout.desktopPanel.down("[menuButtonId\x3d"+b+"]"))&&b.removeCls("fast-desktop-toolbar-btn-active")};n.getTopDesktopWindow=function(){for(var b=Ext.ComponentQuery.query("[desktopWin\x3dtrue]"),a=null,d=0;d<b.length;d++){var e=b[d];if(e.isVisible()){var f=e.getEl().getZIndex(),l=0;a&&(l=a.getEl().getZIndex());f>l&&(a=e)}}return a};n.addDesktopButton=function(b,a){c.DesktopLayout.checkDesktopButton(b)?c.Dialog.toast("\u684c\u9762\u5df2\u5b58\u5728\uff01"):(c.DesktopLayout.desktopPanel.addDesktopItem(b),
a||c.Dialog.toast("\u6dfb\u52a0\u6210\u529f\uff01"))};n.removeDesktopButton=function(b,a){c.DesktopLayout.desktopPanel.removeDesktopItem(b);a||c.Dialog.toast("\u79fb\u9664\u6210\u529f\uff01")};n.checkDesktopButton=function(b){return b?c.Base.toBool(b.desktop):!1};n.buildToolbarButton=function(b,a){var d={xtype:"button",helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,userCls:"fast-desktop-toolbar-btn",focusCls:"fast-desktop-toolbar-btn-focus",handler:c.DesktopEvent.onFastToolBarMenuButtonClick,
updateMenu:function(e){this.desktopFixedMenuButton?this.setText(null):this.setText(e.text);this.setIcon(c.DesktopLayout.takeIcon(c.DesktopLayout.safeGetMenuIcon(e),"#ffffff"));this.overflowText=e.text;this.menuData=e;this.help=c.System.MenuHandler.getPlainIconMenu(e," \x3e\x3e ");this.menuButtonId=e.id;c.Base.toBool(e.leaf,!1)||(this.menuButtonGroup=e.treeGroup);this.setStyle("background",c.DesktopLayout.safeGetMenuColor(e))},listeners:{afterrender:function(){this.updateMenu(b);this.getEl().on("contextmenu",
c.DesktopEvent.onFastToolbarMenuButtonContextMenu,this)}}};a?d.desktopFixedMenuButton=!0:d.desktopMenuButton=!0;return d};n.removeAllDesktopToolbarFixedButton=function(){var b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(b){var a=[];b.items.each(function(e){e.desktopFixedMenuButton&&a.push(e)});Ext.suspendLayouts();for(var d=0;d<a.length;d++)b.remove(a[d]);Ext.resumeLayouts()}};n.addDesktopToolbarFixedButton=function(b,a){try{var d=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(d){var e=
[];Ext.isArray(b)?e=b:e.push(b);b=[];for(var f=0;f<e.length;f++){var l=e[f];c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(l.id)||(c.DesktopLayout.desktopAllMenusInfo[l.id]=l);c.DesktopLayout.desktopAllMenusInfo[l.id].desktop_fixed=!0;var m=c.DesktopLayout.getDesktopToolbarButton(l);if(m)if(m.desktopFixedMenuButton)continue;else d.remove(m);b.push(c.DesktopLayout.buildToolbarButton(l,!0))}d.insert(c.DesktopLayout.getInsertFixedButtonIndex(),b);a||(c.Dialog.toast("\u5df2\u56fa\u5b9a\u5230\u5de5\u5177\u680f\u4e2d\uff01"),
c.DesktopLayout.recordMenu())}}finally{c.DesktopLayout.refreshActiveToolbarButton()}};n.removeDesktopToolbarFixedButton=function(b){try{var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(a){var d=[];Ext.isArray(b)?d=b:d.push(b);for(b=0;b<d.length;b++){var e=d[b];c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(e.id)||(c.DesktopLayout.desktopAllMenusInfo[e.id]=e);c.DesktopLayout.desktopAllMenusInfo[e.id].desktop_fixed=!1;var f=c.DesktopLayout.getDesktopToolbarButton(e);f&&f.desktopFixedMenuButton&&
a.remove(f);c.DesktopLayout.getWindowMenu(e)&&c.DesktopLayout.addDesktopToolbarButton(e)}c.DesktopLayout.recordMenu();c.Dialog.toast("\u5df2\u4ece\u5de5\u5177\u680f\u4e2d\u53d6\u6d88\u56fa\u5b9a\uff01")}}finally{c.DesktopLayout.refreshActiveToolbarButton()}};n.checkDesktopToolbarFixedButton=function(b){return b?(b=c.DesktopLayout.getDesktopToolbarButton(b))?b.desktopFixedMenuButton:!1:!1};n.addDesktopToolbarButton=function(b){if(b){var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(a){var d=
[];Ext.isArray(b)?d=b:d.push(b);b=[];for(var e=0;e<d.length;e++){var f=d[e];c.DesktopLayout.getDesktopToolbarButton(f)||b.push(c.DesktopLayout.buildToolbarButton(f,!1))}0<b.length&&a.insert(c.DesktopLayout.getInsertMenuButtonIndex(),b)}}};n.removeDesktopToolbarButton=function(b){if(b){var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(a){var d=[];Ext.isArray(b)?d=b:d.push(b);for(b=0;b<d.length;b++){var e=c.DesktopLayout.getDesktopToolbarButton(d[b]);c.Base.toBool(e.desktopFixedMenuButton)||
a.remove(e)}}}};n.getDesktopToolbarButton=function(b){if(b){var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");return a?a.down("[menuButtonId\x3d"+b.id+"]"):null}};n.getDesktopToolbarButtonByGroup=function(b){if(b){var a=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");return a?a.down("[menuButtonGroup\x3d"+b.treeGroup+"]"):null}};n.outDesktopMenuFolder=function(b){b&&(c.DesktopLayout.disabledRecordMenu=!0,c.DesktopLayout.desktopAllMenusInfo.hasOwnProperty(b.id)&&(c.DesktopLayout.desktopAllMenusInfo[b.id].desktop_folder_id=
"desktop"),c.DesktopLayout.removeDesktopButton(b,!0),c.DesktopLayout.disabledRecordMenu=!1,c.DesktopLayout.addDesktopButton(b,!0),c.Dialog.toast("\u5df2\u79fb\u51fa\u6587\u4ef6\u5939\uff01"))};n.recordMenu=function(){if(!c.DesktopLayout.disabledRecordMenu){c.DesktopLayout.refreshMuuriGridMenuIndex();try{var b={},a;for(a in c.DesktopLayout.desktopAllMenusInfo){var d=c.DesktopLayout.desktopAllMenusInfo[a];if(!c.Base.toBool(d.desktop_temp,!1)){b.hasOwnProperty(d.id)||(b[d.id]={id:d.id,text:d.text});
var e=b[d.id];e.desktop=d.desktop;e.desktop_align=d.desktop_align;e.desktop_index=d.desktop_index;e.desktop_type=d.desktop_type;e.desktop_folder_id=d.desktop_folder_id;e.desktop_fixed=d.desktop_fixed;e.desktop_fixed_index=d.desktop_fixed_index;e.desktop_from=d.desktop_from;e.desktop_locked=d.desktop_locked}}c.Server.setSilence(!0);c.Server.saveExtConfig($.md5("SystemDesktopMenus"),"DesktopMenu",c.Json.objectToJson(b),function(f,l){c.Server.setSilence(!1)})}catch(f){}}};n.restoreMenu=function(){return new Ext.Promise(function(b,
a){try{c.Server.showExtConfig($.md5("SystemDesktopMenus"),"DesktopMenu",function(d,e){b(e)})}catch(d){a(d)}})};n.showDesktopBackgroundImages=function(b){var a=c.System.ConfigHandler.getDesktopBgImages();if(a){b||(b={getId:function(){return(new Date).getTime()}});var d=Ext.ComponentQuery.query("[buttonId\x3d"+b.getId()+"]");if(0<d.length)c.Component.shakeComment(d[0]);else{d=[];for(var e=0;e<a.length;e++)d.push({xtype:"image",src:a[e],height:100,margin:5,width:100,style:{objectFit:"cover"},listeners:{afterrender:function(f){f.getEl().on("click",
c.DesktopEvent.onFastDesktopImageClick,f)}}});a=parseInt((.6*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:"\u9009\u62e9\u684c\u9762\u80cc\u666f\u56fe\u7247",height:a,width:565,iconCls:b.iconCls,layout:"fit",buttonId:b.getId(),hideAction:"destroy",desktopWin:!0,resizable:!1,constrain:!0,maximizable:!1,items:[{xtype:"container",layout:"column",scrollable:!0,margin:5,items:d}],listeners:{show:function(f){c.DesktopLayout.refreshActiveToolbarButton()}}}).show()}}else c.Dialog.toast("\u6682\u65e0\u53ef\u7528\u56fe\u7247\u9009\u62e9\uff01")};
n.showFolderByMenuId=function(b,a){(a=c.DesktopLayout.getMenu(a))&&c.DesktopLayout.showFolder(b,a)};n.showFolder=function(b,a,d){c.DesktopLayout.hasWindowMenu(a)||(b=Ext.ComponentQuery.query("[menuWindowGroup\x3d"+a.treeGroup+"]"),0<b.length?(b[0].updateFolderMenu(a,!1),b[0].show()):(b=parseInt((.4*document.body.clientHeight).toFixed(0)),b=Ext.create("Ext.window.Window",{layout:"fit",title:"\u6587\u4ef6\u5939",height:b,width:6*(c.DesktopLayout.getDesktopButtonTitleMaxWidth()+10)+10,minHeight:100,
minWidth:100,menuData:a,desktopWin:!0,resizable:!0,constrainHeader:!0,maximizable:!0,userCls:"fast-ext-folder-window",items:[c.DesktopLayout.buildDesktopItemPanel([],!1,!1,!0)],tools:[{itemId:"edit",iconCls:"extIcon extEdit whiteColor",hidden:!c.DesktopLayout.checkMenuByUserFolder(a),callback:function(e){c.DesktopLayout.showEditFolderName(e.menuData)}}],listeners:{afterrender:function(){if(!c.DesktopLayout.checkSystemLockedFolderMenu(this.menuData))this.getEl().on("contextmenu",c.DesktopEvent.onFastDesktopFolderContextMenu,
this)},show:function(e){var f=this.getMuuriGridContainer();f&&(f.folder=!0,f.folderId=this.menuData.id,f.folderLocked=c.DesktopLayout.checkSystemLockedFolderMenu(this.menuData),f.bindMuuriGrid(function(){e.updateFolderMenu(e.menuData,!1)}));c.DesktopLayout.refreshActiveToolbarButton()},resize:function(){var e=this.getMuuriGridContainer();e&&e.muuriGridLayout()},beforedestroy:c.DesktopLayout.recordMenu,destroy:c.DesktopEvent.onFastWindowMenuDestroy,activate:c.DesktopLayout.refreshActiveToolbarButton,
hide:c.DesktopLayout.refreshActiveToolbarButton,close:c.DesktopLayout.refreshActiveToolbarButton},bbar:{xtype:"container",border:0,padding:"5 5 5 5",itemId:"menuPathContainer",style:{background:"#f0f0f0"}},setFolderTitle:function(e){this.setTitle(c.DesktopLayout.checkSystemLockedFolderMenu(e)?e.text+"\x3cspan style\x3d'font-size: xx-small'\x3e\u3010\u5df2\u9501\u5b9a\u3011\x3c/span\x3e":e.text);this.realTitle=e.text},getMuuriGridContainer:function(){return this.down("[desktopItemContainer\x3dtrue]")},
updateFolderMenu:function(e,f){f||(f=this.getMuuriGridContainer(),f.removeAllDesktopItem(),f.addDesktopItems(c.DesktopLayout.getFolderChildMenus(e.id)));(f=this.down("#menuPathContainer"))&&f.update(c.DesktopLayout.getMenuPath(e,null,"16px"));this.setFolderTitle(e);this.setIcon(c.DesktopLayout.takeIcon(c.DesktopLayout.safeGetMenuIcon(e),"#ffffff"));this.menuData=e;this.menuId=e.id;this.menuWindowGroup=e.treeGroup;(f=c.DesktopLayout.getDesktopToolbarButtonByGroup(e))&&f.updateMenu(e);c.DesktopLayout.refreshActiveToolbarButton()}}),
c.DesktopLayout.addDesktopToolbarButton(a),d&&c.DesktopLayout.activeToolbarButton(a.id),c.DesktopLayout.desktopPanel.add(b),b.show()))};n.getFolderChildMenus=function(b){var a=c.System.MenuHandler.getMenuData(b);if(c.DesktopLayout.checkSystemLockedFolderMenu(a)){for(b=0;b<a.children.length;b++){var d=a.children[b];d.desktop_temp=!0;c.Base.toBool(d.leaf,!0)||(d.desktop_type="folder")}return a.children}a=[];for(d in c.DesktopLayout.desktopAllMenusInfo){var e=c.DesktopLayout.desktopAllMenusInfo[d];e.desktop_folder_id===
b&&c.Base.toBool(e.desktop,!0)&&a.push(e)}a.sort(function(f,l){return f.desktop_index-l.desktop_index});return a};n.checkMuuriGridContainer=function(b,a){for(var d=0;d<c.DesktopLayout.muuriGridContainers.length;d++){var e=c.DesktopLayout.muuriGridContainers[d];if(!c.Base.toBool(e.folderLocked,!1)&&!e.getRegion(!1,!1).isOutOfBound({x:b,y:a}))return e}return null};n.buildFolderMenu=function(b){if(Ext.isEmpty(b))return null;var a=c.Objects.safeSplit(b,"@");b=$.md5("Folder"+b);c.DesktopLayout.desktopAllMenusInfo[b]=
{id:b,text:a[a.length-1],icon:c.DesktopLayout.folderIcon,color:c.DesktopLayout.folderColor,desktop_type:"folder",desktop_from:"user",treeGroup:c.Base.buildOnlyCode("F")};return c.DesktopLayout.desktopAllMenusInfo[b]};n.refreshMuuriGridContainers=function(){c.DesktopLayout.muuriGridContainers=c.DesktopLayout.desktopPanel.query("[desktopItemContainer\x3dtrue]");c.DesktopLayout.muuriGridContainers.sort(function(b,a){var d=b.up("window");d||(d=b);(b=a.up("window"))||(b=a);a=c.Base.toInt(d.getEl().getZIndex(),
0);return c.Base.toInt(b.getEl().getZIndex(),0)-a})};n.refreshMuuriGridMenuIndex=function(){for(var b=c.DesktopLayout.desktopPanel.query("[desktopFixedMenuButton\x3dtrue]"),a=0;a<b.length;a++){var d=b[a];d.menuData&&(d.menuData.desktop_fixed=!0,d.menuData.desktop_fixed_index=a)}for(a=0;a<c.DesktopLayout.muuriGridContainers.length;a++)c.DesktopLayout.muuriGridContainers[a].getAllDesktopItemMenus()};n.checkMenuInFolder=function(b){return b?!Ext.isEmpty(b.desktop_folder_id)&&"desktop"!==b.desktop_folder_id&&
(b=c.DesktopLayout.getMenu(b.desktop_folder_id))?c.DesktopLayout.checkSystemLockedFolderMenu(b)?!1:c.Base.toBool(b.desktop):!1:!1};n.checkMenuByUserFolder=function(b){return"user"===c.Base.toString(b.desktop_from,"system")&&"folder"===b.desktop_type};n.checkMenuFolder=function(b){return b?"folder"===b.desktop_type||c.DesktopLayout.checkSystemLockedFolderMenu(b)?!0:!1:!1};n.checkMenuLocked=function(b){return c.Base.toBool(b.desktop_locked,!1)};n.updateDesktopMenuButton=function(b){if(b){var a=c.DesktopLayout.checkMenuFolder(b),
d=[b.icon];if(a){d=[];var e=c.DesktopLayout.getFolderChildMenus(b.id);for(a=0;a<e.length&&(d.push(c.DesktopLayout.safeGetMenuIcon(e[a])),4!==d.length);a++);}e="";for(a=0;a<d.length;a++)e+="\x3cimg data-menu-icon\x3d'true' src\x3d'"+c.DesktopLayout.takeIcon(d[a],"#ffffff")+"'  alt\x3d'"+b.text+"' /\x3e";d=$("[data-menu-id\x3d"+b.id+"]");d.find("[data-menu-text]").text(b.text);d.find("[data-menu-bg]").html(e)}};n.updateMenuInfo=function(b){c.DesktopLayout.updateDesktopMenuButton(b);var a=c.DesktopLayout.getWindowMenu(b);
a&&a.updateFolderMenu(b,!0)};n.showEditFolderName=function(b){c.Dialog.showPrompt("\u91cd\u547d\u540d\u6587\u4ef6\u5939","\u8bf7\u8f93\u5165\u65b0\u7684\u6587\u4ef6\u5939\u540d",function(a,d){"ok"===a&&(b.text=d,c.DesktopLayout.updateMenuInfo(b),c.DesktopLayout.recordMenu())},!1,b.text)};n.checkSystemLockedFolderMenu=function(b){return b?b.webMenu&&b.children&&!c.Base.toBool(b.leaf,!0):!1};n.updateFolderGridMenu=function(b){b&&(b=Ext.getCmp(b.containerId))&&b.folder&&c.DesktopLayout.updateDesktopMenuButton(c.DesktopLayout.getMenu(b.folderId))};
n.switchMuuriGrid=function(b,a,d){if(b=Ext.getCmp(b.containerId))if(a=a.getElement(),d=$(a),a=d.attr("data-menu-id"),d=d.attr("data-menu-type"),a=c.DesktopLayout.getMenu(a))a.desktop_folder_id=b.folder?b.folderId:"desktop",c.Base.toBool(b.alignRight,!1)?a.desktop_align="right":a.desktop_align="left",a.desktop_type=d};n.safeGetMenuIcon=function(b){if(!b)return null;var a=b.icon;Ext.isEmpty(a)&&(a=c.DesktopLayout.checkMenuFolder(b)?c.DesktopLayout.folderIcon:"icons/icon_function.svg",b.icon=a);return a};
n.safeGetMenuColor=function(b){var a=b.color;Ext.isEmpty(a)&&(a=c.DesktopLayout.checkMenuFolder(b)?c.DesktopLayout.folderColor:c.System.ConfigHandler.getThemeColor());return a};n.showDeleteFolder=function(){if(!(0<Ext.ComponentQuery.query("[deleteFolderWin\x3dtrue]").length)){var b=Ext.create("Ext.window.Window",{height:120,width:120,layout:"absolute",deleteFolderWin:!0,frame:!0,header:!1,shadow:!1,animateDisable:!0,style:{background:"transparent"},bodyStyle:{background:"transparent"},items:[c.DesktopLayout.buildDesktopItemPanel([],
!1,!1,!1),{xtype:"container",anchor:"100% 100%",html:"\x3cdiv style\x3d'width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;font-size: xxx-large;'\x3e\x3cspan class\x3d'extIcon extDelete' style\x3d'font-size: 80px;text-shadow: 0px 0px 20px red;color: #ff3200;'\x3e\x3c/span\x3e\x3c/div\x3e"}],listeners:{show:function(a){if(a=this.getMuuriGridContainer())a.deleteFolder=!0,a.bindMuuriGrid()}},getMuuriGridContainer:function(){return this.down("[desktopItemContainer\x3dtrue]")}});
c.DesktopLayout.desktopPanel.add(b);b.show()}};n.hideDeleteFolder=function(){for(var b=Ext.ComponentQuery.query("[deleteFolderWin\x3dtrue]"),a=0;a<b.length;a++){var d=b[a];d.getMuuriGridContainer().removeAllDesktopItem();d.close()}c.DesktopLayout.recordMenu()};n.getMenuPath=function(b,a,d){b=c.System.MenuHandler.getPathMenu(b);for(var e='\x3cdiv style\x3d"display: flex;align-items: center;" \x3e',f=0;f<b.length;f++){var l=b[f];l="\x3cdiv data-menu-id\x3d'"+l.id+"' onclick\x3d\""+(f!==b.length-1?"FastExt.DesktopEvent.onFastWindowMenuClick(this)":
"")+'"  style\x3d"display: flex;align-items: center;" class\x3d\''+(f!==b.length-1?"fast-desktop-menu-path-click":"")+"'\x3e \x3cimg src\x3d\""+c.DesktopLayout.takeIcon(l.icon,a)+"\"  width\x3d'"+d+"' height\x3d'"+d+'\' /\x3e\x3cspan style\x3d"margin-left: 5px;"\x3e'+l.text+"\x3c/span\x3e \x3c/div\x3e";0!=f&&(l="\x3cspan style\x3d'font-size: 12px;margin: 0 5px;color: #cbcbcb;' class\x3d'extIcon extArrowRight2'\x3e\x3c/span\x3e"+l);e+=l}return e+"\x3c/div\x3e"};n.getWindowMenu=function(b){b=Ext.ComponentQuery.query("[menuId\x3d"+
b.id+"]");return 0<b.length?b[0]:null};n.hasWindowMenu=function(b){var a=c.DesktopLayout.getWindowMenu(b);if(a){if(b=c.DesktopLayout.getDesktopToolbarButton(b))a.animateTarget=b;a.isVisible()?c.Component.shakeComment(a):a.show();return!0}return!1};n.resetWindowMenuAnimTarget=function(b,a){if(b=c.DesktopLayout.getWindowMenu(b))b.animateTarget=a};n.takeIcon=function(b,a){if(Ext.isEmpty(a))return b;var d=/([^/]*.svg)/;if(b&&d.test(b))return c.Server.getIcon(d.exec(b)[1].trim(),a)};n.muuriContainerIdIndex=
1;n.lastActiveMenuId=null;n.lastSelectDesktopImageId=null;n.muuriGridContainers=null;n.folderIcon="icons/icon_system_file.svg";n.folderColor="#FFBB00";n.desktopAllMenusInfo={};n.disabledRecordMenu=!1;n.disabledMenuPathClick=!1;return n}();c.DesktopLayout=u;u=function(){function n(){}n.onFastWindowMenuDestroy=function(){c.DesktopLayout.removeDesktopToolbarButton(this.menuData);this.menuData=null};n.onFastToolBarMenuButtonClick=function(){var b=this.menuData;if(b){var a=c.DesktopLayout.getWindowMenu(b);
a?(a.animateTarget=this,a.isVisible()?(b=c.DesktopLayout.getTopDesktopWindow())&&b.getId()!==a.getId()?Ext.WindowManager.bringToFront(a,!0):a.hide():a.show()):c.DesktopLayout.showWindowMenu(this,b)}};n.onFastToolbarMenuButtonContextMenu=function(b){var a=this;b=c.DesktopLayout.checkDesktopButton(a.menuData);var d=c.DesktopLayout.checkDesktopToolbarFixedButton(a.menuData);Ext.create("Ext.menu.Menu",{items:[{text:"\u5173\u95ed\u5f53\u524d",iconCls:"extIcon extClose",handler:function(){c.DesktopLayout.closeToolbarMenuButton(a)}},
"-",{text:"\u5173\u95ed\u6240\u6709",iconCls:"extIcon extCloseAll",handler:function(){c.DesktopLayout.closeAllToolbarMenuButton()}},{text:"\u5173\u95ed\u5de6\u4fa7",iconCls:"extIcon extCloseOther",handler:function(){c.DesktopLayout.closeOtherToolbarMenuButton(a,"left")}},{text:"\u5173\u95ed\u5176\u4ed6",iconCls:"extIcon extCloseOther",handler:function(){c.DesktopLayout.closeOtherToolbarMenuButton(a,"all")}},{text:"\u5173\u95ed\u53f3\u4fa7",iconCls:"extIcon extCloseOther",handler:function(){c.DesktopLayout.closeOtherToolbarMenuButton(a,
"right")}},"-",{text:"\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks editColor",hidden:b,handler:function(){c.DesktopLayout.addDesktopButton(a.menuData)}},{text:"\u79fb\u9664\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks redColor",hidden:!b,handler:function(){c.DesktopLayout.removeDesktopButton(a.menuData)}},"-",{text:"\u56fa\u5b9a\u5230\u5de5\u5177\u680f",iconCls:"extIcon extTags editColor",hidden:d,handler:function(){c.DesktopLayout.addDesktopToolbarFixedButton(a.menuData)}},
{text:"\u53d6\u6d88\u5de5\u5177\u680f\u56fa\u5b9a",iconCls:"extIcon extTags redColor",hidden:!d,handler:function(){c.DesktopLayout.removeDesktopToolbarFixedButton(a.menuData)}}],listeners:{hide:function(){this.delayClose(100)}}}).showBy(a)};n.onFastDesktopItemClick=function(b){b.preventDefault();b.stopPropagation();b=$(this);var a=b.attr("data-menu-id");c.DesktopLayout.showWindowMenu(b[0],c.DesktopLayout.getMenu(a))};n.onFastMenuItemContextMenu=function(b,a,d){var e=b.up("menu");e&&(e.holdShow=!0);
b=a.leaf;var f=c.DesktopLayout.getMenu(a.id);b||(f.desktop_type="folder");b=c.DesktopLayout.checkDesktopButton(f);var l=c.DesktopLayout.checkDesktopToolbarFixedButton(f),m=c.DesktopLayout.checkMenuInFolder(f);a=c.DesktopLayout.checkMenuLocked(a);a=Ext.create("Ext.menu.Menu",{items:[{text:"\u6253\u5f00\u529f\u80fd",iconCls:"extIcon extMouseClick searchColor",handler:function(){c.DesktopLayout.showWindowMenu(this,f)}},"-",{text:"\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks editColor",
hidden:a||b,handler:function(){c.DesktopLayout.addDesktopButton(f)}},{text:"\u79fb\u9664\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks redColor",hidden:a||m||!b,handler:function(){c.DesktopLayout.removeDesktopButton(f)}},{text:"\u79fb\u51fa\u6587\u4ef6\u5939",iconCls:"extIcon extFolder redColor",hidden:a||!m,handler:function(){c.DesktopLayout.outDesktopMenuFolder(f)}},"-",{text:"\u56fa\u5b9a\u5230\u5de5\u5177\u680f",iconCls:"extIcon extTags editColor",hidden:a||l,handler:function(){c.DesktopLayout.addDesktopToolbarFixedButton(f)}},
{text:"\u53d6\u6d88\u5de5\u5177\u680f\u56fa\u5b9a",iconCls:"extIcon extTags redColor",hidden:a||!l,handler:function(){c.DesktopLayout.removeDesktopToolbarFixedButton(f)}}],listeners:{hide:function(){e&&(e.holdShow=!1);this.delayClose(100)}}});c.Menu.refreshItem(a);a.showAt(d.getXY())};n.onFastDesktopContextMenu=function(b){Ext.create("Ext.menu.Menu",{items:[{text:"\u65b0\u5efa\u6587\u4ef6\u5939",iconCls:"extIcon extFolder color38",handler:function(){c.Dialog.showPrompt("\u65b0\u5efa\u6587\u4ef6\u5939",
"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0",function(a,d){"ok"===a&&c.DesktopLayout.desktopPanel.addDesktopItem(c.DesktopLayout.buildFolderMenu(d),c.DesktopLayout.checkMuuriGridContainer(b.clientX,b.clientY))})}},"-",{text:"\u8bbe\u7f6e\u684c\u9762\u80cc\u666f",iconCls:"extIcon extImages greenColor",handler:function(){c.DesktopLayout.showDesktopBackgroundImages(this)}},{text:"\u81ea\u52a8\u6574\u7406\u684c\u9762",iconCls:"extIcon extTable color9",handler:function(){c.DesktopLayout.desktopPanel.reorderDesktop();
c.DesktopLayout.recordMenu();c.Dialog.toast("\u6574\u7406\u6210\u529f\uff01")}},"-",{text:"\u670d\u52a1\u5668CPU\u76d1\u63a7",iconCls:"extIcon extCPU color129",handler:function(){c.IndexLayout.showMonitorChart("\u670d\u52a1\u5668CPU\u76d1\u63a7\u3010\u5b9e\u65f6\u76d1\u63a7\u4e2d\u3011",0)}},{text:"\u670d\u52a1\u5668\u5185\u5b58\u76d1\u63a7",iconCls:"extIcon extMemory color61",handler:function(){c.IndexLayout.showMonitorChart("\u670d\u52a1\u5668\u5185\u5b58\u76d1\u63a7\u3010\u5b9e\u65f6\u76d1\u63a7\u4e2d\u3011",
1)}},{text:"\u7cfb\u7edfJVM\u76d1\u63a7",iconCls:"extIcon extJVM color144",handler:function(){c.IndexLayout.showMonitorChart("\u7cfb\u7edfJVM\u76d1\u63a7\u3010\u5b9e\u65f6\u76d1\u63a7\u4e2d\u3011",2)}},{text:"\u670d\u52a1\u5668\u66f4\u591a\u76d1\u63a7",iconCls:"extIcon extMonitor color25",handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f",c.IndexLayout.getSystemMonitorPanel(!1))}},"-",{text:"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e",iconCls:"extIcon extSet color12",
handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u5168\u5c40\u8bbe\u7f6e",c.IndexLayout.getSystemConfigPanel(!1))}}],listeners:{hide:function(){this.delayClose(100)}}}).showAt(b.getXY())};n.onFastDesktopItemContextMenu=function(b){b.stopPropagation();var a=$(this),d=a.attr("data-menu-id"),e=c.DesktopLayout.getMenu(d);d=c.DesktopLayout.checkMenuInFolder(e);var f=c.DesktopLayout.checkDesktopButton(e),l=c.DesktopLayout.checkDesktopToolbarFixedButton(e),m=c.DesktopLayout.checkMenuByUserFolder(e),
k=c.DesktopLayout.checkMenuLocked(e);d=Ext.create("Ext.menu.Menu",{items:[{text:"\u6253\u5f00\u529f\u80fd",iconCls:"extIcon extMouseClick searchColor",handler:function(){c.DesktopLayout.showWindowMenu(a[0],e)}},{text:"\u91cd\u547d\u540d\u6587\u4ef6\u5939",iconCls:"extIcon extEdit color68",hidden:!m,handler:function(){c.DesktopLayout.showEditFolderName(e)}},"-",{text:"\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks editColor",hidden:k||f,handler:function(){c.DesktopLayout.addDesktopButton(e)}},
{text:"\u79fb\u9664\u5feb\u6377\u65b9\u5f0f",iconCls:"extIcon extLinks redColor",hidden:k||d||!f,handler:function(){c.DesktopLayout.removeDesktopButton(e)}},{text:"\u79fb\u51fa\u6587\u4ef6\u5939",iconCls:"extIcon extFolder redColor",hidden:k||!d,handler:function(){c.DesktopLayout.outDesktopMenuFolder(e)}},"-",{text:"\u56fa\u5b9a\u5230\u5de5\u5177\u680f",iconCls:"extIcon extTags editColor",hidden:k||l,handler:function(){c.DesktopLayout.addDesktopToolbarFixedButton(e)}},{text:"\u53d6\u6d88\u5de5\u5177\u680f\u56fa\u5b9a",
iconCls:"extIcon extTags redColor",hidden:k||!l,handler:function(){c.DesktopLayout.removeDesktopToolbarFixedButton(e)}}],listeners:{hide:function(){this.delayClose(100)}}});c.Menu.refreshItem(d);d.showAt(b.clientX,b.clientY);return!1};n.onFastMuuriGridSend=function(b){c.DesktopLayout.switchMuuriGrid(b.toGrid,b.item,!1);c.DesktopLayout.updateFolderGridMenu(b.toGrid);c.DesktopLayout.updateFolderGridMenu(b.fromGrid)};n.onFastMuuriGridDragInit=function(){c.DesktopLayout.showDeleteFolder();c.DesktopLayout.refreshMuuriGridContainers()};
n.onFastMuuriGridDragSort=function(){for(var b=[],a=0;a<c.DesktopLayout.muuriGridContainers.length;a++){var d=c.DesktopLayout.muuriGridContainers[a];d.folderLocked||b.push(c.MuuriTool.getMuuriGrid(d))}return b};n.onFastMuuriGridDragStartPredicate=function(b,a){var d=c.DesktopLayout.getMenuByMuuriGridItem(b);return d&&c.Base.toBool(d.desktop_locked,!1)?!1:Muuri.ItemDrag.defaultStartPredicate(b,a,{distance:10,delay:50})};n.onFastMuuriGridDragSortPredicate=function(b,a){if(a=c.DesktopLayout.checkMuuriGridContainer(a.clientX,
a.clientY)){a=c.MuuriTool.getMuuriGrid(a);var d=b.getGrid();if(a&&d&&d._id!==a._id)return{grid:a,index:-1,action:"move"}}return(b=Muuri.ItemDrag.defaultSortPredicate(b,{threshold:50,action:"move",migrateAction:"move"}))&&(a=c.DesktopLayout.getMenuByMuuriGridItem(b.grid.getItem(b.index)))&&c.Base.toBool(a.desktop_locked,!1)?!1:b};n.onFastMuuriGridDragEnd=function(b){c.DesktopEvent.onFastMuuriGridChange(b);c.DesktopLayout.hideDeleteFolder()};n.onFastMuuriGridChange=function(b){var a=[];Ext.isArray(b)?
a=b:a.push(b);c.DesktopLayout.refreshMuuriGridMenuIndex();for(b=0;b<a.length;b++){var d=a[b],e=d.getGrid();e&&e.containerId&&(c.DesktopLayout.switchMuuriGrid(e,d,!1),c.DesktopLayout.updateFolderGridMenu(e))}c.DesktopLayout.recordMenu()};n.onFastToolbarStartDrag=function(b,a,d,e,f){if(b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar")){d=c.Base.toBool(d.desktopFixedMenuButton,!1);e=b.query("[desktopMenuButton\x3dtrue]");for(a=0;a<e.length;a++)e[a].reorderable=!d;b=b.query("[desktopFixedMenuButton\x3dtrue]");
for(a=0;a<b.length;a++)b[a].reorderable=d}};n.onFastToolbarDrop=function(){var b=c.DesktopLayout.desktopPanel.down("#DesktopToolBar");if(b){for(var a=b.query("[desktopMenuButton\x3dtrue]"),d=0;d<a.length;d++)a[d].reorderable=!0;b=b.query("[desktopFixedMenuButton\x3dtrue]");for(d=0;d<b.length;d++)b[d].reorderable=!0}c.DesktopLayout.recordMenu()};n.onFastDesktopImageClick=function(){if(c.DesktopLayout.lastSelectDesktopImageId){var b=Ext.getCmp(c.DesktopLayout.lastSelectDesktopImageId);b&&b.setStyle("border",
"0")}this.setStyle("border","2px solid red");c.DesktopLayout.lastSelectDesktopImageId=this.getId();c.DesktopLayout.desktopContainer.setStyle({backgroundImage:"url('"+this.getSrc()+"')",backgroundSize:"cover"});c.System.ConfigHandler.setDesktopBgImage(this.getSrc());c.Server.saveSystemConfig("desktop-bg-image",this.getSrc())};n.onFastDesktopFolderContextMenu=function(b){Ext.create("Ext.menu.Menu",{items:[{text:"\u65b0\u5efa\u6587\u4ef6\u5939",iconCls:"extIcon extFolder color38",handler:function(){c.Dialog.showPrompt("\u7cfb\u7edf\u63d0\u9192",
"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0",function(a,d){"ok"===a&&c.DesktopLayout.desktopPanel.addDesktopItem(c.DesktopLayout.buildFolderMenu(d),c.DesktopLayout.checkMuuriGridContainer(b.clientX,b.clientY))})}}],listeners:{hide:function(){this.delayClose(100)}}}).showAt(b.getXY())};n.onFastWindowMenuClick=function(b){c.DesktopLayout.disabledMenuPathClick||c.DesktopLayout.showFolderByMenuId(b,$(b).attr("data-menu-id"))};return n}();c.DesktopEvent=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function m(){}m.__onLoaded=function(){m.TabContainer=new n;m.TreeMenuContainer=new b;m.HeadBarContainer=new e;m.HistoryHandler=new l;m.TreeMenuEvent=new a};m.showSystemLayout=function(){c.Windows.removeLoading();var k=c.SystemLayout.getBodyContainer();k.removeAll();var h=this.TreeMenuContainer.createLayoutPanel();h.region="west";var g=this.HeadBarContainer.createLayoutPanel();g.region="north";var p=this.TabContainer.createLayoutPanel();p.region="center";p=Ext.create("Ext.panel.Panel",
{layout:"border",region:"center",border:0,userCls:"fast-ext-content-container",items:[g,p]});g=Ext.create("Ext.container.Container",{border:0,padding:"0 0 0 0",flex:1,cls:"fast-progress-container",html:'\x3cdiv class\x3d"fast-progress" id\x3d"progress"\x3e\x3c/div\x3e'});h=Ext.create("Ext.panel.Panel",{layout:"border",border:0,bodyStyle:{background:"#f0f0f0"},anchor:"100% 100%",flex:1,items:[h,p]});h=Ext.create("Ext.panel.Panel",{layout:"absolute",border:0,items:[h,g],listeners:{render:function(q){c.Dialog.hideWait();
c.ProgressBaseLineLayout.getProgressLine(c.Color.toColor(c.System.ConfigHandler.getFrontColor())).animate(1);c.Listeners.getFire().onSystemReady()}}});k.add(h)};return m}();c.NormalLayout=u;var n=function(){function m(){this._timeoutDestroyDuration=18E4}m.prototype.createLayoutPanel=function(){var k=this;return this._container=Ext.create("Ext.container.Container",{layout:"card",userCls:m.FAST_CONTAINER_CLS,margin:"0 5 0 0",listeners:{render:function(){c.NormalLayout.HistoryHandler.restoreHistory();
c.NormalLayout.HeadBarContainer.refreshButtons();var h=c.Windows.getMenuIdFromLocation();k.showByMenuId(h)||k.showIndex();k.startWatcher()}}})};m.prototype.buildMenuContentPanel=function(k){if(k)return Ext.create("Ext.panel.Panel",{layout:"fit",itemId:k.id,border:0,menuContainer:!0,methodInvoked:!1,notifyEntityActive:function(){var h=this.down("[entityList\x3dtrue]");if(h){if(h.onTabActivate)h.onTabActivate(this);h.hasListener("aftertabactive")&&h.fireEvent("aftertabactive")}},notifyEntityDeActive:function(){try{var h=
this.down("[entityList\x3dtrue]");if(h){if(h.onTabDeactivate)h.onTabDeactivate(this);h.hasListener("aftertabdeactive")&&h.fireEvent("aftertabdeactive")}}catch(g){console.error(g)}},invokeMenuPanel:function(){var h=this,g=this;if(!this.methodInvoked||c.System.InitHandler.isSilenceGlobalSaving()){g.setLoading("\u52a0\u8f7d\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");var p=c.System.InitHandler.isSilenceGlobalSaving()?0:300;c.Eval.asyncMethod(k.method,p).then(function(q){try{if(g.setLoading(!1),
q){h.methodInvoked=!0;var r=q.down("[entityList\x3dtrue]");r&&(r.where=c.Json.mergeJson(k.where,r.where),r.code=$.md5(k.id),r.buildCodeText=k.title,r.tabMenu=k);q.setStyle("background","#ffffff");g.add(q)}else c.System.InitHandler.isSilenceGlobalSaving()&&(c.System.InitHandler.doNextSilenceMenu(),c.NormalLayout.TabContainer.close(k))}catch(t){console.error(t)}})}else this.notifyEntityActive()},listeners:{activate:function(h){c.SystemLayout.changeMenuTheme(k.id,function(){h.invokeMenuPanel()})},deactivate:function(h){!h||
h.destroyed||h.destroying||c.System.InitHandler.isSilenceGlobalSaving()||this.notifyEntityDeActive()}}})};m.prototype.startWatcher=function(){var k=this;setTimeout(function(){k.destroyTimeoutItem();k.startWatcher()},5E3)};m.prototype.showIndex=function(){var k=m.FAST_TAB_INDEX_ITEM_ID;if(!c.NormalLayout.TabContainer.exist(k)){var h=c.IndexLayout.getWelcomePanel();h.itemId=k;c.NormalLayout.TabContainer.add(h)}c.NormalLayout.TabContainer.active(k)};m.prototype.exist=function(k){return this._container.down("#"+
k)};m.prototype.active=function(k){var h=c.System.MenuHandler.getMenu(k);this._container.getLayout().setActiveItem(k).lastActiveTime=(new Date).getTime();c.System.InitHandler.isSilenceGlobalSaving()||c.Windows.pushLocationHistory(h);c.NormalLayout.HeadBarContainer.refreshButtons();c.NormalLayout.HeadBarContainer.addSystemMenuButton(h,!0);c.NormalLayout.HeadBarContainer.setActiveSystemMenuButton(k,!0);c.NormalLayout.TreeMenuContainer.selectByMenuId(k);c.NormalLayout.HistoryHandler.addHistory(h)};m.prototype.add=
function(k){this._container.add(k)};m.prototype.destroy=function(k){this.destroyByCmb(this._container.down("#"+k))};m.prototype.destroyByCmb=function(k){k&&this._container.remove(k)};m.prototype.showByMenuId=function(k){return Ext.isEmpty(k)?!1:this.show(c.System.MenuHandler.getMenu(k))};m.prototype.showByCmb=function(k,h){h&&(this.exist(h.id)||this.add(k),this.active(h.id))};m.prototype.show=function(k){if(!k)return!1;this.exist(k.id)||this.add(this.buildMenuContentPanel(k));this.active(k.id);return!0};
m.prototype.reload=function(k){Ext.suspendLayouts();try{var h=this._container.down("#"+k);h&&this._container.remove(h);if(k===m.FAST_TAB_INDEX_ITEM_ID)this.showIndex();else{var g=this.buildMenuContentPanel(c.System.MenuHandler.getMenu(k));g&&(this.add(g),this.active(k))}}finally{Ext.resumeLayouts(!0)}};m.prototype.copyUrl=function(k){var h=c.System.MenuHandler.getMenu(k);h&&(c.Base.copyToBoard(c.Windows.getBaseUrl()+"#/"+h.text+"/"+k),c.Dialog.toast("\u590d\u5236\u6210\u529f\uff01"))};m.prototype.copy=
function(k){(k=c.System.MenuHandler.cloneMenu(k))&&this.show(k)};m.prototype.closeByMenuId=function(k){this.close(c.System.MenuHandler.getMenu(k))};m.prototype.close=function(k){if(k){Ext.suspendLayouts();try{this.destroy(k.id),c.NormalLayout.HeadBarContainer.closeSystemMenuButton(k.id),c.NormalLayout.HeadBarContainer.doActiveSystemMenuButton()}finally{Ext.resumeLayouts(!0)}}};m.prototype.closeAll=function(){c.NormalLayout.HeadBarContainer.closeAllSystemMenuButton();c.NormalLayout.HeadBarContainer.clearMenuHistory();
this.showIndex()};m.prototype.hideByMenuId=function(k){this.hide(c.System.MenuHandler.getMenu(k))};m.prototype.hide=function(k){c.NormalLayout.HeadBarContainer.closeSystemMenuButton(k.id);c.NormalLayout.HeadBarContainer.doActiveSystemMenuButton()};m.prototype.getActiveCmp=function(){return this._container.getLayout().getActiveItem()};m.prototype.getActiveHistory=function(){var k=this.getActiveCmp();if(k&&(k=c.System.MenuHandler.getMenu(k.itemId)))return k};m.prototype.destroyTimeoutItem=function(){for(var k=
0,h=this._container.getLayout().getLayoutItems();k<h.length;k++){var g=h[k];this.getActiveCmp()===g?g.lastActiveTime=(new Date).getTime():(new Date).getTime()-g.lastActiveTime>this._timeoutDestroyDuration&&(c.Server.setSilence(!0),c.NormalLayout.HeadBarContainer.graySystemMenuButton(g.itemId),this.destroyByCmb(g),c.Server.setSilence(!1))}};m.FAST_CONTAINER_CLS="fast-system-tab-container";m.FAST_TAB_INDEX_ITEM_ID="TabIndexPanel";return m}(),b=function(){function m(){this._menuShowIterator=1;this._renderHeadPanel=
!0;this._collapseMenuPanelWidth=55;this._expendMenuPanelMinWidth=128;this._lastMenuPanelWidth=void 0;this._toggleMenuPanelAnimDuration=300;this._muteResizeEvent=this._toggleMenPanelAnim=!1;this._maxExpendRootMenuCount=1;this._floating=this._mini=!1;this._id=c.Base.buildOnlyCode("TP");this._menuElementHandler=new d(this._id);this._lastMenuPanelWidth=parseInt((.2*document.body.clientWidth).toFixed(0));window["TreeObj"+this._id]=this}m.getTreeMenuObject=function(k){return window["TreeObj"+k]};m.destroyTreeMenuObject=
function(k){delete window["TreeObj"+k]};m.prototype.createLayoutPanel=function(){var k=this;k._headPanel=this._renderHeadPanel?Ext.create("Ext.panel.Panel",{height:55,padding:"0 0 0 0",region:"north",border:0,layout:"fit",power:!1,userCls:m.FAST_CONTAINER_HEAD_CLS,bodyCls:m.FAST_CONTAINER_HEAD_CLS,html:this.buildHeadHtml(!1,!1)}):void 0;k._treePanel=Ext.create("Ext.panel.Panel",{border:0,region:"center",scrollable:"y",power:!1,userCls:m.FAST_PANEL_CLS,bodyCls:m.FAST_PANEL_CLS,html:this.buildMenuHtml(!1)});
k._treeContainer=Ext.create("Ext.panel.Panel",{layout:"border",border:0,width:this._lastMenuPanelWidth,minWidth:this._collapseMenuPanelWidth,maxWidth:500,subtitle:"\u5de6\u4fa7\u83dc\u5355",split:!0,power:!1,constrain:!0,floating:this._floating,userCls:m.FAST_CONTAINER_CLS,items:[this._headPanel,this._treePanel],listeners:{resize:function(h,g){k._muteResizeEvent||(g<=k._expendMenuPanelMinWidth?k.doCollapseMenuPanel():k.doExpandMenuPanel())}}});return k._treeContainer};m.prototype.buildHeadHtml=function(k,
h){var g=c.System.ConfigHandler.getFrontColor(),p=c.System.ConfigHandler.getSystemLogo(),q=c.System.ConfigHandler.getSystemTitle();if(k)return"\x3cdiv class\x3d'fast-system-head-info-container fast-system-head-info-container-min'\x3e\x3cimg alt\x3d'\u7cfb\u7edfLOGO' class\x3d'fast-system-head-logo fast-system-head-logo-mini' src\x3d'"+c.Base.formatUrl(p)+"' /\x3e\x3c/div\x3e";k="fast-system-head-info-container";h&&(k+=" fast-system-head-title-single-line");return"\x3cdiv class\x3d'"+k+"'\x3e\x3cimg alt\x3d'\u7cfb\u7edfLOGO' class\x3d'fast-system-head-logo' src\x3d'"+
c.Base.formatUrl(p)+"' /\x3e\x26nbsp;\x26nbsp;\x3cdiv class\x3d'fast-system-head-title' style\x3d'color: "+g+";' \x3e"+q+"\x3c/div\x3e\x3c/div\x3e"};m.prototype.buildMenuHtml=function(k){return this._menuElementHandler.buildMenuHtml(k)};m.prototype.isRenderHeadPanel=function(){return this._renderHeadPanel};m.prototype.setRenderHeadPanel=function(k){this._renderHeadPanel=k};m.prototype.isMini=function(){return this._mini};m.prototype.isFloating=function(){return this._floating};m.prototype.isExpendedMenuPanel=
function(){return!this._mini};m.prototype.isCollapsedMenuPanel=function(){return!this.isExpendedMenuPanel()};m.prototype.toggleMenuPanel=function(){var k=this;this._toggleMenPanelAnim=!0;this.isExpendedMenuPanel()?(this._headPanel&&this._headPanel.update(this.buildHeadHtml(!1,!0)),this._lastMenuPanelWidth=this._treeContainer.getWidth(),c.Animate.startValueAnimate("toggleMenuPanel",{from:this._lastMenuPanelWidth,to:this._collapseMenuPanelWidth,duration:this._toggleMenuPanelAnimDuration,update:function(h){k._treeContainer.setWidth(h)},
begin:function(){k.updateHeadHtml(!1,!0);k._muteResizeEvent=!0},complete:function(){k.doCollapseMenuPanel();k._muteResizeEvent=!1;k._toggleMenPanelAnim=!1}})):c.Animate.startValueAnimate("toggleMenuPanel",{from:this._collapseMenuPanelWidth,to:this._lastMenuPanelWidth,duration:this._toggleMenuPanelAnimDuration,update:function(h){k._treeContainer.setWidth(h)},begin:function(){k.updateHeadHtml(!1,!0);k.updateMenuHtml(!1);k._muteResizeEvent=!0},complete:function(){k.doExpandMenuPanel();k._muteResizeEvent=
!1;k._toggleMenPanelAnim=!1}})};m.prototype.doCollapseMenuPanel=function(){this._treeContainer&&(this._muteResizeEvent=!0,this._treeContainer.setWidth(this._collapseMenuPanelWidth),this._muteResizeEvent=!1);this.isCollapsedMenuPanel()||(this._headPanel&&this._headPanel.update(this.buildHeadHtml(!0,!0)),this.updateHeadHtml(!0,!1),this.updateMenuHtml(!0),this._mini=!0,c.NormalLayout.HeadBarContainer.refreshButtons())};m.prototype.doExpandMenuPanel=function(){this.isExpendedMenuPanel()||(this._treeContainer&&
(this._muteResizeEvent=!0,this._treeContainer.setWidth(this._lastMenuPanelWidth),this._muteResizeEvent=!1),this._mini=!1,this.updateHeadHtml(!1,!1),this.updateMenuHtml(!1),this.selectByMenuId(this._lastSelectedMenuId),c.NormalLayout.HeadBarContainer.refreshButtons(),this.destroyFloatTreeMenu())};m.prototype.updateHeadHtml=function(k,h){this._headPanel&&this._headPanel.setHtml(this.buildHeadHtml(k,h))};m.prototype.updateMenuHtml=function(k){this._treePanel&&this._treePanel.setHtml(this.buildMenuHtml(k))};
m.prototype.selectByMenuId=function(k){k&&(Ext.isEmpty(this._lastSelectedMenuId)||this.setMenuSelect(this._lastSelectedMenuId,!1),this.setMenuSelect(k,!0),this.expandMenu(k),this._lastSelectedMenuId=k,this._floatTreeMenu&&this._floatTreeMenu.selectByMenuId(k))};m.prototype.setMenuSelect=function(k,h){k=this._menuElementHandler.getMenuEl(k);h?$(k).addClass("fast-menu-item-container-selected"):$(k).removeClass("fast-menu-item-container-selected")};m.prototype.isMenuSelected=function(k){k=this._menuElementHandler.getMenuEl(k);
return $(k).hasClass("fast-menu-item-container-selected")};m.prototype.isMenuDeepSelected=function(k){if(this.isMenuSelected(k))return!0;var h=c.System.MenuHandler.getMenu(k);if(h.children)for(k=0,h=h.children;k<h.length;k++)if(this.isMenuDeepSelected(h[k].id))return!0;return!1};m.prototype.toggleMenuChildren=function(k){this.isMenuChildrenShown(k)?this.hideMenuChildren(k):this.showMenuChildren(k)};m.prototype.isMenuChildrenShown=function(k){k=this._menuElementHandler.getMenuChildrenEl(k);if(!k||
0===parseInt(k.getAttribute("data-menu-children-count")))return!0;var h=k.getAttribute("data-hiding");return h&&"true"===h||Ext.isEmpty(k.style.display)?!1:"none"!==k.style.display};m.prototype.showMenuChildren=function(k,h){var g=this._menuElementHandler.getMenuEl(k);g?(g.setAttribute("data-last-show-time",String(this._menuShowIterator++)),this.isMenuChildrenShown(k)?h&&h():(g=this._menuElementHandler.getMenuChildrenEl(k),g.removeAttribute("data-hiding"),$(this._menuElementHandler.getMenuArrowEl(k)).addClass("fast-menu-arrow-open"),
$(g).slideDown(this._toggleMenuPanelAnimDuration,h),this.autoCollapseMenu())):h&&h()};m.prototype.hideMenuChildren=function(k,h){if(this.isMenuChildrenShown(k)){var g=this._menuElementHandler.getMenuChildrenEl(k);g.setAttribute("data-hiding","true");$(this._menuElementHandler.getMenuArrowEl(k)).removeClass("fast-menu-arrow-open");$(g).slideUp(this._toggleMenuPanelAnimDuration,h)}};m.prototype.expandMenu=function(k,h,g){var p=this;Ext.isEmpty(h)&&(h=1);if(Ext.isEmpty(k))g&&g();else{var q=c.System.MenuHandler.getMenu(k);
if(q)if(1===h&&q._clone)g&&g(),this.collapseAllMenu();else{var r=function(){q.children&&0<q.children.length&&p.showMenuChildren(k,g)};Ext.isEmpty(q.parentId)||"root"===q.parentId?r():this.expandMenu(q.parentId,h+1,r)}else g&&g(),1===h&&this.collapseAllMenu()}};m.prototype.collapseMenu=function(k){this.hideMenuChildren(k);var h=c.System.MenuHandler.getMenu(k);if(h&&h.children)for(k=0,h=h.children;k<h.length;k++)this.collapseMenu(h[k].id)};m.prototype.autoCollapseMenu=function(){for(var k=[],h=0,g=
this._menuElementHandler.getRootMenuId();h<g.length;h++){var p=g[h];if(this.isMenuChildrenShown(p)){var q=this._menuElementHandler.getMenuEl(p);k.push({time:parseInt(q.getAttribute("data-last-show-time")),id:p,text:q.innerText})}}k=k.sort(function(r,t){return r.time-t.time});h=[];for(g=k.length-this._maxExpendRootMenuCount;g<k.length;g++)h=h.concat(this._menuElementHandler.getMenuAllParentId(k[g].id));if(k.length>this._maxExpendRootMenuCount)for(g=0;g<k.length-this._maxExpendRootMenuCount;g++)0<=
h.indexOf(k[g].id)||this.collapseMenu(k[g].id)};m.prototype.collapseAllMenu=function(){for(var k=0,h=this._menuElementHandler.getRootMenuId();k<h.length;k++)this.collapseMenu(h[k])};m.prototype.showFloatTreeMenu=function(k){if(!this._toggleMenPanelAnim){var h=this._lastMenuPanelWidth;this._floatTreeMenu||(this._floatTreeMenu=new m,this._floatTreeMenu._floating=!0,this._floatTreeMenu._lastMenuPanelWidth=h,this._floatTreeMenu.createLayoutPanel().show());this._floatTreeMenu._treeContainer.setHeight(this._treeContainer.getHeight());
this._floatTreeMenu._treeContainer.setWidth(h);this._floatTreeMenu._treeContainer.setY(0);this._floatTreeMenu._treeContainer.setX(-(h+20));this._floatTreeMenu.showByFloatingMenu(k)}};m.prototype.isShownFloatTreeMenu=function(){return this._floatTreeMenu?this._floatTreeMenu.isShownByFloatingMenu():!1};m.prototype.hideFloatTreeMenu=function(){this._floatTreeMenu&&this._floatTreeMenu.hideByFloatingMenu()};m.prototype.showByFloatingMenu=function(k){var h=this;this._floating&&c.Animate.startValueAnimate("showByFloatingMenu",
{from:this._treeContainer.getX(),to:0,duration:300,delay:k?300:0,begin:function(){h._treeContainer.setX(-h._treeContainer.getWidth())},update:function(g){h._treeContainer.setX(g)},complete:function(){c.Animate.clearAnimate(h._treeContainer);Ext.resumeLayouts(!0);k&&h.expandMenu(k)}})};m.prototype.isShownByFloatingMenu=function(){if(this._floating)return 0<=this._treeContainer.getX()};m.prototype.hideByFloatingMenu=function(){var k=this;this._floating&&(c.Animate.clearAnimate("hideByFloatingMenu"),
c.Animate.startValueAnimate("hideByFloatingMenu",{from:this._treeContainer.getX(),to:-(this._treeContainer.getWidth()+20),duration:300,update:function(h){k._treeContainer.setX(h)},complete:function(){c.Animate.clearAnimate(k._treeContainer);k.collapseAllMenu()}}))};m.prototype.destroyFloatTreeMenu=function(){this._floatTreeMenu&&(c.Animate.clearAnimate(this._floatTreeMenu._treeContainer),m.destroyTreeMenuObject(this._floatTreeMenu._id),this._floatTreeMenu._treeContainer.destroy(),this._floatTreeMenu=
null)};m.FAST_CONTAINER_CLS="fast-system-menu-container";m.FAST_CONTAINER_HEAD_CLS="fast-system-menu-header-container";m.FAST_PANEL_CLS="fast-system-menu-panel";m.FAST_POPUP_PANEL_CLS="fast-system-menu-popup-panel";return m}(),a=function(){function m(){}m.prototype.onMenuItemClick=function(k,h,g){(k=document.getElementById("Menu-"+g))&&(h=b.getTreeMenuObject(h))&&!h.isMini()&&(g=k.getAttribute("data-menu-id"),0===parseInt(k.getAttribute("data-menu-children-count"))?c.SystemLayout.showByMenuId(g):
h.toggleMenuChildren(g))};m.prototype.onMenuItemMouseEnter=function(k,h,g){if(k=b.getTreeMenuObject(h))if(g=document.getElementById("Menu-"+g))g=g.getAttribute("data-menu-id"),k.isMini()&&k.showFloatTreeMenu(g)};m.prototype.onMenuItemMouseLeave=function(k,h,g){};m.prototype.onMenuContainerMouseEnter=function(k,h){};m.prototype.onMenuContainerMouseLeave=function(k,h){k=b.getTreeMenuObject(h);k.isMini()||k.isShownByFloatingMenu()&&k.hideByFloatingMenu()};return m}(),d=function(){function m(k){this._id=
k;this._rootMenuId=[]}m.prototype.buildMenuHtml=function(k){for(var h=[],g=0,p=c.System.MenuHandler.getMenus();g<p.length;g++)h.push(this.createMenuHtml(this._id,p[g],0,k));return'\x3cdiv class\x3d"fast-menu-root-container" onmouseenter\x3d"FastExt.NormalLayout.TreeMenuEvent.onMenuContainerMouseEnter(event,\''+(this._id+"')\" onmouseleave\x3d\"FastExt.NormalLayout.TreeMenuEvent.onMenuContainerMouseLeave(event,'")+(this._id+"')\" \x3e")+h.join("")+"\x3c/div\x3e"};m.prototype.createMenuHtml=function(k,
h,g,p){var q=[];if(!p&&h.children)for(var r=0,t=h.children;r<t.length;r++)q.push(this.createMenuHtml(k,t[r],g+1,p));r=k+h.id;t="FastExt.NormalLayout.TreeMenuEvent.onMenuItemClick(event,'"+k+"','"+r+"')";for(var v="FastExt.NormalLayout.TreeMenuEvent.onMenuItemMouseEnter(event,'"+k+"','"+r+"')",w="FastExt.NormalLayout.TreeMenuEvent.onMenuItemMouseLeave(event,'"+k+"','"+r+"')",z="",x=0;x<g;x++)z+='\x3cdiv class\x3d"fast-menu-icon"\x3e\x3c/div\x3e';0<q.length&&0>this._rootMenuId.indexOf(h.id)&&this._rootMenuId.push(h.id);
return'\x3cdiv class\x3d"fast-menu-container" \x3e\x3cdiv class\x3d"fast-menu-item-container" data-parent-menu-id\x3d"'+h.parentId+'" data-menu-mini\x3d"'+p+'" id\x3d"Menu-'+r+'" data-menu-children-count\x3d"'+q.length+'" data-menu-id\x3d"'+h.id+'" onmouseenter\x3d"'+v+'" onmouseleave\x3d"'+w+'" onmousedown\x3d"'+t+'"\x3e'+z+'\x3cimg class\x3d"fast-menu-icon" id\x3d"Menu-Icon-'+r+'" src\x3d"'+c.Base.formatUrlVersion(h.icon)+'" alt\x3d"\u83dc\u5355\u56fe\u6807"/\x3e'+(p?"":'\x3cspan class\x3d"fast-menu-text" id\x3d"Menu-Text-'+
r+'" \x3e'+h.text+"\x3c/span\x3e")+(0<q.length?'\x3cspan id\x3d"Menu-Arrow-'+r+'" class\x3d"extIcon extRightArrow fast-menu-arrow"\x3e\x3c/span\x3e':"")+" \x3c/div\x3e"+(p?"":' \x3cdiv data-menu-id\x3d"'+h.id+'" data-menu-children-count\x3d"'+q.length+'" data-root-children\x3d"'+(0>=g?k:"false")+'" class\x3d"fast-menu-child-container" id\x3d"Menu-Children-'+r+'"\x3e'+q.join("")+" \x3c/div\x3e")+"\x3c/div\x3e"};m.prototype.getMenuAllParentId=function(k){var h=[];k=this.getMenuParentId(k);h.push(k);
k&&"root"!==k&&(h=h.concat(this.getMenuAllParentId(k)));return h};m.prototype.getMenuParentId=function(k){return document.getElementById("Menu-"+this._id+k).getAttribute("data-parent-menu-id")};m.prototype.getMenuEl=function(k){return document.getElementById("Menu-"+this._id+k)};m.prototype.getMenuTextEl=function(k){return document.getElementById("Menu-Text-"+this._id+k)};m.prototype.getMenuIconEl=function(k){return document.getElementById("Menu-Icon-"+this._id+k)};m.prototype.getMenuChildrenEl=function(k){return document.getElementById("Menu-Children-"+
this._id+k)};m.prototype.getMenuArrowEl=function(k){return document.getElementById("Menu-Arrow-"+this._id+k)};m.prototype.getRootMenuId=function(){return this._rootMenuId};return m}(),e=function(){function m(){}m.prototype.createLayoutPanel=function(){var k=this;this._systemHistoryButton=Ext.create("Ext.button.Button",{text:"",iconCls:"extIcon extHistory3 grayColor",hidden:!0,reorderable:!1,power:!1,handler:function(){k.showMenuHistory()}});this._systemMenuPanelButton=Ext.create("Ext.button.Button",
{iconCls:"extIcon extArrowLeft3 grayColor",itemId:"MenuButton",reorderable:!1,power:!1,handler:function(){c.NormalLayout.TreeMenuContainer.toggleMenuPanel()}});this._systemChangelogButton=Ext.create("Ext.button.Button",{iconCls:"extIcon extFlag grayColor",reorderable:!1,power:!1,hidden:!c.System.ChangelogHandler.existChangelog(),handler:function(){c.System.ChangelogHandler.showChangelog(this)}});var h=[this._systemMenuPanelButton,this._systemChangelogButton,this._systemHistoryButton,{xtype:"tbseparator",
reorderable:!1},{xtype:"button",iconCls:"extIcon extIndex fast-system-color",text:"\u9996\u9875",reorderable:!1,power:!1,itemId:n.FAST_TAB_INDEX_ITEM_ID,cls:m.FAST_HEAD_BUTTON_CLS,handler:function(){c.NormalLayout.TabContainer.showIndex()},menuId:n.FAST_TAB_INDEX_ITEM_ID,reloadable:!0,listeners:{afterrender:function(){var g=this;this.getEl().dom.addEventListener("contextmenu",function(p){f.showContextMenu.call(g,p)})}}},{xtype:"tbitem",reorderable:!1,width:0,hidden:!0,itemId:"leftButtonAnchor"},{xtype:"tbitem",
reorderable:!1,width:0,hidden:!0,itemId:"systemMenuAnchor"},{xtype:"tbfill",reorderable:!1},{xtype:"tbitem",reorderable:!1,width:0,hidden:!0,itemId:"rightButtonAnchor"},{xtype:"button",iconCls:"extIcon extManager2 fast-system-color",text:c.System.ManagerHandler.getManagerName(),cls:m.FAST_HEAD_BUTTON_CLS,reorderable:!1,power:!1,listeners:{render:f.startFirstMinButton,mouseout:f.startMinButton,mouseover:f.startMaxButton},handler:function(){c.ManagerLayout.showManagerInfo(this)}},{xtype:"tbseparator",
reorderable:!1},{xtype:"button",iconCls:"extIcon extFullscreen fast-system-color",text:"\u8fdb\u5165\u5168\u5c4f",power:!1,cls:m.FAST_HEAD_BUTTON_CLS,reorderable:!1,listeners:{render:f.startFirstMinButton,mouseout:f.startMinButton,mouseover:f.startMaxButton},handler:function(){c.Windows.isFullscreen()?(c.Windows.outFullscreen(),this.setText("\u8fdb\u5165\u5168\u5c4f"),this.setIconCls("extIcon extFullscreen fast-system-color")):(c.Windows.inFullscreen(),this.setText("\u9000\u51fa\u5168\u5c4f"),this.setIconCls("extIcon extExitFullscreen fast-system-color"))}},
{xtype:"button",iconCls:"extIcon extMonitor fast-system-color",cls:m.FAST_HEAD_BUTTON_CLS,reorderable:!1,power:!1,text:"\u670d\u52a1\u5668\u76d1\u63a7",listeners:{render:f.startFirstMinButton,mouseout:f.startMinButton,mouseover:f.startMaxButton},handler:function(){c.DesktopLayout.showWindowPanel(this,"\u7cfb\u7edf\u76d1\u63a7\u4fe1\u606f",c.IndexLayout.getSystemMonitorPanel(!1))}},{xtype:"button",iconCls:"extIcon extExits redColor",text:"\u9000\u51fa\u767b\u5f55",cls:m.FAST_HEAD_BUTTON_CLS,reorderable:!1,
power:!1,listeners:{render:f.startFirstMinButton,mouseout:f.startMinButton,mouseover:f.startMaxButton},handler:function(){c.LoginLayout.showLogout()}}];return this._headContainer=Ext.create("Ext.toolbar.Toolbar",{height:55,border:0,power:!1,userCls:m.FAST_CONTAINER_CLS,bodyCls:m.FAST_CONTAINER_CLS,overflowHandler:"menu",items:h,plugins:[{ptype:"boxreorderer"}],listeners:{overflowbegin:function(){return!k.removeLastSystemMenuButton()},render:function(g){c.Listeners.getFire().onInitSystemHeaderItems(k.createHeadHandler());
setTimeout(function(){k.checkSystemChangelog()},1158)}}})};m.prototype.createHeadHandler=function(){var k=this;return new (function(){function h(){}h.prototype.addLeftButton=function(g){Ext.isObject(g)&&"button"===g.xtype&&(g.cls=m.FAST_HEAD_BUTTON_CLS);g.reorderable=!1;k.addHeadLeftButton(g)};h.prototype.addRightButton=function(g){Ext.isObject(g)&&"button"===g.xtype&&(g.cls=m.FAST_HEAD_BUTTON_CLS);g.reorderable=!1;k.addHeadRightButton(g)};return h}())};m.prototype.getSystemMenuButtonAnchorIndex=
function(){var k=this._headContainer.down("#systemMenuAnchor");return k?this._headContainer.items.indexOf(k)+1:1};m.prototype.getRightButtonAnchorIndex=function(){var k=this._headContainer.down("#rightButtonAnchor");return k?this._headContainer.items.indexOf(k)+1:1};m.prototype.getLeftButtonAnchorIndex=function(){var k=this._headContainer.down("#leftButtonAnchor");return k?this._headContainer.items.indexOf(k)+1:1};m.prototype.buildSystemMenuButton=function(k){var h='\x3cdiv style\x3d"line-height: 20px;display: flex;" \x3e\x3cspan\x3e'+
k.text+"\x3c/span\x3e\x26nbsp;\x26nbsp;"+c.Documents.wrapOnClick("\x3cspan class\x3d'extIcon extClose fast-ext-menu-closer' \x3e\x3c/span\x3e","FastExt.NormalLayout.TabContainer.closeByMenuId('"+k.id+"')")+"\x3c/div\x3e ";return Ext.create("Ext.button.Button",{help:c.System.MenuHandler.getPlainIconMenu(k," \x3e\x3e "),helpType:FastEnum.HelpEnumType.mouse_in_out,helpAnchor:FastEnum.TooltipAnchorType.bottom,helpShowDelay:500,cls:m.FAST_HEAD_BUTTON_CLS,text:h,overflowText:k.text,icon:c.Base.formatUrlVersion(k.icon),
itemId:k.id,menuId:k.id,systemMenuButton:!0,closeable:!0,copyable:!0,reloadable:!0,listeners:{afterrender:function(){var g=this;this.getEl().dom.addEventListener("contextmenu",function(p){f.showContextMenu.call(g,p)});this.getEl().dom.addEventListener("mousedown",function(p){0===p.button&&c.NormalLayout.TabContainer.showByMenuId(g.menuId)})}}})};m.prototype.checkSystemChangelog=function(){c.System.ChangelogHandler.autoShowChangelog(this._systemChangelogButton)};m.prototype.addSystemMenuButton=function(k,
h){c.System.InitHandler.isSilenceGlobalSaving()||!k||this.getSystemMenuButton(k.id)||(k=this.buildSystemMenuButton(k),h&&(k.systemMenuButtonChecked=!0),this._headContainer.insert(this.getSystemMenuButtonAnchorIndex(),k))};m.prototype.graySystemMenuButton=function(k){(k=this.getSystemMenuButton(k))&&k.addCls("fast-gray")};m.prototype.getSystemMenuButtons=function(){return this._headContainer.query("[systemMenuButton\x3dtrue]")};m.prototype.existSystemMenuButton=function(k){return this._headContainer.down("#"+
k)};m.prototype.getSystemMenuButton=function(k){return this._headContainer.down("#"+k)};m.prototype.countSystemMenuButton=function(){return this.getSystemMenuButtons().length};m.prototype.closeSystemMenuButton=function(k){if(k=this._headContainer.down("#"+k))k.systemMenuButtonChecked=!1,k.systemMenuButton=!1,c.Animate.startCloseAnimateByWidth(k)};m.prototype.closeAllSystemMenuButton=function(){Ext.suspendLayouts();try{for(var k=0,h=this.getSystemMenuButtons();k<h.length;k++){var g=h[k];g.SystemMenuButtonChecked=
!1;c.Animate.startCloseAnimateByWidth(g);c.NormalLayout.TabContainer.destroy(g.menuId)}c.NormalLayout.TabContainer.showIndex()}finally{Ext.resumeLayouts(!0)}};m.prototype.closeOtherSystemMenuButton=function(k){for(var h=0,g=this.getSystemMenuButtons();h<g.length;h++){var p=g[h];k&&p.menuId===k||(p.SystemMenuButtonChecked=!1,c.NormalLayout.TabContainer.destroy(p.menuId),c.Animate.startCloseAnimateByWidth(p))}};m.prototype.setActiveSystemMenuButton=function(k,h){if(!c.System.InitHandler.isSilenceGlobalSaving()){var g=
this._headContainer.down("#"+k);g&&(h?(this._lastCheckedItemId&&this.setActiveSystemMenuButton(this._lastCheckedItemId,!1),this._lastCheckedItemId=k,g.systemMenuButtonChecked=!0,g.addCls("fast-system-head-button-checked"),g.removeCls("fast-gray"),g.safeFocus(100)):(g.systemMenuButtonChecked=!1,g.removeCls("fast-system-head-button-checked")))}};m.prototype.removeLastSystemMenuButton=function(){var k=this.getSystemMenuButtons();if(1===k.length)return!1;if(this.hasLastButtonToHide())return!0;for(var h=
k.length-1;0<=h;h--){var g=k[h];if(this.getActiveSystemMenuButton()!==g)return g.lastButtonToHide=!0,c.NormalLayout.TabContainer.hideByMenuId(g.itemId),!0}return!1};m.prototype.getActiveSystemMenuButton=function(){return this._headContainer.down("[systemMenuButtonChecked\x3dtrue]")};m.prototype.doActiveSystemMenuButton=function(){Ext.suspendLayouts();try{if(!this.getActiveSystemMenuButton()){var k=this.getSystemMenuButtons();0<k.length?c.NormalLayout.TabContainer.showByMenuId(k[0].menuId):c.NormalLayout.TabContainer.showIndex()}}finally{Ext.resumeLayouts(!0)}};
m.prototype.hasLastButtonToHide=function(){return this._headContainer.down("[lastButtonToHide\x3dtrue]")};m.prototype.addHeadRightButton=function(k){k&&(k=this._headContainer.insert(this.getRightButtonAnchorIndex(),k),"button"===k.xtype&&(k.on("render",f.startFirstMinButton),k.on("mouseout",f.startMinButton),k.on("mouseover",f.startMaxButton)))};m.prototype.addHeadLeftButton=function(k){k&&this._headContainer.insert(this.getLeftButtonAnchorIndex(),k)};m.prototype.refreshButtons=function(){this.refreshMenuPanelButton();
0===c.NormalLayout.HistoryHandler.getHistory().length?c.Animate.startHideAnimateByWidth(this._systemHistoryButton):this._systemHistoryButton.setHidden(!1)};m.prototype.refreshMenuPanelButton=function(){this._systemMenuPanelButton&&(c.NormalLayout.TreeMenuContainer.isExpendedMenuPanel()?this._systemMenuPanelButton.setIconCls("extIcon extArrowLeft3 grayColor"):this._systemMenuPanelButton.setIconCls("extIcon extArrowRight3 grayColor"))};m.prototype.showMenuHistory=function(){var k=this;this._historyMenu=
Ext.create("Ext.menu.Menu",{padding:"0 0 0 0",power:!1,showSeparator:!1,style:{background:"#ffffff"},listeners:{hide:{scope:this}}});this._historyMenu.add({text:"\u6e05\u7a7a\u5386\u53f2\u83dc\u5355",iconCls:"extIcon extClear grayColor",handler:function(){k.clearMenuHistory();c.Dialog.toast("\u6e05\u9664\u6210\u529f\uff01")}});this._historyMenu.add("-");for(var h=function(r){g._historyMenu.add({text:c.System.MenuHandler.getPlainMenu(r," \x3e "),icon:r.icon,handler:function(){c.NormalLayout.TabContainer.showByMenuId(r.id)}})},
g=this,p=0,q=c.NormalLayout.HistoryHandler.getHistory();p<q.length;p++)h(q[p]);this._historyMenu.showBy(this._systemHistoryButton,"tl-bl?")};m.prototype.clearMenuHistory=function(){for(var k=0,h=c.NormalLayout.HistoryHandler.getHistory();k<h.length;k++){var g=h[k];this.existSystemMenuButton(g.menuId)||c.NormalLayout.TabContainer.destroy(g.menuId)}c.NormalLayout.HistoryHandler.clearHistory();this.refreshButtons()};m.FAST_CONTAINER_CLS="fast-system-head-container";m.FAST_HEAD_BUTTON_CLS="fast-system-head-button";
return m}(),f=function(){function m(){}m.showContextMenu=function(k){var h=this;Ext.create("Ext.menu.Menu",{items:[{text:"\u5173\u95ed\u5f53\u524d",iconCls:"extIcon extClose",disabled:!h.closeable,handler:function(){c.NormalLayout.TabContainer.closeByMenuId(h.menuId)}},"-",{text:"\u5173\u95ed\u5176\u4ed6\u6807\u7b7e",iconCls:"extIcon extCloseOther",handler:function(){c.NormalLayout.HeadBarContainer.closeOtherSystemMenuButton(h.menuId)}},{text:"\u5173\u95ed\u6240\u6709\u6807\u7b7e",iconCls:"extIcon extCloseAll",
handler:function(){c.NormalLayout.HeadBarContainer.closeAllSystemMenuButton()}},"-",{text:"\u590d\u5236\u6807\u7b7e",iconCls:"extIcon extCopy",disabled:!h.copyable,handler:function(){c.NormalLayout.TabContainer.copy(h.menuId)}},{text:"\u590d\u5236\u6807\u7b7e\u5730\u5740",iconCls:"extIcon extLink",disabled:!h.copyable,handler:function(){c.NormalLayout.TabContainer.copyUrl(h.menuId)}},{text:"\u91cd\u65b0\u52a0\u8f7d",iconCls:"extIcon extReset",disabled:!h.reloadable,handler:function(){c.NormalLayout.TabContainer.reload(h.menuId)}}],
listeners:{hide:function(){this.delayClose(100)}}}).showAt({x:k.x,y:k.y})};m.startFirstMinButton=function(){c.Animate.startMinButtonAnimateByWidth(this,1500)};m.startMinButton=function(){c.Animate.startMinButtonAnimateByWidth(this,0)};m.startMaxButton=function(){FastOverrider.BoxReordererOverrider.DRAGGING||c.Animate.startMaxButtonAnimateByWidth(this,300)};return m}(),l=function(){function m(){this._historyMenus=[]}m.prototype.existHistory=function(k){if(c.System.InitHandler.isSilenceGlobalSaving())return!0;
for(var h=0,g=this._historyMenus;h<g.length;h++){var p=g[h];if(p&&p.id===k)return!0}return!1};m.prototype.addHistory=function(k){!k||c.System.InitHandler.isSilenceGlobalSaving()||k._clone||(this.existHistory(k.id)?this.bringHistoryToFirst(k.id):(this._historyMenus=Ext.Array.insert(this._historyMenus,0,[k]),this.storeHistory()))};m.prototype.removeHistory=function(k){if(!c.System.InitHandler.isSilenceGlobalSaving()){for(var h=[],g=0,p=this._historyMenus;g<p.length;g++){var q=p[g];q.id===k&&h.push(q)}for(k=
0;k<h.length;k++)this._historyMenus=Ext.Array.remove(this._historyMenus,h[k])}};m.prototype.clearHistory=function(){this._historyMenus=[]};m.prototype.getHistory=function(){return this._historyMenus};m.prototype.bringHistoryToFirst=function(k){if(!c.System.InitHandler.isSilenceGlobalSaving()){for(var h=[],g=0,p=this._historyMenus;g<p.length;g++){var q=p[g];q.id===k&&h.push(q)}for(k=0;k<h.length;k++)this._historyMenus=Ext.Array.remove(this._historyMenus,h[k]);this._historyMenus=Ext.Array.insert(this._historyMenus,
0,h)}};m.prototype.storeHistory=function(){for(var k=[],h=0,g=this._historyMenus;h<g.length;h++)k.push(g[h].id);c.Cache.setCache("HistoryMenus",k)};m.prototype.restoreHistory=function(){var k=c.Cache.getCache("HistoryMenus");if(k)for(var h=0;h<k.length;h++){var g=k[h];if(!this.existHistory(g)&&((g=c.System.MenuHandler.getMenu(g))&&this._historyMenus.push(g),10<=this._historyMenus.length))break}};return m}()})(FastExt||(FastExt={}));
(function(c){var u=function(){function b(){}b.addListener=function(a){this._listeners.push(a)};b.getListeners=function(){return this._listeners};b.getFire=function(){return new n};b._listeners=[];return b}();c.Listeners=u;var n=function(){function b(){}b.prototype.getListeners=function(){return c.Listeners.getListeners()};b.prototype.checkMethod=function(a){return"function"===typeof a};b.prototype.onAfterInitSystem=function(){for(var a=0,d=this.getListeners();a<d.length;a++){var e=d[a];if(this.checkMethod(e.onAfterInitSystem))e.onAfterInitSystem()}};
b.prototype.onAfterManagerLogin=function(a){for(var d=function(){c.Base.runCallBack(a)},e=0,f=0,l=this.getListeners();f<l.length;f++){var m=l[f];this.checkMethod(m.onAfterManagerLogin)&&(e++,m.onAfterManagerLogin(d))}0===e&&a()};b.prototype.onBeforeEditorField=function(a,d){for(var e=0,f=this.getListeners();e<f.length;e++){var l=f[e];if(this.checkMethod(l.onBeforeEditorField)&&!l.onBeforeEditorField(a,d))return!1}return!0};b.prototype.onBeforeManagerLogin=function(a,d){for(var e=function(){c.Base.runCallBack(d)},
f=0,l=0,m=this.getListeners();l<m.length;l++){var k=m[l];this.checkMethod(k.onBeforeManagerLogin)&&(f++,k.onBeforeManagerLogin(a,e))}0===f&&d()};b.prototype.onSystemReady=function(){for(var a=0,d=this.getListeners();a<d.length;a++){var e=d[a];if(this.checkMethod(e.onSystemReady))e.onSystemReady()}};b.prototype.onInitLinkFieldDefaultValue=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onInitLinkFieldDefaultValue)&&(f=f.onInitLinkFieldDefaultValue(a)))return f}};
b.prototype.onInitLoginPanel=function(a,d){for(var e=0,f=this.getListeners();e<f.length;e++){var l=f[e];if(this.checkMethod(l.onInitLoginPanel))l.onInitLoginPanel(a,d)}};b.prototype.onInitSystemHeaderItems=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onInitSystemHeaderItems))f.onInitSystemHeaderItems(a)}};b.prototype.onInitSystemWelcomeItems=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onInitSystemWelcomeItems))f.onInitSystemWelcomeItems(a)}};
b.prototype.onShowManagerDataLayer=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onShowManagerDataLayer))f.onShowManagerDataLayer(a)}};b.prototype.onShowManagerInfo=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onShowManagerInfo))f.onShowManagerInfo(a)}};b.prototype.onShowRoleDataLayer=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onShowRoleDataLayer))f.onShowRoleDataLayer(a)}};
b.prototype.onSystemNoticeShow=function(){for(var a=0,d=this.getListeners();a<d.length;a++){var e=d[a];if(this.checkMethod(e.onSystemNoticeShow))e.onSystemNoticeShow()}};b.prototype.onExtCreateFilter=function(a,d){for(var e=0,f=this.getListeners();e<f.length;e++){var l=f[e];if(this.checkMethod(l.onExtCreateFilter))l.onExtCreateFilter(a,d)}};b.prototype.onEntityGetColumnRender=function(a,d){for(var e=0,f=this.getListeners();e<f.length;e++){var l=f[e];if(this.checkMethod(l.onEntityGetColumnRender)&&
(l=l.onEntityGetColumnRender(a,d)))return l}};b.prototype.onEntityGetEditorField=function(a,d){for(var e=0,f=this.getListeners();e<f.length;e++){var l=f[e];if(this.checkMethod(l.onEntityGetEditorField)&&(l=l.onEntityGetEditorField(a,d)))return l}};b.prototype.onSystemInitMenu=function(a){for(var d=0,e=this.getListeners();d<e.length;d++){var f=e[d];if(this.checkMethod(f.onSystemInitMenu)&&!f.onSystemInitMenu(a))return!1}return!0};return b}();u=function(){return function(b){this.enable=!0;if(b)for(var a in b)this[a]=
b[a]}}();c.ExtCreateFilter=u;u=function(){return function(){}}();c.ComponentInvokeInfo=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loadJsonAnim=function(b,a,d){var e=c.Base.buildOnlyCode("LTE");b.update('\x3cdiv id\x3d"'+e+'" \x3e\x3c/div\x3e');c.Lottie.loadJsonAnimByEl(document.getElementById(e),a,d)};n.loadJsonAnimByEl=function(b,a,d){b?(Ext.isEmpty(b.id)&&(b.id="fastchar-id-"+$.md5(c.Base.buildUUID16())),$(b).addClass("fast-lottie-container"),c.Cache.memory[b.id+"Lottie"]=lottie.loadAnimation({container:b,renderer:"svg",loop:!0,autoplay:!0,path:a}),c.Cache.memory[b.id+"Lottie"].cacheId=
b.id+"Lottie",d&&c.Cache.memory[b.id+"Lottie"].addEventListener("data_ready",d)):console.error("\u52a0\u8f7dLottie\u52a8\u753b\u5931\u8d25\uff01\u65e0\u6cd5\u83b7\u53d6\u76ee\u6807\u63a7\u4ef6\u7684BodyElement\uff01")};n.unloadJsonAnim=function(b){if(b=c.Lottie.getLottie(b))b.destroy(),c.Cache.memory[b.cacheId]=null};n.unloadJsonAnimByEl=function(b){if(b=c.Lottie.getLottieByEl(b))b.destroy(),c.Cache.memory[b.cacheId]=null};n.unloadJsonAnimById=function(b){if(b=c.Lottie.getLottieByElId(b))b.destroy(),
c.Cache.memory[b.cacheId]=null};n.getLottie=function(b){return c.Lottie.getLottieByEl(c.Base.getTargetBodyElement(b))};n.getLottieByEl=function(b){return b?c.Lottie.getLottieByElId(b.id):null};n.getLottieByElId=function(b){return c.Cache.memory[b+"Lottie"]};n.showLottie=function(b,a){b=parseInt((.6*document.body.clientWidth).toFixed(0));var d=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{title:"\u67e5\u770b\u52a8\u6548",height:d,width:b,layout:"border",resizable:!0,
maximizable:!0,constrain:!0,modal:!0,padding:"10 10 10 10",bodyStyle:{background:"#ffffff"},listeners:{show:function(e){e.setLoading("\u52a0\u8f7d\u52a8\u6548\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.Lottie.loadJsonAnim(e,a,function(){e.setLoading(!1)})}}}).show()};return n}();c.Lottie=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function h(){}h.__onLoaded=function(){window._AMapSecurityConfig={securityJsCode:c.System.ConfigHandler.getAMapSecurity()}};h.getMapJsUrl=function(){return"https://webapi.amap.com/maps?v\x3d"+c.System.ConfigHandler.getAMapVersion()+"\x26key\x3d"+c.System.ConfigHandler.getAMapKey()};h.loadMap=function(g,p){c.AMapLoader.loadMapByEl(c.Base.getTargetBodyElement(g),p)};h.loadMapByEl=function(g,p){c.PluginLoader.loadPlugins("AMap",[{type:"js",src:this.getMapJsUrl()}],function(){g?
(Ext.isEmpty(g.id)&&(g.id="fastchar-id-"+$.md5(c.Base.buildUUID16())),AMap.plugin("AMap.ControlBar AMap.ToolBar AMap.Scale AMap.HawkEye AMap.MapType AMap.Geolocation AMap.PlaceSearch AMap.Geocoder AMap.MouseTool AMap.RectangleEditor AMap.PolygonEditor".split(" "),function(){var q=new AMap.Map(g,{viewMode:"3D",resizeEnable:!0,pitchEnable:!0,rotateEnable:!0,terrain:!0});q.cacheId=g.id+"Map";c.Cache.memory[q.cacheId]=q;q.addControl(new AMap.ToolBar);q.addControl(new AMap.Scale);q.addControl(new AMap.MapType);
q.addControl(new AMap.ControlBar);q.geocoder=new AMap.Geocoder({radius:1E3,extensions:"all"});q.geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1E4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});q.on("complete",p)})):console.error("\u52a0\u8f7d\u9ad8\u5fb7\u5730\u56fe\u5931\u8d25\uff01\u65e0\u6cd5\u83b7\u53d6\u76ee\u6807\u63a7\u4ef6\u7684BodyElement\uff01")})};h.getMap=function(g){return c.AMapLoader.getMapByEl(c.Base.getTargetBodyElement(g))};h.getMapByEl=function(g){return g?
c.AMapLoader.getMapByElId(g.id):null};h.getMapByElId=function(g){return c.Cache.memory[g+"Map"]};return h}();c.AMapLoader=u;var n=function(){function h(){}h.parseAMapBounds=function(g,p){return g&&p?new AMap.Bounds(c.AMapHelper.parseAMapLngLat(g),c.AMapHelper.parseAMapLngLat(p)):null};h.amapBoundsToStringArray=function(g){return g?[c.AMapHelper.amapLngLatToString(g.southWest),c.AMapHelper.amapLngLatToString(g.northEast)]:null};h.parseAMapLngLat=function(g){return g?(g=g.toString().replace(" ","").replace(" ",
""),new AMap.LngLat(g.split(",")[0],g.split(",")[1])):null};h.amapLngLatToString=function(g){return g?g.lng+","+g.lat:null};h.parseAMapLngLatArray=function(g){if(!g)return null;for(var p=[],q=0;q<g.length;q++)p.push(c.AMapHelper.parseAMapLngLat(g[q]));return p};h.amapLngLatArrayToStringArray=function(g){for(var p=[],q=0;q<g.length;q++)p.push(c.AMapHelper.amapLngLatToString(g[q]));return p};h.amapConvertFrom=function(g,p){return new Ext.Promise(function(q){Ext.isEmpty(p)?q([g]):AMap.convertFrom(g,
p,function(r,t){"ok"===t.info?q(t.locations):q(null)})})};h.plainStringToAMapLngLat=function(g,p){g=h.convertDMS(h.convertStringDMSToArray(g));p=h.convertDMS(h.convertStringDMSToArray(p));return new AMap.LngLat(g,p)};h.convertStringDMSToArray=function(g){var p="",q=[],r=0;for(g=g.split("");r<g.length;r++){var t=g[r];"\u00b0"===t||"\u2032"===t||"\u2033"===t?(q.push(parseFloat(p)),p=""):p+=t}return q};h.convertDMS=function(g){var p=g[0];return(0>p?-1:1)*(Math.abs(p)+g[1]/60+g[2]/3600)};return h}();
c.AMapHelper=n;var b=function(){function h(g){this._map=g}Object.defineProperty(h.prototype,"map",{get:function(){return this._map},set:function(g){this._map=g},enumerable:!1,configurable:!0});h.prototype.destroy=function(){this.map.destroy()};h.prototype.on=function(g,p){this.map.on(g,p)};h.prototype.off=function(g,p){this.map.off(g,p)};h.prototype.clearEvents=function(g){this.map.clearEvents(g)};h.prototype.fitView=function(g){g?this.map.setFitView(g,!1,[60,60,60,60],10):this.map.setFitView()};
h.prototype.setZoom=function(g){this.map.setZoom(g)};h.prototype.setZoomAndCenter=function(g,p){this.map.setZoomAndCenter(g,p)};h.prototype.safeStartLocation=function(){var g=this;return new Ext.Promise(function(p){g.map.geolocation.getCityInfo(function(q,r){q="complete"===q?new AMap.LngLat(r.position[0],r.position[1],!0):new AMap.LngLat(116.410394,39.934376,!0);p(q)})})};h.prototype.computeAMapBoundsSizeToContainer=function(g){var p=this.map.lngLatToContainer(g.southWest);g=this.map.lngLatToContainer(g.northEast);
var q=Math.abs(p.round().y-g.round().y);return{width:Math.abs(g.round().x-p.round().x),height:q}};h.prototype.getOverlay=function(g){for(var p=0,q=this.map.getAllOverlays();p<q.length;p++){var r=q[p];if(r._opts&&r._opts.selfId===g)return r}return null};h.prototype.getEnabledEditorOverlay=function(g){for(var p=[],q=0,r=this.map.getAllOverlays();q<r.length;q++){var t=r[q];t.__enabledEditor&&t.__type&&t.__type===g&&p.push(t)}return p};h.prototype.removeOverlay=function(g){(g=this.getOverlay(g))&&g.editor&&
g.editor.close();g&&this.map.remove(g)};h.prototype.getLayer=function(g){for(var p=0,q=this.map.getLayers();p<q.length;p++){var r=q[p];if(r._opts&&r._opts.selfId===g)return r}return null};h.prototype.removeLayer=function(g){(g=this.getLayer(g))&&g.editor&&g.editor.close();g&&this.map.remove(g)};h.prototype.searchAddress=function(g){var p=this;return new Ext.Promise(function(q){p.map.geocoder.getLocation(g,function(r,t){"complete"===r.toString().toLowerCase()&&"ok"===t.info.toString().toLowerCase()&&
0<parseInt(t.resultNum)?q({map:p.map,result:t}):"no_data"===r&&q(null)})})};h.prototype.searchLngLat=function(g){var p=this;return new Ext.Promise(function(q){p.map.geocoder.getAddress(g,function(r,t){"complete"===r.toString().toLowerCase()&&"ok"===t.info.toString().toLowerCase()?q({map:p.map,result:t}):"no_data"===r&&q(null)})})};h.prototype.addRectangleOverlay=function(g){var p=this;if(!g)return null;var q=c.AMapHelper.parseAMapBounds(g.southWestLngLat,g.northEastLngLat);if(!q)return null;var r=
this.getRectangleOverlay(g);r||(r=new AMap.Rectangle({selfId:g.title,bounds:q,fillColor:g.fillColor,strokeColor:g.strokeColor,zIndex:g.zIndex}));this.map.add(r);g.sizeToContainer=this.computeAMapBoundsSizeToContainer(r.getBounds());g.notifyChange();g.imageLayerParam&&this.addImageLayer(g.bindImageLayer());if(g.enabledEditor){(q=r.editor)||(q=new AMap.RectangleEditor(this.map,r));var t=function(v){var w=c.AMapHelper.amapBoundsToStringArray(v.target.ir);g.southWestLngLat=w[0];g.northEastLngLat=w[1];
g.sizeToContainer=p.computeAMapBoundsSizeToContainer(v.target.ir);g.notifyChange();g.imageLayerParam&&p.addImageLayer(g.bindImageLayer())};q.clearEvents("adjust");q.clearEvents("move");q.on("adjust",t);q.on("move",t);q.open();r.editor=q}return r};h.prototype.getRectangleOverlay=function(g){return g?this.getOverlay(g.title):null};h.prototype.removeRectangleOverlay=function(g){g&&this.removeOverlay(g.title)};h.prototype.addPolygonOverlay=function(g){if(!g)return null;var p=c.AMapHelper.parseAMapLngLatArray(g.path);
if(!p)return null;var q=this.getPolygonOverlay(g);q||(q=new AMap.Polygon({selfId:g.title,path:p,fillColor:g.fillColor,strokeColor:g.strokeColor,zIndex:g.zIndex}));this.map.add(q);g.notifyChange();if(g.enabledEditor){(p=q.editor)||(p=new AMap.PolygonEditor(this.map,q));var r=function(t){g.path=c.AMapHelper.amapLngLatArrayToStringArray(t.target.getPath());g.notifyChange()};p.clearEvents("adjust");p.clearEvents("move");p.on("adjust",r);p.on("move",r);p.open();q.editor=p}return q};h.prototype.getPolygonOverlay=
function(g){return g?this.getOverlay(g.title):null};h.prototype.removePolygonOverlay=function(g){g&&this.removeOverlay(g.title)};h.prototype.addDistrictLayer=function(g){if(!g)return null;if(g.adcode&&0<g.adcode.length){var p=this.getDistrictLayer(g);p||(p=new AMap.DistrictLayer.Province({selfId:g.title,depth:g.depth,zIndex:g.zIndex,styles:{fill:g.fill,"province-stroke":g.province_stroke,"city-stroke":g.city_stroke,"county-stroke":g.county_stroke}}));p.setAdcode(g.adcode);p.setMap(this.map);return p}return null};
h.prototype.getDistrictLayer=function(g){return g?this.getLayer(g.title):null};h.prototype.removeDistrictLayer=function(g){g&&this.removeLayer(g.title)};h.prototype.addImageLayer=function(g){if(!g)return null;var p=c.AMapHelper.parseAMapBounds(g.southWestLngLat,g.northEastLngLat);if(!p)return null;var q=this.getImageLayer(g);q||(q=new AMap.ImageLayer({selfId:g.title,url:g.url,zIndex:g.zIndex}),this.map.add(q));q.setBounds(p);return q};h.prototype.getImageLayer=function(g){return g?this.getLayer(g.title):
null};h.prototype.removeImageLayer=function(g){g&&this.removeLayer(g.title)};h.prototype.addMarkerOverlay=function(g){var p=this;if(!g)return null;if(g.isEmptyLngLat()&&g.enabledEditor&&g.enabledLocation){var q=c.System.ConfigHandler.getConfig("amap_default_lnglat").value;if(q){q=c.AMapHelper.parseAMapLngLat(q);g.lnglat=q;g.lng=q.lng;g.lat=q.lat;this.addMarkerOverlay(g);var r=c.System.ConfigHandler.getConfig("amap_default_zoom").value;Ext.isEmpty(r)&&(r=14);this.setZoomAndCenter(parseFloat(r),q)}else g.showLoading("\u83b7\u53d6\u5f53\u524d\u5b9a\u4f4d\u4fe1\u606f\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026"),
this.safeStartLocation().then(function(v){g.hideLoading();g.lng=v.lng;g.lat=v.lat;p.addMarkerOverlay(g)})}else{q=null;q=g.lnglat?c.AMapHelper.parseAMapLngLat(g.lnglat):new AMap.LngLat(g.lng,g.lat);if(!q)return null;var t=this.getMarkerOverlay(g);t||(t=new AMap.Marker({selfId:g.title,position:q,draggable:g.enabledEditor,cursor:g.enabledEditor?"move":"default",raiseOnDrag:!0}),t.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)}));t.searchLngLat=function(v){this.infoWindow&&this.infoWindow.close();
g.lnglat=c.AMapHelper.amapLngLatToString(v);g.lng=v.lng;g.lat=v.lat;g.showLoading("\u641c\u7d22\u4f4d\u7f6e\u4fe1\u606f\u4e2d\uff0c\u8bf7\u7a0d\u5019\u2026\u2026");(new h(this.getMap())).searchLngLat(v).then(function(w){g.hideLoading();w&&t.updateRegeocode(v,w.result.regeocode)})};t.updateRegeocode=function(v,w){g.address=w.formattedAddress;g.province=w.province;g.city=w.city;g.district=w.district;g.lng=v.lng;g.lat=v.lat;g.lnglat=c.AMapHelper.amapLngLatToString(v);this.setPosition(v);g.enabledEditor&&
g.enabledMapFlowCenter&&(0<g.zoom&&g.zoom>this.getMap().getZoom()?this.getMap().setZoomAndCenter(g.zoom,v):this.getMap().setCenter(v));g.notifyChange()};t.__enabledEditor=g.enabledEditor;t.__type=g.type;t.clearEvents("click");t.on("click",function(){if(this.infoWindow){var v=g.address;v||(v="");var w=this.getPosition();this.infoWindow.setContent("\x3cdiv\x3e"+v+"\u3010"+g.lnglat+"\u3011\x3c/div\x3e");this.infoWindow.open(this.getMap(),w);this.getMap().setCenter(w)}});if(g.enabledEditor&&(t.clearEvents("dragstart"),
t.clearEvents("dragend"),t.on("dragstart",function(){this.infoWindow&&this.infoWindow.close()}),t.on("dragend",function(){t.searchLngLat(this.getPosition())}),g.enabledMapClickLocation))this.on("click",function(v){t.searchLngLat(v.lnglat)});t.setMap(this.map);return t}};h.prototype.getMarkerOverlay=function(g){return g?this.getOverlay(g.title):null};h.prototype.removeMarkerOverlay=function(g){g&&this.removeOverlay(g.title)};h.prototype.beginDrawRectangleOverlay=function(g){var p=this;this.removeRectangleOverlay(g);
var q=new AMap.MouseTool(this.map);q.rectangle({fillColor:g.fillColor,strokeColor:g.strokeColor});q.on("draw",function(r){q.close(!0);r=c.AMapHelper.amapBoundsToStringArray(r.obj.ir);g.southWestLngLat=r[0];g.northEastLngLat=r[1];p.addRectangleOverlay(g)})};h.prototype.beginDrawPolygonOverlay=function(g){var p=this;this.removePolygonOverlay(g);var q=new AMap.MouseTool(this.map);q.polygon({fillColor:g.fillColor,strokeColor:g.strokeColor});q.on("draw",function(r){q.close(!0);g.path=c.AMapHelper.amapLngLatArrayToStringArray(r.obj.getPath());
p.addPolygonOverlay(g)})};return h}();c.AMapObject=b;var a=function(h){function g(p){var q=h.call(this)||this;q.cmb=p;return q}__extends(g,h);Object.defineProperty(g.prototype,"map",{get:function(){this._map||(this._map=c.AMapLoader.getMap(this.cmb))||console.error("\u76ee\u6807\u63a7\u4ef6\u672a\u7ed1\u5b9aMap\u5bf9\u8c61\uff01",this.cmb);return this._map},enumerable:!1,configurable:!0});return g}(b);c.AMapComponent=a;u=function(){function h(){}h.buildMapPanel=function(g){return Ext.create("Ext.panel.Panel",
{layout:"border",region:"center",itemId:"mapContainer",border:0,loadMap:function(){var p=this;this.setLoading("\u52a0\u8f7d\u5730\u56fe\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");c.AMapLoader.loadMap(this,function(){p.setLoading(!1);p.initMapMoreView();p.initMapLayers();p.refreshResult()})},destroyMap:function(){(new a(this)).destroy()},initMapMoreView:function(){var p="mapLevelText"+c.Base.buildOnlyCode("MV"),q='\x3cdiv id\x3d"levelControl" class\x3d"amap-control" style\x3d"left: 15px;bottom: 60px;background: #ffffffb0;padding: 5px 10px;"\x3e\x3cspan id\x3d\''+
p+'\' style\x3d"color: rgb(0, 0, 0);font-size: small;"\x3e0\u7ea7\u522b\x3c/span\x3e\x3c/div\x3e',r=document.createElement("div");r.innerHTML=q;c.Base.getTargetBodyElement(this).appendChild(r);(new a(this)).on("zoomchange",function(){document.getElementById(p).innerHTML=this.getZoom()+"\x26nbsp;\u7ea7\u522b"})},refreshResult:function(){for(var p=[],q=0,r=g.wrapItems();q<r.length;q++){var t=r[q];t.toResultInfo&&p.push(t.toResultInfo())}(q=this.up("#mapWindow"))&&(q=q.down("#selectResult"))&&q.setValue(p.join(" "))},
initMapLayers:function(){for(var p=new a(this),q=[],r=0,t=g.wrapItems();r<t.length;r++){var v=t[r];v.type===FastEnum.MapItemType.rectangle_overlay?(v=p.addRectangleOverlay(v))&&q.push(v):v.type===FastEnum.MapItemType.polygon_overlay?(v=p.addPolygonOverlay(v))&&q.push(v):v.type===FastEnum.MapItemType.image_layer?(v=p.addImageLayer(v))&&q.push(v):v.type===FastEnum.MapItemType.district_layer?p.addDistrictLayer(v):v.type===FastEnum.MapItemType.marker_overlay&&(v=p.addMarkerOverlay(v))&&q.push(v)}p.fitView(q)}})};
h.select=function(g,p){p=d.newParam(p);return new Ext.Promise(function(q){for(var r=Ext.create("Ext.form.FormPanel",{method:"POST",region:"north",itemId:"mapSearchFormPanel",autoScroll:!1,scrollable:!1,layout:{type:"hbox",align:"middle",pack:"start"},defaults:{margin:"5 5 5 5"},refreshSearchLayout:function(){var y=this.getField("searchAddress"),A=this.getField("searchAddress2"),B=this.getField("searchType"),C=B.getValue();B=B.getDisplayValue();y.code="SearchMapA"+C;A.code="SearchMapB"+C;y.setValue(null);
A.setValue(null);y.checkHistory();A.checkHistory();1!==C?(A.setHidden(!1),A.allowBlank=!1,y.setEmptyText("\u8bf7\u8f93\u5165"+B+"\u3010\u7ecf\u5ea6\u3011"),A.setEmptyText("\u8bf7\u8f93\u5165"+B+"\u3010\u7eac\u5ea6\u3011")):(A.setHidden(!0),A.allowBlank=!0,y.setEmptyText("\u8bf7\u8f93\u5165"+B))},items:[{xtype:"combobox",width:160,name:"searchType",itemId:"searchType",editable:!1,displayField:"text",valueField:"id",value:1,store:Ext.create("Ext.data.Store",{fields:["id","text"],data:[{text:"\u6587\u672c\u4f4d\u7f6e\u641c\u7d22",
id:1},{text:"\u9ad8\u5fb7\u5750\u6807\u641c\u7d22",id:2},{text:"\u767e\u5ea6\u5750\u6807\u641c\u7d22",id:3},{text:"GPS\u5750\u6807\u641c\u7d22",id:4},{text:"\u5ea6\u5206\u79d2\u641c\u7d22",id:5}]}),listeners:{change:function(y,A,B,C){y.ownerCt.refreshSearchLayout()}}},{name:"searchAddress",columnWidth:1,itemId:"searchAddress",flex:1,useHistory:!0,emptyText:"\u8f93\u5165\u5730\u5740",allowBlank:!1,xtype:"textfield"},{name:"searchAddress2",columnWidth:1,itemId:"searchAddress2",flex:1,hidden:!0,useHistory:!0,
emptyText:"\u8f93\u5165\u5730\u5740",xtype:"textfield"},{xtype:"button",iconCls:"extIcon extSearch",text:"\u641c\u7d22\u4f4d\u7f6e",handler:function(){var y=this.up("#mapSearchFormPanel");if(y.getForm().isValid()){var A=y.up("#mapWindow"),B=y.getFieldValue("searchAddress"),C=y.getFieldValue("searchAddress2"),H=y.getField("searchType");y=H.getValue();H=H.getDisplayValue();A.setLoading("\u6b63\u5728"+H+"\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");var I=new a(A.down("#mapContainer"));if(1===y)I.searchAddress(B).then(function(E){A.setLoading(!1);
if(E){var F=E.result.geocodes[0];E.map.setCenter(F.location);if(p.showSearchADLayer){var G=m.newParam({title:"\u641c\u7d22\u7ed3\u679c\u7684\u533a\u57df\u56fe\u5c42",adcode:[F.adcode]});E=new b(E.map);E.removeOverlay(G.title);E.addDistrictLayer(G)}G=0;for(E=I.getEnabledEditorOverlay(FastEnum.MapItemType.marker_overlay);G<E.length;G++)E[G].updateRegeocode(F.location,F);c.Dialog.toast("\u5730\u56fe\u5df2\u5207\u6362\u5230\uff1a"+F.formattedAddress)}else c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192",
"\u672a\u68c0\u7d22\u5230\u4f4d\u7f6e\u4fe1\u606f\uff01")});else{var D=H=null;2===y?H=n.parseAMapLngLat(B+","+C):3===y?(D="baidu",H=[B,C]):4===y?(D="gps",H=[B,C]):5===y&&(H=n.plainStringToAMapLngLat(B,C));n.amapConvertFrom(H,D).then(function(E){if(E){var F=E[0];(E=I.getOverlay("SelectPosition"))?(A.setLoading(!1),E.searchLngLat(F)):I.searchLngLat(F).then(function(G){A.setLoading(!1);if(G){var J=G.result.regeocode;G.map.setCenter(F);if(p.showSearchADLayer){var K=m.newParam({title:"\u641c\u7d22\u7ed3\u679c\u7684\u533a\u57df\u56fe\u5c42",
adcode:[J.addressComponent.adcode]});G=new b(G.map);G.removeOverlay(K.title);G.addDistrictLayer(K)}c.Dialog.toast("\u5730\u56fe\u5df2\u5207\u6362\u5230\uff1a"+J.formattedAddress)}else c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u672a\u68c0\u7d22\u5230\u4f4d\u7f6e\u4fe1\u606f\uff01")})}else c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u5750\u6807\u8f6c\u6362\u5f02\u5e38\uff01")})}}}}]}),t=c.AMapDialog.buildMapPanel(p),v=[],w=function(y){if(!y.enabledEditor)return"continue";y.onChange=function(){t.refreshResult()};
y.showLoading=function(A){t.setLoading(A)};y.hideLoading=function(){t.setLoading(!1)};y.type===FastEnum.MapItemType.rectangle_overlay?v.push({text:y.title,iconCls:"extIcon extMouseClick",handler:function(){c.Dialog.showTip("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u5728\u5730\u56fe\u4e0a\u957f\u6309\u9f20\u6807\u5de6\u952e\u62d6\u62fd\uff0c\u5f00\u59cb\u9009\u62e9\u77e9\u5f62\u533a\u57df\uff01",function(){c.Dialog.toast("\u8bf7\u5f00\u59cb\u4f60\u7684\u9009\u62e9\uff01");(new a(t)).beginDrawRectangleOverlay(y)})}}):
y.type===FastEnum.MapItemType.polygon_overlay&&v.push({text:y.title,iconCls:"extIcon extMouseClick",handler:function(){c.Dialog.showTip("\u7cfb\u7edf\u63d0\u9192","\u8bf7\u5728\u5730\u56fe\u4e0a\u70b9\u51fb\u9f20\u6807\u5de6\u952e\u5f00\u59cb\u70b9\u9009\u591a\u8fb9\u5f62\u533a\u57df\uff0c\u70b9\u51fb\u9f20\u6807\u53f3\u952e\u7ed3\u675f\u9009\u62e9\uff01",function(){c.Dialog.toast("\u8bf7\u5f00\u59cb\u4f60\u7684\u9009\u62e9\uff01");(new a(t)).beginDrawPolygonOverlay(y)})}})},z=0,x=p.wrapItems();z<
x.length;z++)w(x[z]);w={xtype:"button",width:160,text:"\u5f00\u59cb\u9009\u62e9",hidden:0===v.length,iconCls:"extIcon extMore",menu:v};1===v.length&&(w={xtype:"button",text:v[0].text,iconCls:"extIcon extMouseClick",handler:v[0].handler});w=Ext.create("Ext.panel.Panel",{layout:"column",region:"south",itemId:"bottomContainer",border:0,defaults:{margin:"5 5 5 5"},padding:"10 10 10 10",style:{background:"#ffffff"},items:[{xtype:"textfield",itemId:"selectResult",readOnly:!0,columnWidth:1},{xtype:"panel",
layout:"column",columnWidth:1,border:0,defaults:{margin:"5 5 5 5"},items:[{xtype:"button",columnWidth:1,text:"\u786e\u5b9a\u9009\u62e9",iconCls:"extIcon extOk",handler:function(){c.Base.runCallBack(q,p.wrapItems());var y=this.up("#mapWindow");y&&y.close()}},w]}]});z=parseInt((.6*document.body.clientWidth).toFixed(0));x=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{animateTarget:g,title:p.title,itemId:"mapWindow",height:x,width:z,minHeight:500,minWidth:600,iconCls:"extIcon extMap",
layout:"fit",resizable:!0,maximizable:!0,constrain:!0,modal:!0,items:[{xtype:"panel",layout:"border",border:0,items:[r,t,w]}],listeners:{show:function(){var y=this.down("#mapContainer");y&&y.loadMap();r.refreshSearchLayout()},close:function(y){(y=this.down("#mapContainer"))&&y.destroyMap();c.Base.runCallBack(q)}}}).show()})};h.show=function(g,p){p=d.newParam(p);var q=c.AMapDialog.buildMapPanel(p),r=Ext.create("Ext.panel.Panel",{layout:"column",region:"south",itemId:"bottomContainer",border:0,defaults:{margin:"5 5 5 5"},
padding:"10 10 10 10",style:{background:"#ffffff"},items:[{xtype:"textfield",itemId:"selectResult",readOnly:!0,columnWidth:1}]}),t=parseInt((.6*document.body.clientWidth).toFixed(0)),v=parseInt((.7*document.body.clientHeight).toFixed(0));Ext.create("Ext.window.Window",{animateTarget:g,title:p.title,itemId:"mapWindow",height:v,width:t,minHeight:500,minWidth:600,iconCls:"extIcon extMap",layout:"fit",resizable:!0,maximizable:!0,constrain:!0,modal:!0,items:[{xtype:"panel",layout:"border",border:0,items:[q,
r]}],listeners:{show:function(){var w=this.down("#mapContainer");w&&w.loadMap()},close:function(){var w=this.down("#mapContainer");w&&w.destroyMap()}}}).show()};h.plainShow=function(g,p,q,r){c.AMapDialog.show(g,c.AMapMapParams.newParam({title:q?q:"\u67e5\u770b\u5750\u6807\u4f4d\u7f6e",items:[{type:FastEnum.MapItemType.marker_overlay,lnglat:p,address:r}]}))};return h}();c.AMapDialog=u;var d=function(){function h(){this.title="\u9009\u62e9\u5730\u56fe\u4f4d\u7f6e";this.showSearchADLayer=!1}h.newParam=
function(g){var p=new h;if(g)for(var q in g)p[q]=g[q];return p};h.prototype.wrapItems=function(){if(!this.items)return[];if(this.wrapped)return this.items;for(var g=[],p=0,q=this.items;p<q.length;p++){var r=q[p];r.type===FastEnum.MapItemType.rectangle_overlay?g.push(f.newParam(r)):r.type===FastEnum.MapItemType.polygon_overlay?g.push(l.newParam(r)):r.type===FastEnum.MapItemType.image_layer?g.push(k.newParam(r)):r.type===FastEnum.MapItemType.district_layer?g.push(m.newParam(r)):r.type===FastEnum.MapItemType.marker_overlay&&
g.push(e.newParam(r))}this.items=g;this.wrapped=!0;return this.items};return h}();c.AMapMapParams=d;u=function(){function h(){this.type="none";this.title="\u6807\u9898";this.onChange=function(){};this.showLoading=function(g){};this.hideLoading=function(){}}h.prototype.notifyChange=function(){if(this.onChange)this.onChange()};h.prototype.toResultInfo=function(){return""};return h}();c.AMapItemBaseParam=u;var e=function(h){function g(){var p=null!==h&&h.apply(this,arguments)||this;p.type=FastEnum.MapItemType.marker_overlay;
p.zoom=-1;p.title="\u5730\u56fe\u5750\u6807";p.enabledEditor=!1;p.enabledLocation=!0;p.enabledMapClickLocation=!0;p.enabledMapFlowCenter=!0;return p}__extends(g,h);g.newParam=function(p){var q=new g;if(p)for(var r in p)q[r]=p[r];return q};g.prototype.isEmptyLngLat=function(){return this.lnglat?!1:0>=this.lng||0>=this.lat?!0:!1};g.prototype.toResultInfo=function(){var p=[];this.lnglat?p.push("\u5750\u6807\uff1a"+this.lnglat):0<this.lng&&0<this.lat&&p.push("\u5750\u6807\uff1a"+this.lng+" , "+this.lat);
this.address&&p.push("\u4f4d\u7f6e\uff1a"+this.address);return p.join(" \uff0c")};return g}(u);c.AMapMarkerOverlayParam=e;var f=function(h){function g(){var p=null!==h&&h.apply(this,arguments)||this;p.type=FastEnum.MapItemType.rectangle_overlay;p.title="\u77e9\u5f62\u533a\u57df\u9009\u62e9";p.enabledEditor=!1;p.fillColor="#00b0ff";p.strokeColor="#80d8ff";return p}__extends(g,h);g.newParam=function(p){var q=new g;if(p)for(var r in p)q[r]=p[r];return q};g.prototype.toResultInfo=function(){if(!this.southWestLngLat||
!this.northEastLngLat)return"";var p=[];p.push("\u77e9\u5f62\u897f\u5357\u89d2(\u5de6\u4e0b)\uff1a"+this.southWestLngLat);p.push("\u77e9\u5f62\u4e1c\u5317\u89d2(\u53f3\u4e0a)\uff1a"+this.northEastLngLat);this.sizeToContainer&&(p.push("\u77e9\u5f62\u5bbd\u9ad8\u5c3a\u5bf8\uff1a"+this.sizeToContainer.width+"px - "+this.sizeToContainer.height+"px"),p.push("\u77e9\u5f62\u5bbd\u9ad8\u6bd4\u4f8b\uff1a1 : "+(this.sizeToContainer.height/this.sizeToContainer.width).toFixed(4)));return p.join(" \uff0c")};g.prototype.bindImageLayer=
function(){if(this.imageLayerParam&&this.imageLayerParam.url){var p=k.newParam(this.imageLayerParam);p.southWestLngLat=this.southWestLngLat;p.northEastLngLat=this.northEastLngLat;return p}return null};return g}(u);c.AMapRectangleOverlayParam=f;var l=function(h){function g(){var p=null!==h&&h.apply(this,arguments)||this;p.type=FastEnum.MapItemType.polygon_overlay;p.title="\u591a\u8fb9\u5f62\u533a\u57df\u9009\u62e9";p.enabledEditor=!1;p.fillColor="#00b0ff";p.strokeColor="#80d8ff";return p}__extends(g,
h);g.newParam=function(p){var q=new g;if(p)for(var r in p)q[r]=p[r];return q};g.prototype.toResultInfo=function(){if(!this.path)return"";var p=[];p.push(c.Json.objectToJson(this.path));return p.join(" \uff0c")};return g}(u);c.AMapPolygonOverlayParam=l;var m=function(h){function g(){var p=null!==h&&h.apply(this,arguments)||this;p.type=FastEnum.MapItemType.district_layer;p.title="\u4e2d\u56fd\u57ce\u5e02\u8fb9\u754c\u56fe\u5c42";p.fill="red";p.province_stroke="red";p.city_stroke="red";p.county_stroke=
"red";p.depth=2;return p}__extends(g,h);g.newParam=function(p){var q=new g;if(p)for(var r in p)q[r]=p[r];return q};return g}(u);c.AMapDistrictLayerParam=m;var k=function(h){function g(){var p=null!==h&&h.apply(this,arguments)||this;p.type=FastEnum.MapItemType.image_layer;p.title="\u56fe\u7247\u56fe\u5c42";return p}__extends(g,h);g.newParam=function(p){var q=new g;if(p)for(var r in p)q[r]=p[r];return q};return g}(u);c.AMapImageLayerParam=k})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.loadMarkdown=function(b){c.PluginLoader.loadPlugins("Markdown",[c.Markdown.markdownJsPath,c.Markdown.markdownStylePath].concat(c.Markdown.markdownPluginsPath),b)};n.parseMarkdown=function(b,a){c.Markdown.loadMarkdown(function(){c.Highlight.loadHighlight(function(){var d='\x3cdiv style\x3d"padding: 20px;"\x3e\x3cdiv class\x3d"markdown-body"\x3e'+markdownit({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",
highlight:function(e,f){if(f&&hljs.getLanguage(f))try{return hljs.highlight(e,{language:f}).value}catch(l){}return""}}).use(markdownitContainer,"tip").use(markdownitContainer,"warning").use(markdownitContainer,"danger").use(markdownitMark).use(markdownitEmoji).render(b)+"\x3c/div\x3e\x3c/div\x3e";d=$(d);d.find("a").each(function(){var e=$(this);if(0===e.attr("href").indexOf("open_menu:")){var f=e.attr("href").split("open_menu:")[1];f='FastExt.SystemLayout.showByLevel("'+decodeURI(f)+'")';e.attr("href",
"javascript:void(0);");e.attr("data-click-function",Ext.util.Base64.encode(f));e.attr("onclick","FastExt.Renders.onClickFromDataClick(this)")}else e.attr("target","_blank")});a(d.prop("outerHTML"))})})};n.showMarkdownFile=function(b,a,d,e){e||(e={height:parseInt((.7*document.body.clientHeight).toFixed(0)),width:parseInt((.6*document.body.clientWidth).toFixed(0))});Ext.create("Ext.window.Window",c.Json.mergeJson({title:a,iconCls:"extIcon extSee",layout:"fit",animateTarget:b,height:e.height,width:e.width,
minHeight:500,minWidth:600,constrain:!0,resizable:!0,maximizable:!0,scrollable:!0,modal:!0,bodyStyle:{background:"#ffffff"},listeners:{show:function(){var f=this;this.setLoading("\u52a0\u8f7d\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");$.get(d,function(l){c.Markdown.parseMarkdown(l,function(m){f.setLoading(!1);f.update(m)})})}}},e)).show()};n.showChangelog=function(b){var a=Ext.getCmp("SystemChangelogWindow");if(a)c.Component.shakeComment(a);else{a=parseInt((.7*document.body.clientHeight).toFixed(0));
var d=parseInt((.4*document.body.clientWidth).toFixed(0));Ext.create("Ext.window.Window",{title:"\u7cfb\u7edf\u66f4\u65b0\u65e5\u5fd7",iconCls:"extIcon extFlag",layout:"fit",animateTarget:b,id:"SystemChangelogWindow",height:a,width:d,minHeight:500,minWidth:600,constrain:!0,resizable:!0,maximizable:!0,scrollable:!0,modal:!1,bodyStyle:{background:"#ffffff"},listeners:{show:function(){var e=this;this.setLoading("\u52a0\u8f7d\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026");$.get(c.System.ChangelogHandler.getUrl(),
function(f){c.Markdown.parseMarkdown(f,function(l){e.setLoading(!1);e.update(l)})})}}}).show()}};n.markdownJsPath="base/markdown-it/markdown-it.min.js";n.markdownStylePath="base/markdown-it/markdown-style.css";n.markdownPluginsPath=["base/markdown-it/plugins/markdown-it-mark.min.js","base/markdown-it/plugins/markdown-it-emoji.min.js","base/markdown-it/plugins/markdown-it-container.min.js"];return n}();c.Markdown=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.copyMenu=function(b){var a=[];b.items&&b.items.each(function(d,e){e={icon:d.icon,text:d.text,handler:d.handler};null!=d.getMenu()&&(e.menu=c.Menu.copyMenu(d.getMenu()));a.push(e)});return a};n.fireMenuEvent=function(b,a){b&&b.items&&b.items.each(function(d,e){if(d.hasOwnProperty(a)&&Ext.isFunction(d[a]))d[a]();Ext.isFunction(d.getMenu)&&c.Menu.fireMenuEvent(d.getMenu(),a)})};n.isSplitLineLast=function(b){if(b){if(b.items){if(0===b.items.length)return!0;
if(0<b.items.length)return"-"===b.items[b.items.length-1]}if(Ext.isArray(b)){if(0===b.length)return!0;if(0<b.length)return"-"===b[b.length-1]}}return!1};n.refreshItem=function(b,a){if(b&&b.items){var d=[];b.items.each(function(e,f){"menuseparator"===e.xtype&&(0<d.length&&"menuseparator"===d[d.length-1].xtype?e.hide():e.show());e.isHidden()||d.push(e);Ext.isFunction(e.getMenu)&&c.Menu.refreshItem(e.getMenu(),e)});0<d.length&&"menuseparator"===d[d.length-1].xtype&&d[d.length-1].hide();a&&(0===d.length?
(a.fromVisibleItem=!0,a.hide()):a.fromVisibleItem&&(a.show(),a.fromVisibleItem=!1))}};return n}();c.Menu=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.bindToContainer=function(b,a,d){b.muuriGrid?d(b.muuriGrid):c.PluginLoader.loadPlugins("MuuriJs",[c.MuuriTool.muuriJsPath,c.MuuriTool.webAnimasJsPath],function(){var e=null;Ext.isFunction(b.getMuuriGridContainerId)&&(e=b.getMuuriGridContainerId());Ext.isEmpty(e)?console.warn("Muuri\u6e32\u67d3\u5931\u8d25\uff01\u76ee\u6807ID\u4e3a\u7a7a\uff01"):(e=new Muuri("#"+e,a),b.muuriGrid=e,d(e))})};n.justBindToContainer=function(b,a,d){c.MuuriTool.releaseMuuriGrid(b);
c.MuuriTool.bindToContainer(b,a,d)};n.getMuuriGrid=function(b){return b.muuriGrid?b.muuriGrid:null};n.releaseMuuriGrid=function(b){var a=c.MuuriTool.getMuuriGrid(b);a&&(a.destroy(!0),b.muuriGrid=null)};n.muuriJsPath="base/muuri/muuri.min.js";n.webAnimasJsPath="base/muuri/web-animations.min.js";return n}();c.MuuriTool=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.safeObject=function(b){return b?b:{}};n.safeSplit=function(b,a){return Ext.isEmpty(b)?[]:b.split(a)};n.pickValue=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<b.length;a++){var d=b[a];if(!Ext.isEmpty(d))return d}};return n}();c.Objects=u})(FastExt||(FastExt={}));var FastOverrider;
(function(c){var u=function(){function b(){}b.__onLoaded=function(){var a=Ext.create;Ext.create=function(){for(var e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];try{if(1<e.length&&Ext.isObject(e[1])&&e[1].filter&&e[1].filter.enable){var l=e[1].filter,m=new FastExt.ComponentInvokeInfo;m.method=l.method;m.xtype=e[0];m.config=e[1];FastExt.Listeners.getFire().onExtCreateFilter(l.key,m)}return a.apply(this,e)}catch(k){return FastExt.System.ConfigHandler.isDebug()&&FastExt.Server.reportException(FastExt.ErrorHandler.geErrorInfo(k)),
null}};var d=Ext.scrollbar.size;Ext.scrollbar.size=function(){var e=d.apply(this,arguments);e.width=c.ExtOverrider.cssScrollBarWidth;e.height=c.ExtOverrider.cssScrollBarHeight;return e};Ext.scrollbar.width=function(){return c.ExtOverrider.cssScrollBarWidth};Ext.scrollbar.height=function(){return c.ExtOverrider.cssScrollBarHeight}};b.cssScrollBarWidth=0;b.cssScrollBarHeight=8;return b}();c.ExtOverrider=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.data.proxy.Ajax,{constructor:function(){this.callParent(arguments);
this.setTimeout(18E4)}})};return b}();c.ServerOverrider=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.Component,{onFastPowerContextMenu:function(a,d,e){a.stopEvent();FastExt.Power.showPowerConfig(this,a)},afterRender:function(){try{FastExt.System.InitHandler.isInit()&&(this.power=FastExt.Base.toBool(this.power,!0))&&(0<this.getXTypes().indexOf("field/")||Ext.Array.contains(FastExt.Power.types,this.getXType()))&&(this.code=FastExt.Power.getPowerCode(this),this.power&&!this.up("[powerUI\x3dfalse]")&&
this.code)&&(this.managerPower=FastExt.Power.checkManagerPower(this),FastExt.Power.setPower(this.code,FastExt.Base.copy(this.managerPower)),FastExt.Power.hasPower(this,"show")?FastExt.Power.hasPower(this,"edit")||(this.editable=!1,Ext.isFunction(this.setReadOnly)&&this.setReadOnly(!0)):(this.hideable=!1,this.setHidden(!0),this.setDisabled(!0),this.clearListeners(),Ext.isFunction(this.collapse)&&this.collapse()),FastExt.Power.config&&(this.powerConfig=FastExt.Power.checkPower(this.code),FastExt.Power.setPowerStyle(this),
this.getEl().on("contextmenu",this.onFastPowerContextMenu,this)))}finally{this.callParent(arguments)}}});Ext.override(Ext.Component,{setDisabled:function(a){return FastExt.Power.config?this.enable():this.callParent(arguments)}});Ext.override(Ext.form.field.Base,{markInvalid:function(a){FastExt.Power.config||this.callParent(arguments)}})};return b}();c.PowerComponentOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.Component,{constructor:function(a){this.callParent(arguments);
this.addCls("fast-"+this.xtype)},setZIndex:function(){var a=this.callParent(arguments);(this.justTop||this.cfg&&this.cfg.justTop)&&this.el.setZIndex(FastExt.Component.maxZIndex);return a},refreshAllowBlankTip:function(){this.allowBlankTip&&!Ext.isEmpty(this.fieldLabel)&&Ext.isFunction(this.setFieldLabel)&&(FastExt.Base.toBool(this.allowBlank,!0)?this.setFieldLabel(this.configFieldLabel):this.setFieldLabel('\x3csvg class\x3d"svgIcon fileIcon redColor fontSize8" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#extSnow"\x3e\x3c/use\x3e\x3c/svg\x3e\x26nbsp;'+
this.configFieldLabel))},show:function(){try{if(FastExt.System.InitHandler.isInit()&&("window"===this.getXType()||"messagebox"===this.getXType())&&!FastExt.Base.toBool(this.sessionWin,!1)&&FastExt.LoginLayout.isShownSessionOutAlert())return this.hide(),null}catch(a){console.error(a)}return this.callParent(arguments)},onResize:function(a,d,e,f){this.callParent(arguments);this.needCacheUI&&(a!==Ext.getBody().getWidth()&&FastExt.Cache.setCache(this.cacheUICode+"Width",a),d!==Ext.getBody().getHeight()&&
FastExt.Cache.setCache(this.cacheUICode+"Height",d))},onFastBodyElMouseLeave:function(a){this.helpTip&&(this.helpTip.close(),this.helpTip=null)},onFastBodyElMouseOver:function(){this.help&&this.buildHelpTip()},onFastBodyElContextMenu:function(){this.help&&this.buildHelpTip()},buildHelpTip:function(){try{var a=this;if(a.helpTip)0<a.helpTip.showDelay?(a.helpTipTimeout&&clearTimeout(a.helpTipTimeout),a.helpTipTimeout=setTimeout(function(){a.helpTip&&a.helpTip.show()},a.helpTip.showDelay)):a.helpTip.show();
else{var d=a.help;window.getHelpContent&&(d=window.getHelpContent(a.help));var e=a.helpAnchor;Ext.isEmpty(e)&&(e="left");var f=a.helpShowDelay;Ext.isEmpty(f)&&(f=0);var l=a.helpMaxWidth;Ext.isEmpty(l)&&(l=500);var m=a.bodyEl;m||(m=a.el);a.helpTip=Ext.create("Ext.tip.ToolTip",{target:m,resizable:!1,anchor:e,anchorOffset:0,autoHide:!1,hideDelay:0,focusOnToFront:!1,maxWidth:l,closeAction:"destroy",hideAction:"destroy",html:d,showDelay:f,autoShow:0===f,listeners:{beforedestroy:function(){a.helpTip=null;
a.helpTipTimeout&&clearTimeout(a.helpTipTimeout)},hide:function(){this.close()},move:function(k,h,g,p){h=k.anchor;g=(a.getWidth()-20)/2;if("left"===h||"right"===h)g=(a.getHeight()-20)/2;Ext.isEmpty(a.helpAnchorOffset)||-1==parseInt(a.helpAnchorOffset)||(g=a.helpAnchorOffset);k.anchorOffset=g}}})}}catch(k){console.error(k)}},finishRender:function(){var a=this;this.callParent(arguments);try{if(!FastExt.Power.isPower()){if(this.help&&FastExt.Base.toBool(this.tipHelp,!0)){var d=this.bodyEl;d||(d=this.el);
Ext.isEmpty(this.helpType)&&(this.helpType=FastEnum.HelpEnumType.mouse_right_click);d.on("mouseleave",this.onFastBodyElMouseLeave,this);if(this.helpType==FastEnum.HelpEnumType.mouse_right_click)d.on("contextmenu",this.onFastBodyElContextMenu,this);else this.helpType==FastEnum.HelpEnumType.mouse_in_out&&(d.on("contextmenu",this.onFastBodyElMouseLeave,this),d.on("mouseover",this.onFastBodyElMouseOver,this))}if(this.ripple){var e={color:"#ffffff"};Ext.isObject(this.ripple)&&(e=this.ripple);this.getEl().on("mousedown",
function(f){var l=!0;a.isDisabled&&a.isDisabled()&&(l=!1);l&&a.getEl().ripple(f,e)},this)}}}catch(f){console.error(f)}},initComponent:function(){try{this.labelAlign&&!Ext.isEmpty(this.fieldLabel)&&(this.userCls="fast-filefield-label-"+this.labelAlign);this.labelSeparator="";if("default"===this.emptyText&&(this.emptyText="\u8bf7\u586b\u5199",!Ext.isEmpty(this.fieldLabel))){this.emptyText="\u8bf7\u586b\u5199"+this.fieldLabel;var a=this.xtype;this.parentXtype&&(a=this.parentXtype);if(0<=a.indexOf("combo")||
0<=a.indexOf("link")||0<=a.indexOf("date")||0<=a.indexOf("map")||0<=a.indexOf("pca"))this.emptyText="\u8bf7\u9009\u62e9"+this.fieldLabel}this.configFieldLabel=this.fieldLabel;this.refreshAllowBlankTip();this.validateOnChange=this.validateOnBlur=!1;this.collapseToolText=this.closeToolText="\u5173\u95ed";this.expandToolText="\u5c55\u5f00";if(!("window"!==this.getXType()&&"panel"!==this.getXType()||Ext.isEmpty(this.getTitle())&&Ext.isEmpty(this.subtitle))&&(this.resizable||this.split)&&FastExt.Base.toBool(this.cacheUISize,
!0)){this.cacheUICode=$.md5(this.getTitle()+this.subtitle+$("title").text()+this.width+this.height);var d=FastExt.Cache.getCache(this.cacheUICode+"Width"),e=FastExt.Cache.getCache(this.cacheUICode+"Height"),f=FastExt.Base.toBool(FastExt.Cache.getCache(this.cacheUICode+"Collapse"),this.collapsed);null!=d&&(this.setWidth(Math.round(d)),this.setFlex(0));null!=e&&(this.setHeight(Math.round(e)),this.setFlex(0));this.collapsed=f;this.needCacheUI=!0;this.setCollapsed(f)}FastExt.Base.toBool(this.iframePanel,
!1)&&(this.disabledCls="iframe-disabled-panel");Ext.isEmpty(this.firstCls)||(this.baseCls=this.firstCls+" "+this.baseCls)}catch(l){console.error(l)}finally{this.callParent(arguments)}},destroy:function(){this.callParent(arguments);try{this.tip&&(this.tip.destroy(),this.tip=null),this.menu&&(this.menu.destroy(),this.menu=null)}catch(a){}},safeFocus:function(a){var d=this;setTimeout(function(){d.focus(!0)},a)}})};return b}();c.ComponentOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.panel.Panel,
{collapse:function(){this.callParent(arguments);this.needCacheUI&&FastExt.Cache.setCache(this.cacheUICode+"Collapse",!0)},expand:function(a){this.callParent(arguments);this.needCacheUI&&FastExt.Cache.setCache(this.cacheUICode+"Collapse",!1)},onMouseLeaveFloated:function(a){if(FastExt.Base.toBool(this.holdFloatView,!1))this.onMouseEnterFloated(a);else this.callParent(arguments)},close:function(){FastExt.Base.toBool(this.canClose,!0)&&this.callParent(arguments)}});Ext.override(Ext.panel.Tool,{constructor:function(){this.callParent(arguments);
this.ripple={color:"#ffffff",bound:!1,destroyTime:300}}});Ext.override(Ext.panel.Header,{constructor:function(){this.callParent(arguments);this.ripple={color:"#ffffff",destroyTime:300}}})};return b}();c.PanelOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.LoadMask,{constructor:function(){this.callParent(arguments);var a=this.getId()+"-msgEl",d=$("\x3cdiv id\x3d'"+this.getId()+"-anim' style\x3d'height: 70px;width: 70px;'\x3e\x3c/div\x3e");$("#"+a).prepend(d)},getAnimEl:function(){var a=
$("#"+this.getId()+"-anim");return 0<a.length?a[0]:null},show:function(){var a=this.getAnimEl();a&&FastExt.Lottie.loadJsonAnimByEl(a,"base/lottie/loading.json");if(this.target&&(this.target.disabledLoadMaskOnce||this.target.disabledLoadMask))return this.target.disabledLoadMaskOnce=!1,this;if(this.isElement)this.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls),this.fireEvent("show",this);else return this.callParent(arguments)},hide:function(){try{var a=this.getAnimEl();a&&FastExt.Lottie.unloadJsonAnimByEl(a)}catch(d){}return this.callParent(arguments)}})};
return b}();c.LoadMaskOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.button.Button,{constructor:function(){this.callParent(arguments);this.ripple={destroyTime:300};this.animMinMax&&(this.on("render",function(){FastExt.Animate.startMinButtonAnimateByWidth(this,1E3)}),this.on("mouseout",function(){FastExt.Animate.startMinButtonAnimateByWidth(this,0)}),this.on("mouseover",function(){FastExt.Animate.startMaxButtonAnimateByWidth(this,500)}))},afterRender:function(){try{this.tipText&&
(this.tip=new Ext.ToolTip({target:this.el,trackMouse:!0,renderTo:Ext.getBody(),dismissDelay:0,html:this.tipText})),FastExt.Base.toBool(this.local)&&(FastExt.System.ConfigHandler.isLocal()||this.setHidden(!0)),this.callParent(arguments)}catch(a){console.error(a)}finally{FastExt.Button.checkGridToolbarButton(this)}}})};return b}();c.ButtonOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.grid.Panel,{initComponent:function(){this.callParent(arguments);if(this.ownerGrid)FastExt.Grid.onGridInitComponent(this.ownerGrid);
else FastExt.Grid.onGridInitComponent(this)},finishRender:function(){this.callParent(arguments);if(this.ownerGrid)FastExt.Grid.onGridAfterRender(this.ownerGrid);else FastExt.Grid.onGridAfterRender(this)},destroy:function(){try{this.contextMenu&&this.contextMenu.destroy(),this.columnHeadMenu&&this.columnHeadMenu.destroy(),FastExt.Cache.memory["GridSelectHistory"+this.code]=null}catch(a){}this.callParent(arguments)}});Ext.override(Ext.grid.CellContext,{setRow:function(a){try{if(!this.view)return this;
a&&this.callParent(arguments);return this}catch(d){console.error(d)}return this}});Ext.override(Ext.grid.column.Column,{constructor:function(){this.callParent(arguments);this.ripple={destroyTime:300}},afterRender:function(){try{this.code=FastExt.Power.getPowerCode(this),this.renderer||(this.renderer=FastExt.Renders.normal()),this.rendererFunction&&(this.renderer=eval(this.rendererFunction)),FastExt.Grid.configColumnProperty(this),FastExt.Grid.configColumnListener(this)}catch(a){console.error(a)}finally{this.callParent(arguments)}},
destroy:function(){this.searchMenu&&this.searchMenu.destroy();this.editMenu&&this.editMenu.destroy();this.batchEditMenu&&this.batchEditMenu.destroy();this.callParent(arguments)}});Ext.override(Ext.grid.selection.SpreadsheetModel,{onHeaderClick:function(){this.callParent(arguments)},deselectAll:function(a,d){FastExt.Base.toBool(d,!1)||this.view&&this.view.ownerGrid&&this.view.ownerGrid.selectHistoryConfig&&1===this.view.ownerGrid.selectHistoryConfig.state&&this.view.ownerGrid.clearSelectRecordHistory();
this.callParent(arguments)},selectAll:function(){this.callParent(arguments);this.selected&&(this.selected.allSelected=!0)},getSelection:function(a){return!FastExt.Base.toBool(a,!1)&&this.view&&this.view.ownerGrid&&this.view.ownerGrid.selectHistoryConfig&&1===this.view.ownerGrid.selectHistoryConfig.state?this.view.ownerGrid.getSelectRecordHistory():this.callParent(arguments)},getNumbererColumnConfig:function(){var a=this.callParent(arguments);a.text="\u5e8f\u53f7";a.align="center";a.resizable=!0;0<
parseInt(a.width)&&(a.width=52);a.configWidth=a.width;return a},onStoreChanged:function(){if(this.selected&&this.selected.selectedRecords)try{this.callParent(arguments)}catch(a){console.error(a)}}});Ext.override(Ext.grid.ColumnLayout,{calculate:function(a){try{this.callParent(arguments)}catch(d){}}})};return b}();c.GridOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.view.Table,{onCellMouseUp:function(a,d,e,f,l,m){this.callParent(arguments);try{Ext.fly(f.parentElement.parentElement).ripple(m,
{color:"#afafaf",destroyTime:300})}catch(k){}}})};return b}();c.TableViewOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.data.Store,{constructor:function(){this.callParent(arguments);this.entity&&(this.autoDestroy=!0);this.storeCode=$.md5(FastExt.Base.buildOnlyNumber("STR"))},destroy:function(){try{if(this.columnRenderKey)if(Ext.isArray(this.columnRenderKey))for(var a=0,d=this.columnRenderKey;a<d.length;a++){var e=d[a];FastExt.Cache.memory[e]=null;null==window[e]}else FastExt.Cache.memory[this.columnRenderKey]=
null,null==window[this.columnRenderKey];this.entity&&FastExt.Server.destroyList(this.getId())}catch(f){}this.callParent(arguments)},getStoreCode:function(){Ext.isEmpty(this.storeCode)&&(this.storeCode=$.md5(FastExt.Base.buildOnlyNumber("STR")));return this.storeCode}})};return b}();c.StoreOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.layout.container.Accordion,{nextCmp:function(a){return(a=a.next())&&a.isHidden()?this.nextCmp(a):a},prevCmp:function(a){return(a=a.prev())&&
a.isHidden()?this.prevCmp(a):a},onBeforeComponentCollapse:function(a){try{var d=this.owner,e=void 0,f=void 0;if(1===this.owner.items.getCount())return!1;this.processing||(this.processing=!0,f=d.deferLayouts,d.deferLayouts=!0,e=this.nextCmp(a)||this.prevCmp(a),e.isHidden()?(d.deferLayouts=f,this.processing=!1,this.onBeforeComponentCollapse(e)):(this.multi||e&&e.expand(),d.deferLayouts=f,this.processing=!1))}catch(l){console.error(l)}}})};return b}();c.LayoutOverride=u;u=function(){function b(){}b.__onLoaded=
function(){Ext.override(Ext.dom.Element,{syncContent:function(a){try{this.callParent(arguments)}catch(d){console.error(d)}},constructor:function(a){this.callParent(arguments)},onFastMouseUp:function(a,d){d&&d.className&&0<=d.className.toString().indexOf("x-tree-elbow-img")?FastExt.Cache.memory.holdGridRecordSelectHistory=!0:FastExt.Cache.memory.holdGridRecordSelectHistory=!1},removeCls:function(){try{return this.getData()?this.callParent(arguments):void 0}catch(a){console.error(a)}return this}})};
return b}();c.DomOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.toolbar.Paging,{initComponent:function(){this.inputItemWidth=70;this.callParent(arguments);this.child("#refresh").setIconCls("extIcon extRefresh grayColor");this.on("beforechange",this.onFastBeforeChange,this)},updateInfo:function(){this.callParent(arguments);var a=this.child("#displayItem");a&&1<FastExt.Base.toInt(this.selectCount,0)&&a.setText(a.html+"\uff0c\u9009\u4e2d "+this.selectCount+" \u6761")},
onFastBeforeChange:function(a,d,e){return a.checkStoreUpdate(function(){a.store.loadPage(d)})},checkStoreUpdate:function(a){var d=this;return d.store.entity?0<d.store.getUpdatedRecords().length?(FastExt.Dialog.showConfirm("\u7cfb\u7edf\u63d0\u9192","\u5f53\u524d\u5b58\u5728\u88ab\u4fee\u6539\u7684\u6570\u636e\uff0c\u662f\u5426\u7acb\u5373\u63d0\u4ea4\u4fee\u6539\uff1f",function(e,f){"yes"==e?FastExt.Store.commitStoreUpdate(d.store).then(function(){a()}):a()},{yes:"\u63d0\u4ea4\u4fee\u6539",no:"\u5ffd\u7565\u4fee\u6539"}),
!1):!0:!0}})};return b}();c.ToolbarOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.util.Grouper,{sortFn:function(a,d){return 0}})};return b}();c.UtilOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.resizer.Splitter,{onRender:function(){this.collapseOnDblClick=!1;this.callParent(arguments)}})};return b}();c.ResizerOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.dd.DragTracker,{onMouseDown:function(a){this.callParent(arguments);
if(!(this.disabled||a.target&&a.target.className&&(0<=a.target.className.toString().indexOf("x-tool")||0<=a.target.className.toString().indexOf("x-column"))))for(var d=Ext.ComponentQuery.query("[iframePanel\x3dtrue]"),e=0;e<d.length;e++)d[e].oldDisabled=d[e].disabled,d[e].setDisabled(!0)},onMouseUp:function(a){this.callParent(arguments);for(var d=Ext.ComponentQuery.query("[iframePanel\x3dtrue]"),e=0;e<d.length;e++)d[e].setDisabled(d[e].oldDisabled)},endDrag:function(a){this.callParent(arguments);
for(var d=Ext.ComponentQuery.query("[iframePanel\x3dtrue]"),e=0;e<d.length;e++)d[e].setDisabled(d[e].oldDisabled)}})};return b}();c.DDOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.form.Basic,{submit:function(a){a=a||{};a.submitEmptyText=!1;a.timeout=180;var d=a.standardSubmit||this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit";a.params=FastExt.Json.mergeJson(a.params,this.extraParams);return this.doAction(d,a)},getValues:function(a,d,e,f,l){for(var m=
this.callParent(arguments),k={},h=0,g=this.getFields().items;h<g.length;h++){var p=g[h];p.extraParams&&(k=FastExt.Json.mergeJson(k,p.extraParams));p.multiSplit&&(k[p.name]=p.getValue().split(p.multiSplit))}return a?m+"\x26"+Ext.Object.toQueryString(k):FastExt.Json.mergeJson(m,k)},isValid:function(){try{var a=void 0;Ext.suspendLayouts();var d="",e=0,f="\u8bf7\u6b63\u786e\u586b\u5199\u6570\u636e\uff01";a=this.getFields().filterBy(function(m){var k=!m.validate();k&&0===e&&(d=m.getFieldLabel(),f=FastExt.Form.getFieldError(m)[0],
e++);return k});Ext.resumeLayouts(!0);var l=1>a.length;l||(Ext.isEmpty(d)?FastExt.Dialog.toast("\u8bf7\u5c06\u6570\u636e\u586b\u5199\u5b8c\u6574\uff01"):Ext.isEmpty(f)?FastExt.Dialog.toast("\u3010"+d+"\u3011\u9519\u8bef\uff01"):FastExt.Dialog.toast("\u3010"+d+"\u3011\u9519\u8bef\uff1a"+f),FastExt.Component.shakeComment(this.owner.ownerCt));return l}catch(m){FastExt.Dialog.showException(m)}}});Ext.override(Ext.form.FormPanel,{getForm:function(){var a=this.callParent(arguments);a&&(a.extraParams=FastExt.Json.mergeJson(this.extraParams,
a.extraParams));return a}});Ext.override(Ext.form.field.File,{onRender:function(){this.callParent(arguments);this.multiple&&this.fileInputEl&&this.fileInputEl.dom.setAttribute("multiple","multiple")}});Ext.override(Ext.form.field.Time,{initComponent:function(){this.invalidText="\u65e0\u6548\u7684\u65f6\u95f4\u683c\u5f0f!";this.callParent(arguments)}});Ext.override(Ext.form.field.Text,{validate:function(){var a=this.callParent(arguments);a&&this.isUseHistory()&&this.saveHistory();return a},getComment:function(){return this.comment},
isUseHistory:function(){return("textfield"===this.xtype||"numberfield"===this.xtype)&&!this.disabled&&!FastExt.Component.isRealReadOnly(this)&&this.useHistory},isUseLetterKeyboard:function(){return"textfield"===this.xtype&&!this.disabled&&!FastExt.Component.isRealReadOnly(this)&&this.letterKeyboard},onChange:function(a,d){this.callParent(arguments);this.isUseHistory()&&this.checkHistory();this.isShownHistory()&&this.hideHistory();this.isUseLetterKeyboard()&&document.getElementById(this.getInputId()).setAttribute("type",
"text")},finishRender:function(){this.callParent(arguments);this.isUseHistory()&&(this.saveHistory(),this.checkHistory(),this.inputEl.on("click",this.onFastHistoryInputClick,this));this.isUseLetterKeyboard()&&document.getElementById(this.getInputId()).setAttribute("type","password")},onFastHistoryInputClick:function(){this.checkHistory()&&this.isUseHistory()&&(this.historyShown?this.hideHistory():this.showHistory())},onFastHideHistoryMenu:function(){FastExt.Component.resumeEditorMenu(this);this.hideHistoryTask&&
this.hideHistoryTask.delay(100)},onFastCommentClick:function(){var a="\u67e5\u770b\u3010"+this.configFieldLabel+"\u3011\u7684\u8bf4\u660e";Ext.isEmpty(this.configFieldLabel)&&(a="\u67e5\u770b\u8bf4\u660e");FastExt.Dialog.showHtml(this,a,this.getComment(),!1)},getHistory:function(){this.code||(this.code=FastExt.Power.getPowerCode(this));var a=FastExt.Cache.getCache(this.getHistoryCacheKey());this.defaultHistory&&(Ext.isEmpty(a)&&(a={}),a=Ext.Object.merge(a,this.defaultHistory));return a},checkHistory:function(){var a=
this.getHistory(),d=this.getTrigger("history");if(!d)return!1;if(a&&0<Object.keys(a).length)return d.show(),!0;d.hide();return!1},clearHistory:function(){this.code||(this.code=FastExt.Power.getPowerCode(this));FastExt.Cache.setCache(this.code+FastExt.System.ManagerHandler.getManagerId(),{});FastExt.Dialog.toast("\u5df2\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55\uff01");this.checkHistory()},showHistory:function(){this.code||(this.code=FastExt.Power.getPowerCode(this));this.hideHistoryTask&&this.hideHistoryTask.cancel();
this.historyMenu&&this.historyMenu.destroy();var a=this;FastExt.Component.holdEditorMenu(a);this.historyMenu=new Ext.menu.Menu({padding:"0 0 0 0",power:!1,showSeparator:!1,minWidth:this.bodyEl.getWidth(),style:{background:"#ffffff"},listeners:{hide:{fn:this.onFastHideHistoryMenu,scope:this}}});var d=this.getHistory();if(d){Ext.isArray(d)&&(d={});this.historyMenu.add({text:"\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55",iconCls:"extIcon extClear grayColor",handler:function(){a.clearHistory()}});this.historyMenu.add("-");
var e=Object.keys(d);e.sort(function(g,p){g=d[g].date;return FastExt.Dates.parseDate(d[p].date).getTime()-FastExt.Dates.parseDate(g).getTime()});for(var f={},l=1,m=0;m<e.length;m++){var k=e[m];if("\x3cnull\x3e"!==k.toLowerCase()){var h=d[k];this.historyMenu.add({text:FastExt.Base.toMaxString(Ext.util.Format.htmlEncode(k),50),iconCls:h.default?"extIcon extColumn searchColor":"extIcon extHistory searchColor",realText:k,handler:function(){a.setValue(this.realText);a.fireEvent("selectHistoryValue",a,
this.realText)}});if(20<=l)break;l++;f[k]=h}}this.historyMenu.showBy(this.bodyEl,"tl-bl?");this.historyShown=!0;this.hideHistoryTask||(this.hideHistoryTask=new Ext.util.DelayedTask(function(){this.historyShown=!1},this));FastExt.Cache.setCache(this.getHistoryCacheKey(),f)}},hideHistory:function(){this.historyMenu&&this.historyMenu.close();FastExt.Component.resumeEditorMenu(this);this.historyShown=!1},isShownHistory:function(){return this.historyShown},saveHistory:function(){var a=this.getValue();
if(!Ext.isEmpty(a)){var d=FastExt.Cache.getCache(this.getHistoryCacheKey());d||(d={});d[a]={date:Ext.Date.format(new Date,"Y-m-d H:i:s")};FastExt.Cache.setCache(this.getHistoryCacheKey(),d)}},getHistoryCacheKey:function(){return this.code+FastExt.System.ManagerHandler.getManagerId()},initComponent:function(){try{var a=this;"password"===a.inputType&&a.addTriggers({eayOpen:{cls:"extIcon extEye editColor",hidden:!0,handler:function(){a.up("menu")&&(a.up("menu").holdShow=!0);this.getTrigger("eayOpen").hide();
this.getTrigger("eayClose").show();var d=document.getElementById(this.getInputId());d.blur();d.setAttribute("type","password");setTimeout(function(){FastExt.Base.inputFocusEnd(d);a.up("menu")&&(a.up("menu").holdShow=!1)},100)}},eayClose:{cls:"extIcon extNoSee",handler:function(){a.up("menu")&&(a.up("menu").holdShow=!0);this.getTrigger("eayOpen").show();this.getTrigger("eayClose").hide();var d=document.getElementById(this.getInputId());d.blur();d.setAttribute("type","text");setTimeout(function(){FastExt.Base.inputFocusEnd(d);
a.up("menu")&&(a.up("menu").holdShow=!1)},100)}}});a.isUseHistory()&&(console.log("\u5386\u53f2\u8bb0\u5f55\uff01",this),a.addTriggers({history:{cls:"extIcon extHistory2",hidden:!0,weight:-1,handler:a.onFastHistoryInputClick}}));Ext.isEmpty(a.getComment())||a.addTriggers({comment:{cls:"extIcon extQuestion2",weight:-2,handler:a.onFastCommentClick}})}finally{this.callParent(arguments)}},destroy:function(){this.historyMenu&&this.historyMenu.destroy();this.callParent(arguments)}});Ext.override(Ext.form.field.ComboBox,
{initComponent:function(){try{this.searchable&&(this.editable=!0,this.queryMode="local",this.caseSensitive=this.anyMatch=!0,this.validator=function(a){return this.allowBlank?!0:!this.searchable||FastExt.Base.toBool(this.newable,!1)||this.getStore().findRecord(this.valueField,this.getValue(),0,!1,!1,!0)?!0:"\u6570\u636e\u3010"+a+"\u3011\u65e0\u6548\uff0c\u8bf7\u9009\u62e9\u4e0b\u62c9\u6846\u91cc\u7684\u9009\u9879\uff01"})}finally{this.callParent(arguments)}},toggle:function(){this.getPicker().hidden?
this.collapse():this.searchable?this.doQuery(this.getRawValue(),!1,!0):this.expand()}});Ext.override(Ext.form.trigger.Trigger,{onMouseDown:function(a){this.callParent(arguments);this.getEl().ripple(a,{destroyTime:300})}})};return b}();c.FormOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.menu.Menu,{hide:function(){if((this.powerMenu||!FastExt.Power.menuShowing)&&!this.holdShow)return this.callParent(arguments)},onShortcutKey:function(){try{this.callParent(arguments)}catch(a){}},
delayClose:function(a){(new Ext.util.DelayedTask(this.close,this)).delay(a)}});Ext.override(Ext.menu.Item,{constructor:function(){this.callParent(arguments);this.ripple={color:"#ffffff",destroyTime:300}},focus:function(){if(!this.isDisabled()&&!this.isDisabled()){var a=this.icon,d=/([^/]*.svg)/;a&&d.test(a)&&(a=FastExt.Server.getIcon(d.exec(a)[1].trim(),"#ffffff"),(d=Ext.get(this.getId()+"-iconEl"))&&d.setStyle("background-image","url("+a+")"));return this.callParent(arguments)}},onFocusLeave:function(){this.callParent(arguments);
if(!this.isDisabled()){var a=this.icon,d=/([^/]*.svg)/;a&&d.test(a)&&(d=Ext.get(this.getId()+"-iconEl"))&&d.setStyle("background-image","url("+a+")")}}});Ext.override(Ext.layout.container.boxOverflow.Menu,{handleOverflow:function(){var a=this.layout.owner;return a.hasListeners.overflowbegin?a.fireEvent("overflowbegin")?this.callParent(arguments):{reservedSpace:0}:this.callParent(arguments)},showTrigger:function(){var a=this.layout.owner;a.hasListeners.overflowshow?a.fireEvent("overflowshow")&&this.callParent(arguments):
this.callParent(arguments)},hideTrigger:function(){var a=this.layout.owner;a.hasListeners.overflowshow?a.fireEvent("overflowhide")&&this.callParent(arguments):this.callParent(arguments)},createMenuConfig:function(){var a=this.callParent(arguments);a&&(delete a.cls,delete a.userCls,delete a.bodyCls);return a}})};return b}();c.MenuOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.Window,{setIcon:function(a){this.callParent(arguments);var d=/([^/]*.svg)/;a&&d.test(a)&&(this.icon=
FastExt.Server.getIcon(d.exec(a)[1].trim(),"#ffffff"))},restore:function(){Ext.isEmpty(this.oldMaxHeight)||(this.maxHeight=this.oldMaxHeight);Ext.isEmpty(this.oldMaxWidth)||(this.maxWidth=this.oldMaxWidth);return this.callParent(arguments)},maximize:function(){Ext.isEmpty(this.maxHeight)||(this.height=Math.min(this.getHeight(),this.maxHeight),this.oldMaxHeight=this.maxHeight,delete this.maxHeight);Ext.isEmpty(this.maxWidth)||(this.width=Math.min(this.getWidth(),this.maxWidth),this.oldMaxWidth=this.maxWidth,
delete this.maxWidth);return this.callParent(arguments)},afterRender:function(){this.callParent(arguments)},onShowComplete:function(){this.callParent(arguments);this.toFront(!0);this.focus();if(FastExt.Base.toBool(this.autofocusField,!0)){var a=this.query("form");a&&0<a.length&&a[0].getForm().getFields().each(function(e){if(e.readOnly||e.isDisabled())return!0;if("textfield"===e.xtype||"numberfield"===e.xtype||"contentfield"===e.xtype||"textareafield"===e.xtype||"htmlcontentfield"===e.xtype)return e.safeFocus(100),
!1})}a=0;for(var d=Ext.ComponentQuery.query("grid");a<d.length;a++)FastExt.GridEvent.onFastSelectionChange.apply(d[a])},initComponent:function(){try{Ext.isEmpty(this.tools)&&(this.tools=[]),(!this.modal&&0>this.id.indexOf("messagebox")&&FastExt.Base.toBool(this.unpin,!0)||FastExt.Base.toBool(this.unpin,!1))&&this.tools.push({type:"unpin",tooltip:"\u56fa\u5b9a\u7a97\u53e3",callback:function(a,d,e){e=a.getHeader().getTools();"unpin"===d.type?(d.setType("pin"),d.setTooltip("\u53d6\u6d88\u56fa\u5b9a\u7a97\u53e3"),
a.canClose=!1,a.justTop=!0):(d.setType("unpin"),d.setTooltip("\u56fa\u5b9a\u7a97\u53e3"),a.canClose=!0,a.justTop=!1);for(a=0;a<e.length;a++){var f=e[a];if("close"===f.type){"unpin"===d.type?f.show():f.hide();break}}}}),this.animateTarget==window&&(this.animateTarget=null),this.animateTarget||(this.animateTarget=FastExt.Base.getTargetElement(FastExt.SystemLayout.getCurrClickTarget())),0<=this.getId().indexOf("ghost")&&(this.animateTarget=null),FastExt.System.ConfigHandler.isEnableWindowAnim()||(this.animateTarget=
null),"toast"===FastExt.Base.toString(this.xtype,"")&&(this.animateTarget=null),FastExt.Base.toBool(this.animateDisable,!1)&&(this.animateTarget=null),this.liveDrag=!0}catch(a){console.error(a)}finally{this.callParent(arguments)}}})};return b}();c.WindowOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.window.MessageBox,{confirm:function(a,d,e,f){FastExt.Dialog.showConfirm(a,d,e);return this},prompt:function(a,d,e,f,l,m){FastExt.Dialog.showPrompt(a,d,e,l,m);return this},
alert:function(a,d,e,f){FastExt.Dialog.showAlert(a,d,e);return this},updateProgress:function(){arguments[2]&&(arguments[2]="\x3cdiv class\x3d'fast-messagebox-message-progress'\x3e"+arguments[2]+"\x3c/div\x3e");return this.callParent(arguments)},show:function(a){this.closeToolText=null;a=a||{};var d="";a.progress&&(d="-progress");Ext.isEmpty(a.msg)||(a.msg="\x3cdiv class\x3d'fast-messagebox-message"+d+"'\x3e"+a.msg+"\x3c/div\x3e");Ext.isEmpty(a.message)||(a.message="\x3cdiv class\x3d'fast-messagebox-message"+
d+"'\x3e"+a.message+"\x3c/div\x3e");FastExt.Base.toBool(a.progress,!1)||FastExt.Base.toBool(a.wait,!1)?a.animateTarget=null:(Ext.isEmpty(a.animateTarget)&&(a.animateTarget=FastExt.Base.getTargetElement(FastExt.SystemLayout.getCurrClickTarget())),FastExt.System.ConfigHandler.isEnableWindowAnim()||(a.animateTarget=null));return this.callParent(arguments)},onShowComplete:function(){this.callParent(arguments);this.toFront(!0);this.focus()}})};return b}();c.MessageBoxOverride=u;u=function(){function b(){}
b.__onLoaded=function(){Ext.override(Ext.tip.ToolTip,{show:function(){n.DRAGGING||this.callParent(arguments)},onShow:function(){this.callParent(arguments);this.disableDocMouseDown&&Ext.destroy(this.mousedownListener)},onDocMouseDown:function(a){try{this.callParent(arguments)}catch(d){}}})};return b}();c.TooltipOverride=u;u=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.list.Tree,{constructor:function(){this.callParent(arguments);this.element.on("contextmenu",this.onContextMenu,
this)},onContextMenu:function(a){var d=a.getTarget("[data-recordId]");d&&(d=d.getAttribute("data-recordId"),d=this.itemMap[d],this.hasListener("itemcontextmenu")&&this.fireEvent("itemcontextmenu",this,d,a),this.setSelection(d.getNode()))}})};return b}();c.TreeListOverrider=u;var n=function(){function b(){}b.__onLoaded=function(){Ext.override(Ext.ux.BoxReorderer,{startDrag:function(){this.callParent(arguments);b.DRAGGING=!0},endDrag:function(){this.callParent(arguments);b.DRAGGING=!1}})};return b}();
c.BoxReordererOverrider=n})(FastOverrider||(FastOverrider={}));
(function(c){var u=function(){function n(){}n.loadFiles=function(b,a){var d=function(e,f){if(e>=b.length)a(f);else{var l=b[e];Ext.isObject(l)?(f.push(l),d(e+1,f)):Ext.isString(l)?$.get(l,function(m){f.push(m);d(e+1,f)}):d(e+1,f)}};d(0,[])};n.loadPlugins=function(b,a,d){if(c.PluginLoader.loadedPluginMap[b])d();else{for(var e=[],f=[],l=0;l<a.length;l++){var m=a[l];Ext.isString(m)?m.endWith(".js")?e.push(m):m.endWith(".css")&&f.push(m):"js"===m.type?e.push(m.src):"css"===m.type&&f.push(m.src)}c.Documents.addScripts(e,
function(){c.Documents.addStylesheets(f,function(){c.PluginLoader.loadedPluginMap[b]=!0;d()})})}};n.loadedPluginMap={};return n}();c.PluginLoader=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.__onLoaded=function(){Ext.define("Ext.plugin.ShowLazyItems",{extend:"Ext.plugin.Abstract",alias:"plugin.showlazyitems",init:function(b){this.callParent(arguments);this.items&&this.eagerInstantiation&&(this.items=b.prepareItems(this.items));b.onShowComplete=Ext.Function.createInterceptor(b.onShowComplete,this.onComponentShow,this)},onComponentShow:function(){this.cmp.add(this.items);this.cmp.onComponentShow=null}})};return n}();c.Plugins=u})(FastExt||(FastExt=
{}));
(function(c){var u=function(){return function(){this.edit=this.show=!0}}();c.PowerSet=u;u=function(){function n(){}n.isPower=function(){return c.Base.toBool(c.System.ConfigHandler.getConfig("power_setting").value,!1)};n.hasPower=function(b,a){return b.managerPower&&b.managerPower.hasOwnProperty(a)?b.managerPower[a]:!0};n.checkPower=function(b){this.powers[b]||(this.powers[b]=c.Base.copy(this.defaultPower));b=this.powers[b];if(!Ext.isEmpty(b))for(var a in this.defaultPower)b.hasOwnProperty(a)||(b[a]=
this.defaultPower[a]);return b};n.checkManagerPower=function(b){if(!c.System.ManagerHandler.isValid()||!c.System.ManagerHandler.getGhostPowers()&&(Ext.isEmpty(c.System.ManagerHandler.getManagerExtPower())||0===c.System.ManagerHandler.getRoleType()))return null;c.System.ManagerHandler.getGhostPowers()||c.System.ManagerHandler.setGhostPowers(c.Json.jsonToObject(c.System.ManagerHandler.getManagerExtPower()));c.System.ManagerHandler.getGhostPowers()||c.System.ManagerHandler.setGhostPowers({});(b=c.System.ManagerHandler.getGhostPowers()[b.code])||
(b=c.Base.copy(c.Power.defaultPower));for(var a in c.Power.defaultPower)b.hasOwnProperty(a)||(b[a]=c.Power.defaultPower[a]);return b};n.pushPower=function(b,a){this.powers[b]=a};n.setPower=function(b,a){this.powers[b]||(this.powers[b]=a)};n.getSavePowerData=function(){return Ext.encode(this.powers)};n.getPowerCode=function(b){if(null!=b){if(!Ext.isEmpty(b.code))return b.code;var a=null;if(Ext.isFunction(b.up))if("2.0"===c.Power.powerVersion){var d=b.up("[menuContainer\x3dtrue]");d?a=d.getTitle():
(d=b.up("window"))&&(a=d.getTitle())}else(d=b.up("window"))&&(a=d.getTitle());b.name&&(a+=b.name);b.title&&(a+=b.title);b.text&&(a+=b.text);b.subtext&&(a+=b.subtext);b.dataIndex&&(a+=b.dataIndex);Ext.isFunction(b.getFieldLabel)&&Ext.isEmpty(b.getFieldLabel())&&(a+=b.getFieldLabel());if(a)return b.buildCodeText=a,$.md5(a)}return null};n.setPowerStyle=function(b){var a=Ext.all("[code\x3d"+b.code+"]");Ext.each(a,function(d,e){if(e=c.Power.checkPower(b.code))e.show?(d.removeCls("no-show-power"),e.edit?
d.removeCls("no-edit-power"):d.addCls("no-edit-power")):d.addCls("no-show-power")})};n.showPowerConfig=function(b,a){if(c.System.InitHandler.isInit()){var d=c.Power.checkPower(b.code);c.Power.menuShowing=!0;var e=Ext.create("Ext.container.Container",{layout:{type:"vbox",pack:"center"},border:0,defaults:{height:20,power:!1},items:[{xtype:"checkbox",name:"updateAlert",checked:!0,boxLabel:"\u5141\u8bb8\u663e\u793a",value:d.show,listeners:{change:function(f,l,m,k){d.show=l;c.Power.setPowerStyle(b)}}},
{xtype:"checkbox",name:"updateAlert",checked:!0,boxLabel:"\u5141\u8bb8\u7f16\u8f91",hidden:!c.Grid.isColumnType(b),value:d.edit,listeners:{change:function(f,l,m,k){d.edit=l;c.Power.setPowerStyle(b)}}}]});(new Ext.menu.Menu({padding:"0 0 0 10",powerMenu:!0,showSeparator:!1,style:{background:"#ffffff"},items:[e],listeners:{beforehide:function(f,l){c.Power.menuShowing=!1;c.Power.pushPower(b.code,d)}}})).showAt(a.getXY())}};n.showPowerMenus=function(b,a,d){return new Ext.Promise(function(e,f){f=c.System.MenuHandler.getPowerMenuByConfig(c.System.MenuHandler.getMenus(),
a,d);var l=Ext.create("Ext.data.TreeStore",{data:f,root:{expanded:!0}}),m=Ext.create("Ext.tree.Panel",{store:l,rootVisible:!1,bufferedRenderer:!1,animate:!0,containerScroll:!0,autoScroll:!0,viewConfig:{loadMask:{msg:"\u52a0\u8f7d\u529f\u80fd\u83dc\u5355\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026"}},listeners:{checkchange:function(g,p,q,r){p?(g.bubble(function(t){t.set("checked",!0)}),g.cascadeBy(function(t){t.set("checked",!0)})):g.cascadeBy(function(t){t.set("checked",!1)})}}});f=parseInt((.5*document.body.clientWidth).toFixed(0));
var k=parseInt((.8*document.body.clientHeight).toFixed(0)),h=Ext.create("Ext.window.Window",{title:"\u6743\u9650\u914d\u7f6e\uff08\u9009\u62e9\u529f\u80fd\u83dc\u5355\uff09",height:k,width:f,minHeight:400,minWidth:470,layout:"fit",iconCls:"extIcon extSelect",resizable:!0,animateTarget:b,maximizable:!0,constrain:!0,items:[m],modal:!0,buttons:[{text:"\u91cd\u7f6e",iconCls:"extIcon extReset",handler:function(){l.reload()}},{text:"\u786e\u5b9a",iconCls:"extIcon extOk",handler:function(){for(var g=m.getChecked(),
p="",q=0;q<g.length;q++)p+=","+g[q].data.id;e(p);h.close()}}]});h.show()})};n.showPowerExt=function(b,a,d,e){return new Ext.Promise(function(f,l){window.getMenuPower=function(){return a};window.getExtPower=function(){return d};window.getParentExtPower=function(){return e};window.close=function(){Ext.getCmp("ExtPowerWindow").close()};l=parseInt((.5*document.body.clientWidth).toFixed(0));var m=parseInt((.8*document.body.clientHeight).toFixed(0)),k=Ext.create("Ext.window.Window",{id:"ExtPowerWindow",
title:"\u914d\u7f6e\u754c\u9762\u6743\u9650\uff08\u5728\u7ec4\u4ef6\u4e0a\u53f3\u51fb\u9f20\u6807\u8fdb\u884c\u7f16\u8f91\u6743\u9650\uff09",iconCls:"extIcon extPower",layout:"fit",resizable:!1,maximized:!0,fixed:!0,draggable:!1,width:l,height:m,listeners:{show:function(h){h.update("\x3ciframe name\x3d'extPowerFrame'  src\x3d'power?managerId\x3d0' width\x3d'100%' height\x3d'100%' frameborder\x3d'0' scrolling\x3d'no' /\x3e")}},buttons:[{text:"\u4fdd\u5b58\u6743\u9650\u914d\u7f6e",iconCls:"extIcon extSave whiteColor",
handler:function(){f(window.extPowerFrame.window.getExtPower());k.close()}}]});k.show()})};n.powerVersion="2.0";n.types=[FastEnum.PowerType.gridcolumn,FastEnum.PowerType.menuitem,FastEnum.PowerType.button];n.config=!1;n.menuShowing=!1;n.powers=[];n.defaultPower=new c.PowerSet;return n}();c.Power=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.REG_BY_IMAGE=/\.(jpg|png|gif|jpeg)$/i;n.REG_BY_MP4=/\.(mp4)$/i;n.REG_BY_EXCEL=/\.(xls|xlsx)$/i;n.REG_BY_WORD=/\.(doc)$/i;n.REG_BY_TEXT=/\.(txt)$/i;return n}();c.RegExps=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getRenderFunStr=function(b){return c.Cache.getCache(b.getRenderCacheKey())};n.getRenderColumn=function(b,a){try{if(Ext.isFunction(b.getHeaderContainer)){var d=b.getHeaderContainer();if(d)return d.getHeaderAtIndex(a)}}catch(e){console.error(e)}return null};n.getRenderKey=function(b,a,d){b=$.md5(a+":"+b);d||(d={getId:function(){return(new Date).getTime()}});a=$.md5(b+d.getId());d.columnRenderKey||(d.columnRenderKey=[]);d.columnRenderKey.push(a);return $.md5(b+
d.getId())};n.onClickFromDataClick=function(b){b=Ext.util.Base64.decode($(b).attr("data-click-function"));eval(b)};n.toSingleLineText=function(b){return Ext.isEmpty(b)?this.toEmptyTip():b.toString().replace(RegExp("\n","g"),"").replace(RegExp("\t","g"),"").replace(/<\/?.+?>/g,"").replaceAll("\n","").replaceAll("\t","")};n.toHtmlContent=function(b){return Ext.isEmpty(b)?this.toEmptyTip():b.toString().replace(RegExp("\n","g"),"\x3cbr/\x3e").replace(RegExp("\t","g"),"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;").replace(RegExp(" ",
"g"),"\x26nbsp;")};n.toEmptyTip=function(){return c.Renders.toEmpty("\u65e0")};n.toEmpty=function(b){Ext.isEmpty(b)&&(b="\u65e0");return"\x3cspan style\x3d'color: #ccc;'\x3e"+b+"\x3c/span\x3e"};n.toLinkUrlText=function(b,a){return c.Renders.toClickText(b,"FastExt.Windows.openUrl('"+a+"','_blank')")};n.toClickText=function(b,a){return c.Power.config?b:'\x3cspan class\x3d"fast-grid-click" data-click-function\x3d"'+Ext.util.Base64.encode(a)+'" onclick\x3d"FastExt.Renders.onClickFromDataClick(this)" \x3e'+
b+"\x3c/span\x3e"};n.normal=function(b,a){return function(d,e,f,l,m,k,h,g){if(Ext.isEmpty(d))return c.Renders.toEmptyTip();e=b;Ext.isEmpty(e)&&(e="");if(Ext.isEmpty(a))d+=e;else{if("left"===a||"l"===a||c.Base.toBool(a,!1))d=e+d;if("right"===a||"r"===a)d+=e}return g?c.Renders.toHtmlContent(d):c.Renders.toSingleLineText(d)}};n.money=function(){return function(b,a,d,e,f){return c.Power.config?b:Ext.isEmpty(b)?c.Renders.toEmptyTip():"\uffe5"+c.Renders.toSingleLineText(b)}};n.text=function(){return function(b,
a,d,e,f,l,m,k){return c.Power.config?b:Ext.isEmpty(b)?c.Renders.toEmptyTip():k?c.Renders.toHtmlContent(b):"\x3cspan\x3e"+c.Renders.toSingleLineText(b)+"\x3c/span\x3e"}};n.bigText=function(){return function(b,a,d,e,f,l,m){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return"\x26nbsp;\x3cspan onclick\x3d\"FastExt.Dialog.showText(null,null,'\u67e5\u770b\u5185\u5bb9',MemoryCache['"+(a+"'])\"  class\x3d'fast-grid-action'  \x3e")+
c.Base.getSVGIcon("extSee")+"\x26nbsp;\u67e5\u770b\u5185\u5bb9\x3c/span\x3e\x26nbsp;"}};n.bigText2=function(){return function(b,a,d,e,f,l,m){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return c.Renders.toClickText(b,"FastExt.Dialog.showText(null,null,'\u67e5\u770b\u5185\u5bb9',MemoryCache['"+a+"'])")}};n.image=function(b,a,d,e){return function(f,l,m,k,h,g,p,q){try{if(c.Power.config)return f;Ext.isEmpty(e)&&
(e=!0);var r=c.Renders.getRenderKey(h,k,g);l="14px";m="auto";if(Ext.isEmpty(f)||"null"===f)return"\x3cimg style\x3d'object-fit: cover; border:1px solid #cccccc;height:"+l+";' src\x3d'images/default_img.png'   alt\x3d'' /\x3e";f.startWith("//")&&(f="http:"+f);try{k=!0,d&&!q&&(k=!1),k&&(b&&Ext.isNumber(b)&&0<b&&(l=b+"px"),a&&Ext.isNumber(a)&&0<a&&(m=a+"px"))}catch(w){}var t=f.split("@")[0],v=t.substring(t.lastIndexOf("/")+1);if(c.FileModule.json().match(v))return"\x26nbsp;\x3cspan onclick\x3d\"FastExt.Dialog.showLottie(this,'"+
c.Base.formatUrlVersion(t)+"')\"  class\x3d'fast-grid-action'  \x3e"+c.Base.getSVGIcon("extSee")+"\x26nbsp;\u67e5\u770b\u52a8\u6548\x3c/span\x3e\x26nbsp;";window[r]="\x3cimg  alt\x3d'' style\x3d'object-fit: cover;border:1px solid #cccccc;width: 100px; min-height:14px;  '  width\x3d'100'  class\x3d'lazyload' onerror\x3d\"this.src \x3d 'images/default_img.png';\" src\x3d'"+t+"' /\x3e";c.Cache.memory[r]=t;f="FastExt.Dialog.showImage(this,'"+r+"',event)";return"\x3cimg class\x3d'lazyload'  alt\x3d'' data-details-id\x3d'"+
r+"'  data-container-id\x3d'"+(p?p.getId():"none")+"'  style\x3d'object-fit: cover;border:1px solid #cccccc;height:"+l+";width: "+m+"; min-width:14px; min-height:14px; ' width\x3d'"+m.replace("px","")+"' height\x3d'"+l.replace("px","")+"' "+(e?' onclick\x3d"'+f+'"':"")+" onerror\x3d\"this.src \x3d 'images/default_img.png';\" src\x3d'"+c.Image.smallOSSImgUrl(t,l)+"'  /\x3e"}catch(w){return console.error(w),"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u56fe\u7247\x3c/span\x3e"}}};n.image2=function(){return function(b,
a,d,e,f,l,m){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return c.Renders.toClickText("\u67e5\u770b\u56fe\u7247","FastExt.Dialog.showImage(this,'"+a+"')")}};n.mp4=function(b,a){return function(d,e,f,l,m){if(c.Power.config)return d;if(Ext.isEmpty(d)||"null"===d)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";f=d.split("@");d=f[0];e=d.substring(d.lastIndexOf("/")+1);1<f.length&&
(e=f[1]);b&&(e="\u64ad\u653e\u89c6\u9891");f="FastExt.Dialog.showVideo(this,'"+c.Base.formatUrlVersion(d)+"');";e=c.Renders.toClickText("\x3cspan style\x3d'margin-right: 5px;'\x3e"+c.Base.getSVGIcon("extFileMP4")+"\x3c/span\x3e"+e,f);a&&(d="FastExt.Base.download('"+c.Base.formatUrlVersion(d)+"')",e+="\x26nbsp;\x26nbsp;"+c.Renders.toClickText("\x3cspan style\x3d'margin-right: 5px;'\x3e"+c.Base.getSVGIcon("extDownload")+"\x3c/span\x3e\u4e0b\u8f7d",d));return e}};n.mp3=function(){return function(b,a,
d,e,f){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";a=b.split("@");d=a[0];b=d.substring(d.lastIndexOf("/")+1);1<a.length&&(b=a[1]);a="FastExt.Dialog.showMusic(this,'"+c.Base.formatUrlVersion(d)+"');";return c.Renders.toClickText("\x3cspan style\x3d'margin-right: 5px;'\x3e"+c.Base.getSVGIcon("extFileMP3")+"\x3c/span\x3e"+b,a)}};n.office=function(){return function(b,a,d,e,f,l,m,k){if(c.Power.config)return b;
if(Ext.isEmpty(b)||"null"===b)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";e=b.split("@");d=e[0];f=d.split("?")[0];a=f.substring(f.lastIndexOf("/")+1);1<e.length&&(a=e[1]);e=c.Base.getSVGClassName(f,a);b="\x26nbsp;\x3cspan onclick\x3d\"FastExt.File.officeViewer('"+(c.Base.formatUrlVersion(b)+"')\"  class\x3d'fast-grid-action'  \x3e")+c.Base.getSVGIcon("extEye")+"\x26nbsp;\u9884\u89c8\x3c/span\x3e\x26nbsp;";d=" FastExt.Base.openUrl('"+c.Base.formatUrlVersion(d)+
"','_blank')";return b+c.Renders.toClickText("\x3cspan style\x3d'margin-right: 5px;'\x3e"+c.Base.getSVGIcon(e)+"\x3c/span\x3e"+a,d)}};n.file=function(b){return function(a,d,e,f,l,m,k,h){if(c.Power.config)return a;if(Ext.isEmpty(a)||"null"===a)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";var g=a.split("@"),p=g[0],q=p.split("?")[0],r=q.substring(q.lastIndexOf("/")+1);1<g.length&&(r=g[1]);Ext.isEmpty(b)||(r=e.get(b));if(c.FileModule.image().match(q,r))return c.Renders.image()(a,
d,e,f,l,m,k,h);if(c.FileModule.mp4().match(q,r))return c.Renders.mp4()(a,d,e,f,l,m,k,h);if(c.FileModule.pdf().match(q,r)||c.FileModule.word().match(q,r)||c.FileModule.excel().match(q,r)||c.FileModule.ppt().match(q,r))return c.Renders.office()(a,d,e,f,l,m,k,h);a=c.Base.getSVGClassName(q,r);p=" FastExt.Base.openUrl('"+c.Base.formatUrlVersion(p)+"','_blank')";return c.Renders.toClickText("\x3cspan style\x3d'margin-right: 5px;'\x3e"+c.Base.getSVGIcon(a)+"\x3c/span\x3e"+r,p)}};n.files=function(){return function(b,
a,d,e,f,l,m,k){if(c.Power.config)return b;try{if(Ext.isEmpty(b)||"null"===b)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";var h=b;if(Ext.isString(b)&&!Ext.isEmpty(b))try{h=Ext.decode(b)}catch(w){console.error(w)}if(0===h.length)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e";var g=c.Renders.getRenderKey(f,e,l);f="";for(var p=!1,q=!1,r=0;r<h.length;r++){var t=h[r];if(!p){var v=t.split("@");p=1<v.length;q=2<v.length}f+="\x3cdiv style\x3d'margin: 5px;display: inline-block;'\x3e"+
c.Renders.file()(t,a,d,e,r,l,m,k)+"\x3c/div\x3e"}if(k)return f;c.Cache.memory[g]="\x3cdiv style\x3d'overflow: scroll;max-height: 300px;'\x3e"+f+"\x3c/div\x3e";c.Cache.memory[g+"Val"]=b;b="FastExt.File.showFiles(this,null,[FastExt.FileModule.file()],MemoryCache['"+g+"Val'],'\u67e5\u770b\u9644\u4ef6',true,"+p+","+q+")";window[g]=f;return'\x26nbsp;\x3cspan onclick\x3d"'+b+"\"   data-details-id\x3d'"+g+"' class\x3d'fast-grid-action'  \x3e"+c.Base.getSVGIcon("extFolder")+"\x26nbsp;\u5171\u6709"+h.length+
"\u4e2a\u6587\u4ef6\x3c/span\x3e\x26nbsp;"}catch(w){return console.error(w),"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u6587\u4ef6\x3c/span\x3e"}}};n.images=function(){return function(b,a,d,e,f,l,m,k){try{if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u56fe\u7247\x3c/span\x3e";var h=b;if(Ext.isString(b)&&!Ext.isEmpty(b))try{h=Ext.decode(b)}catch(q){console.error(q)}if(0===h.length)return"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u56fe\u7247\x3c/span\x3e";
var g=c.Renders.getRenderKey(f,e,l);b="";f=[];for(var p=0;p<h.length;p++)b+=c.Renders.image(24)(h[p],a,d,e,p,l,m,k)+"\x26nbsp;\x26nbsp;",f.push({url:h[p]});if(k)return b;c.Cache.memory[g]=f;a="FastExt.Dialog.showImage(null,MemoryCache['"+g+"'])";window[g]=b;return'\x26nbsp;\x3cspan onclick\x3d"'+a+"\"   data-details-id\x3d'"+g+"' class\x3d'fast-grid-action'  \x3e"+c.Base.getSVGIcon("extImage")+"\x26nbsp;\u5171\u6709"+h.length+"\u5f20\u56fe\u7247\x3c/span\x3e\x26nbsp;"}catch(q){return console.error(q),
"\x3cspan style\x3d'color: #ccc;'\x3e\u6682\u65e0\u56fe\u7247\x3c/span\x3e"}}};n.html=function(){return function(b,a,d,e,f,l,m,k){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return"\x26nbsp;\x3cspan onclick\x3d\"FastExt.Dialog.showEditorHtml(this,'\u67e5\u770b\u5185\u5bb9',MemoryCache['"+(a+"'])\"  class\x3d'fast-grid-action'  data-details-id\x3d'")+a+"' \x3e"+c.Base.getSVGIcon("extSee")+"\x26nbsp;\u67e5\u770b\u5185\u5bb9\x3c/\x3e\x26nbsp;"}};
n.html2=function(){return function(b,a,d,e,f,l,m,k){return c.Power.config?b:Ext.isEmpty(b)||"null"===b?c.Renders.toEmptyTip():k?b:c.Renders.toSingleLineText(b)}};n.json=function(){return function(b,a,d,e,f,l,m){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;a="FastExt.Dialog.showJson(this,'\u67e5\u770bJSON\u5185\u5bb9',MemoryCache['"+a+"'])";return c.Renders.toClickText(c.Renders.toSingleLineText(b),a)}};n.json2=
function(){return function(b,a,d,e,f,l,m){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return c.Renders.toClickText("\u67e5\u770bJSON\u5185\u5bb9","FastExt.Dialog.showJson(this,'\u67e5\u770bJSON\u5185\u5bb9',MemoryCache['"+a+"'])")}};n.link=function(b,a,d){return function(e,f,l,m,k){if(c.Power.config)return e;try{var h=b.split("@"),g=d.split("@");f=[];m=[];for(k=0;k<h.length;k++){var p=h[k],q=g[k];Ext.isEmpty(q)&&
(q=p);var r=l.get(p);Ext.isEmpty(r)||(f.push("'t."+q+"':'"+r+"'"),m.push(r))}if(Ext.isEmpty(e)||"null"===e)return c.Renders.toEmpty(m.join(","));var t="new "+a+"().showDetails(null, {"+f.join(",")+"})";return c.Renders.toClickText(c.Renders.toSingleLineText(e),t)}catch(v){return console.error(v),c.Renders.toEmptyTip()}}};n.target=function(b,a,d){return function(e,f,l,m,k){if(c.Power.config)return e;try{var h=l.get(a),g=l.get(b);f=d;if(Ext.isEmpty(e)||"null"===e)return c.Renders.toEmpty(g);Ext.isEmpty(f)&&
(f="getTargetEntity");if(!Ext.isFunction(window[f]))return e;var p=window[f](h,a);if(p){var q="new "+p.entityCode+"().showDetails(null, {'t."+p.entityId+"':'"+g+"'})";return c.Renders.toClickText(c.Renders.toSingleLineText(e),q)}return e}catch(r){return console.error(r),c.Renders.toEmptyTip()}}};n.map=function(b,a,d){return function(e,f,l,m,k){if(c.Power.config)return e;try{if(Ext.isEmpty(e)||"null"===e)return c.Renders.toEmptyTip();var h=l.get(b),g=l.get(a),p=l.get(d);return h&&g?(f=h+","+g,l="FastExt.AMapDialog.plainShow(null,'"+
f+"','','"+e+"')",p&&(l="FastExt.AMapDialog.plainShow(null,'"+f+"','"+p+"','"+e+"')"),c.Renders.toClickText(e,l)):e}catch(q){return c.Renders.toEmptyTip()}}};n.mapImgLayer=function(b,a,d,e,f,l,m){return function(k,h,g,p,q){if(c.Power.config)return k;try{if(Ext.isEmpty(k)||"null"===k)return c.Renders.toEmptyTip();var r=g.get(b),t=g.get(a),v=g.get(d),w=g.get(e);w&&(r=c.Image.rotateOSSImgUrl(r,w));var z=g.get(f);Ext.isEmpty(z)&&(z=6);var x=g.get(l),y=g.get(m);Ext.isEmpty(x)&&(x=1);Ext.isEmpty(y)&&(y=
20);return r&&t&&v?c.Renders.toClickText(k," FastExt.Map.showImgLayerInMap(null,'"+r+"','"+t+"','"+v+"',"+z+","+x+","+y+")"):k}catch(A){return c.Renders.toEmptyTip()}}};n.password=function(){return function(b,a,d,e,f){return c.Power.config?b:Ext.isEmpty(b)?c.Renders.toEmptyTip():"\x3cspan\x3e******\x3c/span\x3e"}};n.href=function(b){return function(a,d,e,f,l){if(c.Power.config)return a;d=b;Ext.isEmpty(d)&&(d=a);return Ext.isEmpty(a)||"null"===a?c.Renders.toEmptyTip():c.Renders.toClickText(a,"FastExt.Base.openUrl('"+
d+"','_blank')")}};n.fileSize=function(){return function(b,a,d,e,f){if(c.Power.config)return b;try{return Ext.isEmpty(b)||"null"===b?c.Renders.toEmptyTip():1048576<=b?(b/1024/1024).toFixed(2)+"M":1024<=b?(b/1024).toFixed(2)+"KB":b+"B"}catch(l){return console.error(l),c.Renders.toEmptyTip()}}};n.duration=function(){return function(b,a,d,e,f){if(c.Power.config)return b;try{if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();var l=parseInt(b)/1E3,m=parseInt((l/3600).toString()),k=parseInt((l/
60%60).toString()),h=parseInt((l%60).toString());return 0<m?m+"\u65f6"+k+"\u5206"+h+"\u79d2":0<k?k+"\u5206"+h+"\u79d2":h+"\u79d2"}catch(g){return console.error(g),c.Renders.toEmptyTip()}}};n.dateFormat=function(b){return function(a,d,e,f,l){if(c.Power.config)return a;try{if(Ext.isEmpty(a)||"null"===a)return c.Renders.toEmptyTip();Ext.isEmpty(b)&&(b="Y-m-d H:i:s");var m=c.Base.guessDateFormat(a);e.set();return Ext.Date.format(Ext.Date.parse(a,m),b)}catch(k){return console.error(k),a}}};n.dateFormatTip=
function(b,a){return function(d,e,f,l,m){if(c.Power.config)return d;try{if(Ext.isEmpty(d)||"null"===d)return c.Renders.toEmptyTip();var k=c.Base.guessDateFormat(d),h=Ext.Date.parse(d,k);return c.Dates.formatDateTip(h,b,a)}catch(g){return console.error(g),d}}};n.timestamp=function(b){return function(a,d,e,f,l){if(c.Power.config)return a;try{if(Ext.isEmpty(a)||"null"===a)return c.Renders.toEmptyTip();Ext.isEmpty(b)&&(b="Y-m-d H:i:s");return Ext.Date.format(new Date(parseInt(a)),b)}catch(m){return console.error(m),
a}}};n.timestampTip=function(b,a){return function(d,e,f,l,m){if(c.Power.config)return d;try{return Ext.isEmpty(d)||"null"===d?c.Renders.toEmptyTip():c.Dates.formatDateTip(new Date(parseInt(d)),b,a)}catch(k){return console.error(k),d}}};n.enum=function(b,a,d){return function(e,f,l,m,k,h,g,p){if(c.Power.config)return e;try{if(Ext.isEmpty(e))return c.Renders.toEmptyTip();Ext.isEmpty(d)&&(d="text");Ext.isEmpty(a)&&(a="id");return"\x3cdiv style\x3d'display: inline;' data-set\x3d'false' data-enum\x3d'"+
b+"' data-enum-value\x3d'"+a+"' data-enum-text\x3d'"+d+"' data-id\x3d'"+e+"'\x3e\x3cspan style\x3d'color: #ccc;'\x3e"+(e+"\x3c/span\x3e\x3c/div\x3e")}finally{c.Store.getEnumDataByRender(b)}}};n.exception=function(){return function(b,a,d,e,f,l,m){if(c.Power.config)return b;try{if(Ext.isEmpty(b))return c.Renders.toEmptyTip();var k=c.Renders.getRenderKey(f,e,l);c.Cache.memory[k]=b;return"\x26nbsp;\x3cspan onclick\x3d\"FastExt.Dialog.showCode(null,MemoryCache['"+(k+"'])\"  class\x3d'fast-grid-action'  \x3e")+
c.Base.getSVGIcon("extSee")+"\x26nbsp;\u67e5\u770b\u5f02\u5e38\u5185\u5bb9\x3c/span\x3e\x26nbsp;"}catch(h){return"\x3cspan style\x3d'color: #ccc;'\x3e"+b+"\x3c/span\x3e"}}};n.color=function(){return function(b,a,d,e,f){if(c.Power.config)return b;try{return Ext.isEmpty(b)?c.Renders.toEmptyTip():"\x3cdiv style\x3d'background: "+c.Color.toColor(b)+";padding: 0 25px;height: 14px;display: inline;'\x3e\x3c/div\x3e"}catch(l){return"\x3cspan style\x3d'color: #ccc;'\x3e"+b+"\x3c/span\x3e"}}};n.qrCode=function(){return function(b,
a,d,e,f){if(c.Power.config)return b;try{return c.Renders.toClickText("\u67e5\u770b\u4e8c\u7ef4\u7801","FastExt.Image.showImage(null,'qrCode?v\x3d1\x26render\x3dimage\x26content\x3d"+b+"')")}catch(l){return"\x3cspan style\x3d'color: #ccc;'\x3e"+b+"\x3c/span\x3e"}}};n.code=function(){return function(b,a,d,e,f,l,m,k){if(c.Power.config)return b;if(Ext.isEmpty(b)||"null"===b)return c.Renders.toEmptyTip();a=c.Renders.getRenderKey(f,e,l);c.Cache.memory[a]=b;return"\x26nbsp;\x3cspan onclick\x3d\"FastExt.Dialog.showCode(this,MemoryCache['"+
(a+"'],true,'java')\"  class\x3d'fast-grid-action'  data-details-id\x3d'")+a+"' \x3e"+c.Base.getSVGIcon("extSee")+"\x26nbsp;\u67e5\u770b\u5185\u5bb9\x3c/\x3e\x26nbsp;"}};return n}();c.Renders=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.__onLoaded=function(){n.initExtAjaxConfig();n.initJQueryConfig()};n.getGlobalParams=function(){if(!c.CallSites.isFastExtUtilsCall())return console.warn("\u8bf7\u52ff\u975e\u6cd5\u6267\u884c\u6838\u5fc3\u4ee3\u7801\uff01"),{};var b={fromOS:c.Base.getOS(),managerWeb:!0,__browser:Ext.browser.name,__managerId:c.System.ManagerHandler.getManagerId()};c.System.InitHandler.isInit()&&(b.webVersion=c.System.ConfigHandler.getSystemVersionInt());return b};n.getApiHost=
function(){return c.System.ConfigHandler.getApiHost()};n.getSessionId=function(){return c.System.ConfigHandler.getSessionId()};n.safeToObj=function(b){if(Ext.isEmpty(b))return{};if(Ext.isObject(b))return b;try{var a=c.Json.jsonToObject(b);if(a)return a}catch(d){}return{}};n.checkResponse=function(b){203===b.status?(b=c.Server.safeToObj(b.response),c.LoginLayout.showSessionOut(b.message)):403===b.status?c.Dialog.showAlert("\u8bf7\u6c42\u5f02\u5e38",b.response):203===b.code&&(b=c.Server.safeToObj(b.response),
c.LoginLayout.showSessionOut(b.message))};n.initExtAjaxConfig=function(){Ext.Ajax.on("beforerequest",function(b,a,d){try{c.Server.isSilenceRequest()}catch(e){}finally{a=c.Server.getGlobalParams(),a.__httpTool="extjs",b.setExtraParams(a)}})};n.initJQueryConfig=function(){$.ajaxSetup({data:c.Server.getGlobalParams()});$(document).ajaxStart(function(b){try{c.Server.isSilenceRequest()}catch(a){}finally{$.ajaxSetup({data:c.Server.getGlobalParams()})}})};n.isProjectRequest=function(b){try{var a=new URL(window.location.href);
c.Server.getApiHost()&&(a=new URL(c.Server.getApiHost()));var d=new URL(b.responseURL||b.getResponseHeader("Request-URI"));return a.protocol===d.protocol&&a.hostname===d.hostname&&a.port===d.port}catch(e){return!1}};n.checkVersion=function(b){try{if(c.Server.isProjectRequest(b)&&!c.Power.isPower()&&c.System.InitHandler.isInit()&&Ext.isFunction(b.getResponseHeader)){var a=b.getResponseHeader("Project-Version-Code");if(!c.Base.toBool(b.getResponseHeader("Project-Debug"),!0)&&!Ext.isEmpty(a)&&parseInt(a)>
parseInt(c.System.ConfigHandler.getSystemVersionInt())&&!(0<$("#newVersionTip").length)){$("body").append($("\x3cdiv id\x3d'newVersionTip' style\x3d'position: fixed;right: 50px;bottom: 50px;width: 160px;height: 160px;z-index: 2147483647;cursor: pointer;'\x3e\x3c/div\x3e"));var d=$("#newVersionTip");c.Lottie.loadJsonAnimByEl(d[0],"base/lottie/new_version.json");d.on("click",function(){location.reload()})}}}catch(e){}};n.checkManager=function(b){if(c.Server.isProjectRequest(b)&&Ext.isFunction(b.getResponseHeader)&&
c.System.ManagerHandler.isValid()&&(b=b.getResponseHeader("Project-Manager-ID"),!Ext.isEmpty(b)&&$.md5(c.System.ManagerHandler.getManagerId().toString())!==b&&!Ext.getCmp("ManagerInfoChangeWin"))){b=Ext.create("Ext.form.FormPanel",{bodyPadding:5,method:"POST",region:"center",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"5 5 5 5"},border:0,items:[{xtype:"lottie",width:150,height:120,jsonPath:"base/lottie/error_normal.json"},{xtype:"label",maxWidth:250,margin:"5 5 10 5",html:"\u7cfb\u7edf\u68c0\u6d4b\u5230\u60a8\u7684\u767b\u5f55\u4fe1\u606f\u53d1\u751f\u53d8\u5316\uff0c\u5efa\u8bae\u60a8\u5237\u65b0\u9875\u9762\uff01"}]});
var a=Ext.create("Ext.window.Window",{title:"\u8d26\u6237\u63d0\u9192",iconCls:"extIcon extManager",id:"ManagerInfoChangeWin",width:280,layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,animateDisable:!0,items:[b],modal:!0,buttons:["-\x3e",{text:"\u77e5\u9053\u4e86",iconCls:"extIcon extOk",handler:function(){a.close()}},{text:"\u7acb\u5373\u5237\u65b0",iconCls:"extIcon extReset",handler:function(){location.reload()}},"-\x3e"]});a.show()}};n.checkRestart=function(b){try{if(c.Server.isProjectRequest(b)&&
!c.Power.isPower()&&c.System.InitHandler.isInit()&&Ext.isFunction(b.getResponseHeader)){var a=b.getResponseHeader("Project-Restart");if(void 0!==a&&null!==a){var d=Ext.getCmp("SystemRestartWindow");c.Base.toBool(a,!1)?d||Ext.create("Ext.window.Window",{title:"\u7cfb\u7edf\u6b63\u5728\u66f4\u65b0\u4e2d",iconCls:"extIcon extTimer",id:"SystemRestartWindow",layout:{type:"vbox",pack:"center",align:"middle"},constrain:!0,resizable:!1,unpin:!1,closable:!1,items:[{xtype:"lottie",width:320,height:280,jsonPath:"base/lottie/robot_waiting.json"}],
startChecking:function(){var e=this;e.destroyed||e.destroying||(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){c.Server.setSilence(!0);$.post(c.Server.idleUrl()).always(function(){e.destroyed||e.destroying||e.startChecking()})},3E3))},modal:!0,listeners:{destroy:function(){location.reload()},show:function(){this.startChecking()}}}).show():d&&d.close()}}}catch(e){}};n.isSilenceRequest=function(){return c.Base.toBool(n.silence,!1)};n.setSilence=function(b){n.silence=b};n.saveSystemConfigUrl=
function(){return"ext/config/saveSystemConfig"};n.idleUrl=function(){return this.getApiHost()+"idle"};n.loginUrl=function(){return this.getApiHost()+"controller/login"};n.showCaptchaUrl=function(){return this.getApiHost()+"showCaptcha?t\x3d"+Math.random()};n.validOperateUrl=function(){return this.getApiHost()+"controller/valid"};n.showSysConfigUrl=function(){return this.getApiHost()+"showSysConfig"};n.showSysInfoUrl=function(){return this.getApiHost()+"showSysInfo"};n.entityListUrl=function(){return this.getApiHost()+
"entity/list"};n.importEntityExcelUrl=function(){return this.getApiHost()+"entity/importData"};n.loadEntityDataUrl=function(){return this.getApiHost()+"entity/loadData"};n.showMenuColumnUrl=function(){return this.getApiHost()+"showMenuColumn"};n.showPowerMenusUrl=function(){return this.getApiHost()+"showPowerMenus"};n.globalSearchUrl=function(){return this.getApiHost()+"globalSearch"};n.showEnumsUrl=function(){return this.getApiHost()+"showEnums"};n.saveExtConfigUrl=function(){return this.getApiHost()+
"ext/config/saveExtConfig"};n.showExtConfigUrl=function(){return this.getApiHost()+"ext/config/showExtConfig"};n.deleteExtConfigUrl=function(){return this.getApiHost()+"ext/config/deleteExtConfig"};n.uploadUrl=function(){return this.getApiHost()+"upload"};n.computeUrl=function(){return this.getApiHost()+"entity/compute"};n.downSystemConfigUrl=function(){return this.getApiHost()+"downSystemConfig"};n.getGoogleBindUrl=function(){return this.getApiHost()+"controller/googleBind"};n.logout=function(b){Ext.isEmpty(b)&&
(b="\u6b63\u5728\u9000\u51fa\u767b\u5f55\u4e2d\u2026\u2026");c.Dialog.showWait(b);$.post(this.getApiHost()+"controller/logout",function(){location.reload()})};n.updateEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/update",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.updateDBEntity=function(b,a){c.Power.isPower()?
a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/batchUpdate",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.replaceDBEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/replace",b,function(d){203!==
d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.deleteAttach=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"deleteAttach",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.deleteEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"entity/delete",b,function(d){203!==d.code&&Ext.isFunction(a)&&a(d.success,d.message)})};n.rebackEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/reback",b,function(d){203!==d.code&&Ext.isFunction(a)&&a(d.success,d.message)})};n.copyEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"entity/copy",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.clearEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/clear",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.clearRepeatEntity=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"entity/repeat",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.message):a(!1,d.message))})};n.showExtConfig=function(b,a,d){c.Power.isPower()?d(!1):(b={configKey:b,configType:a},$.post(this.showExtConfigUrl(),b,function(e){Ext.isFunction(d)&&(e.success?d(!0,e.data.configValue,e.message):d(!1,null,e.message))}))};n.saveExtConfig=function(b,a,d,e,f){c.Power.isPower()?e(!1):(b={configKey:b,configType:a,configValue:d},Ext.isEmpty(f)||(b=c.Json.mergeJson(b,f)),
$.post(this.saveExtConfigUrl(),b,function(l){Ext.isFunction(e)&&(l.success?e(!0,l.message):e(!1,l.message))}))};n.deleteExtConfig=function(b,a,d){c.Power.isPower()?d(!1):(b={configKey:b,configType:a},$.post(c.Server.deleteExtConfigUrl(),b,function(e){Ext.isFunction(d)&&(e.success?d(!0,e.message):d(!1,e.message))}))};n.exportExcel=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+
"entity/export",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.data,d.message):a(!1,null,d.message))})};n.excelModule=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u751f\u6210\u6a21\u677f\uff01"):$.post(this.getApiHost()+"entity/module",b,function(d){203!==d.code&&Ext.isFunction(a)&&(d.success?a(!0,d.data,d.message):a(!1,null,d.message))})};n.showColumns=function(b,a,d){d||(d={});$.post(this.getApiHost()+
"ext/config/showEntityColumn?entityCode\x3d"+b,d,function(e){Ext.isFunction(a)&&(e.success?a(!0,e.data.configValue,e.message):a(!1,null,e.message))})};n.getIcon=function(b,a){if(Ext.isEmpty(b))return null;var d="icons/"+b;0===b.indexOf("icons/")&&(d=b);if(Ext.isEmpty(a))return d;a.startWith("#")&&(a=a.substring(1));return this.getApiHost()+"icon?path\x3d"+d+"\x26color\x3d"+a};n.showSystemConfig=function(b){$.post(this.getApiHost()+"ext/config/showSystemConfig",function(a){Ext.isFunction(b)&&(a.success?
b(!0,a.data,a.message):b(!1,null,a.message))})};n.deleteSystemConfig=function(b){$.post(this.getApiHost()+"ext/config/deleteSystemConfig",function(a){Ext.isFunction(b)&&b(a.success,a.message)})};n.loadMonitor=function(b){n.setSilence(!0);$.post(this.getApiHost()+"monitor",function(a){n.setSilence(!1);Ext.isFunction(b)&&b(a.success,a.data)})};n.countReport=function(b){c.Power.isPower()?b(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"countReport",function(a){Ext.isFunction(b)&&b(a.success,a.data)})};n.checkWaitNotice=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):(n.setSilence(!0),$.post(this.getApiHost()+"controller/waitNotice",b,function(d){n.setSilence(!1);Ext.isFunction(a)&&a(d.success,d.data)}))};n.doneWaitNotice=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"controller/doneNotice",{noticeId:b},function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.clearWaitNotice=function(b){c.Power.isPower()?b(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"controller/clearNotice",function(a){Ext.isFunction(b)&&b(a.success,a.message,a.data)})};n.downData=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"entity/downData",b,function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.updateAllLayer=function(b){c.Power.isPower()?b(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"updateAllLayer",function(a){Ext.isFunction(b)&&b(a.success,a.message)})};n.updateAllSame=function(b){c.Power.isPower()?b(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"updateAllSame",function(a){Ext.isFunction(b)&&b(a.success,a.message)})};n.updateLayer=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/updateLayer",b,function(d){Ext.isFunction(a)&&a(d.success,d.message)})};n.updateSame=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"entity/updateSame",b,function(d){Ext.isFunction(a)&&a(d.success,d.message)})};n.showEcharts=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/echarts",b,function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.saveCache=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):
$.post(this.getApiHost()+"saveToCache",{source:b},function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.reportException=function(b){try{Ext.isEmpty(b)||"null"===b||(Ext.isObject(b)&&(b=c.Json.objectToJson(b)),0<=b.indexOf("\u8868\u5355\u586b\u5199\u4e0d\u5b8c\u6574")||$.post(this.getApiHost()+"base/system/tool/jsException",{jsException:b},function(a){c.System.ConfigHandler.isDebug()&&c.System.ConfigHandler.isLocal()&&a.success&&c.Dialog.toast("\u5df2\u4e0a\u62a5JS\u9519\u8bef\uff01")}))}catch(a){}};
n.loadSource=function(b,a){c.Power.isPower()?a(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/loadSource",{entityCode:b},function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.saveSource=function(b,a,d){c.Power.isPower()?d(!1,"\u5f53\u524d\u6b63\u5728\u8fdb\u884c\u754c\u9762\u6743\u9650\u914d\u7f6e\uff0c\u4e0d\u53ef\u64cd\u4f5c\u6570\u636e\uff01"):$.post(this.getApiHost()+"entity/saveSource",
{entityCode:b,content:a},function(e){Ext.isFunction(d)&&d(e.success,e.message,e.data)})};n.destroyList=function(b){c.Power.isPower()||$.post(this.getApiHost()+"entity/destroyList",{storeId:b},function(a){})};n.saveSystemConfig=function(b,a){var d={};d[b]=a;$.post(this.getApiHost()+"ext/config/saveSystemConfig",d,function(e){})};n.googleVerify=function(b,a){if(c.CallSites.isFastExtUtilsCall()){var d={};d.code=b;$.post(this.getApiHost()+"controller/googleVerify",d,function(e){Ext.isFunction(a)&&a(e.success,
e.message,e.data)})}else console.warn("\u8bf7\u52ff\u975e\u6cd5\u6267\u884c\u6838\u5fc3\u4ee3\u7801\uff01")};n.googleReset=function(b,a){b={managerId:b};$.post(this.getApiHost()+"controller/googleReset",b,function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};n.clickVerify=function(b,a,d,e,f){function l(p,q){var r=m();return l=function(t,v){return r[t-297]},l(p,q)}function m(){var p="loadFunction 11619WYIShR loginPublicKey SecurityHandler 428628lorMLY 10001960XCprbe 555020xRkOWM loginSign Documents System 11016EreXbt Base64 1901979zxsDlp util decode 894669oYWlfI 133iPCZvo 3534534ZZAudu sign 65FGpxpX".split(" ");
m=function(){return p};return m()}if(c.CallSites.isFastExtUtilsCall()){for(var k=[],h=c.Base.randomInt(1,100),g=0;g<h;g++)k.push(a*g+","+(d^g));b={"verify.loginName":b,"verify.loginKey":$.md5(c.Base.buildUUID16()),"verify.loginFrom":"WebManager","verify.clickPositions":c.Json.objectToJson(k),"verify.t":(new Date).getTime()};a=l;(function(p,q){var r=l;for(p=p();;)try{if(parseInt(r(311))/1+parseInt(r(313))/2+parseInt(r(308))/3+-parseInt(r(302))/4*(-parseInt(r(315))/5)+-parseInt(r(300))/6*(parseInt(r(312))/
7)+-parseInt(r(306))/8*(parseInt(r(297))/9)+-parseInt(r(301))/10===q)break;else p.push(p.shift())}catch(t){p.push(p.shift())}})(m,964519);k=c[a(304)][a(316)](Ext[a(309)][a(307)][a(310)](c[a(305)][a(299)][a(298)]));d=c.Documents.loadFunction(Ext[a(309)][a(307)][a(310)](c.System[a(299)][a(303)]));k=k();b[a(314)]=d(k,b);b.captchaKey=e;b["verify.clickPositions"]=Ext.util.Base64.encode(b["verify.clickPositions"]);$.post(this.getApiHost()+"controller/verify",b,function(p){Ext.isFunction(f)&&f(p.success,
p.message,p.data)})}else console.warn("\u8bf7\u52ff\u975e\u6cd5\u6267\u884c\u6838\u5fc3\u4ee3\u7801\uff01")};n.getDataboardData=function(b){$.post(this.getApiHost()+"databoard",{},function(a){Ext.isFunction(b)&&b(a.success,a.message,a.data)})};n.zipFile=function(b,a){$.post(this.getApiHost()+"zipFile",b,function(d){Ext.isFunction(a)&&a(d.success,d.message,d.data)})};return n}();c.Server=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.getStoreMenuText=function(b,a,d){Ext.isEmpty(d)&&(d="\x3e");return a?c.System.MenuHandler.getPlainMenu(a,d):b&&b.grid&&b.grid.tabMenu?c.System.MenuHandler.getPlainMenu(b.grid.tabMenu,d):b&&b.entity?c.System.MenuHandler.getPlainMenu(c.System.MenuHandler.searchMenuByEntityCode(b.entity.entityCode),d):""};n.commitStoreUpdate=function(b,a,d){return new Ext.Promise(function(e,f){if(b&&b.entity&&b.entity.idProperty&&!b.commiting){d||(d={});f=b.getUpdatedRecords();
var l=b.getNewRecords();f=f.concat(l);if(0===f.length)e(!0),b.commiting=!1;else{b.commiting=!0;l={entityCode:b.entity.entityCode};l.menu=c.Store.getStoreMenuText(b);for(var m=0;m<f.length;m++){for(var k=f[m],h=0;h<b.entity.idProperty.length;h++){var g=b.entity.idProperty[h];l["data["+m+"]."+g]=k.get(g)}for(var p in k.modified)h=k.modified[p],g=k.get(p),!Ext.isString(h)&&Ext.isEmpty(g)?l["data["+m+"]."+p]="\x3cnull\x3e":l["data["+m+"]."+p]=k.get(p)}l=c.Json.mergeJson(l,d);c.Server.updateEntity(l,function(q,
r){b.commiting=!1;e(q);q?("false"!==a&&c.Dialog.toast(a?a:r),b.commitChanges()):(b.rejectChanges(),Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",r))})}}})};n.commitStoreDelete=function(b,a,d){return new Ext.Promise(function(e,f){if(b.entity&&b.entity.idProperty){f={entityCode:b.entity.entityCode};f.menu=c.Store.getStoreMenuText(b);for(var l=0;l<a.length;l++)for(var m=a[l],k=0;k<b.entity.idProperty.length;k++){var h=b.entity.idProperty[k];f["data["+l+"]."+h]=m.get(h)}f=c.Json.mergeJson(f,d);c.Server.deleteEntity(f,
function(g,p){e(g);g?(c.Dialog.toast(p),g=b.currentPage,0>=b.count()-a.length&&--g,b.loadPage(Math.max(g,1))):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",p)})}})};n.commitStoreReback=function(b,a){return new Ext.Promise(function(d,e){if(b.entity&&b.entity.idProperty){e={entityCode:b.entity.entityCode};e.menu=c.Store.getStoreMenuText(b);for(var f=0;f<a.length;f++)for(var l=a[f],m=0;m<b.entity.idProperty.length;m++){var k=b.entity.idProperty[m];e["data["+f+"]."+k]=l.get(k)}c.Server.rebackEntity(e,function(h,
g){d(h);h?(h=b.currentPage,0>=b.count()-a.length&&--h,b.loadPage(Math.max(h,1))):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",g)})}})};n.commitStoreCopy=function(b,a){return new Ext.Promise(function(d,e){if(b.entity&&b.entity.idProperty){e={entityCode:b.entity.entityCode};e.menu=n.getStoreMenuText(b);for(var f=!1,l=0;l<a.length;l++)for(var m=a[l],k=0;k<b.entity.idProperty.length;k++){var h=b.entity.idProperty[k],g=m.get(h);e["data["+l+"]."+h]=g;Ext.isEmpty(g)||(f=!0)}f?c.Server.copyEntity(e,function(p,
q){d(p);p?(c.Dialog.toast(q),p=b.currentPage,0>=b.count()-a.length&&--p,b.loadPage(Math.max(p,1))):Ext.Msg.alert("\u7cfb\u7edf\u63d0\u9192",q)}):c.Dialog.toast("\u9009\u4e2d\u7684\u6570\u636e\u4e0d\u53ef\u590d\u5236\uff01")}})};n.isModified=function(b){for(var a in b.data)try{if(b.isModified(a))return!0}catch(d){}return!1};n.getEntityDataStore=function(b,a,d){if(Ext.isEmpty(b))c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u53c2\u6570entity\u4e0d\u53ef\u4e3a\u7a7a\uff01");else return b={fields:[],
pageSize:20,where:a,entity:b,remoteSort:c.Base.toBool(b.remoteSort,!0),treeConfig:d,proxy:{type:"ajax",url:c.Server.entityListUrl(),actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},reader:{type:"json",root:"list",totalProperty:"totalRow"}},listeners:{beforeload:function(e,f,l){e.recordSelectHistory=!1;try{if(c.Power.isPower())return console.log("\u6743\u9650\u914d\u7f6e\u9ed8\u8ba4\uff0c\u53d6\u6d88\u6570\u636e\u52a0\u8f7d\uff01"),!1;if(!e.entity||!e.entity.entityCode)return!1;
var m=e.proxy.extraParams,k={entityCode:e.entity.entityCode,limit:e.pageSize,storeId:e.getStoreCode()};if(e.where)for(var h in e.where)k["where['"+h+"']"]=e.where[h];if(d){Ext.isEmpty(d.parentIdValue)&&(d.parentIdValue=-1);k.page=-1;k.fromTree=!0;k.treeParentIdName=d.parentIdName;var g=f.node.data[d.idName],p=c.Base.toBool(f.node.isFirstInstance,!1);Ext.isEmpty(g)&&(g=d.parentIdValue);k["where['^treeSearch']"]=!1;k["where['^treeLevel']"]=parseInt(f.node.data.depth)+1;e.grid&&c.Grid.hasSearchColumn(e.grid)?
(c.Base.deleteObjectAttr("where['"+d.parentIdName+"']",k,m),c.Base.deleteObjectAttr("where['"+d.idName+"']",k,m),k["where['^treeSearch']"]=!0):p&&-1!==d.parentIdValue?(k["where['"+d.idName+"']"]=g,c.Base.deleteObjectAttr("where['"+d.parentIdName+"']",k,m)):(c.Base.deleteObjectAttr("where['"+d.idName+"']",k,m),k["where['"+d.parentIdName+"']"]=g)}if(e.grid){k.power=c.Base.toBool(e.grid.power,!0);e.grid.listParams&&(k=c.Json.mergeJson(k,e.grid.listParams));e.grid.fromStoreChange=!0;0<e.grid.getSelection().length?
e.grid.getSelectionModel().deselectAll(!1,!0):e.grid.fireEvent("selectionchange",e.grid);e.grid.fromStoreChange=!1;if(e.grid.where)for(h in e.grid.where)k["where['"+h+"']"]=e.grid.where[h];e.getSorters().each(function(r){var t=c.Grid.getColumn(e.grid,r.getProperty());k["indexSort['"+r.getProperty()+"']"]=t.getIndex()});c.Grid.checkColumnSearch(e.grid);if(Ext.isFunction(e.grid.onBeforeLoad)){var q=e.grid.onBeforeLoad(e.grid,e,k);if(!c.Base.toBool(q,!0))return!1}}e.getProxy().setExtraParams(c.Json.mergeJson(m,
k));return!0}catch(r){c.Dialog.showException(r,"store:beforeload")}}},autoLoad:!1},d?(c.System.InitHandler.isSilenceGlobalSaving()||(b.root={expanded:!0}),b=Ext.create("Ext.data.TreeStore",b)):b=Ext.create("Ext.data.Store",b),b};n.getEnumDataStore=function(b,a,d,e,f,l,m){return new Ext.Promise(function(k,h){c.Store.getEnumDataArray(b,a,d,e,f,l).then(function(g){m?k(g):k(Ext.create("Ext.data.Store",{autoLoad:!1,enumName:b,data:g}))})})};n.getEnumDataArray=function(b,a,d,e,f,l){return new Ext.Promise(function(m,
k){e||(e={});if(Ext.isEmpty(b))m([]);else{Ext.isEmpty(f)&&(f=!0);Ext.isEmpty(l)&&(l=!1);var h=$.md5(b+Ext.JSON.encode(e)),g=function(){var p=Ext.clone(c.Cache.getEnumCache(b,h));a&&(p=Ext.Array.insert(p,0,a));d&&(p=Ext.Array.push(p,d));return p};f&&c.Cache.existEnumCache(b,h)&&!l?m(g()):$.post(c.Server.showEnumsUrl()+"?enumName\x3d"+b,e,function(p){try{p.success?(c.Cache.setEnumCache(b,h,p.data),m(g())):c.Dialog.showException("\u679a\u4e3e\u83b7\u53d6\u5931\u8d25\uff01"+p.message,"getEnumDataArray")}catch(q){c.Dialog.showException(q,
"\u83b7\u53d6\u679a\u4e3e\u6570\u636e\u6e90\uff01[getEnumDataStore]")}})}})};n.getEnumData=function(b,a,d){return new Ext.Promise(function(e,f){d||(d="id");Ext.isEmpty(a)?e(null):c.Store.getEnumDataArray(b).then(function(l){for(var m=0;m<l.length;m++){var k=l[m];if(!Ext.isEmpty(k[d])&&k[d].toString()===a.toString()){e(k);return}}e(null)})})};n.getEnumDataByRender=function(b){try{var a="Enum@"+b+"@Loading";c.Base.toBool(c.Cache.memory[a],!1)||(c.Cache.memory[a]=!0,c.Store.getEnumDataArray(b).then(function(d){for(var e=
$("[data-enum\x3d"+b+"][data-set\x3d'false']"),f=0;f<e.length;f++){var l=$(e[f]),m=l.attr("data-id"),k=l.attr("data-enum-value"),h=l.attr("data-enum-text");if(Ext.isEmpty(k)||"undefined"===k)k="id";if(Ext.isEmpty(h)||"undefined"===k)h="text";for(var g=0;g<d.length;g++){var p=d[g];if(c.Base.toString(p[k],"")===m.toString()){if(p)k=p[h],p=p.color,m=Ext.isEmpty(k)?"\x3cspan style\x3d'color: #ccc;'\x3e"+m+"\x3c/span\x3e":"\x3cspan style\x3d'color: "+c.Color.toColor(p,"#000000")+";'\x3e"+k+"\x3c/span\x3e";
else return;l.html(m);l.attr("data-set","true");break}}}c.Cache.memory[a]=null}))}catch(d){}};n.getPageDataStore=function(b,a){b&&0!==b.length||(b=c.Store.maxPageSize);a&&0!==a.length||(a=10);for(var d=[],e=0;e<b/10;e++)d.push({text:(e+1)*a+"\u6761",id:(e+1)*a});return Ext.create("Ext.data.Store",{id:"pageSizeDataStore",fields:["id","text"],data:d})};n.getCompareDataStore=function(b){var a=[{id:-1,text:"~",desc:"\u7a7a\u503c"},{id:-2,text:"!~",desc:"\u975e\u7a7a\u503c"},{id:0,text:"\x3d",desc:"\u7b49\u4e8e"},
{id:1,text:"!\x3d",desc:"\u4e0d\u7b49\u4e8e"},{id:2,text:"?",desc:"\u5305\u542b"},{id:3,text:"!?",desc:"\u4e0d\u5305\u542b"},{id:4,text:"\x3e",desc:"\u5927\u4e8e"},{id:6,text:"\x3e\x3d",desc:"\u5927\u7b49\u4e8e"},{id:5,text:"\x3c",desc:"\u5c0f\u4e8e"},{id:7,text:"\x3c\x3d",desc:"\u5c0f\u7b49\u4e8e"},{id:8,text:"*",desc:"\u5339\u914d"},{id:9,text:"!*",desc:"\u4e0d\u5339\u914d"},{id:10,text:"#",desc:"\u91cd\u590d"},{id:11,text:"!#",desc:"\u4e0d\u91cd\u590d"}];b.date&&(a=[{id:-1,text:"~",desc:"\u7a7a\u503c"},
{id:-2,text:"!~",desc:"\u975e\u7a7a\u503c"},{id:0,text:"\x3d",desc:"\u7b49\u4e8e"},{id:1,text:"!\x3d",desc:"\u4e0d\u7b49\u4e8e"},{id:4,text:"\x3e",desc:"\u5927\u4e8e"},{id:6,text:"\x3e\x3d",desc:"\u5927\u7b49\u4e8e"},{id:5,text:"\x3c",desc:"\u5c0f\u4e8e"},{id:7,text:"\x3c\x3d",desc:"\u5c0f\u7b49\u4e8e"}]);b&&b.full&&a.splice(2,0,{id:-3,text:"??",desc:"\u68c0\u7d22"});return Ext.create("Ext.data.Store",{data:a})};n.getCompareLinkDataStore=function(){return Ext.create("Ext.data.Store",{data:[{id:0,
text:"\x26",desc:"\u5e76\u4e14"},{id:1,text:"||",desc:"\u6216\u8005"}]})};n.getGridColumnStore=function(b,a){var d=[];if(b){b=b.getColumns();for(var e=0;e<b.length;e++){var f=b[e];Ext.isEmpty(f.dataIndex)||(!c.Base.toBool(a,!1)||c.Grid.canColumnSearch(f))&&d.push({text:f.configText,id:f.dataIndex,index:e})}}return Ext.create("Ext.data.Store",{fields:["id","text","index"],data:d})};n.getChartGridColumnStore=function(b){var a=[];if(b){b=b.getColumns();for(var d=0;d<b.length;d++){var e=b[d];Ext.isEmpty(e.dataIndex)||
(c.Grid.isNumberColumn(e)&&c.Base.toBool(e.chart,!0)||c.Grid.isIdPropertyColumn(e)||c.Base.toBool(e.chart,!0))&&a.push({text:e.configText,id:e.dataIndex,index:d})}}return Ext.create("Ext.data.Store",{fields:["id","text","index"],data:a})};n.getYesOrNoDataStore=function(){return Ext.create("Ext.data.Store",{id:"yesOrNoDataStore",fields:["id","text"],data:[{text:"\u662f",id:1},{text:"\u5426",id:0}]})};n.getYesOrNoDataStore2=function(){return Ext.create("Ext.data.Store",{id:"yesOrNoDataStore",fields:["id",
"text"],data:[{text:"\u662f",id:"true"},{text:"\u5426",id:"false"}]})};n.getThemeDataStore=function(){return Ext.create("Ext.data.Store",{id:"themeDataStore",fields:["id","text"],data:[{text:"\u5706\u6da6\u7acb\u4f53",id:"extjs/theme/fast-theme-wrap"},{text:"\u6e05\u723d\u6241\u5e73",id:"extjs/theme/fast-theme-flat"}]})};n.getSystemLayoutDataStore=function(){return Ext.create("Ext.data.Store",{id:"systemLayoutDataStore",fields:["id","text"],data:[{text:"\u4f20\u7edf\u5e03\u5c40",id:"normal"},{text:"\u684c\u9762\u5e03\u5c40",
id:"desktop"}]})};n.getFontSizeDataStore=function(){return Ext.create("Ext.data.Store",{id:"fontSizeDataStore",fields:["id","text"],data:[{text:"14px",id:"14px"},{text:"16px",id:"16px"},{text:"18px",id:"18px"}]})};n.getFrontRadiusDataStore=function(){return Ext.create("Ext.data.Store",{id:"fontSizeDataStore",fields:["id","text"],data:[{text:"8px",id:"8px"},{text:"88px",id:"88px"}]})};n.setRecordValue=function(b,a,d){d.dataIndex=a;if(Ext.isFunction(d.setRecordValue))d.setRecordValue(b,!1);else{var e=
d.getValue();Ext.isDate(d.getValue())?b.set(a,Ext.Date.format(e,d.format)):b.set(a,e)}b.store&&c.Base.toBool(d.autoUpdate,!1)&&c.Store.commitStoreUpdate(b.store)};n.isSameRecord=function(b,a){return b.store&&b.store.entity&&a.store&&a.store.entity&&b.store.entity.entityCode===a.store.entity.entityCode?c.Store.isSameRecordByEntity(b.store.entity,b,a):!1};n.isSameRecordByEntity=function(b,a,d){if(!b.idProperty)return!1;for(var e=0;e<b.idProperty.length;e++){var f=b.idProperty[e];if(a.get(f)!==d.get(f))return!1}return!0};
n.mergeStoreParamBySelect=function(b,a){if(b){var d=b.proxy.extraParams;b.treeConfig&&(delete d["where['"+b.treeConfig.idName+"']"],delete d["where['"+b.treeConfig.parentIdName+"']"]);return c.Json.mergeJson(a,d)}return a};n.maxPageSize=50;return n}();c.Store=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function h(){}h.__onLoaded=function(){h.InitHandler=new n;h.ConfigHandler=new b;h.MenuHandler=new a;h.ThemeHandler=new d;h.ManagerHandler=new e;h.EntitiesHandler=new f;h.AppJsHandler=new l;h.SecurityHandler=new m;h.ChangelogHandler=new k;Ext.on("mousedown",function(g){c.SystemLayout.setMouseClickXY(g.getX(),g.getY())})};h.addTab=function(g,p,q,r){c.SystemLayout.showByCmp(g,p,q,r)};return h}();c.System=u;var n=function(){function h(){this._silenceGlobalSave=this._init=
!1;this._doNextSilenceMenuIndex=0;this._allShowListMethodMenu=[]}h.prototype.isInit=function(){return!0};h.prototype.isSilenceGlobalSaving=function(){return this._silenceGlobalSave};h.prototype.initSystem=function(){var g=this;Ext.MessageBox.show({alwaysOnTop:!0,modal:!0,iconCls:"extIcon extTimer",title:"\u7cfb\u7edf\u63d0\u9192",msg:"\u521d\u59cb\u5316\u7cfb\u7edf\u4e2d\uff0c\u8bf7\u7a0d\u540e\u2026\u2026",progressText:"\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u5373\u5c06\u5b8c\u6210\u64cd\u4f5c",progress:!0,
closeAction:"destroy",closable:!1});c.System.ConfigHandler.initConfig(function(){c.System.AppJsHandler.loadAppJs(function(){g.initGlobalConfig();g.initSystemLayout()})})};h.prototype.initTheme=function(g){c.System.MenuHandler.initData();c.System.ThemeHandler.loadTheme(g)};h.prototype.initGlobalConfig=function(){if(c.Power.isPower()&&window.parent&&Ext.isFunction(window.parent.getExtPower)){c.Power.config=!0;c.Power.powers=c.Json.jsonToObject(window.parent.getExtPower());c.Power.powers||(c.Power.powers=
{});c.System.ManagerHandler.setGhostPowers(c.Json.jsonToObject(window.parent.getParentExtPower()));if(c.System.ManagerHandler.getGhostPowers())for(var g in c.Power.powers)if(c.System.ManagerHandler.getGhostPowers().hasOwnProperty(g)){var p=c.System.ManagerHandler.getGhostPowers()[g],q;for(q in p)p[q]||(c.Power.powers[g][q]=!1)}window.getExtPower=function(){return c.Power.getSavePowerData()}}window.addEventListener("popstate",function(r){c.SystemLayout.showByMenuId(c.Windows.getMenuIdFromLocation())},
!1);this._init=!0};h.prototype.initSystemLayout=function(){c.System.ConfigHandler.isDesktopLayout()?c.DesktopLayout.showSystemLayout():c.NormalLayout.showSystemLayout();c.System.ConfigHandler.isNeedInit()&&(c.Dialog.hideWait(),c.System.InitHandler.startSilenceSaveConfig(null,"\u6b63\u5728\u5347\u7ea7\u5f53\u524d\u8d26\u6237\u7684\u7cfb\u7edf\u914d\u7f6e"))};h.prototype.checkMaxMemory=function(g){c.System.ConfigHandler.isLowMemory()?c.Dialog.showWarning("\u5f53\u524d\u8fd0\u884c\u7684\u7cfb\u7edf\u5185\u5b58\u8fc7\u4f4e\uff0c\u5efa\u8bae\u914d\u7f6e\u7684\u8fd0\u884c\u5185\u5b58\u4e0d\u4f4e\u4e8e1G\uff0c\u5426\u5219\u64cd\u4f5c\u7684\u529f\u80fd\u53ef\u80fd\u51fa\u73b0\u5f02\u5e38\uff01",
g):g()};h.prototype.startSilenceSaveConfig=function(g,p){this._allShowListMethodMenu=c.System.MenuHandler.getAllMethodMenu("showList");for(var q=0;q<c.System.EntitiesHandler.getEntities().length;q++){var r=c.System.EntitiesHandler.getEntities()[q];if(r.js&&Ext.isEmpty(r.menu)){var t=$.md5(r.entityCode+r.comment);this._allShowListMethodMenu.push({method:"showList('"+t+"','"+r.entityCode+"')",icon:"icons/icon_function.svg",text:"",id:t})}}c.SystemLayout.closeAllTab();this._silenceGlobalSave=!0;Ext.MessageBox.show({justTop:!0,
modal:!0,animateTarget:g,title:"\u7cfb\u7edf\u63d0\u9192",msg:p?p:"\u521d\u59cb\u5316\u7cfb\u7edf\u914d\u7f6e",iconCls:"extIcon extTimer",progressText:"\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u5373\u5c06\u5b8c\u6210\u64cd\u4f5c",progress:!0,closable:!1,closeAction:"destroy"});this.doNextSilenceMenu()};h.prototype.doNextSilenceMenu=function(){var g=this;this._doNextSilenceMenuIndex>=this._allShowListMethodMenu.length?c.Dialog.showAlert("\u7cfb\u7edf\u63d0\u9192","\u7cfb\u7edf\u914d\u7f6e\u5df2\u521d\u59cb\u5316\u5b8c\u6bd5\uff01",
function(){g._silenceGlobalSave=!1;g._doNextSilenceMenuIndex=0;c.Listeners.getFire().onAfterInitSystem();c.Windows.reload()},!0,!0):(Ext.MessageBox.updateProgress(parseFloat(String(this._doNextSilenceMenuIndex+1))/parseFloat(String(this._allShowListMethodMenu.length)),"\u6b63\u5728\u8bfb\u53d6\u914d\u7f6e\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"),c.SystemLayout.showByMenu(this._allShowListMethodMenu[this._doNextSilenceMenuIndex]),this._doNextSilenceMenuIndex+=1)};return h}(),b=function(){function h(){this._fontSize=
"14px";this._dateFormat="Y-m-d H:i:s";this._gridColumnRestore=this._gridDefaultLinkButton=!0;this._gridRefreshData=this._gridIDColumnHidden=this._gridRowNumber=!1;this._menuSingleExpand=this._managerPowerCheckSameRole=this._gridDetailsPanel=!0}h.prototype.initConfig=function(g){var p=this;window.showList=function(q,r,t,v){return c.System.AppJsHandler.showList(q,r,t,v)};Ext.Ajax.request({url:c.Server.showSysInfoUrl(),params:{},success:function(q){var r=c.Json.jsonToObject(q.responseText,!0);if(r.success){q=
r.data;for(var t in q)r={value:q[t]},c.System.ManagerHandler.initData(t,r.value)?c.System.MenuHandler.initSystemMenu():c.System.AppJsHandler.initData(t,r.value)||c.System.EntitiesHandler.initData(t,r.value)||(p[t]=r);g()}else console.error(q)},failure:function(q,r){console.error(q)}})};h.prototype.getSystemConfig=function(){return SystemConfig};h.prototype.getConfig=function(g){var p=this.getSystemConfig();return p.hasOwnProperty(g)?(g=p[g],Ext.isObject(g)?g:{value:g}):(g=this[g])?g:{value:""}};h.prototype.isDebug=
function(){return c.Base.toBool(this.getConfig("debug").value,!1)};h.prototype.isLocal=function(){return c.Base.toBool(this.getConfig("local").value,!1)};h.prototype.isDesktopLayout=function(){var g=c.Objects.safeObject(this.getConfig("system_layout")).value;return Ext.isEmpty(g)?!1:"desktop"===g.toLowerCase()};h.prototype.isNormalLayout=function(){var g=c.Objects.safeObject(this.getConfig("system_layout")).value;return Ext.isEmpty(g)?!1:"normal"===g.toLowerCase()};h.prototype.isDataboard=function(){return c.Base.toBool(this.getDataboard().enable,
!1)};h.prototype.isThemeWrap=function(){return 0<=this.getConfig("theme").value.indexOf("fast-theme-wrap")};h.prototype.isThemeFlat=function(){return 0<=this.getConfig("theme").value.indexOf("fast-theme-flat")};h.prototype.isEnableTabTheme=function(){var g=this.getConfig("tab_theme").value;return c.Base.toBool(g,!1)};h.prototype.isEnableWindowAnim=function(){return c.Base.toBool(this.getConfig("window_anim").value,!0)};h.prototype.isEnableLayer=function(){return c.Base.toBool(this.getConfig("layer").value,
!1)};h.prototype.isEnableSame=function(){return c.Base.toBool(this.getConfig("same").value,!1)};h.prototype.isEnableNoticeListener=function(){return c.Base.toBool(this.getConfig("noticeListener").value,!1)};h.prototype.isEnablePwd=function(){return c.Base.toBool(this.getConfig("pwd").value,!1)};h.prototype.isEnableGoogleAuthentication=function(){return c.Base.toBool(this.getConfig("google_authentication").value,!1)};h.prototype.isNeedInit=function(){return c.Base.toBool(this.getConfig("needInit").value,
!1)};h.prototype.getApiHost=function(){return this.getConfig("api-host").value};h.prototype.getMaxMemory=function(){return parseInt(this.getConfig("maxMemory").value)};h.prototype.isLowMemory=function(){return 1073741824>this.getMaxMemory()};h.prototype.getGridRowHeight=function(){return parseInt(this.getConfig("grid_row_height").value)};h.prototype.getSessionId=function(){return this.getConfig("session-id").value};h.prototype.getFontSize=function(){return this._fontSize};h.prototype.getFontSizeNumber=
function(){return c.Base.getNumberValue(this.getFontSize())};h.prototype.getFastCharVersion=function(){return this.getConfig("fastchar").value};h.prototype.getJavaVersion=function(){return this.getConfig("java").value};h.prototype.getDeveloperUrl=function(){return this.getConfig("developer").url};h.prototype.getDeveloperTitle=function(){return this.getConfig("developer").value};h.prototype.getThemeColor=function(){return c.Color.toColor(this.getConfig("theme_color").value)};h.prototype.getFrontColor=
function(){return c.Color.toColor(this.getConfig("front_color").value)};h.prototype.getSystemLogo=function(){return this.getConfig("system_logo").value};h.prototype.getSystemTitle=function(){return c.Eval.runObject(this.getSystemConfig(),$("title").text())};h.prototype.getSystemHttp=function(){return this.getConfig("http").value};h.prototype.getSystemRoot=function(){return this.getConfig("root").value};h.prototype.getDesktopBgImages=function(){return this.getConfig("desktop_bg_images").value};h.prototype.setDesktopBgImage=
function(g){this.getConfig("desktop-bg-image").value=g};h.prototype.getSystemCopyright=function(){return this.getConfig("copyright").value};h.prototype.getSystemCopyrightUrl=function(){return this.getConfig("copyright").url};h.prototype.getSystemVersion=function(){return this.getConfig("version").desc};h.prototype.getSystemVersionInt=function(){return this.getConfig("version").value};h.prototype.getSystemMenuCss=function(){return this.getConfig("menusCss").value};h.prototype.getIndexUrl=function(){return this.getConfig("index_js").value};
h.prototype.getLoginBackground=function(){return this.getConfig("login_background").value};h.prototype.getLoginLottieJson=function(){return this.getConfig("login_lottie_json").value};h.prototype.getLoginLogo=function(){return this.getConfig("login_logo").value};h.prototype.getLoginType=function(){return this.getConfig("login_type").value};h.prototype.getDocsUrl=function(){return this.getConfig("doc_extjs").value};h.prototype.getDocsTitle=function(){return this.getConfig("doc_extjs").desc};h.prototype.getLocalhostIP=
function(){return this.getConfig("host").value};h.prototype.getSystemOS=function(){return this.getConfig("os").value};h.prototype.getSystemStartTime=function(){return this.getConfig("start-time").value};h.prototype.getSystemDB=function(){return this.getConfig("db").value};h.prototype.getSystemDBPool=function(){return this.getConfig("db-pool").value};h.prototype.getSystemServer=function(){return this.getConfig("server").value};h.prototype.getSystemCatalina=function(){return this.getConfig("server").value};
h.prototype.getGoogleAuthenticationAppDownloadUrl=function(){return this.getConfig("google_authentication_app_url").value};h.prototype.getAMapSecurity=function(){return this.getConfig("amap_security").value};h.prototype.getAMapVersion=function(){return this.getConfig("amap_version").value};h.prototype.getAMapKey=function(){return this.getConfig("amap_key").value};h.prototype.setFontSize=function(g){this._fontSize=g};h.prototype.getDateFormat=function(){return this._dateFormat};h.prototype.setDateFormat=
function(g){this._dateFormat=g};h.prototype.isGridDefaultLinkButton=function(){return this._gridDefaultLinkButton};h.prototype.setGridDefaultLinkButton=function(g){this._gridDefaultLinkButton=g};h.prototype.isManagerPowerCheckSameRole=function(){return this._managerPowerCheckSameRole};h.prototype.setManagerPowerCheckSameRole=function(g){this._managerPowerCheckSameRole=g};h.prototype.isMenuSingleExpand=function(){return this._menuSingleExpand};h.prototype.setMenuSingleExpand=function(g){this._menuSingleExpand=
g};h.prototype.isEnableDesktopMenuRecord=function(){return c.Base.toBool(this.getConfig("desktop_menu_record").value,!0)};h.prototype.isGridColumnRestore=function(){return this._gridColumnRestore};h.prototype.setGridColumnRestore=function(g){this._gridColumnRestore=g};h.prototype.isGridRowNumber=function(){return this._gridRowNumber};h.prototype.setGridRowNumber=function(g){this._gridRowNumber=g};h.prototype.isGridIDColumnHidden=function(){return this._gridIDColumnHidden};h.prototype.setGridIDColumnHidden=
function(g){this._gridIDColumnHidden=g};h.prototype.isGridRefreshData=function(){return this._gridRefreshData};h.prototype.setGridRefreshData=function(g){this._gridRefreshData=g};h.prototype.getOSSType=function(){return this.getConfig("oss").value};h.prototype.getOSSHosts=function(){return this.getConfig("ossHosts").value};h.prototype.isGridDetailsPanel=function(){return this._gridDetailsPanel};h.prototype.setGridDetailsPanel=function(g){this._gridDetailsPanel=g};h.prototype.getDataboard=function(){return this.getConfig("databoard")};
return h}(),a=function(){function h(){this._cloneMenus=[]}h.prototype.initData=function(){this._allMenus=c.System.ConfigHandler.getSystemConfig().menu;this._initMenu(null,this._allMenus);this._allMenus=this._refreshMenu(this._allMenus)};h.prototype.initSystemMenu=function(){this._menus=this.getPowerMenuByManager(this._allMenus)};h.prototype._insertToFirstParam=function(g,p){var q=g.match(/.*\((.*)\)/);if(q&&0<q.length){var r=p="'"+p+"'";(q=q[1])&&0<q.length&&(r=p+","+q);return g.replace("("+q+")",
"("+r+")")}return g};h.prototype._initMenu=function(g,p){if(p)for(var q=0;q<p.length;q++){var r=p[q];Ext.isEmpty(r.index)&&(r.index=0);r.iconValue=r.icon;r.leaf=!(r.children&&0<r.children.length);r.parentId=g?g.id:"root";Ext.isString(r.method)&&(r.method=this._insertToFirstParam(r.method,r.id));r.id=g&&g.id?$.md5(g.id+"-"+r.text):$.md5(r.text);g&&Ext.isEmpty(r.color)&&(r.color=g.color);if(Ext.isEmpty(r.color)||"#theme_color"===r.color)r.color=c.System.ThemeHandler.getThemeColor();g&&Ext.isEmpty(r.iconValue)&&
(r.iconValue=g.iconValue);r.iconValue&&(r.icon=c.Server.getIcon(r.iconValue,r.color));r.baseCls="baseTab"+$.md5(r.color)+"Cls";this._initMenu(r,r.children)}};h.prototype._refreshMenu=function(g){var p={},q=0;for(g=g.sort(function(v,w){return v.index-w.index});q<g.length;q++){var r=g[q];p[r.id]||(p[r.id]={});p[r.id]=c.Json.deepMergeJson(p[r.id],r)}for(var t in p)q=p[t],q.children&&0<q.children.length&&(q.children=this._refreshMenu(q.children));return Ext.Object.getValues(p)};h.prototype.getPowerMenuByManager=
function(g){if(!g)return[];for(var p=[],q=c.System.ManagerHandler.getManagerMenuPower(),r=0;r<g.length;r++){var t=g[r];if(c.Listeners.getFire().onSystemInitMenu(t)){t=Ext.clone(t);if(c.Power.isPower()){window.parent&&Ext.isFunction(window.parent.getMenuPower)&&(q=window.parent.getMenuPower());var v=0<=q.indexOf(t.id)}else v=c.System.ManagerHandler.isSuperRole()||0<=q.indexOf(t.id);v&&(p.push(t),t.children=this.getPowerMenuByManager(t.children))}}return p};h.prototype.getPowerMenuByConfig=function(g,
p,q){if(!g)return[];for(var r=[],t=0;t<g.length;t++){var v=Ext.clone(g[t]);c.Base.toBool(v.power,!0)&&(!q||0<=q.indexOf(v.id))&&(v.checked=p&&0<=p.indexOf(v.id),v.children=this.getPowerMenuByConfig(v.children,p,q),v.leaf=0===v.children.length,r.push(v))}return r};h.prototype.getMenus=function(){return this._menus};h.prototype.getAllMenus=function(){return this._allMenus};h.prototype.isValid=function(){return null!=this._menus};h.prototype.getMenu=function(g){return this.getMenuData(g)};h.prototype.findMenu=
function(g){g=g.replace(" ","");g=g.split("\x3e");for(var p=function(t,v){for(var w=0;w<t.length;w++){var z=t[w];if(z.text===v)return Ext.clone(z);if(z.children&&(z=p(z.children,v),null!=z))return z}return null},q=this.getMenus(),r=0;r<g.length;r++)if(q=p(q,g[r])){if(r===g.length-1)return q;q=q.children}else break;return null};h.prototype.cloneMenu=function(g){if(Ext.isEmpty(g))return null;g=this.getMenuDataBySource(this.getMenus(),g);g.id=c.Base.buildOnlyCode("CM");g._clone=!0;this._cloneMenus.push(g);
return g};h.prototype.getMenuData=function(g){if(Ext.isEmpty(g))return null;var p=this.getMenuDataBySource(this._cloneMenus,g);return p?p:this.getMenuDataBySource(this.getMenus(),g)};h.prototype.getMenuDataBySource=function(g,p){if(!p)return null;var q=function(r,t,v){for(r=0;r<t.length;r++){var w=t[r];if(w.id===v)return Ext.clone(w);if(w.children&&(w=q(w,w.children,v),null!=w))return w}return null};return q(null,g,p)};h.prototype.getPlainMenu=function(g,p){Ext.isEmpty(p)&&(p="\x3e");if(g){if(g.parentId&&
"root"!==g.parentId.toLowerCase()){var q=this.getPlainMenu(this.getMenu(g.parentId),p);if(q)return q+p+g.text}return g.text}return""};h.prototype.getPathMenu=function(g){if(g){if(g.parentId&&"root"!==g.parentId.toLowerCase()){var p=this.getPathMenu(this.getMenu(g.parentId));if(p)return p.push(g),p}return[g]}return null};h.prototype.getPlainIconMenu=function(g,p){g=this.getPathMenu(g);p='\x3cdiv style\x3d"line-height: 20px;display: flex;padding: 0 5px;" \x3e';for(var q=0;q<g.length;q++){var r=g[q];
r="\x3cimg alt\x3d'' src\x3d\""+r.icon+'" width\x3d"20px" height\x3d"20px" /\x3e\x3cspan style\x3d"margin-left: 5px;"\x3e'+r.text+"\x3c/span\x3e ";0!=q&&(r="\x3cspan style\x3d'font-size: 12px;margin: 0 5px;color: #cccccc;' class\x3d'extIcon extArrowRight2'\x3e\x3c/span\x3e"+r);p+=r}return p+"\x3c/div\x3e"};h.prototype.getPlainIconMenuWithCloser=function(g,p,q){g=this.getPathMenu(g);q='\x3cdiv style\x3d"line-height: 20px;display: flex;padding: 0 5px;" \x3e';for(var r=0;r<g.length;r++){var t=g[r];t=
"\x3cimg alt\x3d'' src\x3d\""+t.icon+'" width\x3d"20px" height\x3d"20px" /\x3e\x3cspan style\x3d"margin-left: 5px;"\x3e'+t.text+"\x3c/span\x3e ";0!=r&&(t="\x3cspan style\x3d'font-size: 12px;margin: 0 5px;color: #cccccc;' class\x3d'extIcon extArrowRight2'\x3e\x3c/span\x3e"+t);q+=t}return q+="\x26nbsp;\x26nbsp;"+c.Documents.wrapOnClick("\x3cspan class\x3d'extIcon extClose fast-ext-menu-closer' \x3e\x3c/span\x3e",p)+"\x3c/div\x3e"};h.prototype.getPlainIconMenuHtmlBySVG=function(g){return'\x3cdiv style\x3d"line-height: 20px;display: flex" \x3e\x3csvg style\x3d\'width: 20px;height: 20px;\' class\x3d"svgIconFill" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#'+
g.iconCls+'"\x3e\x3c/use\x3e\x3c/svg\x3e\x3cspan style\x3d"margin-left: 5px;"\x3e'+g.text+"\x3c/span\x3e\x3c/div\x3e "};h.prototype.existMenu=function(g){return Ext.isEmpty(g)?!1:null!=this.getMenu(g)};h.prototype.searchMenuByEntityCode=function(g){var p=function(q){if(!q)return null;for(var r=0;r<q.length;r++){var t=q[r];if(t.method&&0<=t.method.indexOf(g)||t.children&&(t=p(t.children)))return t}return null};return p(this.getMenus())};h.prototype.searchMenusByEntityCode=function(g){var p=function(q){var r=
[];if(!q)return null;for(var t=0;t<q.length;t++){var v=q[t];v.method&&0<=v.method.indexOf(g)&&r.push(v);v.children&&(v=p(v.children))&&(r=r.concat(v))}return r};return p(this.getMenus())};h.prototype.getAllMethodMenu=function(g){Ext.isEmpty(g)&&(g="");var p=function(r,t){if(r)for(var v=0;v<r.length;v++){var w=r[v];w.method&&0<=w.method.indexOf(g)&&t.push(w);p(w.children,t)}},q=[];p(this.getMenus(),q);return q};return h}(),d=function(){function h(){}h.prototype.loadTheme=function(g){var p=this,q=c.System.ConfigHandler.getConfig("theme").value+
".temp",r=c.System.ConfigHandler.getConfig("theme").value+"-tab.temp";c.PluginLoader.loadFiles([q,r],function(t){var v=[c.Theme.buildThemeContent(t[0],".fastchar-extjs",p.getThemeColor())],w=[],z=function(x){if(x)for(var y=0;y<x.length;y++){var A=x[y];0>w.indexOf(A.baseCls)&&v.push(c.Theme.buildThemeContent(t[1],".fastchar-extjs ."+A.baseCls,A.color));z(A.children)}};z(c.System.MenuHandler.getAllMenus());c.Documents.addStyles(v,g)})};h.prototype.getThemeColor=function(){return c.System.ConfigHandler.getThemeColor()};
h.prototype.getFrontColor=function(){return c.System.ConfigHandler.getFrontColor()};return h}(),e=function(){function h(){}h.prototype.initData=function(g,p){return"manager"===g?(this._manager=p,!0):!1};h.prototype.setManager=function(g){this._manager=g};h.prototype.getManager=function(){return this._manager};h.prototype.setGhostPowers=function(g){this._ghostPowers=g};h.prototype.getGhostPowers=function(){return this._ghostPowers};h.prototype.isValid=function(){return this._manager};h.prototype.getManagerId=
function(){return this._manager?this._manager.managerId:-1};h.prototype.getManagerName=function(){return this._manager?this._manager.managerName:""};h.prototype.getManagerLoginName=function(){return this._manager?this._manager.managerLoginName:""};h.prototype.getManagerStateStr=function(){return this._manager?this._manager.managerStateStr:""};h.prototype.getRoleId=function(){return this._manager?this._manager.roleId:-1};h.prototype.getRole=function(){if(this._manager)return this._manager.role};h.prototype.getRoleName=
function(){return this.getRole()?this.getRole().roleName:""};h.prototype.getRoleTypeStr=function(){return this.getRole()?this.getRole().roleTypeStr:""};h.prototype.getRoleType=function(){return this.getRole()?this.getRole().roleType:-1};h.prototype.getRoleStateStr=function(){return this.getRole()?this.getRole().roleStateStr:""};h.prototype.getOnlineTypeStr=function(){return this._manager?this._manager.onlineTypeStr:""};h.prototype.getLastLoginTime=function(){return this._manager?this._manager.lastLoginTime:
""};h.prototype.getManagerExtPower=function(){return this._manager?this._manager.managerExtPower:""};h.prototype.getManagerMenuPower=function(){return this._manager?this._manager.managerMenuPower:""};h.prototype.isSuperRole=function(){return this._manager&&this._manager.role&&0===this._manager.role.roleType?!0:!1};return h}(),f=function(){function h(){this._entities=[]}h.prototype.initData=function(g,p){return"entities"===g?(this._entities=p,!0):!1};h.prototype.getEntities=function(){return this._entities};
h.prototype.isValid=function(){return null!=this._entities};h.prototype.getEntity=function(g){if(Ext.isEmpty(g))return null;var p=g;Ext.isObject(g)&&(p=g.entityCode);g=this.getEntities();for(var q=0;q<g.length;q++){var r=g[q];if(r.entityCode===p)return r}return null};return h}(),l=function(){function h(){this._app=[];this._big_data_entity_attrs=["linkTables"]}h.prototype.initData=function(g,p){return"app"===g?(this._app=p,!0):!1};h.prototype.getApps=function(){return this._app};h.prototype.isValid=
function(){return null!=this._app};h.prototype.loadAppJs=function(g){this.loadAppJsByCallback(0,g)};h.prototype.loadAppJsByCallback=function(g,p){var q=this;g>=this._app.length?(this.initAppJsProperty(),p()):(g>=this._app.length-2?Ext.MessageBox.updateProgress(1,"\u8d44\u6e90\u52a0\u8f7d\u7ed3\u675f","\u7cfb\u7edf\u521d\u59cb\u5316\u6210\u529f\uff0c\u6b63\u5728\u8fdb\u5165\u7cfb\u7edf\u2026\u2026"):Ext.MessageBox.updateProgress(parseFloat(String(g+1))/parseFloat(String(this._app.length)),"\u8d44\u6e90\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85"),
c.Documents.addScript({src:this._app[g]},function(){q.loadAppJsByCallback(g+1,p)}))};h.prototype.initEntityProperty=function(g,p){if(g&&!g.__initedCoreProperty&&(g.__initedCoreProperty=!0,p=c.System.EntitiesHandler.getEntity(p))){for(var q in p)0<=this._big_data_entity_attrs.indexOf(q)||(g[q]=p[q]);g.getListThisVarName="me";g.getListGridVarName="grid"}};h.prototype.initAppJsProperty=function(){for(var g=c.System.EntitiesHandler.getEntities(),p=0;p<g.length;p++){var q=g[p];try{var r=eval(q.entityCode+
".prototype");if(r){r.__initedCoreProperty=!0;for(var t in q)0<=this._big_data_entity_attrs.indexOf(t)||(r[t]=q[t]);q.js=!0;var v=eval("new "+q.entityCode+"().getList");if(v){var w=v.toString(),z=RegExp("let (\\w+)[ ]?\x3d[ ]?this[,; ]?").exec(w);r.getListThisVarName=z?z[1]:"me";z=RegExp("[let,]?[ ]?(\\w+)[ ]?\x3d[ ]?Ext.create\\((['\"])Ext.grid.Panel\\2").exec(w);r.getListGridVarName=z?z[1]:"grid"}}}catch(x){q.js=!1}}};h.prototype.showList=function(g,p,q,r){if(!Ext.isString(g))throw"\u64cd\u4f5c\u5931\u8d25\uff01\u53c2\u6570menuId\u5fc5\u987b\u4e3aString\u7c7b\u578b\uff01\u8bf7\u68c0\u67e5\u8c03\u7528showList\u65b9\u6cd5\u7684\u76f8\u5173\u529f\u80fd\uff01";
if(!Ext.isString(p))throw"\u64cd\u4f5c\u5931\u8d25\uff01\u53c2\u6570entityCode\u5fc5\u987b\u4e3aString\u7c7b\u578b\uff01\u8bf7\u68c0\u67e5\u8c03\u7528showList\u65b9\u6cd5\u7684\u76f8\u5173\u529f\u80fd\uff01";if(!Ext.isEmpty(q)&&!Ext.isObject(q))throw"\u64cd\u4f5c\u5931\u8d25\uff01\u53c2\u6570where\u5fc5\u987b\u4e3aObject\u5bf9\u8c61\u7c7b\u578b\uff01\u8bf7\u68c0\u67e5\u8c03\u7528showList\u65b9\u6cd5\u7684\u76f8\u5173\u529f\u80fd\uff01";if(!c.System.EntitiesHandler.getEntity(p))throw"\u64cd\u4f5c\u5931\u8d25\uff01\u672a\u83b7\u53d6\u5230 '"+
p+"' \u5b9e\u4f53\u7c7b\uff01\u8bf7\u68c0\u67e5\u5b9e\u4f53\u7c7b\u5173\u8054\u7684\u8868\u683c\u662f\u5426\u5b58\u5728\uff01";q||(q={});p=eval("new "+p+"()");p.menu=c.System.MenuHandler.getMenu(g);return r?p.getList(q,r):p.getList(q)};return h}(),m=function(){function h(){this.loginPublicKey="ZnVuY3Rpb24oKXsKY29uc3QgXzB4MzY3YjQ0PV8weDEzN2Y7KGZ1bmN0aW9uKF8weDI5MzRiNyxfMHgyOTA3MTIpe2NvbnN0IF8weDExYjJmNz1fMHgxMzdmLF8weDFmOTcyMj1fMHgyOTM0YjcoKTt3aGlsZSghIVtdKXt0cnl7Y29uc3QgXzB4MjliN2Q5PS1wYXJzZUludChfMHgxMWIyZjcoMHgxMTcpKS8weDErLXBhcnNlSW50KF8weDExYjJmNygweDExNSkpLzB4MioocGFyc2VJbnQoXzB4MTFiMmY3KDB4MTExKSkvMHgzKSstcGFyc2VJbnQoXzB4MTFiMmY3KDB4MTFkKSkvMHg0Ky1wYXJzZUludChfMHgxMWIyZjcoMHgxMGEpKS8weDUrcGFyc2VJbnQoXzB4MTFiMmY3KDB4MTEwKSkvMHg2Ky1wYXJzZUludChfMHgxMWIyZjcoMHgxMTIpKS8weDcrLXBhcnNlSW50KF8weDExYjJmNygweDEwYykpLzB4OCooLXBhcnNlSW50KF8weDExYjJmNygweDExOSkpLzB4OSk7aWYoXzB4MjliN2Q5PT09XzB4MjkwNzEyKWJyZWFrO2Vsc2UgXzB4MWY5NzIyWydwdXNoJ10oXzB4MWY5NzIyWydzaGlmdCddKCkpO31jYXRjaChfMHg1NTI5OTApe18weDFmOTcyMlsncHVzaCddKF8weDFmOTcyMlsnc2hpZnQnXSgpKTt9fX0oXzB4MzYxMywweDljODA0KSk7bGV0IHJlc3VsdD13aW5kb3dbXzB4MzY3YjQ0KDB4MTA5KStGYXN0RXh0W18weDM2N2I0NCgweDEwYildW18weDM2N2I0NCgweDExYSldW18weDM2N2I0NCgweDExNCldKCldKCkscmVzdWx0SW5kZXg9d2luZG93W18weDM2N2I0NCgweDEwZCkrRmFzdEV4dFtfMHgzNjdiNDQoMHgxMGIpXVtfMHgzNjdiNDQoMHgxMWEpXVtfMHgzNjdiNDQoMHgxMTQpXSgpXSgpLHZhbHVlcz1FeHRbXzB4MzY3YjQ0KDB4MTE4KV1bXzB4MzY3YjQ0KDB4MTE2KV1bXzB4MzY3YjQ0KDB4MTBlKV0ocmVzdWx0KVtfMHgzNjdiNDQoMHgxMWMpXSgnfCcpLEFTQ0lJPVtdO2Z1bmN0aW9uIF8weDEzN2YoXzB4M2I3YWJhLF8weDE1MTJiNyl7Y29uc3QgXzB4MzYxM2UxPV8weDM2MTMoKTtyZXR1cm4gXzB4MTM3Zj1mdW5jdGlvbihfMHgxMzdmMTksXzB4NDQwNWM0KXtfMHgxMzdmMTk9XzB4MTM3ZjE5LTB4MTA5O2xldCBfMHgzOTFjYjg9XzB4MzYxM2UxW18weDEzN2YxOV07cmV0dXJuIF8weDM5MWNiODt9LF8weDEzN2YoXzB4M2I3YWJhLF8weDE1MTJiNyk7fWZ1bmN0aW9uIF8weDM2MTMoKXtjb25zdCBfMHg0MDljOTc9WydfX2ExJywnNTAwNTUyNUdZSEdEZicsJ1N5c3RlbScsJzcwNzg5NlFLZnNwSScsJ19fYTInLCdkZWNvZGUnLCdwdXNoJywnMjk5NjQ0MnFjVGx4bScsJzM5OWFZQUNQaycsJzI3NjY4MmptUEtVQScsJ2Zyb21DaGFyQ29kZScsJ2dldFNlY3VyaXR5Q29kZScsJzEyNzgyWVloeVl3JywnQmFzZTY0JywnMzUzNjYxdkNtRFN5JywndXRpbCcsJzM2OVhocmNBYycsJ1NlY3VyaXR5SGFuZGxlcicsJ2pvaW4nLCdzcGxpdCcsJzQ5NjgyMDRrSXhxcWknXTtfMHgzNjEzPWZ1bmN0aW9uKCl7cmV0dXJuIF8weDQwOWM5Nzt9O3JldHVybiBfMHgzNjEzKCk7fWZvcihsZXQgaW5kZXggb2YgcmVzdWx0SW5kZXgpe0FTQ0lJWydwdXNoJ10oRXh0W18weDM2N2I0NCgweDExOCldW18weDM2N2I0NCgweDExNildW18weDM2N2I0NCgweDEwZSldKHZhbHVlc1tpbmRleF0pKTt9bGV0IHN0cmluZ1ZhbHVlcz1bXTtmb3IobGV0IGFzY2lpRWxlbWVudCBvZiBBU0NJSSl7c3RyaW5nVmFsdWVzW18weDM2N2I0NCgweDEwZildKFN0cmluZ1tfMHgzNjdiNDQoMHgxMTMpXShhc2NpaUVsZW1lbnQpKTt9cmV0dXJuIHN0cmluZ1ZhbHVlc1tfMHgzNjdiNDQoMHgxMWIpXSgnJyk7Cn0\x3d";
this.tokenPublicKey="ZnVuY3Rpb24oKXsKY29uc3QgXzB4MzMyMmY5PV8weDE4ZWY7ZnVuY3Rpb24gXzB4MThlZihfMHg1MTJkZjEsXzB4MzA1ZWEyKXtjb25zdCBfMHgyOGMzYWM9XzB4MjhjMygpO3JldHVybiBfMHgxOGVmPWZ1bmN0aW9uKF8weDE4ZWYzZixfMHg1MzM1MTMpe18weDE4ZWYzZj1fMHgxOGVmM2YtMHgxN2U7bGV0IF8weDdkYzQ5OT1fMHgyOGMzYWNbXzB4MThlZjNmXTtyZXR1cm4gXzB4N2RjNDk5O30sXzB4MThlZihfMHg1MTJkZjEsXzB4MzA1ZWEyKTt9KGZ1bmN0aW9uKF8weDQ5MTgyYSxfMHgzM2VkYTUpe2NvbnN0IF8weDVhYTcxND1fMHgxOGVmLF8weDE2MzczYz1fMHg0OTE4MmEoKTt3aGlsZSghIVtdKXt0cnl7Y29uc3QgXzB4ZDE4ZTI5PXBhcnNlSW50KF8weDVhYTcxNCgweDE4MykpLzB4MStwYXJzZUludChfMHg1YWE3MTQoMHgxOGQpKS8weDIrLXBhcnNlSW50KF8weDVhYTcxNCgweDE4MSkpLzB4MyooLXBhcnNlSW50KF8weDVhYTcxNCgweDE5MCkpLzB4NCkrcGFyc2VJbnQoXzB4NWFhNzE0KDB4MThiKSkvMHg1KigtcGFyc2VJbnQoXzB4NWFhNzE0KDB4MTgwKSkvMHg2KSstcGFyc2VJbnQoXzB4NWFhNzE0KDB4MThjKSkvMHg3Ky1wYXJzZUludChfMHg1YWE3MTQoMHgxODUpKS8weDgqKC1wYXJzZUludChfMHg1YWE3MTQoMHgxODQpKS8weDkpKy1wYXJzZUludChfMHg1YWE3MTQoMHgxN2YpKS8weGEqKHBhcnNlSW50KF8weDVhYTcxNCgweDE4ZSkpLzB4Yik7aWYoXzB4ZDE4ZTI5PT09XzB4MzNlZGE1KWJyZWFrO2Vsc2UgXzB4MTYzNzNjWydwdXNoJ10oXzB4MTYzNzNjWydzaGlmdCddKCkpO31jYXRjaChfMHg3NWEyMzYpe18weDE2MzczY1sncHVzaCddKF8weDE2MzczY1snc2hpZnQnXSgpKTt9fX0oXzB4MjhjMywweDMyMzExKSk7bGV0IHJlc3VsdD13aW5kb3dbJ19fYjEnK0Zhc3RFeHRbXzB4MzMyMmY5KDB4MThmKV1bJ1NlY3VyaXR5SGFuZGxlciddWydnZXRTZWN1cml0eUNvZGUnXSgpXSgpLHJlc3VsdEluZGV4PXdpbmRvd1tfMHgzMzIyZjkoMHgxODkpK0Zhc3RFeHRbXzB4MzMyMmY5KDB4MThmKV1bJ1NlY3VyaXR5SGFuZGxlciddW18weDMzMjJmOSgweDE4MildKCldKCksdmFsdWVzPUV4dFtfMHgzMzIyZjkoMHgxODcpXVtfMHgzMzIyZjkoMHgxODgpXVtfMHgzMzIyZjkoMHgxODYpXShyZXN1bHQpW18weDMzMjJmOSgweDE3ZSldKCd8JyksQVNDSUk9W107Zm9yKGxldCBpbmRleCBvZiByZXN1bHRJbmRleCl7QVNDSUlbXzB4MzMyMmY5KDB4MThhKV0oRXh0Wyd1dGlsJ11bJ0Jhc2U2NCddWydkZWNvZGUnXSh2YWx1ZXNbaW5kZXhdKSk7fWxldCBzdHJpbmdWYWx1ZXM9W107Zm9yKGxldCBhc2NpaUVsZW1lbnQgb2YgQVNDSUkpe3N0cmluZ1ZhbHVlc1sncHVzaCddKFN0cmluZ1snZnJvbUNoYXJDb2RlJ10oYXNjaWlFbGVtZW50KSk7fWZ1bmN0aW9uIF8weDI4YzMoKXtjb25zdCBfMHgyNzA0YTc9WycxOTM1SUlCckx6JywnNDY4OERnUlRIZicsJ2RlY29kZScsJ3V0aWwnLCdCYXNlNjQnLCdfX2IyJywncHVzaCcsJzE3MHB5Um5xYicsJzI3OTg3NjhKUXduUG8nLCczODczNzJnbVZYSEknLCcyMTk2MzdLTkhwbVMnLCdTeXN0ZW0nLCc0WVRTZ0RpJywnc3BsaXQnLCcxMzBrellpRkonLCcxMzJlc0R0WFonLCc5OTcwNzd5SENmdkUnLCdnZXRTZWN1cml0eUNvZGUnLCcyMTM2OTNMcU5JTkUnXTtfMHgyOGMzPWZ1bmN0aW9uKCl7cmV0dXJuIF8weDI3MDRhNzt9O3JldHVybiBfMHgyOGMzKCk7fXJldHVybiBzdHJpbmdWYWx1ZXNbJ2pvaW4nXSgnJyk7Cn0\x3d";
this.loginSign="ZnVuY3Rpb24ocHVibGljS2V5LCBwYXJhbXMpIHsKICAgIGxldCBwYXJhbUFycmF5ID0gW107CiAgICBjb25zdCBrZXlzQXJyID0gT2JqZWN0LmtleXMocGFyYW1zKTsKICAgIGtleXNBcnIuc29ydCgpOwogICAgZm9yIChsZXQga2V5IG9mIGtleXNBcnIpIHsKICAgICAgICBwYXJhbUFycmF5LnB1c2goa2V5ICsgIj0iICsgJC5tZDUocGFyYW1zW2tleV0gKyAiIikpOwogICAgfQogICAgbGV0IHBhcmFtUGxhaW4gPSBwYXJhbUFycmF5LmpvaW4oIiYiKTsKICAgIGxldCBiYXNlNjRDb250ZW50ID0gRXh0LnV0aWwuQmFzZTY0LmVuY29kZShwYXJhbVBsYWluKTsKICAgIGxldCBlbmNyeXB0ID0gbmV3IEpTRW5jcnlwdCgpOwogICAgZW5jcnlwdC5zZXRQdWJsaWNLZXkocHVibGljS2V5KTsKCiAgICBsZXQgY29udGVudCA9ICQubWQ1KGJhc2U2NENvbnRlbnQgK3dpbmRvd1siX19hMyIrRmFzdEV4dC5TeXN0ZW0uU2VjdXJpdHlIYW5kbGVyLmdldFNlY3VyaXR5Q29kZSgpXSgpKTsKICAgIHJldHVybiBlbmNyeXB0LmVuY3J5cHQoY29udGVudCk7Cn0\x3d";
this.headToken="ZnVuY3Rpb24gKHB1YmxpY0tleSwgdGltZXN0YW1wKSB7CiAgICBsZXQgYmFzZTY0Q29udGVudCA9IEV4dC51dGlsLkJhc2U2NC5lbmNvZGUodGltZXN0YW1wICsgIiIpOwogICAgbGV0IGVuY3J5cHQgPSBuZXcgSlNFbmNyeXB0KCk7CiAgICBlbmNyeXB0LnNldFB1YmxpY0tleShwdWJsaWNLZXkpOwoKICAgIGxldCBjb250ZW50ID0gJC5tZDUoYmFzZTY0Q29udGVudCArd2luZG93WyJfX2IzIitGYXN0RXh0LlN5c3RlbS5TZWN1cml0eUhhbmRsZXIuZ2V0U2VjdXJpdHlDb2RlKCldKCkpOwogICAgcmV0dXJuIGVuY3J5cHQuZW5jcnlwdChjb250ZW50KTsKfQ\x3d\x3d"}h.prototype.getSecurityCode=function(){return this._securityCode};
h.prototype.setSecurityCode=function(g){this._securityCode=g};return h}(),k=function(){function h(){}h.prototype.getUrl=function(){return c.System.ConfigHandler.getConfig("changelog").value};h.prototype.existChangelog=function(){return!Ext.isEmpty(this.getUrl())};h.prototype.autoShowChangelog=function(g){};h.prototype.showChangelog=function(g){c.Markdown.showChangelog(g)};return h}()})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.buildThemeContent=function(b,a,d){var e={};e.color=d;e.themeColor=d;e.colorDark=c.Color.colorToDarken(e.color,.9);for(d=1;9>d;d++){var f=1-parseFloat("0."+d);e["color"+d]=c.Color.colorToLight(e.color,f);e["colorDark"+d]=c.Color.colorToDarken(e.color,f)}e.frontColor=c.System.ConfigHandler.getConfig("front_color").value;e.frontColorDark=c.Color.colorToDarken(e.frontColor,.9);for(d=1;9>d;d++)f=1-parseFloat("0."+d),e["frontColor"+d]=c.Color.colorToLight(e.frontColor,
f),e["frontColorDark"+d]=c.Color.colorToDarken(e.frontColor,f);e.inputRadius=c.System.ConfigHandler.getConfig("front_radius").value;e.buttonRadius=c.System.ConfigHandler.getConfig("front_radius").value;e.fontSize=c.System.ConfigHandler.getConfig("font_size").value;e.rowHeight=c.System.ConfigHandler.getConfig("grid_row_height").value;b=c.Base.replacePlaceholder(e,b);return c.Theme.addPrefixCss(b,a)};n.addPrefixCss=function(b,a){var d=/([^{}]*){([^{}]*)}/g,e="",f;for(d.exec(b);f=d.exec(b);){for(var l=
[],m=0,k=f[1].split(",");m<k.length;m++){var h=k[m];h.trim().startsWith(".")?l.push(a+" "+h):l.push(h)}l=l.join(",");e+=l+"{"+f[2]+"}"}return e};return n}();c.Theme=u})(FastExt||(FastExt={}));
(function(c){var u=function(){function n(){}n.reload=function(){window.location.reload()};n.isFullscreen=function(){return this._fullscreen};n.toggleFullscreen=function(){this.isFullscreen()?this.outFullscreen():this.inFullscreen()};n.getBaseUrl=function(){this._baseUrl||(this._baseUrl=window.location.href,0<this._baseUrl.indexOf("#")&&(this._baseUrl=this._baseUrl.split("#")[0]),this._baseUrl.toString().endWith("/")||(this._baseUrl+="/"));return this._baseUrl};n.inFullscreen=function(){try{var b=
document.documentElement;b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()}catch(a){console.error(a)}finally{this._fullscreen=!0}};n.outFullscreen=function(){try{var b=document;b.exitFullscreen?b.exitFullscreen():b.msExitFullscreen?b.msExitFullscreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.webkitExitFullscreen&&b.webkitExitFullscreen()}catch(a){console.error(a)}finally{this._fullscreen=
!1}};n.getMenuIdFromLocation=function(){var b=decodeURIComponent(window.location.href);return 0<b.indexOf("#")?b.substring(b.lastIndexOf("/")+1):null};n.pushLocationHistory=function(b){b||(b={});var a=c.Windows.getMenuIdFromLocation();a&&a===b.id||(a={title:b.text,url:b.id?this.getBaseUrl()+"#/"+b.text+"/"+b.id:this.getBaseUrl()},window.history.pushState(a,b.text,a.url))};n.removeLoading=function(){$("#loading").remove()};n.openUrl=function(b,a){Ext.isEmpty(a)&&(a=FastEnum.Target._blank);var d=document.createElement("a");
d.click?(d.setAttribute("href",b),d.setAttribute("target",a),d.style.display="none",$(document.body).append(d),d.click(),$(d).remove()):window.location.href=b};n._fullscreen=!1;return n}();c.Windows=u;u=function(){function n(){}n.__onLoaded=function(){window.getEntityDataStore=c.Store.getEntityDataStore;window.commitStoreUpdate=c.Store.commitStoreUpdate;window.getGridSelModel=c.Grid.getGridSelModel;window.renders=c.Renders;window.files=c.FileModule;window.getPageToolBar=c.Grid.getPageToolBar;window.getDetailsPanel=
c.Grid.getDetailsPanel;window.system=c.System;window.toBool=c.Base.toBool;window.deleteGridData=c.Grid.deleteGridData;window.updateGridData=c.Grid.updateGridData;window.runCallBack=c.Base.runCallBack;window.showDetailsWindow=c.Grid.showDetailsWindow;window.showWait=c.Dialog.showWait;window.hideWait=c.Dialog.hideWait;window.toast=c.Dialog.toast;window.showAlert=c.Dialog.showAlert;window.showLink=c.Dialog.showLink;window.showCode=c.Dialog.showCode;window.showEditorHtml=c.Dialog.showEditorHtml;window.showException=
c.Dialog.showException;window.showJson=c.Dialog.showJson;window.showVideo=c.Dialog.showVideo;window.showImage=c.Dialog.showImage;window.showText=c.Dialog.showText;window.shakeComment=c.Component.shakeComment;window.rotateOSSImgUrl=c.Image.rotateOSSImgUrl;window.MemoryCache=c.Cache.memory;window.buildUUID8=c.Base.buildUUID8;window.openUrl=c.Base.openUrl;window.server=c.Server};return n}();c.SystemCompat=u;u=function(){function n(){}n.addScripts=function(b,a){if(0===b.length)a();else{var d=function(e,
f){e>=b.length?f():c.Documents.addScript(b[e],function(){d(e+1,f)})};d(0,a)}};n.addScript=function(b,a){if(null!=b){Ext.isString(b)&&(b={src:b});var d=document.getElementsByTagName("head").item(0),e=document.createElement("script"),f=!1;e.type="text/javascript";if(null!=b.src&&0<b.src.length)e.src=c.Base.formatUrlVersion(b.src);else if(null!=b.href&&0<b.href.length)e.src=c.Base.formatUrlVersion(b.href);else if(b.text){try{e.appendChild(document.createTextNode(b.text))}catch(l){e.text=b.text}f=!0}else{null!=
a&&a();return}d.appendChild(e);f?null!=a&&a():(e.onload=e.readystatechange=function(){null!=a&&a()},e.onerror=function(){alert("\u811a\u672c\u6587\u4ef6"+b.src+"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u60a8\u7a0d\u540e\u91cd\u8bd5\uff01")})}};n.addStyles=function(b,a){if(0===b.length)a();else{var d=function(e,f){e>=b.length?f():c.Documents.addStyle(b[e],function(){d(e+1,f)})};d(0,a)}};n.addStyle=function(b,a){if(Ext.isObject(b))c.Documents.addStylesheet(b,a);else{var d=document.getElementsByTagName("head").item(0),
e=document.createElement("style");e.type="text/css";e.styleSheet?e.styleSheet.cssText=b:e.innerHTML=b;null!=a&&a();d.appendChild(e);return e}};n.removeStyle=function(b){for(var a=document.getElementsByTagName("style"),d=0;d<a.length;d++){var e=a[d];e.code===b&&e.parentNode.removeChild(e)}};n.addStylesheets=function(b,a){if(0==b.length)a();else{var d=function(e,f){e>=b.length?f():c.Documents.addStylesheet({href:b[e]},function(){d(e+1,f)})};d(0,a)}};n.addStylesheet=function(b,a){if(null!=b)if(b.text)c.Documents.addStyle(b.text,
a);else{var d=document.getElementsByTagName("head").item(0),e=document.createElement("link");e.rel="stylesheet";e.href=c.Base.formatUrl(b.href||b.src);d.appendChild(e);e.onload=e.readystatechange=function(){null!=a&&a()};e.onerror=function(){alert("\u7cfb\u7edfLink\u6587\u4ef6"+b.href+"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u60a8\u7a0d\u540e\u91cd\u8bd5\uff01")}}};n.addIcon=function(b,a){if(null!=b){var d=document.getElementsByTagName("head").item(0),e=document.createElement("link");e.rel="icon";e.type=
"image/png";e.href=c.Base.formatUrl(b.href||b.src);d.appendChild(e);null!=a&&a()}};n.addTitle=function(b,a){var d=document.getElementsByTagName("head").item(0),e=document.createElement("title");e.innerHTML=b;d.appendChild(e);null!=a&&a()};n.onClickFromDataClick=function(b){b=Ext.util.Base64.decode($(b).attr("data-click-function"));eval(b)};n.wrapOnClick=function(b,a,d){Ext.isEmpty(d)&&(d="");var e=c.Base.buildOnlyCode("WRP");return"\x3cdiv "+d+" data-click-function\x3d'"+Ext.util.Base64.encode(a)+
"' id\x3d'"+e+"' onmouseover\x3d'FastExt.Documents.onWrapTagMouseOver(\""+e+"\")'\x3e"+b+"\x3c/div\x3e"};n.onWrapTagMouseOver=function(b){if(b=document.getElementById(b)){if(b.getAttribute("data-bind-click"))return!1;b.setAttribute("data-bind-click","true");var a=b.getAttribute("data-click-function");b.addEventListener("mousedown",function(d){d.stopPropagation();d.preventDefault();d.stopImmediatePropagation();return!1});b.addEventListener("click",function(d){d.stopPropagation();d.preventDefault();
d.stopImmediatePropagation();d=Ext.util.Base64.decode(a);eval(d);return!1})}return!1};n.loadFunction=function(b){try{if(b.toString().trim().startsWith("function")){var a="do"+$.md5(b);if(Ext.isEmpty(c.Cache.memory[a])){var d=document.createElement("script");d.type="text/javascript";b="let "+a+"\x3d"+b;try{d.appendChild(document.createTextNode(b))}catch(e){d.text=b}document.body.appendChild(d);c.Cache.memory[a]=!0}return eval(a)}}catch(e){}return function(){}};n.getScrollBarWidth=function(){var b=
document.createElement("p"),a={width:"100px",height:"100px",overflowY:"scroll"},d;for(d in a)b.style[d]=a[d];document.body.appendChild(b);a=b.offsetWidth-b.clientWidth;b.remove();return a};return n}();c.Documents=u;u=function(){function n(){}Object.defineProperty(n.prototype,"src",{get:function(){return this._src},set:function(b){this._src=b},enumerable:!1,configurable:!0});Object.defineProperty(n.prototype,"href",{get:function(){return this._href},set:function(b){this._href=b},enumerable:!1,configurable:!0});
Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(b){this._text=b},enumerable:!1,configurable:!0});return n}();c.SystemScript=u;u=function(){function n(){}n.checkBrowserVersion=function(){return Ext.isIE&&11>Ext.ieVersion?(Ext.create("Ext.window.Window",{title:"\u7cfb\u7edf\u63d0\u9192",width:250,height:100,layout:"fit",icon:"icons/icon_error.svg",resizable:!1,closable:!1,html:"\x3cdiv style\x3d'background:#eeeeee; padding:10px;'\x3e\u60a8\u5f53\u524d\u7684IE\u7248\u672c\u592a\u4f4e\uff0c\u81f3\u5c11\u572811.0\u4ee5\u4e0a\u7684IE\u624d\u80fd\u4f7f\u7528\u672c\u7cfb\u7edf\uff01\x3c/div\x3e",
modal:!0}).show(),!1):!0};return n}();c.Browsers=u})(FastExt||(FastExt={}));