Ext.define("Ext.ux.dd.BoxContainerDD",{extend:"Ext.dd.DD",alignElWithMouse:function(b,d,a){d=this.getTargetCoord(d,a);a=d.x;var e=d.y,c=b.dom?b:Ext.fly(b,"_dd");if(this.deltaSetXY)this.setLocalXY(c,Math.max(0,a+this.deltaSetXY[0]),Math.max(0,e+this.deltaSetXY[1]));else{var f=[Math.max(0,a),Math.max(0,e)];c.setXY(f);f=this.getLocalX(c);c=c.getLocalY();this.deltaSetXY=[f-a,c-e]}this.cachePosition(a,e);this.autoScroll(a,e,b.offsetHeight,b.offsetWidth);return d}});
Ext.define("Ext.ux.BoxReorderer",{extend:"Ext.plugin.Abstract",alias:"plugin.boxreorderer",requires:["Ext.ux.dd.BoxContainerDD"],mixins:{observable:"Ext.util.Observable"},itemSelector:".x-box-item",animate:100,constructor:function(){this.callParent(arguments);this.mixins.observable.constructor.call(this)},init:function(b){var d=b.getLayout();this.container=b;this.names=d._props[d.type].names;this.animatePolicy={};this.animatePolicy[this.names.x]=!0;this.container.on({scope:this,boxready:this.onBoxReady,
beforedestroy:this.onContainerDestroy})},onContainerDestroy:function(){var b=this.dd;b&&(b.unreg(),this.dd=null)},onBoxReady:function(){var b=this.container.getLayout(),d=this.names;b=this.dd=new Ext.ux.dd.BoxContainerDD(b.innerCt,this.container.id+"-reorderer");Ext.apply(b,{animate:this.animate,reorderer:this,container:this.container,getDragCmp:this.getDragCmp,clickValidator:Ext.Function.createInterceptor(b.clickValidator,this.clickValidator,this,!1),onMouseDown:this.onMouseDown,startDrag:this.startDrag,
onDrag:this.onDrag,endDrag:this.endDrag,getNewIndex:this.getNewIndex,doSwap:this.doSwap,findReorderable:this.findReorderable,names:d});b.dim=d.width;b.startAttr=d.beforeX;b.endAttr=d.afterX},getDragCmp:function(b){return this.container.getChildByElement(b.getTarget(this.itemSelector,10))},clickValidator:function(b){b=this.getDragCmp(b);return!(!b||!1===b.reorderable)},onMouseDown:function(b){var d=this.container;if(this.dragCmp=this.getDragCmp(b)){var a=this.dragCmp.getEl();this.startIndex=this.curIndex=
d.items.indexOf(this.dragCmp);a=a.getBox();this.lastPos=a[this.startAttr];d=d.el.getBox();"width"===this.dim?(this.minX=d.left,this.maxX=d.right-a.width,this.minY=this.maxY=a.top,this.deltaX=b.getX()-a.left):(this.minY=d.top,this.maxY=d.bottom-a.height,this.minX=this.maxX=a.left,this.deltaY=b.getY()-a.top);this.constrainY=this.constrainX=!0}},startDrag:function(){var b=this.dragCmp,d;if(b){if((d=this.container.getScrollable())&&d.scrollBy(-1).then(function(){d.scrollBy(1)}),b.setPosition=Ext.emptyFn,
b.animate=!1,this.animate&&(this.container.getLayout().animatePolicy=this.reorderer.animatePolicy),this.dragElId=b.getEl().id,this.reorderer.fireEvent("StartDrag",this,this.container,b,this.curIndex),b.suspendEvents(),b.disabled=!0,b.el.setStyle("zIndex",100),!b.nextSibling()){b=this.container.layout.targetEl;var a=b.dom;var e=a.scrollWidth-1;a=a.scrollHeight-1;this.spacerEl=Ext.dom.Helper.append(b,{tag:"div",style:"width: 1px;height: 1px;position: absolute;left: "+e+"px;top: "+a+'px;"'})}}else this.dragElId=
null},findReorderable:function(b){var d=this.container.items;if(!1===d.getAt(b).reorderable){var a=d.getAt(b);if(b>this.startIndex)for(;a&&!1===a.reorderable;)b++,a=d.getAt(b);else for(;a&&!1===a.reorderable;)b--,a=d.getAt(b)}b=Math.min(Math.max(b,0),d.getCount()-1);return!1===d.getAt(b).reorderable?-1:b},doSwap:function(b){var d=this.container.items,a=this.container;if(!(1<Math.abs(this.curIndex-b))&&(b=this.findReorderable(b),-1!==b&&b!==this.curIndex)){this.reorderer.fireEvent("ChangeIndex",this,
a,this.dragCmp,this.startIndex,b);var e=d.getAt(this.curIndex);var c=d.getAt(b);d.remove(e);var f=Math.min(Math.max(b,0),d.getCount()-1);d.insert(f,e);d.remove(c);d.insert(this.curIndex,c);a.updateLayout({isRoot:!0});this.startIndex=this.curIndex=b}},onDrag:function(b){b=this.getNewIndex(b.getPoint());void 0!==b&&(this.reorderer.fireEvent("Drag",this,this.container,this.dragCmp,this.startIndex,this.curIndex),this.doSwap(b))},endDrag:function(b){var d=this.dragCmp,a=this.container,e=a.getLayout();
b&&b.stopEvent();if(d){delete this.dragElId;delete d.setPosition;d.animate=!0;d.lastBox[this.names.x]=d.getPosition(!0)[this.names.widthIndex];a.updateLayout({isRoot:!0});if(b=Ext.fx.Manager.getFxQueue(d.el.id)[0])b.on({afteranimate:this.reorderer.afterBoxReflow,scope:this});else Ext.asap(this.reorderer.afterBoxReflow,this);this.animate&&delete e.animatePolicy;this.reorderer.fireEvent("drop",this,a,d,this.startIndex,this.curIndex)}},afterBoxReflow:function(){var b=Ext.fly(this.spacerEl),d=this.dragCmp;
d.el.setStyle("zIndex","");d.disabled=!1;d.resumeEvents();b&&(b.remove(),this.spacerEl=null)},getNewIndex:function(b){b=this.getDragEl();var d=Ext.fly(b).getBox(),a=0,e=this.container.items.items,c=e.length,f=this.lastPos;for(this.lastPos=d[this.startAttr];a<c;a++){var h=e[a].getEl();if(h.dom!==b&&h.is(this.reorderer.itemSelector))if(h=h.getBox(),h=h[this.startAttr]+(h[this.dim]>>1),a<this.curIndex){if(d[this.startAttr]<f&&d[this.startAttr]<h-5)return a}else if(a>this.curIndex&&d[this.startAttr]>
f&&d[this.endAttr]>h+5)return a}}});
Ext.define("Ext.ux.colorpick.ColorUtils",function(b){var d=Ext.isIE&&10>Ext.ieVersion;return{singleton:!0,constructor:function(){b=this},backgroundTpl:d?"filter: progid:DXImageTransform.Microsoft.gradient(GradientType\x3d0, startColorstr\x3d'#{alpha}{hex}', endColorstr\x3d'#{alpha}{hex}');":"background: {rgba};",setBackground:d?function(a,e){if(a){var c=Ext.XTemplate.getTpl(b,"backgroundTpl");e={hex:b.rgb2hex(e.r,e.g,e.b),alpha:Math.floor(255*e.a).toString(16)};c=c.apply(e);a.applyStyles(c)}}:function(a,
e){if(a){var c=Ext.XTemplate.getTpl(b,"backgroundTpl");e={rgba:b.getRGBAString(e)};c=c.apply(e);a.applyStyles(c)}},formats:{RGB:function(a){return b.getRGBString(a).toUpperCase()},RGBA:function(a){return b.getRGBAString(a).toUpperCase()},HEX6:function(a){return b.rgb2hex(a.r,a.g,a.b)},HEX8:function(a){var e=b.rgb2hex(a.r,a.g,a.b);a=Math.round(255*a.a).toString(16);2>a.length&&(e+="0");return e+=a.toUpperCase()}},hexRe:/^#?(([0-9a-f]{8})|((?:[0-9a-f]{3}){1,2}))$/i,rgbaAltRe:/^rgba\(\s*([\w#\d]+)\s*,\s*([\d\.]+)\s*\)$/i,
rgbaRe:/^rgba\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,rgbRe:/^rgb\(\s*([\d\.]+)\s*,\s*([\d\.]+)\s*,\s*([\d\.]+)\s*\)$/i,parseColor:function(a,e){if(!a)return null;var c=this.colorMap[a];if(c)a={r:c[0],g:c[1],b:c[2],a:1};else if("transparent"===a)a={r:0,g:0,b:0,a:0};else if(c=this.hexRe.exec(a))switch(c=c[1],c.length){default:return null;case 3:a={r:parseInt(c[0]+c[0],16),g:parseInt(c[1]+c[1],16),b:parseInt(c[2]+c[2],16),a:1};break;case 6:case 8:a={r:parseInt(c.substr(0,
2),16),g:parseInt(c.substr(2,2),16),b:parseInt(c.substr(4,2),16),a:parseInt(c.substr(6,2)||"ff",16)/255}}else if(c=this.rgbaRe.exec(a))a={r:parseFloat(c[1]),g:parseFloat(c[2]),b:parseFloat(c[3]),a:parseFloat(c[4])};else{if(c=this.rgbaAltRe.exec(a))return a=this.parseColor(c[1]),a.a=parseFloat(c[2]),a;if(c=this.rgbRe.exec(a))a={r:parseFloat(c[1]),g:parseFloat(c[2]),b:parseFloat(c[3]),a:1};else return null}e&&(a.a=Ext.util.Format.number(a.a,e));e=this.rgb2hsv(a.r,a.g,a.b);return Ext.apply(a,e)},isValid:function(a){return null!==
b.parseColor(a)},getRGBAString:function(a){return"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"},getRGBString:function(a){return"rgb("+a.r+","+a.g+","+a.b+")"},hsv2rgb:function(a,e,c){a*=360;360===a&&(a=0);var f=c*e,h=a/60,k=f*(1-Math.abs(h%2-1)),g=[0,0,0];switch(Math.floor(h)){case 0:g=[f,k,0];break;case 1:g=[k,f,0];break;case 2:g=[0,f,k];break;case 3:g=[0,k,f];break;case 4:g=[k,0,f];break;case 5:g=[f,0,k];break;default:console.error("unknown color "+a+" "+e+" "+c)}a=c-f;g[0]+=a;g[1]+=a;g[2]+=a;g[0]=Math.round(255*
g[0]);g[1]=Math.round(255*g[1]);g[2]=Math.round(255*g[2]);return{r:g[0],g:g[1],b:g[2]}},rgb2hsv:function(a,e,c){a/=255;e/=255;c/=255;var f=Math.max(a,e,c),h=f-Math.min(a,e,c),k=0,g=0;0!==h&&(f===a?k=(e-c)/h%6:f===e?k=(c-a)/h+2:f===c&&(k=(a-e)/h+4));a=60*k;360===a&&(a=0);0!==h&&(g=h/f);a/=360;0>a&&(a+=1);return{h:a,s:g,v:f}},rgb2hex:function(a,e,c){a=a.toString(16);e=e.toString(16);c=c.toString(16);2>a.length&&(a="0"+a);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return(a+e+c).toUpperCase()},colorMap:{aliceblue:[240,
248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,
11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],
firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,
230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],
mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,
170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,
128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}}},function(b){var d=b.formats,a={};d["#HEX6"]=function(e){return"#"+d.HEX6(e)};d["#HEX8"]=function(e){return"#"+d.HEX8(e)};Ext.Object.each(d,function(e,c){a[e.toLowerCase()]=
function(f){return c(f).toLowerCase()}});Ext.apply(d,a)});